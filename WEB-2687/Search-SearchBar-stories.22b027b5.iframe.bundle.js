"use strict";(self.webpackChunk_shippo_feron=self.webpackChunk_shippo_feron||[]).push([[1667],{"./app/utils/newRelic/newRelic.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>newRelic});var newRelic=new(function(){function NewRelicClient(){this.instance=null}return NewRelicClient.prototype.setUserId=function(userId){var _a;null===(_a=this.instance)||void 0===_a||_a.setUserId(userId)},NewRelicClient.prototype.addPageAction=function(name,attributes){var _a;null===(_a=this.instance)||void 0===_a||_a.addPageAction(name,attributes)},NewRelicClient.prototype.log=function(message,options){var _a;null===(_a=this.instance)||void 0===_a||_a.log(message,options)},NewRelicClient.prototype.noticeError=function(error,customAttributes){var _a;null===(_a=this.instance)||void 0===_a||_a.noticeError(error,customAttributes)},NewRelicClient.prototype.setInstance=function(instance){this.instance=instance,this.instance.setApplicationVersion("WEB-2687-settings-layout:071e7d30bbd597f1de4dbdc16304aa9e36749a7c")},NewRelicClient.prototype.isInitialized=function(){return!!this.instance},NewRelicClient}())},"./app/utils/observability/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>observability});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),index_esm=__webpack_require__("./node_modules/@fullstory/browser/dist/index.esm.js"),newRelic=__webpack_require__("./app/utils/newRelic/newRelic.ts"),observability=new(function(){function ObservabilityClient(){this.pendingEvents={}}return ObservabilityClient.prototype.getEventName=function(name,id){return id?"".concat(name,"_").concat(id):name},ObservabilityClient.prototype.timeoutEvent=function(name,id,timeoutMs){void 0===timeoutMs&&(timeoutMs=6e4),this.clearEvent(name,id);var timeoutEventName="".concat(name,"_TIMEOUT");this.sendPageAction(timeoutEventName,{id,timeout:timeoutMs}),this.sendFullStoryLog(timeoutEventName,{id}),this.sendFullStoryEvent(timeoutEventName,{id,timeout:timeoutMs})},ObservabilityClient.prototype.clearEvent=function(name,id){var pendingEventName=this.getEventName(name,id),event=this.pendingEvents[pendingEventName];event&&(clearTimeout(event.timeoutId),delete this.pendingEvents[pendingEventName])},ObservabilityClient.prototype.sendPageAction=function(name,attributes){try{newRelic.S.addPageAction(name,attributes)}catch(e){}},ObservabilityClient.prototype.sendFullStoryLog=function(name,attributes){try{if(!(0,index_esm.Dp)())return;attributes?(0,index_esm.Rm)("info","[Observability event] ".concat(name," with attributes: ").concat(JSON.stringify(attributes))):(0,index_esm.Rm)("info","[Observability event] ".concat(name))}catch(e){}},ObservabilityClient.prototype.sendFullStoryEvent=function(name,attributes){try{if(!(0,index_esm.Dp)())return;(0,index_esm.f0)(name,attributes||{})}catch(e){}},ObservabilityClient.prototype.singleEvent=function(name,attributes){this.sendPageAction(name,attributes),this.sendFullStoryLog(name,attributes),this.sendFullStoryEvent(name,attributes)},ObservabilityClient.prototype.startEvent=function(name,attributes){var _this=this;this.clearEvent(name,null==attributes?void 0:attributes.id);var timeoutId=window.setTimeout((function(){return _this.timeoutEvent(name,null==attributes?void 0:attributes.id,null==attributes?void 0:attributes.timeoutMs)}),(null==attributes?void 0:attributes.timeoutMs)||6e4),pendingEventName=this.getEventName(name,null==attributes?void 0:attributes.id);this.pendingEvents[pendingEventName]={timeoutId,startTime:Date.now()},this.sendPageAction(name),this.sendFullStoryLog(name,attributes)},ObservabilityClient.prototype.cancelEvent=function(name,attributes){this.clearEvent(name,null==attributes?void 0:attributes.id),this.sendFullStoryLog(name,(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},attributes),{cancelled:!0}))},ObservabilityClient.prototype.successEvent=function(name,attributes){var pendingEventName=this.getEventName(name,null==attributes?void 0:attributes.id),event=this.pendingEvents[pendingEventName];if((null==attributes?void 0:attributes.force)||event){var duration=Date.now()-((null==event?void 0:event.startTime)||0);this.clearEvent(name,null==attributes?void 0:attributes.id);var successEventName="".concat(name,"_SUCCESS");this.sendPageAction(successEventName,(0,tslib_es6.Cl)({duration},attributes)),this.sendFullStoryLog(successEventName,attributes),this.sendFullStoryEvent(successEventName,(0,tslib_es6.Cl)({duration},attributes))}},ObservabilityClient.prototype.errorEvent=function(name,attributes,severity){void 0===severity&&(severity="ERROR");var pendingEventName=this.getEventName(name,null==attributes?void 0:attributes.id),event=this.pendingEvents[pendingEventName];if((null==attributes?void 0:attributes.force)||event){var duration=Date.now()-((null==event?void 0:event.startTime)||0);this.clearEvent(name,null==attributes?void 0:attributes.id);var errorEventName="".concat(name,"_").concat(severity);this.sendPageAction(errorEventName,(0,tslib_es6.Cl)({duration},attributes)),this.sendFullStoryLog(errorEventName,attributes),this.sendFullStoryEvent(errorEventName,(0,tslib_es6.Cl)({duration},attributes))}},ObservabilityClient}())},"./app/utils/translate.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{In:()=>react_i18next__WEBPACK_IMPORTED_MODULE_0__.In,Tl:()=>react_i18next__WEBPACK_IMPORTED_MODULE_0__.Tl,x6:()=>react_i18next__WEBPACK_IMPORTED_MODULE_0__.x6});var react_i18next__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js")},"./app/blackbeard/components/Search/SearchBar.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Regular:()=>Regular,default:()=>SearchBar_stories});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),translate=__webpack_require__("./app/utils/translate.ts"),useMediaQuery=__webpack_require__("./node_modules/@mui/material/useMediaQuery/useMediaQuery.js"),shippoTheme=__webpack_require__("./node_modules/@goshippo/components/esm/styles/shippoTheme.js"),SearchInput=__webpack_require__("./node_modules/@goshippo/components/esm/SearchInput/SearchInput.js"),react=__webpack_require__("./node_modules/react/index.js"),observability=__webpack_require__("./app/utils/observability/index.ts"),segment=__webpack_require__("./app/utils/segment/index.ts"),SearchContext={orders:"orders",shipments:"shipments"},timeout=void 0;const Search_SearchBar=function(_a){var _b,searchBarQuery=_a.searchBarQuery,setSearchBarQuery=_a.setSearchBarQuery,t=_a.t,searchError=_a.searchError,searchContextKey=_a.searchContextKey,_c=(0,tslib_es6.zs)((0,react.useState)(searchBarQuery),2),localQuery=_c[0],setLocalQuery=_c[1],isMobile=(0,useMediaQuery.A)(shippoTheme.A.breakpoints.down("sm")),contextKey=null!==(_b=SearchContext[searchContextKey])&&void 0!==_b?_b:"";(0,react.useEffect)((function(){setLocalQuery(searchBarQuery)}),[searchBarQuery]);var submitSearchImmediately=(0,react.useCallback)((function(value){setSearchBarQuery(value),setLocalQuery(value);var searchEventName="orders"===searchContextKey?"ORDERS_TABLE_SEARCH_APPLIED":"SHIPMENTS_TABLE_SEARCH_APPLIED";observability.O.singleEvent(searchEventName,{term:value})}),[searchContextKey,setSearchBarQuery]),setDebouncedValue=(0,react.useCallback)((function(value){return setLocalQuery(value),clearTimeout(timeout),timeout=setTimeout((function(){submitSearchImmediately(value)}),500),function(){return clearTimeout(timeout)}}),[submitSearchImmediately]),onChange=(0,react.useCallback)((function(event){setDebouncedValue(event.target.value)}),[setDebouncedValue]),handleOnClear=(0,react.useCallback)((function(){submitSearchImmediately("")}),[submitSearchImmediately]),onKeyDown=(0,react.useCallback)((function(event){"Enter"===event.key&&(submitSearchImmediately(localQuery),(0,segment.u4)("Search initiated"))}),[localQuery,submitSearchImmediately]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(SearchInput.A,{placeholder:t("shipments-page:search:searchBar:placeholder",{contextKey}),label:t("shipments-page:search:searchBar:placeholder",{contextKey}),value:localQuery,onChange,onClear:handleOnClear,onKeyDown,size:"medium",error:searchError,sx:{pr:0,width:isMobile?"100%":"15rem"},name:"shipments-search","data-testid":"shipment-search-container"})},SearchBar_stories={title:"Order V2 / Search Bar",component:Search_SearchBar,parameters:{layout:"centered"},argTypes:{setSearchBarQuery:{action:"set-query"}}};var SearchBarWithTranslate=(0,translate.Tl)("shipments-page")(Search_SearchBar),Regular=function(args){return(0,emotion_react_jsx_runtime_browser_esm.Y)(SearchBarWithTranslate,(0,tslib_es6.Cl)({},args))}.bind({});Regular.args={searchBarQuery:"Some query string",searchError:!1},Regular.parameters={...Regular.parameters,docs:{...Regular.parameters?.docs,source:{originalSource:"(args: ComponentProps) => <SearchBarWithTranslate {...args} />",...Regular.parameters?.docs?.source}}}}}]);