"use strict";(self.webpackChunk_shippo_feron=self.webpackChunk_shippo_feron||[]).push([[4390],{"./app/types/APIMessage.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{OR:()=>messageIsVisible,rS:()=>fromJSON});var fromJSON=function(jsonAPIMessage){return{code:jsonAPIMessage.code,kind:"APIMessage",source:jsonAPIMessage.source,text:jsonAPIMessage.text}},hiddenCarrierMessages={DHLExpress:new Set(["Shippo's DHL Express master account doesn't support shipments to inside of the US"]),ShippoCommon:new Set(["Shipment origin or destination state is out of the service area for LSO."]),UPS:new Set(["RatedShipmentAlert: Ship To Address Classification is changed from Commercial to Residential","Shipment origin is out of service area for UPS Master account from CA","RatedShipmentAlert: Your invoice may vary from the displayed reference rates"])},messageIsVisible=function(message){return!function(message){var _a;return!!(null===(_a=hiddenCarrierMessages[message.source])||void 0===_a?void 0:_a.has(message.text))}(message)}},"./app/types/LineItem.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{WG:()=>totalQuantity,X8:()=>getLineItemsTotalWeight,_:()=>getLineItemsTotalValue,_g:()=>lineItemHasWeight,di:()=>sort,eL:()=>payloadToJSON,iD:()=>isLineItemValid,rS:()=>fromJSON,wY:()=>isCustomsReady});var moment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/moment/moment.js"),_constants_countries__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/constants/countries.ts"),_constants_currency__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/constants/currency.ts"),fromJSON=function(jsonLineItem){return{appId:jsonLineItem.app_id,countryOfOrigin:jsonLineItem.country_of_origin?_constants_countries__WEBPACK_IMPORTED_MODULE_1__.Xr[jsonLineItem.country_of_origin.toUpperCase()]:null,currency:jsonLineItem.currency&&Object.values(_constants_currency__WEBPACK_IMPORTED_MODULE_2__.q).find((function(currency){return currency.iso===jsonLineItem.currency.toUpperCase()}))||_constants_currency__WEBPACK_IMPORTED_MODULE_2__.q.USD,hsCode:jsonLineItem.hs_code,id:jsonLineItem.id,isFulfilled:jsonLineItem.is_fulfilled,manufactureCountry:jsonLineItem.manufacture_country,maxDeliveryTime:jsonLineItem.max_delivery_time?moment__WEBPACK_IMPORTED_MODULE_0__(jsonLineItem.max_delivery_time):null,maxShipTime:jsonLineItem.max_ship_time?moment__WEBPACK_IMPORTED_MODULE_0__(jsonLineItem.max_ship_time):null,objectId:jsonLineItem.object_id,parcel:jsonLineItem.parcel,product:jsonLineItem.product,quantity:jsonLineItem.quantity,sku:jsonLineItem.sku,title:jsonLineItem.title,totalAmount:jsonLineItem.total_amount,totalWeight:jsonLineItem.total_weight,unitAmount:jsonLineItem.unit_amount,unitWeight:jsonLineItem.unit_weight,variant:jsonLineItem.variant,variantTitle:jsonLineItem.variant_title,weightUnit:jsonLineItem.weight_unit?jsonLineItem.weight_unit:null}},lineItemHasWeight=function(lineItem){return null!==lineItem.weightUnit&&0!==lineItem.quantity&&!!lineItem.totalWeight&&0!==parseFloat(lineItem.totalWeight)},isLineItemValid=function(lineItem){return[lineItem.quantity,lineItem.title,lineItem.weightUnit,lineItem.unitAmount,lineItem.unitWeight].every(Boolean)},isCustomsReady=function(lineItem){return isLineItemValid(lineItem)&&!!lineItem.countryOfOrigin},payloadToJSON=function(lineItemPayload){return{country_of_origin:lineItemPayload.countryOfOrigin.iso2,currency:lineItemPayload.currency.value,quantity:Number(lineItemPayload.quantity),sku:lineItemPayload.sku,title:lineItemPayload.title,unit_amount:lineItemPayload.unitAmount,unit_weight:lineItemPayload.unitWeight,weight_unit:lineItemPayload.weightUnit.value}},getTotalValue=function(total,lineItem){var parsedValue=parseFloat(lineItem.totalAmount);return isNaN(parsedValue)?total:total+parsedValue},getTotalWeight=function(total,lineItem){var parsedWeight=parseFloat(lineItem.totalWeight);return isNaN(parsedWeight)?total:total+parsedWeight},getLineItemsTotalValue=function(lineItems){return lineItems.reduce(getTotalValue,0)},getLineItemsTotalWeight=function(linteItems){return linteItems.reduce(getTotalWeight,0)},totalQuantity=function(lineItems){return lineItems.reduce((function(tot,li){return tot+li.quantity}),0)},sort=function(lineItems){return lineItems.sort((function(a,b){return a.quantity===b.quantity?a.title.localeCompare(b.title):a.quantity>b.quantity?-1:1}))}},"./app/types/Order.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AJ:()=>isPartiallyFulfilled,AU:()=>getOrderState,CW:()=>getMaxShipTime,Cm:()=>hasPartialFulfillmentRequests,Dd:()=>isManualOrder,FC:()=>isEligibleForSplit,Gy:()=>isFulfilledOutsideShippo,Hl:()=>actionableOrderSelectionIds,J_:()=>getOrderWeight,LE:()=>fromWebOrderToOrderTagsMapping,Mp:()=>hasValidTotalPrice,PF:()=>hasValidShippingInfo,Pt:()=>isFulfilledInShippoOldExperience,Qh:()=>sortOrderTagsByName,Re:()=>OrderStatus,X0:()=>newOrder,YN:()=>calculateValueByQuantity,_g:()=>isPartialFulfillmentAllCompleted,c0:()=>isOrderLineItemEditable,cH:()=>OrderState,cY:()=>OrderValidationStatus,cs:()=>isFulfilledSingleLabel,k4:()=>getMaxDeliveryTime,mm:()=>isCancelled,p2:()=>requiresCustomsDeclaration,rS:()=>fromJSON,sf:()=>isFulfilled,tR:()=>isPaid,vz:()=>orderHasWeight,xf:()=>hasValidLineItems});var OrderStatus,OrderValidationStatus,OrderState,SyncStatus,tslib__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),moment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/moment/moment.js"),_types_Store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/types/Store.ts"),_APIError__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./app/types/APIError.ts"),_Address__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/types/Address.ts"),_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/types/CustomsDeclaration.ts"),_LineItem__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./app/types/LineItem.ts"),_OrderBatchEntry__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./app/types/OrderBatchEntry.ts"),_OrdersBatch__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./app/types/OrdersBatch.ts"),_Parcel__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./app/types/Parcel.ts"),_Rate__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./app/types/Rate.ts"),_Transaction__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./app/types/Transaction.ts");!function(OrderStatus){OrderStatus.AWAITPAY="AWAITPAY",OrderStatus.CANCELLED="CANCELLED",OrderStatus.GENERIC="GENERIC",OrderStatus.INVALID="INVALID",OrderStatus.PAID="PAID",OrderStatus.PARTIALLY_FULFILLED="PARTIALLY_FULFILLED",OrderStatus.REFUNDED="REFUNDED",OrderStatus.SHIPPED="SHIPPED",OrderStatus.UNKNOWN="UNKNOWN",OrderStatus.VALID="VALID"}(OrderStatus||(OrderStatus={})),function(OrderValidationStatus){OrderValidationStatus.INVALID="INVALID",OrderValidationStatus.VALID="VALID"}(OrderValidationStatus||(OrderValidationStatus={})),function(OrderState){OrderState.CANCELLED="CANCELLED",OrderState.FULFILLED_MULTIPLE_LABELS="FULFILLED_MULTIPLE_LABELS",OrderState.FULFILLED_OUTSIDE_SHIPPO="FULFILLED_OUTSIDE_SHIPPO",OrderState.FULFILLED_SINGLE_LABEL="FULFILLED_SINGLE_LABEL",OrderState.NOT_FULFILLED="NOT_FULFILLED",OrderState.PARTIALLY_FULFILLED_MULTIPLE_LABELS="PARTIALLY_FULFILLED_MULTIPLE_LABELS",OrderState.PARTIALLY_FULFILLED_SINGLE_LABEL="PARTIALLY_FULFILLED_SINGLE_LABEL",OrderState.PARTIALLY_FULFILLED_SINGLE_REFUND="PARTIALLY_FULFILLED_SINGLE_REFUND",OrderState.REFUND_PENDING="REFUND_PENDING",OrderState.REFUND_REJECTED="REFUND_REJECTED",OrderState.REFUNDED="REFUNDED"}(OrderState||(OrderState={})),function(SyncStatus){SyncStatus.COMPLETE="COMPLETE",SyncStatus.FAILED="FAILED",SyncStatus.IN_PROGRESS="IN_PROGRESS"}(SyncStatus||(SyncStatus={}));var actionableOrderSelectionIds=function(orderSelection){return Object.entries(orderSelection).reduce((function(obj,_a){var _b=(0,tslib__WEBPACK_IMPORTED_MODULE_10__.zs)(_a,2),orderObjectId=_b[0],batchEntryIds=_b[1];return batchEntryIds.length>0?(0,tslib__WEBPACK_IMPORTED_MODULE_10__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_10__.Cl)({},obj),{batchEntryIds:(0,tslib__WEBPACK_IMPORTED_MODULE_10__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_10__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_10__.zs)(obj.batchEntryIds),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_10__.zs)(batchEntryIds),!1)}):(0,tslib__WEBPACK_IMPORTED_MODULE_10__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_10__.Cl)({},obj),{orderObjectIds:(0,tslib__WEBPACK_IMPORTED_MODULE_10__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_10__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_10__.zs)(obj.orderObjectIds),!1),[orderObjectId],!1)})}),{batchEntryIds:[],orderObjectIds:[]})},fromJSON=function(jsonOrder){return{addressFrom:_Address__WEBPACK_IMPORTED_MODULE_2__.rS(jsonOrder.address_from),addressReturn:_Address__WEBPACK_IMPORTED_MODULE_2__.rS(jsonOrder.address_return),currency:jsonOrder.currency,errors:jsonOrder.errors.map(_APIError__WEBPACK_IMPORTED_MODULE_11__.r),hidden:jsonOrder.hidden,items:jsonOrder.items,lineItems:_LineItem__WEBPACK_IMPORTED_MODULE_4__.di(jsonOrder.line_items.filter((function(lineItem){return lineItem.quantity>0})).map(_LineItem__WEBPACK_IMPORTED_MODULE_4__.rS)),notes:jsonOrder.notes,objectId:jsonOrder.object_id,objectOwner:jsonOrder.object_owner,orderNumber:jsonOrder.order_number,orderStatus:jsonOrder.order_status,parcel:jsonOrder.parcel?_Parcel__WEBPACK_IMPORTED_MODULE_7__.rS(jsonOrder.parcel):null,partialFulfillmentRequests:jsonOrder.partial_fulfillment_requests?jsonOrder.partial_fulfillment_requests.map((function(x){return(0,tslib__WEBPACK_IMPORTED_MODULE_10__.Cl)({},(0,_OrderBatchEntry__WEBPACK_IMPORTED_MODULE_5__.kc)(x))})):[],placedAt:moment__WEBPACK_IMPORTED_MODULE_0__(jsonOrder.placed_at||jsonOrder.created_at),rates:jsonOrder.rates?jsonOrder.rates.map(_Rate__WEBPACK_IMPORTED_MODULE_8__.Gw):[],shippingCost:jsonOrder.shipping_cost,shippingCostCurrency:jsonOrder.shipping_cost_currency,shippingMethod:jsonOrder.shipping_method,shopApp:jsonOrder.shop_app,subtotalPrice:jsonOrder.subtotal_price,tags:void 0,toAddress:_Address__WEBPACK_IMPORTED_MODULE_2__.rS(jsonOrder.to_address),totalPartialFulfillments:jsonOrder.partial_fulfillment_requests?jsonOrder.partial_fulfillment_requests.length:0,totalPrice:jsonOrder.total_price,totalTax:jsonOrder.total_tax,transactions:jsonOrder.transactions.map(_Transaction__WEBPACK_IMPORTED_MODULE_9__.rS),validationStatus:jsonOrder.validation_status,weight:jsonOrder.weight,weightUnit:jsonOrder.weight_unit}},getOrderWeight=function(order){return order.weight&&parseFloat(order.weight)||null},orderHasWeight=function(order){var orderWeight=order.weight&&parseFloat(order.weight);return orderWeight&&!isNaN(orderWeight)&&orderWeight>0&&!!order.weightUnit||order.lineItems.length>0&&order.lineItems.every(_LineItem__WEBPACK_IMPORTED_MODULE_4__._g)},isPaid=function(order){return![OrderStatus.AWAITPAY,OrderStatus.CANCELLED,OrderStatus.GENERIC,OrderStatus.REFUNDED].includes(order.orderStatus)},isCancelled=function(order){return order.orderStatus===OrderStatus.CANCELLED},isFulfilled=function(order){return order.orderStatus===OrderStatus.SHIPPED},isFulfilledSingleLabel=function(order){return getOrderState(order)===OrderState.FULFILLED_SINGLE_LABEL},isPartiallyFulfilled=function(order){return order.orderStatus===OrderStatus.PARTIALLY_FULFILLED},isRefundPending=function(order){var successfulLiveTransactions=order.transactions.filter((function(txn){return!txn.test&&txn.status!==_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.ERROR}));return 0!==successfulLiveTransactions.length&&successfulLiveTransactions.every((function(txn){return txn.status===_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.REFUNDPENDING}))},isRefundRejected=function(order){var successfulLiveTransactions=order.transactions.filter((function(txn){return!txn.test&&txn.status!==_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.ERROR}));return 0!==successfulLiveTransactions.length&&successfulLiveTransactions.every((function(txn){return txn.status===_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.REFUNDREJECTED}))},isRefunded=function(order){var successfulLiveTransactions=order.transactions.filter((function(txn){return!txn.test&&txn.status!==_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.ERROR}));return 0!==successfulLiveTransactions.length&&successfulLiveTransactions.every((function(txn){return txn.status===_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.REFUNDED}))},getOrderState=function(order){var outboundTransactions=order.transactions.filter((function(_a){return!_a.isReturn}));return isPartiallyFulfilled(order)?0===outboundTransactions.length?OrderState.FULFILLED_OUTSIDE_SHIPPO:1===outboundTransactions.length?isRefunded(order)||isRefundRejected(order)||isRefundPending(order)?OrderState.PARTIALLY_FULFILLED_SINGLE_REFUND:OrderState.PARTIALLY_FULFILLED_SINGLE_LABEL:OrderState.PARTIALLY_FULFILLED_MULTIPLE_LABELS:isFulfilled(order)||isPartiallyFulfilled(order)?0===outboundTransactions.length?OrderState.FULFILLED_OUTSIDE_SHIPPO:isRefunded(order)?OrderState.REFUNDED:isRefundRejected(order)?OrderState.REFUND_REJECTED:isRefundPending(order)?OrderState.REFUND_PENDING:1===outboundTransactions.filter((function(transaction){return transaction.status===_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.SUCCESS})).length?OrderState.FULFILLED_SINGLE_LABEL:OrderState.FULFILLED_MULTIPLE_LABELS:isCancelled(order)?OrderState.CANCELLED:function(order){return order.orderStatus===OrderStatus.REFUNDED}(order)?OrderState.REFUNDED:OrderState.NOT_FULFILLED},isFulfilledOutsideShippo=function(order){return getOrderState(order)===OrderState.FULFILLED_OUTSIDE_SHIPPO},isFulfilledInShippoOldExperience=function(order){return isFulfilled(order)&&!order.parcel},getMaxShipTime=function(order){var shipTimes=order.lineItems.map((function(i){return i.maxShipTime})).filter((function(v){return v}));return shipTimes&&shipTimes.length>0?moment__WEBPACK_IMPORTED_MODULE_0__(Math.min.apply(null,shipTimes)):null},getMaxDeliveryTime=function(order){var deliveryTimes=order.lineItems.map((function(i){return i.maxDeliveryTime})).filter((function(v){return v}));return deliveryTimes&&deliveryTimes.length>0?moment__WEBPACK_IMPORTED_MODULE_0__(Math.min.apply(null,deliveryTimes)):null},hasValidShippingInfo=function(order){var parsedShippingCost=parseFloat(order.shippingCost);return!!order.shippingCost&&"NONE"!==order.shippingCost.toUpperCase()&&(parsedShippingCost>0||0===parsedShippingCost&&!!order.shippingMethod)},hasValidTotalPrice=function(order){return!!order.totalPrice&&"NONE"!==order.totalPrice.toUpperCase()&&parseFloat(order.totalPrice)>0},manualOrderShopTypes={CSV_Import:!0,Shippo:!0},isManualOrder=function(order){return!!manualOrderShopTypes[order.shopApp]},requiresCustomsDeclaration=function(order,defaultFromAddress){var addressFrom=order&&order.addressFrom||defaultFromAddress,addressTo=order&&order.toAddress;return!(!addressTo||!addressFrom)&&(0,_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_3__.p2)(addressTo,addressFrom)},hasValidLineItems=function(order){var lineItems=order.lineItems;return lineItems.length>0&&lineItems.every(_LineItem__WEBPACK_IMPORTED_MODULE_4__.iD)},isEligibleForSplit=function(_a){var lineItems=_a.lineItems,orderStatus=_a.orderStatus,shopApp=_a.shopApp,isStoreEligibleForSplit=_types_Store__WEBPACK_IMPORTED_MODULE_1__.tJ.has(shopApp)||"Magento_2"===shopApp;return orderStatus!==OrderStatus.CANCELLED&&(!!isStoreEligibleForSplit&&lineItems.reduce((function(currentTotal,item){return currentTotal+ +item.quantity}),0)>1)},hasPartialFulfillmentRequests=function(_a){var partialFulfillmentRequests=_a.partialFulfillmentRequests;return partialFulfillmentRequests&&!!partialFulfillmentRequests.length},isPartialFulfillmentAllCompleted=function(_a){var partialFulfillmentRequests=_a.partialFulfillmentRequests;return partialFulfillmentRequests&&partialFulfillmentRequests.every((function(batchEntry){return batchEntry.objectStatus===_OrdersBatch__WEBPACK_IMPORTED_MODULE_6__.DO.COMPLETE_TRANSACTION}))},isOrderLineItemEditable=function(order){return(0,_types_Store__WEBPACK_IMPORTED_MODULE_1__.VV)(order.shopApp)&&!isFulfilled(order)},newOrder=function(fromAddress,toAddress){return{address_from:fromAddress||null,created_at:null,currency:null,notes:null,order_number:null,order_status:null,shipping_cost:null,shipping_cost_currency:null,shipping_method:null,shop_app:"Shippo",subtotal_price:null,to_address:toAddress||null,total_price:null,total_tax:null,total_weight_unit:null,uses_line_items:!1,validation_status:null,weight:null,weight_unit:null}},calculateValueByQuantity=function(value,quantity){return(Number(value)*quantity).toString()},sortOrderTagsByName=function(tags){if(0===tags.length)return[];var collator=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return tags.sort((function(previousTag,nextTag){return collator.compare(previousTag.name,nextTag.name)}))},fromWebOrderToOrderTagsMapping=function(webOrders){return webOrders?webOrders.reduce((function(orderTags,_a){var _b,object_id=_a.object_id,tags=_a.tags;return(0,tslib__WEBPACK_IMPORTED_MODULE_10__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_10__.Cl)({},orderTags),((_b={})[object_id]=tags||[],_b))}),{}):{}}},"./app/types/Rate.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$O:()=>getLabelWithOneRate,CC:()=>isUntrackableRateServiceLevel,Gw:()=>fromJSONBaseRate,J5:()=>getRateListTotalTextNoInsurance,L4:()=>createRateList,Nf:()=>transactionSearchRatefromJSON,P2:()=>getRatesWithAttributeInDisplayOrder,RH:()=>getRatesForServiceLevelToken,jf:()=>RateAttribute,jt:()=>getRatesByAttribute,rS:()=>fromJSON,sI:()=>getRateListTotalText,yF:()=>attributePopularRateV2});var RateAttribute,tslib__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),i18next__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/i18next/dist/es/index.js"),lodash_es__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/lodash-es/uniqBy.js"),lodash_es__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/lodash-es/orderBy.js"),lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/lodash-es/differenceBy.js"),lodash_es_intersectionBy__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/lodash-es/intersectionBy.js"),moment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/moment/moment.js"),_constants_carriers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/constants/carriers.ts"),_constants_currency__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/constants/currency.ts"),_types_ServiceLevel__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./app/types/ServiceLevel.ts");!function(RateAttribute){RateAttribute.BEST_OPTION="BEST_OPTION",RateAttribute.BESTVALUE="BESTVALUE",RateAttribute.CHEAPEST="CHEAPEST",RateAttribute.FASTEST="FASTEST",RateAttribute.POPULAR="POPULAR"}(RateAttribute||(RateAttribute={}));var rateDisplayAttribute_BEST_OPTION="BEST_OPTION",rateDisplayAttribute_CHEAPEST="CHEAPEST",rateDisplayAttribute_CHEAPEST_AND_FASTEST="CHEAPEST_AND_FASTEST",rateDisplayAttribute_FASTEST="FASTEST",rateDisplayAttribute_MORE="MORE",rateDisplayAttribute_PAY_ON_USE="PAY_ON_USE",rateDisplayAttribute_POPULAR="POPULAR",fromJSONBaseRate=function(jsonBaseRate){return{amount:jsonBaseRate.amount,currency:jsonBaseRate.currency,durationTerms:jsonBaseRate.duration_terms,objectId:jsonBaseRate.object_id,objectPurpose:jsonBaseRate.object_purpose,objectState:jsonBaseRate.object_state,provider:jsonBaseRate.provider,providerImage75:jsonBaseRate.provider_image_75,providerImage200:jsonBaseRate.provider_image_200,shipment:jsonBaseRate.shipment}},fromJSON=function(jsonRate){var jsonRateServiceLevel=jsonRate.servicelevel;return jsonRate.servicelevel||(jsonRateServiceLevel={name:jsonRate.servicelevel_name||"",terms:jsonRate.servicelevel_terms||"",token:jsonRate.servicelevel_token||""}),{amount:jsonRate.amount,amountLocal:jsonRate.amount_local,arrivesBy:jsonRate.arrives_by,attributes:jsonRate.attributes.map((function(attr){return attr})),carrierAccount:jsonRate.carrier_account,currency:jsonRate.currency,currencyLocal:jsonRate.currency_local,durationTerms:jsonRate.duration_terms,estimatedDays:jsonRate.estimated_days,includedInsurancePrice:jsonRate.included_insurance_price,insurance:jsonRate.insurance,messages:jsonRate.messages,objectCreated:moment__WEBPACK_IMPORTED_MODULE_1__(jsonRate.object_created),objectId:jsonRate.object_id,objectOwner:jsonRate.object_owner,provider:jsonRate.provider,providerImage75:jsonRate.provider_image_75,providerImage200:jsonRate.provider_image_200,servicelevel:(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({},jsonRateServiceLevel),{terms:(0,_types_ServiceLevel__WEBPACK_IMPORTED_MODULE_4__.N9)(jsonRateServiceLevel.terms,jsonRate.provider)}),servicelevelName:jsonRate.servicelevel_name||"",shipment:jsonRate.shipment,test:jsonRate.test,zone:jsonRate.zone}},getLabelWithOneRate=function(rate){var servicelevel=rate.servicelevel,oneRateText=(0,_types_ServiceLevel__WEBPACK_IMPORTED_MODULE_4__.p)(servicelevel)?" One Rate":"";return"".concat(function(rate){return"UPS"===rate.provider&&["Ground","Ground Saver"].includes(rate.servicelevel.name)?"".concat(rate.provider,"® ").concat(rate.servicelevel.name):_constants_carriers__WEBPACK_IMPORTED_MODULE_2__.bK[rate.provider]?"".concat(_constants_carriers__WEBPACK_IMPORTED_MODULE_2__.bK[rate.provider]," ").concat(rate.servicelevel.name):"".concat(rate.provider," ").concat(rate.servicelevel.name)}(rate)).concat(oneRateText)},popularServicesV2=["usps_priority","ups_ground","ups_ground_saver"],attributePopularRateV2=function(rates){var attributes,cheapestRates=rates.filter((function(r){return r.attributes.includes(RateAttribute.CHEAPEST)})),bestOption=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.BEST_OPTION)})),popularRates=(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(rates,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(cheapestRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(bestOption),!1),(function(r){return r.objectId})).filter((function(r){return popularServicesV2.includes(r.servicelevel.token)})).sort((function(a,b){return sortBy(a,b,"cheapest")})),otherRates=(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(rates,cheapestRates.concat(popularRates),(function(r){return r.objectId})),updatedPopularRatesList=popularRates.map((attributes=[RateAttribute.POPULAR],function(rate){return(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({},rate),{attributes})}));return(0,lodash_es__WEBPACK_IMPORTED_MODULE_7__.A)(updatedPopularRatesList.concat(cheapestRates).concat(otherRates),(function(rate){return rate.objectId}))},getNextCheapestRate=function(_a){var cheapestAndFastestRates=_a.cheapestAndFastestRates,cheapestRates=_a.cheapestRates,sortedOtherRates=_a.sortedOtherRates;if(0===cheapestAndFastestRates.length&&0===cheapestRates.length){var firstRateWithAmountIndex=sortedOtherRates.findIndex((function(rate){return Number(rate.amount)}));if(firstRateWithAmountIndex>-1){var firstRateWithAmount=sortedOtherRates[firstRateWithAmountIndex];return sortedOtherRates.splice(firstRateWithAmountIndex,1),{updatedCheapestRatesList:[firstRateWithAmount],updatedOtherRatesList:sortedOtherRates}}return{updatedCheapestRatesList:[],updatedOtherRatesList:sortedOtherRates}}return{updatedCheapestRatesList:cheapestRates,updatedOtherRatesList:sortedOtherRates}},getRatesByAttribute=function(rates){var cheapestRates=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.CHEAPEST)})),fastestRates=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.FASTEST)})),popularRates=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.POPULAR)})),bestOption=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.BEST_OPTION)})),otherRates=(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(rates,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(cheapestRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(fastestRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(popularRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(bestOption),!1),(function(r){return r.objectId})).sort((function(a,b){return sortBy(a,b,"cheapest")})),cheapestAndFastest=(0,lodash_es_intersectionBy__WEBPACK_IMPORTED_MODULE_8__.A)(cheapestRates,fastestRates,(function(r){return r.objectId})),onlyCheapestRates=(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(cheapestRates,cheapestAndFastest,(function(r){return r.objectId})).sort((function(a,b){return sortBy(a,b,"fastest")})),_a=getNextCheapestRate({cheapestAndFastestRates:cheapestAndFastest,cheapestRates:onlyCheapestRates,sortedOtherRates:otherRates}),updatedCheapestRatesList=_a.updatedCheapestRatesList,updatedOtherRatesList=_a.updatedOtherRatesList;return{bestOption,cheapestAndFastest,cheapestRates:updatedCheapestRatesList,fastestRates:(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(fastestRates,cheapestAndFastest,(function(r){return r.objectId})).sort((function(a,b){return sortBy(a,b,"cheapest")})),otherRates:updatedOtherRatesList,popularRates}},getRatesWithAttributeInDisplayOrder=function(rates,isReturn){if(void 0===isReturn&&(isReturn=!1),isReturn){var ratesFromCheapestToMostExpensive=(0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.A)(rates,(function(rate){return parseFloat(rate.amount)}));return[{displayAttribute:rateDisplayAttribute_PAY_ON_USE,rates:ratesFromCheapestToMostExpensive}]}var cheapestRates=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.CHEAPEST)})),fastestRates=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.FASTEST)})),popularRates=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.POPULAR)})),bestOption=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.BEST_OPTION)})),otherRates=(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(rates,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(cheapestRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(fastestRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(popularRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(bestOption),!1),(function(r){return r.objectId})).sort((function(a,b){return sortBy(a,b,"cheapest")})),cheapestAndFastest=(0,lodash_es_intersectionBy__WEBPACK_IMPORTED_MODULE_8__.A)(cheapestRates,fastestRates,(function(r){return r.objectId})),onlyCheapestRates=(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(cheapestRates,cheapestAndFastest,(function(r){return r.objectId})).sort((function(a,b){return sortBy(a,b,"fastest")})),_a=getNextCheapestRate({cheapestAndFastestRates:cheapestAndFastest,cheapestRates:onlyCheapestRates,sortedOtherRates:otherRates}),updatedCheapestRatesList=_a.updatedCheapestRatesList,updatedOtherRatesList=_a.updatedOtherRatesList,fastestRatesNotInCheapestAndFastest=(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(fastestRates,cheapestAndFastest,(function(r){return r.objectId})).sort((function(a,b){return sortBy(a,b,"cheapest")}));return(0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(bestOption.length>0?[{displayAttribute:rateDisplayAttribute_BEST_OPTION,rates:bestOption}]:[]),!1),[{displayAttribute:rateDisplayAttribute_CHEAPEST,rates:updatedCheapestRatesList},{displayAttribute:rateDisplayAttribute_POPULAR,rates:popularRates},{displayAttribute:rateDisplayAttribute_FASTEST,rates:fastestRatesNotInCheapestAndFastest},{displayAttribute:rateDisplayAttribute_CHEAPEST_AND_FASTEST,rates:cheapestAndFastest},{displayAttribute:rateDisplayAttribute_MORE,rates:updatedOtherRatesList}],!1)},getRatesForServiceLevelToken=function(rates,serviceLevelToken,preferredAccountObjectID){var _a,_b;if(rates.length<1)return rates;var serviceLevelCategory=null===(_b=null===(_a=_types_ServiceLevel__WEBPACK_IMPORTED_MODULE_4__.ox[serviceLevelToken])||void 0===_a?void 0:_a.token)||void 0===_b?void 0:_b.toUpperCase();if(serviceLevelCategory){var _c=getRatesByAttribute(rates),cheapestRates=_c.cheapestRates,fastestRates=_c.fastestRates;if("CHEAPEST"===serviceLevelCategory&&cheapestRates.length>0)return cheapestRates;if("FASTEST"===serviceLevelCategory&&fastestRates.length>0)return fastestRates}return rates.filter((function(rate){return(!preferredAccountObjectID||rate.carrierAccount===preferredAccountObjectID)&&(0,_types_ServiceLevel__WEBPACK_IMPORTED_MODULE_4__.M7)(rate.servicelevel,serviceLevelToken)}))},createRateList=function(selectedRatesForValidOrders,ratesData,validBatchEntries){return selectedRatesForValidOrders.map((function(selectedRate){return ratesData[selectedRate]})).reduce((function(list,selectedRate){var _a,_b,_c,_d;if(!selectedRate)return list;var rateIndex=list.findIndex((function(_a){var rate=_a.rate;return rate.provider===selectedRate.provider&&rate.servicelevel.token===selectedRate.servicelevel.token})),batchEntry=null==validBatchEntries?void 0:validBatchEntries.find((function(_a){var shipmentObjectId=_a.shipmentObjectId;return selectedRate.shipment===shipmentObjectId})),insuranceAmount=(null===(_b=null===(_a=null==batchEntry?void 0:batchEntry.extras)||void 0===_a?void 0:_a.insurance)||void 0===_b?void 0:_b.amount)||0,isReturnRequested=null===(_c=null==batchEntry?void 0:batchEntry.extras)||void 0===_c?void 0:_c.isReturnRequested,signatureConfirmation=null===(_d=null==batchEntry?void 0:batchEntry.extras)||void 0===_d?void 0:_d.signatureConfirmation;return-1!==rateIndex?(0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(list.slice(0,rateIndex)),!1),[(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({},list[rateIndex]),{amount:list[rateIndex].amount+1,currency:selectedRate.currency,includedInsurancePrice:Number(list[rateIndex].includedInsurancePrice||null)+Number((null==selectedRate?void 0:selectedRate.includedInsurancePrice)||null),numberWithInsurance:Number(insuranceAmount)>0?(list[rateIndex].numberWithInsurance||0)+1:list[rateIndex].numberWithInsurance||0,numberWithSignature:(null==signatureConfirmation?void 0:signatureConfirmation.hasSignatureConfirmation)?(list[rateIndex].numberWithSignature||0)+1:list[rateIndex].numberWithSignature||0,returnAmount:list[rateIndex].returnAmount&&list[rateIndex].returnAmount+(isReturnRequested?1:0),signatureConfirmation,total:list[rateIndex].total+Number(selectedRate.amount),totalInsuranceAmount:list[rateIndex].totalInsuranceAmount+Number(insuranceAmount)})],!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(list.slice(rateIndex+1)),!1):(0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(list),!1),[{amount:1,currency:selectedRate.currency,includedInsurancePrice:Number(null==selectedRate?void 0:selectedRate.includedInsurancePrice)||0,numberWithInsurance:Number(insuranceAmount)>0?1:0,numberWithSignature:(null==signatureConfirmation?void 0:signatureConfirmation.hasSignatureConfirmation)?1:0,rate:{provider:selectedRate.provider,servicelevel:selectedRate.servicelevel},returnAmount:isReturnRequested?1:0,shipmentObjectId:selectedRate.shipment,signatureConfirmation,total:Number(selectedRate.amount),totalInsuranceAmount:Number(insuranceAmount)||0}],!1)}),[])},getRateListTotalText=function(rateList){var rates=rateList.filter((function(rate){return rate.hasOwnProperty("rate")})),ratesTotal=rates.reduce((function(total,label){return total+label.total}),0),currencyIso=rates[0]?rates[0].currency:_constants_currency__WEBPACK_IMPORTED_MODULE_3__.q.USD.iso,noValue="".concat(_constants_currency__WEBPACK_IMPORTED_MODULE_3__.q[currencyIso].symbol,"—");return ratesTotal?i18next__WEBPACK_IMPORTED_MODULE_0__.t("translations:currency",{value:{currency_iso:currencyIso,value:ratesTotal}}):noValue},getRateListTotalTextNoInsurance=function(rateList){var rates=rateList.filter((function(rate){return rate.hasOwnProperty("rate")})),ratesTotal=rates.reduce((function(total,label){return total+(label.total-Number(label.includedInsurancePrice))}),0),currencyIso=rates[0]?rates[0].currency:_constants_currency__WEBPACK_IMPORTED_MODULE_3__.q.USD.iso,noValue="".concat(_constants_currency__WEBPACK_IMPORTED_MODULE_3__.q[currencyIso].symbol,"—");return ratesTotal?i18next__WEBPACK_IMPORTED_MODULE_0__.t("translations:currency",{value:{currency_iso:currencyIso,value:ratesTotal}}):noValue},sortBy=function(a,b,option){switch(option){case"cheapest":return parseFloat(a.amount)-parseFloat(b.amount);case"expensive":return parseFloat(b.amount)-parseFloat(a.amount);case"fastest":return a.estimatedDays-b.estimatedDays;case"slowest":return b.estimatedDays-a.estimatedDays;default:return 0}},untrackableServiceLevels=["First Class Package International Service","CanadaPost Small Packets"],isUntrackableRateServiceLevel=function(rate){return!!rate.servicelevel.name&&untrackableServiceLevels.includes(rate.servicelevel.name)},transactionSearchRatefromJSON=function(jsonRate){return{amount:jsonRate.amount,amountInsuranceFee:jsonRate.amount_insurance_fee,amountLocal:jsonRate.amount_local,carrierAccount:jsonRate.carrier_account,currency:jsonRate.currency,currencyLocal:jsonRate.currency_local,discountGroupName:jsonRate.discount_group_name,insuranceAmount:jsonRate.insurance_amount,insuranceCurrency:jsonRate.insurance_currency||null,objectId:jsonRate.object_id,provider:jsonRate.provider,servicelevelName:jsonRate.servicelevel_name,servicelevelToken:jsonRate.servicelevel_token}}},"./app/types/ServiceLevel.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M7:()=>serviceLevelMatchesToken,N9:()=>fromJSONServiceLevelTerms,Zd:()=>getServiceLevelAccountByToken,ox:()=>ServiceLevelCategoryByToken,p:()=>isOneRate});var tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_constants_carriers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/constants/carriers.ts"),_constants_currency__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/constants/currency.ts"),getCurrency=function(jsonServiceLevelTerms){return Object.values(_constants_currency__WEBPACK_IMPORTED_MODULE_1__.q).find((function(currency){return currency.iso===jsonServiceLevelTerms.currency.toUpperCase()}))||_constants_currency__WEBPACK_IMPORTED_MODULE_1__.q.USD},fromJSONServiceLevelTerms=function(serviceLevelTerms,provider){var terms="";try{var jsonServiceLevelTerms=JSON.parse(serviceLevelTerms);provider===_constants_carriers__WEBPACK_IMPORTED_MODULE_0__.jr.name&&(terms=function(jsonServiceLevelTerms){var terms={baseCharge:{copy:"orders:calculateRates:rates:surcharges:baseCharge",shouldTranslate:!0,value:Number(jsonServiceLevelTerms.base_charge)},currency:getCurrency(jsonServiceLevelTerms)};return jsonServiceLevelTerms.fuel_surcharge&&(terms.fuelSurcharge={copy:"orders:calculateRates:rates:surcharges:fuelSurcharge",shouldTranslate:!0,value:Number(jsonServiceLevelTerms.fuel_surcharge)}),jsonServiceLevelTerms.residential_surcharge&&(terms.residentialSurcharge={copy:"orders:calculateRates:rates:surcharges:residentialSurcharge",shouldTranslate:!0,value:Number(jsonServiceLevelTerms.residential_surcharge)}),jsonServiceLevelTerms.customs_surcharge&&(terms.customsSurcharge={copy:"orders:calculateRates:rates:surcharges:customsSurcharge",shouldTranslate:!0,value:Number(jsonServiceLevelTerms.customs_surcharge)}),jsonServiceLevelTerms.taxes&&(terms.taxes={copy:"orders:calculateRates:rates:surcharges:taxes",shouldTranslate:!0,value:Number(jsonServiceLevelTerms.taxes)}),jsonServiceLevelTerms.other_surcharges&&(terms.otherSurcharges={copy:"orders:calculateRates:rates:surcharges:otherSurcharges",shouldTranslate:!0,value:Number(jsonServiceLevelTerms.other_surcharges)}),terms}(jsonServiceLevelTerms)),provider===_constants_carriers__WEBPACK_IMPORTED_MODULE_0__.i3.name&&(terms=function(jsonServiceLevelTerms){var parsedTerms=Object.entries(jsonServiceLevelTerms);return Object.entries(parsedTerms).reduce((function(termsObject,_a){var _b=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.zs)(_a,2),_c=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.zs)(_b[1],2),name=_c[0],value=_c[1];return"currency"===name?termsObject.currency=getCurrency(jsonServiceLevelTerms):termsObject[name]={copy:name,shouldTranslate:!1,value:Number(value)},termsObject}),{})}(jsonServiceLevelTerms))}catch(e){terms=serviceLevelTerms}return terms},ServiceLevelCategoryByToken=[{name:"Cheapest Rate",token:"cheapest"},{name:"Fastest Rate",token:"fastest"}].reduce((function(map,category){var _a;return Object.assign(map,((_a={})[category.token]=category,_a))}),{}),isOneRate=function(serviceLevel){return!!serviceLevel&&!!serviceLevel.terms&&"ONERATE"===serviceLevel.terms},getServiceLevelAccountByToken=function(_a){var accountId=_a.accountId,mappedServiceLevels=_a.mappedServiceLevels,token=_a.token;if(Object.keys(mappedServiceLevels).length>0&&token){var serviceLevelAccounts=null==mappedServiceLevels?void 0:mappedServiceLevels[token];if((null==serviceLevelAccounts?void 0:serviceLevelAccounts.length)>0){if(accountId){var serviceLevelWithMatchingAccount=serviceLevelAccounts.find((function(serviceLevel){return serviceLevel.account_object_id===accountId}));if(serviceLevelWithMatchingAccount)return serviceLevelWithMatchingAccount}return serviceLevelAccounts[0]}}},serviceLevelMatchesToken=function(serviceLevel,serviceLevelToken){return!(!serviceLevel||!serviceLevelToken)&&(!(!serviceLevel.extended_token||serviceLevel.extended_token!==serviceLevelToken)||(serviceLevel.token===serviceLevelToken||!!serviceLevel.parent_servicelevel&&serviceLevelMatchesToken(serviceLevel.parent_servicelevel,serviceLevelToken)))}},"./app/types/Track.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var TrackStatus;__webpack_require__.d(__webpack_exports__,{O:()=>transactionSearchTrackFromJSON,S:()=>TrackStatus}),function(TrackStatus){TrackStatus.DELIVERED="DELIVERED",TrackStatus.FAILURE="FAILURE",TrackStatus.PRE_TRANSIT="PRE_TRANSIT",TrackStatus.RETURNED="RETURNED",TrackStatus.TRANSIT="TRANSIT",TrackStatus.UNKNOWN="UNKNOWN"}(TrackStatus||(TrackStatus={}));var transactionSearchTrackFromJSON=function(jsonTrack){return{location:jsonTrack.location?{city:jsonTrack.location.city,country:jsonTrack.location.country,state:jsonTrack.location.state,zip:jsonTrack.location.zip}:void 0,objectCreated:jsonTrack.object_created,objectId:jsonTrack.object_id,objectUpdated:jsonTrack.object_updated,status:jsonTrack.status,statusDate:jsonTrack.status_date,statusDetails:jsonTrack.status_details}}},"./app/types/Transaction.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{PJ:()=>isRefundIneligible,dF:()=>ObjectState,eM:()=>getLabelUrl,p9:()=>transactionUI2FromJSON,rS:()=>fromJSON,x8:()=>TransactionStatus});var TransactionStatus,ObjectState,moment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/moment/moment.js"),_constants_carriers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/constants/carriers.ts"),_types_APIMessage__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/types/APIMessage.ts"),_types_Address__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/types/Address.ts"),_types_Rate__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./app/types/Rate.ts"),_utils_newRelic_newRelic__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./app/types/Track.ts"),__webpack_require__("./app/utils/newRelic/newRelic.ts"));!function(TransactionStatus){TransactionStatus.ERROR="ERROR",TransactionStatus.QUEUED="QUEUED",TransactionStatus.REFUNDED="REFUNDED",TransactionStatus.REFUNDPENDING="REFUNDPENDING",TransactionStatus.REFUNDREJECTED="REFUNDREJECTED",TransactionStatus.SUCCESS="SUCCESS",TransactionStatus.WAITING="WAITING"}(TransactionStatus||(TransactionStatus={})),function(ObjectState){ObjectState.INVALID="INVALID",ObjectState.VALID="VALID"}(ObjectState||(ObjectState={}));var getLabelUrl=function(labelUrl){if(!labelUrl)return"";var parts=window.location.host.split("."),subdomain=parts[0];if(labelUrl.includes("local")||labelUrl.includes("stage-perf"))return labelUrl;if(!labelUrl.includes("amazonaws.com"))return labelUrl;try{var newSubdomain=subdomain.replace("apps","deliver"),newHost="".concat(newSubdomain,".").concat(parts[1],".").concat(parts[2].split(":")[0]),parsedUrl=new URL(labelUrl),path_1=parsedUrl.pathname,qs_1=parsedUrl.search,extParam=/Windows/.test(window.navigator.userAgent)&&path_1.includes(".pdf")?"&ext=.pdf":"";return"https://".concat(newHost).concat(path_1).concat(qs_1).concat(extParam)}catch(error){return _utils_newRelic_newRelic__WEBPACK_IMPORTED_MODULE_6__.S.noticeError("Failed to parse label URL",{error,labelUrl}),""}},fromJSON=function(jsonTransaction){var _a,_b,_c,test=(jsonTransaction.test?jsonTransaction.test:jsonTransaction.was_test)||!1,amount=(jsonTransaction.insurance||{}).amount,insuranceAmount="0"===amount?void 0:amount;return{billing:jsonTransaction.billing,commercialInvoiceUrl:jsonTransaction.commercial_invoice_url,eta:jsonTransaction.eta,insuranceAmount,insuranceClaimId:null===(_a=null==jsonTransaction?void 0:jsonTransaction.insurance)||void 0===_a?void 0:_a.claim_id,insuranceCurrency:null===(_b=null==jsonTransaction?void 0:jsonTransaction.insurance)||void 0===_b?void 0:_b.currency,insuranceProvider:null===(_c=null==jsonTransaction?void 0:jsonTransaction.insurance)||void 0===_c?void 0:_c.provider,isDownloadable:jsonTransaction.is_downloadable,isRefundable:jsonTransaction.is_refundable,isReturn:jsonTransaction.is_return,labelUrl:getLabelUrl(jsonTransaction.label_url),messages:(jsonTransaction.messages||[]).map(_types_APIMessage__WEBPACK_IMPORTED_MODULE_2__.rS),metadata:jsonTransaction.metadata,objectCreated:jsonTransaction.object_created,objectId:jsonTransaction.object_id,objectOwner:jsonTransaction.object_owner,objectState:jsonTransaction.object_state,objectUpdated:jsonTransaction.object_updated,order:jsonTransaction.order,parcel:jsonTransaction.parcel,rate:jsonTransaction.rate,status:jsonTransaction.status||jsonTransaction.object_status,test,trackingNumber:jsonTransaction.tracking_number,trackingStatus:jsonTransaction.tracking_status,trackingUrlProvider:jsonTransaction.tracking_url_provider}},transactionUI2FromJSON=function(jsonTransaction){return{addressTo:_types_Address__WEBPACK_IMPORTED_MODULE_3__.rS(jsonTransaction.address_to),objectCreated:moment__WEBPACK_IMPORTED_MODULE_0__(jsonTransaction.object_created),objectId:jsonTransaction.object_id,objectStatus:jsonTransaction.object_status,orderNumber:jsonTransaction.order_number,rate:_types_Rate__WEBPACK_IMPORTED_MODULE_4__.rS(jsonTransaction.rate),trackingNumber:jsonTransaction.tracking_number,trackingStatus:jsonTransaction.tracking_status,trackingUrlProvider:jsonTransaction.tracking_url_provider,wasTest:jsonTransaction.was_test}},isRefundIneligible=function(transaction){return transaction.rate.provider===_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.i3.name&&transaction.objectCreated.isAfter(moment__WEBPACK_IMPORTED_MODULE_0__().subtract(60,"minute"))}}}]);