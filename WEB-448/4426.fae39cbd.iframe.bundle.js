"use strict";(self.webpackChunk_shippo_feron=self.webpackChunk_shippo_feron||[]).push([[4426],{"./app/pages/BlackbeardOrdersOptInOptOut/useBlackbeardGlobalNavVisibility.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>BlackbeardOrdersOptInOptOut_useBlackbeardGlobalNavVisibility});var react=__webpack_require__("./node_modules/react/index.js"),DEFAULT_SPLIT_VARIATION="control",VariationTypes={ROLLOUT:["on","off"],A_B_TESTING:["control","variant","not-included"],OPT_IN_OUT:["initialOptIn","initialOptOut","disabled"]},FeatureFlags={PACKAGE_QUICK_SELECT:{name:"package_quick_select",variationType:VariationTypes.ROLLOUT},SHIPMENTS_BULK_SELECTION:{name:"shipments_bulk_selection",variationType:VariationTypes.A_B_TESTING},SHOW_DUPLICATE_ORDERS:{name:"show_duplicate_orders",variationType:VariationTypes.A_B_TESTING},NEW_RETURNS_WORKFLOW:{name:"new_returns_workflow",variationType:VariationTypes.A_B_TESTING},SHOW_DHL_TERMS:{name:"show_dhl_terms",variationType:VariationTypes.ROLLOUT},ORDERS_REDESIGN:{name:"orders_redesign",variationType:VariationTypes.ROLLOUT},ORDERS_REDESIGN_WITH_OPT_IN_OPT_OUT:{name:"orders_redesign_with_opt_in_opt_out",variationType:VariationTypes.OPT_IN_OUT},INSIGHTS:{name:"insights",variationType:VariationTypes.ROLLOUT},JOIN_FLOW:{name:"join_flow_2024",variationType:VariationTypes.A_B_TESTING},ORDER_TAG_MVP:{name:"order_tag_mvp",variationType:VariationTypes.ROLLOUT}},react_sdk=__webpack_require__("./node_modules/@optimizely/react-sdk/dist/react-sdk.js"),esm_exports=(__webpack_require__("./node_modules/react-redux/es/index.js"),__webpack_require__("./app/selectors/user.selectors.ts"),__webpack_require__("./node_modules/uuid/index.js"),__webpack_require__("./node_modules/@sentry/core/esm/exports.js")),errorHandler={handleError:function(error){esm_exports.uT("[Optimizely] ".concat(null==error?void 0:error.message))}};(0,react_sdk.Fs)({sdkKey:"5BDuBhgGXbHXWEXMojbEi",datafileOptions:{autoUpdate:!0},errorHandler,logLevel:3,eventBatchSize:10,eventFlushInterval:1e3});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");function useFeatureFlag(featureFlag){var _a=(0,tslib_es6.CR)((0,react_sdk.rm)(featureFlag.name),2),decision=_a[0];return _a[1]?featureFlag.variationType===VariationTypes.ROLLOUT?{enabled:"on"===decision.variationKey}:featureFlag.variationType===VariationTypes.OPT_IN_OUT?{variation:"off"===decision.variationKey?"initialOptIn":decision.variationKey}:{variation:"off"===decision.variationKey?DEFAULT_SPLIT_VARIATION:decision.variationKey}:null}var moment=__webpack_require__("./node_modules/moment/moment.js");var BLACKBEARD_ORDERS_STORAGE_KEY="ordersRevamp",OPT_IN_SNOOZED_STORAGE_KEY="ordersRevampOptInDismissed",OPT_OUT_SNOOZED_STORAGE_KEY="ordersRevampOptOutDismissed",ls=function getLocalStorage(){return localStorage}();function removeOptInOptOutSnooze(optType){switch(optType){case"optIn":return ls.removeItem(OPT_IN_SNOOZED_STORAGE_KEY),!0;case"optOut":return ls.removeItem(OPT_OUT_SNOOZED_STORAGE_KEY),!0}}function getOptInOutDismissed(type){var storedDateValue=ls.getItem("optIn"===type?OPT_IN_SNOOZED_STORAGE_KEY:OPT_OUT_SNOOZED_STORAGE_KEY);if(storedDateValue)try{return new Date(storedDateValue)}catch(_a){return}}function helpers_snoozedOptInPrompt(optInOutType,startingDate){return function snoozedRecently(startingDate,dismissedDate){if(!dismissedDate)return!1;var sevenDaysAgo=moment(startingDate).subtract(7,"days");return 7-moment(dismissedDate).diff(sevenDaysAgo,"days")<7}(startingDate,getOptInOutDismissed(optInOutType))}function useBlackbeardOrdersVisibility(now){void 0===now&&(now=new Date);var ordersRedesign=useFeatureFlag(FeatureFlags.ORDERS_REDESIGN),ordersRedesignWithOptInOptOut=useFeatureFlag(FeatureFlags.ORDERS_REDESIGN_WITH_OPT_IN_OPT_OUT),optInOutValue=function getBlackbeardOrdersStorageValue(){return ls.getItem(BLACKBEARD_ORDERS_STORAGE_KEY)}(),showOrdersRedesign=function shouldShowBlackbeardOrders(ordersRedesign,initialOptInOptOut,optInOutValue){if(function optInOutEnabled(value){return!!value&&"disabled"!==value}(initialOptInOptOut))switch(optInOutValue){case"optIn":return!0;case"optOut":return!1;default:return"initialOptIn"===initialOptInOptOut}return!!ordersRedesign}(!!(null==ordersRedesign?void 0:ordersRedesign.enabled),(null==ordersRedesignWithOptInOptOut?void 0:ordersRedesignWithOptInOptOut.variation)?ordersRedesignWithOptInOptOut.variation:"initialOptIn",optInOutValue),onChangeOptInOut=(0,react.useCallback)((function(newValue){!function setBlackbeardOrdersStorageValue(newValue){ls.setItem(BLACKBEARD_ORDERS_STORAGE_KEY,newValue)}(newValue),function clearOptInOutSnooze(){removeOptInOptOutSnooze("optIn"),removeOptInOptOutSnooze("optOut")}()}),[]),onSnoozeOptInOut=(0,react.useCallback)((function(optInOutType){!function storeSnoozeValue(optInOutType){switch(optInOutType){case"optIn":ls.setItem(OPT_IN_SNOOZED_STORAGE_KEY,(new Date).toISOString());break;case"optOut":ls.setItem(OPT_OUT_SNOOZED_STORAGE_KEY,(new Date).toISOString())}}(optInOutType)}),[]),dismissedOptOutPrompt=!!getOptInOutDismissed("optOut"),snoozedOptInPrompt=helpers_snoozedOptInPrompt("optIn",now);return{onChangeOptInOut,showOrdersRedesign,initialOptInOptOutValue:"disabled"===(null==ordersRedesignWithOptInOptOut?void 0:ordersRedesignWithOptInOptOut.variation)||null==ordersRedesignWithOptInOptOut?void 0:ordersRedesignWithOptInOptOut.variation,optInOutValue,onSnoozeOptInOut,dismissedOptOutPrompt,snoozedOptInPrompt}}const BlackbeardOrdersOptInOptOut_useBlackbeardGlobalNavVisibility=function useBlackbeardGlobalNavVisibility(){return useBlackbeardOrdersVisibility().showOrdersRedesign}},"./app/utils/featureflags/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var FeatureFlagNames,FeatureTestVariants;__webpack_require__.d(__webpack_exports__,{gV:()=>featureflags_useFeatureFlags,iG:()=>useLDFeatureFlagOverrides,eW:()=>esm.KK}),function(FeatureFlagNames){FeatureFlagNames.TEST1="test1",FeatureFlagNames.TEST2="test2",FeatureFlagNames.TESTVARIANTS="testvariants",FeatureFlagNames.SATORI_MULTIVARIANT_TEST="satoriMultivariantTest",FeatureFlagNames.SATORI_FEATURE_FLAG_TEST="satoriFeatureFlagTest",FeatureFlagNames.ORDERS_ZERO_STATE_VIDEO="orderZeroStateVideoExperiment",FeatureFlagNames.NEW_LOGIN_FLOW="newLoginFlow",FeatureFlagNames.SHOW_SAVINGS="showSavings",FeatureFlagNames.ADD_NOTE_GLOBAL_SETTING="addNoteGlobalSetting",FeatureFlagNames.REACT_MANIFESTS="reactManifests",FeatureFlagNames.REACT_MANIFEST_USPS_ONLY="reactManifestUspsOnly",FeatureFlagNames.INSURANCE_BANNER="insuranceBanner",FeatureFlagNames.PACKAGE_INFO_CARD_WINTER_2022="packageInfoCardWinter2022",FeatureFlagNames.PROMPT_FOR_AUTOMATIC_INSURANCE_AFTER_LABEL_PURCHASE="promptForAutomaticInsuranceAfterLabelPurchase",FeatureFlagNames.SHOW_AI_PARCEL_BOT="showAiParcelBot",FeatureFlagNames.SIDE_PANEL_AUTO_SAVE="sidePanelAutoSave",FeatureFlagNames.PRO_PLAN_TESTING="proPlanTesting",FeatureFlagNames.SHOW_ADDRESS_BOOK="showAddressBook"}(FeatureFlagNames||(FeatureFlagNames={})),function(FeatureTestVariants){FeatureTestVariants.ENABLED="Enabled"}(FeatureTestVariants||(FeatureTestVariants={}));var esm=__webpack_require__("./node_modules/launchdarkly-react-client-sdk/lib/esm/index.js"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),featureflags_useFeatureFlags=(__webpack_require__("./node_modules/react/index.js"),(0,emotion_react_jsx_runtime_browser_esm.tZ)((function(_a){var children=_a.children;return(0,emotion_react_jsx_runtime_browser_esm.tZ)(emotion_react_jsx_runtime_browser_esm.HY,{children})}),{children:"test"}).type,(0,emotion_react_jsx_runtime_browser_esm.tZ)((function(_a){var children=_a.children;return(0,emotion_react_jsx_runtime_browser_esm.tZ)(emotion_react_jsx_runtime_browser_esm.HY,{children})}),{children:"test"}).type,esm.Vb),useLDFeatureFlagOverrides=function(){var _a;return(_a={})[FeatureFlagNames.PACKAGE_INFO_CARD_WINTER_2022]=!0,_a[FeatureFlagNames.SHOW_SAVINGS]="not-included",_a[FeatureFlagNames.SIDE_PANEL_AUTO_SAVE]="variant",_a}}}]);