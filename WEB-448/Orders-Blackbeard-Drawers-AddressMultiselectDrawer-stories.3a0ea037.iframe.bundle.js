"use strict";(self.webpackChunk_shippo_feron=self.webpackChunk_shippo_feron||[]).push([[7845],{"./node_modules/lodash-es/xorWith.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>lodash_es_xorWith});var _arrayFilter=__webpack_require__("./node_modules/lodash-es/_arrayFilter.js"),_baseRest=__webpack_require__("./node_modules/lodash-es/_baseRest.js"),_baseDifference=__webpack_require__("./node_modules/lodash-es/_baseDifference.js"),_baseFlatten=__webpack_require__("./node_modules/lodash-es/_baseFlatten.js"),_baseUniq=__webpack_require__("./node_modules/lodash-es/_baseUniq.js");const _baseXor=function baseXor(arrays,iteratee,comparator){var length=arrays.length;if(length<2)return length?(0,_baseUniq.Z)(arrays[0]):[];for(var index=-1,result=Array(length);++index<length;)for(var array=arrays[index],othIndex=-1;++othIndex<length;)othIndex!=index&&(result[index]=(0,_baseDifference.Z)(result[index]||array,arrays[othIndex],iteratee,comparator));return(0,_baseUniq.Z)((0,_baseFlatten.Z)(result,1),iteratee,comparator)};var isArrayLikeObject=__webpack_require__("./node_modules/lodash-es/isArrayLikeObject.js"),last=__webpack_require__("./node_modules/lodash-es/last.js");const lodash_es_xorWith=(0,_baseRest.Z)((function(arrays){var comparator=(0,last.Z)(arrays);return comparator="function"==typeof comparator?comparator:void 0,_baseXor((0,_arrayFilter.Z)(arrays,isArrayLikeObject.Z),void 0,comparator)}))},"./node_modules/ramda/es/mergeDeepRight.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>es_mergeDeepRight});var _curry2=__webpack_require__("./node_modules/ramda/es/internal/_curry2.js"),_curry1=__webpack_require__("./node_modules/ramda/es/internal/_curry1.js"),_isPlaceholder=__webpack_require__("./node_modules/ramda/es/internal/_isPlaceholder.js");function _curry3(fn){return function f3(a,b,c){switch(arguments.length){case 0:return f3;case 1:return(0,_isPlaceholder.Z)(a)?f3:(0,_curry2.Z)((function(_b,_c){return fn(a,_b,_c)}));case 2:return(0,_isPlaceholder.Z)(a)&&(0,_isPlaceholder.Z)(b)?f3:(0,_isPlaceholder.Z)(a)?(0,_curry2.Z)((function(_a,_c){return fn(_a,b,_c)})):(0,_isPlaceholder.Z)(b)?(0,_curry2.Z)((function(_b,_c){return fn(a,_b,_c)})):(0,_curry1.Z)((function(_c){return fn(a,b,_c)}));default:return(0,_isPlaceholder.Z)(a)&&(0,_isPlaceholder.Z)(b)&&(0,_isPlaceholder.Z)(c)?f3:(0,_isPlaceholder.Z)(a)&&(0,_isPlaceholder.Z)(b)?(0,_curry2.Z)((function(_a,_b){return fn(_a,_b,c)})):(0,_isPlaceholder.Z)(a)&&(0,_isPlaceholder.Z)(c)?(0,_curry2.Z)((function(_a,_c){return fn(_a,b,_c)})):(0,_isPlaceholder.Z)(b)&&(0,_isPlaceholder.Z)(c)?(0,_curry2.Z)((function(_b,_c){return fn(a,_b,_c)})):(0,_isPlaceholder.Z)(a)?(0,_curry1.Z)((function(_a){return fn(_a,b,c)})):(0,_isPlaceholder.Z)(b)?(0,_curry1.Z)((function(_b){return fn(a,_b,c)})):(0,_isPlaceholder.Z)(c)?(0,_curry1.Z)((function(_c){return fn(a,b,_c)})):fn(a,b,c)}}}function _isObject(x){return"[object Object]"===Object.prototype.toString.call(x)}function _has(prop,obj){return Object.prototype.hasOwnProperty.call(obj,prop)}const es_mergeWithKey=_curry3((function mergeWithKey(fn,l,r){var k,result={};for(k in l)_has(k,l)&&(result[k]=_has(k,r)?fn(k,l[k],r[k]):l[k]);for(k in r)_has(k,r)&&!_has(k,result)&&(result[k]=r[k]);return result}));const es_mergeDeepWithKey=_curry3((function mergeDeepWithKey(fn,lObj,rObj){return es_mergeWithKey((function(k,lVal,rVal){return _isObject(lVal)&&_isObject(rVal)?mergeDeepWithKey(fn,lVal,rVal):fn(k,lVal,rVal)}),lObj,rObj)}));const es_mergeDeepRight=(0,_curry2.Z)((function mergeDeepRight(lObj,rObj){return es_mergeDeepWithKey((function(k,lVal,rVal){return rVal}),lObj,rObj)}))},"./app/pages/Orders/Blackbeard/Drawers/AddressMultiselectDrawer.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Regular:()=>Regular,default:()=>AddressMultiselectDrawer_stories});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),redux=__webpack_require__("./node_modules/redux/es/redux.js"),translate=__webpack_require__("./app/utils/translate.ts"),reducers=__webpack_require__("./app/reducers/index.ts"),Box=__webpack_require__("./node_modules/@goshippo/components/esm/Box/Box.js"),Typography=__webpack_require__("./node_modules/@goshippo/components/esm/Typography/Typography.js"),Button=__webpack_require__("./node_modules/@goshippo/components/esm/Button/Button.js"),Divider=__webpack_require__("./node_modules/@goshippo/components/esm/Divider/Divider.js"),Stack=__webpack_require__("./node_modules/@goshippo/components/esm/Stack/Stack.js"),MobileAndDesktopDrawer=__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/shared/MobileAndDesktopDrawer/index.js"),react=__webpack_require__("./node_modules/react/index.js"),orders_selectors=__webpack_require__("./app/selectors/orders.selectors.ts"),types=__webpack_require__("./app/utils/TrackingHelper/types.ts"),utils=__webpack_require__("./app/utils/TrackingHelper/utils.ts"),styled=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),Container=__webpack_require__("./node_modules/@goshippo/components/esm/Container/Container.js"),shippoTheme=__webpack_require__("./node_modules/@goshippo/components/esm/styles/shippoTheme.js"),SectionContainer=(0,styled.ZP)(Container.Z)((function(){var _a;return(_a={padding:shippoTheme.Z.spacing(2)})[shippoTheme.Z.breakpoints.up("lg")]={maxWidth:"964px"},_a})),Radio=__webpack_require__("./node_modules/@goshippo/components/esm/Radio/Radio.js"),AddressText=__webpack_require__("./app/components/AddressText/AddressText.tsx"),AddressBookItem=function(_a){var address=_a.address,checked=_a.checked,onSelectAddressSuper=_a.onSelectAddress,t=_a.t,onSelectAddress=(0,react.useCallback)((function(){onSelectAddressSuper(address)}),[address,onSelectAddressSuper]);return(0,emotion_react_jsx_runtime_browser_esm.tZ)(AddressBookItemWithArbitraryContent,(0,tslib_es6.pi)({checked,onSelectAddress},{children:(0,emotion_react_jsx_runtime_browser_esm.tZ)(AddressText.X,{address,showNameOrCompany:!0,t})}))},AddressBookItemWithArbitraryContent=function(_a){var checked=_a.checked,onSelectAddress=_a.onSelectAddress,children=_a.children;return(0,emotion_react_jsx_runtime_browser_esm.tZ)(Box.Z,(0,tslib_es6.pi)({sx:{border:"1px solid #B8CED9",boxShadow:"inset 0px -1px 0px #CFDCE2",borderRadius:"4px",padding:"0.4rem",width:"100%",cursor:"pointer",boxSizing:"border-box"},onClick:onSelectAddress},{children:(0,emotion_react_jsx_runtime_browser_esm.BX)(Stack.Z,(0,tslib_es6.pi)({sx:{flexDirection:"row",gap:"0.4rem",alignItems:"center"}},{children:[(0,emotion_react_jsx_runtime_browser_esm.tZ)(Radio.Z,{checked})," ",(0,emotion_react_jsx_runtime_browser_esm.tZ)("span",{children})]}))}))};const AddressCard_AddressMultiselect=function(_a){var addressBook=_a.addressBook,onSelectAddress=_a.onSelectAddress,selectedAddress=_a.selectedAddress,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.tZ)(Box.Z,(0,tslib_es6.pi)({id:"address-multiselect"},{children:(0,emotion_react_jsx_runtime_browser_esm.tZ)(Stack.Z,(0,tslib_es6.pi)({id:"address-book-item-list","aria-labelledby":"address-selection-group-label",sx:{gap:"1rem",flexDirection:"column"}},{children:addressBook.map((function(address,i){return(0,emotion_react_jsx_runtime_browser_esm.tZ)(AddressBookItem,{checked:address===selectedAddress,onSelectAddress,address,t},"address-slection-item-".concat(i))}))}))}))};var AddressDrawerForm=__webpack_require__("./app/pages/Orders/Blackbeard/Drawers/AddressDrawer/AddressDrawerForm.tsx"),TrackingHelper=__webpack_require__("./app/utils/TrackingHelper/index.ts"),lodash=__webpack_require__("./node_modules/lodash/lodash.js");function titleForDrawer(addressType,t){switch(addressType){case"return":return t("orders:manualLabel:returnAddress");case"sender":return t("orders:manualLabel:senderAddress");case"to":return t("orders:manualLabel:recipientAddress")}}function idFromAddressInfo(addressInfo,editingAddressType){var startingAddress=addressInfo[editingAddressType];return startingAddress&&!(0,lodash.isArray)(startingAddress)&&startingAddress.hasOwnProperty("id")?startingAddress.id:void 0}const Drawers_AddressMultiselectDrawer=function(_a){var addresses=_a.addresses,addressInfo=_a.addressInfo,editingAddressType=_a.editingAddressType,editingAddress=_a.editingAddress,onClearEditingAddress=_a.onClearEditingAddress,onSubmitSelectedAddress=_a.onSubmitSelectedAddress,onCancel=_a.onCancel,onSubmitEditedAddress=_a.onSubmitEditedAddress,t=_a.t,persistent=_a.persistent,isSelectedSenderInSavedAddresses=_a.isSelectedSenderInSavedAddresses,isSelectedReturnInSavedAddresses=_a.isSelectedReturnInSavedAddresses,combineSenderReturnAddresses=_a.combineSenderReturnAddresses,areAllSenderReturnAddressesEqual=_a.areAllSenderReturnAddressesEqual,hasRecipientPhoneRequireError=_a.hasRecipientPhoneRequireError,_b=(0,tslib_es6.CR)((0,react.useState)(void 0),2),selectedAddress=_b[0],setSelectedAddress=_b[1],_c=(0,tslib_es6.CR)((0,react.useState)(!1),2),newAddressForm=_c[0],setNewAddressForm=_c[1],selectedOrders=(0,es.v9)(orders_selectors.A0),selectedThingsCount=Object.entries(selectedOrders).reduce((function(count,_a){var _b=(0,tslib_es6.CR)(_a,2);_b[0];return count+(_b[1].length||1)}),0),addressInfoForForm=(0,react.useMemo)((function(){var _a;return(0,tslib_es6.pi)((0,tslib_es6.pi)({},addressInfo),((_a={})[editingAddressType]=editingAddress||null,_a))}),[addressInfo,editingAddress,editingAddressType]),handleTrackAddressUpdate=(0,react.useCallback)((function(trackingReference){(0,utils.K4)(trackingReference,types.Dy.operations.SAVE_ATTEMPTED,{});var action=addressInfo[editingAddressType]?types.Dy.operations.UPDATED:types.Dy.operations.ADDED;(0,utils.K4)(trackingReference,action,{address_type:editingAddressType,orders_selected:selectedThingsCount})}),[addressInfo,editingAddressType,selectedThingsCount]),onSubmit=(0,react.useCallback)((function(){if(selectedAddress){var addressId=idFromAddressInfo(addressInfo,editingAddressType),trackingReference=TrackingHelper.U.getTrackingReference(types.Dy.name,"side_panel",{addressId,addressType:editingAddressType});onSubmitSelectedAddress(selectedAddress,trackingReference),handleTrackAddressUpdate(trackingReference)}else onCancel()}),[addressInfo,editingAddressType,handleTrackAddressUpdate,onCancel,onSubmitSelectedAddress,selectedAddress]),onClickAddNewAddress=(0,react.useCallback)((function(){setNewAddressForm(!0)}),[]),onCloseForm=(0,react.useCallback)((function(){setNewAddressForm(!1),onClearEditingAddress()}),[onClearEditingAddress]),onUpdateAddress=(0,react.useCallback)((function(newAddress,meta){var addressId=idFromAddressInfo(addressInfo,editingAddressType),trackingReference=TrackingHelper.U.getTrackingReference(types.Dy.name,"side_panel",{addressId,addressType:editingAddressType});onSubmitEditedAddress(newAddress,editingAddressType,meta,trackingReference),handleTrackAddressUpdate(trackingReference)}),[addressInfo,editingAddressType,handleTrackAddressUpdate,onSubmitEditedAddress]),onSelectEmptyAddress=(0,react.useCallback)((function(){setSelectedAddress(void 0)}),[]),onFormFirstLoad=(0,react.useCallback)((function(){var addressId=idFromAddressInfo(addressInfo,editingAddressType);(0,utils.K4)(TrackingHelper.U.getTrackingReference(types.Dy.name,"side_panel",{addressId,addressType:editingAddressType}),types.Dy.operations.VIEWED,{})}),[addressInfo,editingAddressType]),Content=(0,react.useMemo)((function(){if(newAddressForm||!!editingAddress)return(0,emotion_react_jsx_runtime_browser_esm.tZ)(AddressDrawerForm.Z,{hasRecipientPhoneRequireError,addressInfoForForm,areAllSenderReturnAddressesEqual,editingAddressType,onCancel:newAddressForm?onCloseForm:onCancel,initialCombineSenderReturn:combineSenderReturnAddresses,onFirstLoad:onFormFirstLoad,onUpdateAddress,isSelectedReturnInSavedAddresses,isSelectedSenderInSavedAddresses,t});var selectedAddresses=addressInfo[editingAddressType],selectedAddressesCount=selectedAddresses&&Array.isArray(selectedAddresses)?selectedAddresses.length:0;return(0,emotion_react_jsx_runtime_browser_esm.tZ)(Box.Z,{children:(0,emotion_react_jsx_runtime_browser_esm.tZ)(SectionContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.BX)(Box.Z,(0,tslib_es6.pi)({alignItems:"space-between"},{children:[(0,emotion_react_jsx_runtime_browser_esm.BX)(Box.Z,(0,tslib_es6.pi)({overflow:"scroll",sx:{display:"flex",height:"75vh",flexDirection:"column"}},{children:[selectedAddressesCount>1&&(0,emotion_react_jsx_runtime_browser_esm.tZ)(Box.Z,(0,tslib_es6.pi)({sx:{marginBottom:"1rem"}},{children:(0,emotion_react_jsx_runtime_browser_esm.tZ)(AddressBookItemWithArbitraryContent,(0,tslib_es6.pi)({checked:!selectedAddress,onSelectAddress:onSelectEmptyAddress},{children:(0,emotion_react_jsx_runtime_browser_esm.BX)(Box.Z,{children:[(0,emotion_react_jsx_runtime_browser_esm.tZ)(Typography.Z,(0,tslib_es6.pi)({component:"div",variant:"bodyEmphasized"},{children:t("orders:addressDrawer:keepCurrentSelections")})),(0,emotion_react_jsx_runtime_browser_esm.BX)(Typography.Z,(0,tslib_es6.pi)({component:"div",variant:"body"},{children:[selectedAddressesCount," ",t("orders:addressDrawer:addresses")]}))]})}))})),(0,emotion_react_jsx_runtime_browser_esm.tZ)(AddressCard_AddressMultiselect,{addressBook:addresses,onSelectAddress:setSelectedAddress,selectedAddress,t}),(0,emotion_react_jsx_runtime_browser_esm.tZ)(Box.Z,(0,tslib_es6.pi)({sx:{display:"flex",placeContent:"center",marginTop:"0.5rem"}},{children:(0,emotion_react_jsx_runtime_browser_esm.tZ)(Button.Z,(0,tslib_es6.pi)({variant:"text",color:"secondary",onClick:onClickAddNewAddress},{children:t("orders:addressDrawer:addNewAddress")}))}))]})),(0,emotion_react_jsx_runtime_browser_esm.tZ)(Divider.Z,{}),(0,emotion_react_jsx_runtime_browser_esm.BX)(Stack.Z,(0,tslib_es6.pi)({direction:"row",justifyContent:"space-between",sx:{marginTop:"1.2rem",gap:"1rem"}},{children:[(0,emotion_react_jsx_runtime_browser_esm.tZ)(Button.Z,(0,tslib_es6.pi)({variant:"text",color:"secondary",size:"large",onClick:onCancel,sx:{flex:1}},{children:t("orders:phrases:cancel")})),(0,emotion_react_jsx_runtime_browser_esm.tZ)(Button.Z,(0,tslib_es6.pi)({size:"large",sx:{flex:1},onClick:onSubmit},{children:t("orders:addressDrawer:useAddress")}))]}))]}))})})}),[newAddressForm,editingAddress,addressInfo,editingAddressType,selectedAddress,onSelectEmptyAddress,t,addresses,onClickAddNewAddress,onCancel,onSubmit,addressInfoForForm,areAllSenderReturnAddressesEqual,onCloseForm,combineSenderReturnAddresses,onFormFirstLoad,onUpdateAddress,isSelectedReturnInSavedAddresses,isSelectedSenderInSavedAddresses,hasRecipientPhoneRequireError]);return(0,emotion_react_jsx_runtime_browser_esm.tZ)(MobileAndDesktopDrawer.Z,(0,tslib_es6.pi)({drawerProps:{transitionDuration:0},title:titleForDrawer(editingAddressType,t),open:!0,onBack:newAddressForm?onCloseForm:onCancel,onClose:onCancel,fullWidth:!0,fullHeight:!0,persistent,paperBoxShadow:"none"},{children:Content}))},AddressMultiselectDrawer_stories={title:"Order V2 / Drawers / AddressMultiselectDrawer",component:Drawers_AddressMultiselectDrawer,parameters:{layout:"centered"},argTypes:{setSearchBarQuery:{action:"set-query"}}};var AddressMultiselectDrawerWithTranslate=(0,translate.Iu)("orders")(Drawers_AddressMultiselectDrawer),addresses=[{name:"John Doe",company:"Shippo",email:"joshn.doe@shippo.com",phone:"+12220200301",street1:"2611 Pleasent Ave",street2:"APT 112",streetNumber:"2611",city:"Minneapolis",state:"MN",zip:"55415",country:{name:"United States",iso2:"US"},id:1232,objectId:"1232",objectState:"",objectPurpose:"",objectSource:"",objectCreated:new Date,objectUpdated:new Date,objectOwner:"1234",street3:"Pleasent Ave",isResidential:!1,ip:"",messages:[],metadata:"",test:!1}],Regular=function(args){return(0,emotion_react_jsx_runtime_browser_esm.tZ)(es.zt,(0,tslib_es6.pi)({store:(0,redux.MT)((0,redux.UY)(reducers.Z))},{children:(0,emotion_react_jsx_runtime_browser_esm.tZ)(AddressMultiselectDrawerWithTranslate,(0,tslib_es6.pi)({},args))}))}.bind({});Regular.args={addresses:[{name:"John Doe",company:"Shippo",email:"joshn.doe@shippo.com",phone:"+12220200301",street1:"2611 Pleasent Ave",street2:"APT 112",streetNumber:"2611",city:"Minneapolis",state:"MN",zip:"55415",country:{name:"United States",iso2:"US"},id:1232}],addressInfo:{to:addresses[0],sender:addresses[0],return:addresses[0]}},Regular.parameters={...Regular.parameters,docs:{...Regular.parameters?.docs,source:{originalSource:"(args: AddressMultiselectDrawerProps) => <Provider store={createStore(combineReducers(reducers))}>\n    <AddressMultiselectDrawerWithTranslate {...args} />\n  </Provider>",...Regular.parameters?.docs?.source}}}}}]);