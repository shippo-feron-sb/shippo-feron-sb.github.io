"use strict";(self.webpackChunk_shippo_feron=self.webpackChunk_shippo_feron||[]).push([[5686],{"./app/components/SnackbarAlert/SnackbarAlert.tsx":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/shared/NoticeAlert/index.js")},"./app/components/SnackbarAlert/hooks.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__("./node_modules/react/index.js")},"./app/contexts/GlobalComponentsProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>useGlobalComponentsContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),GlobalComponentsContext=(__webpack_require__("./node_modules/react-redux/es/index.js"),__webpack_require__("./app/components/SnackbarAlert/SnackbarAlert.tsx"),__webpack_require__("./app/components/SnackbarAlert/hooks.ts"),__webpack_require__("./app/utils/translate.ts"),(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({snackbar:{addSnackbarActionAlert:function(){},addSnackbarAlert:function(){}}})),useGlobalComponentsContext=function(){return{snackbar:(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(GlobalComponentsContext).snackbar}}},"./app/utils/translate.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{In:()=>react_i18next__WEBPACK_IMPORTED_MODULE_0__.In,Tl:()=>react_i18next__WEBPACK_IMPORTED_MODULE_0__.Tl,x6:()=>react_i18next__WEBPACK_IMPORTED_MODULE_0__.x6});var react_i18next__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js")},"./app/components/StoreConnection/components/StoreConnectionStore.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Amazon:()=>Amazon,Etsy:()=>Etsy,Shopify:()=>Shopify,Walmart:()=>Walmart,Wix:()=>Wix,default:()=>StoreConnectionStore_stories});var _a,StoreConnectionView_a,emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),stores=__webpack_require__("./app/components/StoreConnection/stores.ts"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),styled=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),Box=__webpack_require__("./node_modules/@goshippo/components/esm/Box/Box.js"),colors=__webpack_require__("./node_modules/@goshippo/components/esm/styles/colors.js"),shippoTheme=__webpack_require__("./node_modules/@goshippo/components/esm/styles/shippoTheme.js"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.js"),types=__webpack_require__("./app/pages/Onboarding/types.ts"),onboarding=__webpack_require__("./app/pages/Onboarding/utils/onboarding.ts"),tracking=__webpack_require__("./app/pages/Onboarding/utils/tracking.ts"),translate=__webpack_require__("./app/utils/translate.ts"),Typography=__webpack_require__("./node_modules/@goshippo/components/esm/Typography/Typography.js"),Button=__webpack_require__("./node_modules/@goshippo/components/esm/Button/Button.js"),ArrowBack=__webpack_require__("./node_modules/@mui/icons-material/esm/ArrowBack.js"),ArrowForward=__webpack_require__("./node_modules/@mui/icons-material/esm/ArrowForward.js"),grid_line=__webpack_require__("./app/assets/grid_line.svg"),grid_line_default=__webpack_require__.n(grid_line),GridBackground=(0,styled.Ay)(Box.A)({backgroundColor:"#25d695",backgroundImage:"url(".concat(grid_line_default(),")"),backgroundSize:"940px"}),StyledHeaderTypography=(0,styled.Ay)(Typography.A)(((_a={fontSize:"1.75rem",lineHeight:"120%"})[shippoTheme.A.breakpoints.up("sm")]={fontSize:"2.5rem"},_a)),StyledFooter=(0,styled.Ay)(Box.A)({borderTop:"1px solid #d9d9d9",boxShadow:"0 -4px 4px rgba(0, 0, 0, 0.08)"}),TranslatedStoreConnectionHeader=(0,translate.Tl)("stores")((function(_a){var t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.Y)(GridBackground,(0,tslib_es6.Cl)({display:"flex",gridArea:"header",justifyContent:{sm:"flex-start",xs:"center"},padding:{sm:shippoTheme.A.spacing(5,10),xs:shippoTheme.A.spacing(3,1)}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledHeaderTypography,(0,tslib_es6.Cl)({component:"h1",variant:"h1"},{children:t("connections.header")}))}))})),TranslatedStoreConnectionFooter=(0,translate.Tl)("stores")((function(_a){var onBack=_a.onBack,onContinue=_a.onContinue,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledFooter,(0,tslib_es6.Cl)({alignItems:"center",display:"flex",gap:shippoTheme.A.spacing(2),gridArea:"footer",justifyContent:"space-between",padding:{lg:shippoTheme.A.spacing(1.5,10),xs:shippoTheme.A.spacing(1.5,1)}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({onClick:onBack,size:"large",startIcon:(0,emotion_react_jsx_runtime_browser_esm.Y)(ArrowBack.A,{}),sx:{minWidth:{sm:shippoTheme.A.spacing(20)}},variant:"text"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"inherit",component:"span",variant:"bodyEmphasized"},{children:t("connections.buttons.back")}))})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({color:"primary",endIcon:(0,emotion_react_jsx_runtime_browser_esm.Y)(ArrowForward.A,{}),onClick:onContinue,size:"large",sx:{minWidth:{sm:shippoTheme.A.spacing(20)}}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"inherit",component:"span",variant:"bodyEmphasized"},{children:t("connections.buttons.continue")}))}))]}))})),StoreConnectionContent=function(_a){var children=_a.children;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Box.A,(0,tslib_es6.Cl)({gridArea:"main",overflow:"auto",padding:{sm:shippoTheme.A.spacing(7,2),xs:shippoTheme.A.spacing(3,2)}},{children}))},StoreConnectionLayout=function(_a){var children=_a.children;return(0,emotion_react_jsx_runtime_browser_esm.FD)(Box.A,(0,tslib_es6.Cl)({display:"grid",gridTemplateAreas:"'header' 'main' 'footer'",gridTemplateRows:"auto 1fr auto",height:"100%"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(TranslatedStoreConnectionHeader,{}),children]}))},Link=__webpack_require__("./node_modules/@goshippo/components/esm/Link/Link.js"),Stack=__webpack_require__("./node_modules/@goshippo/components/esm/Stack/Stack.js"),CountryField=__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/shared/CountryField/index.js"),countries=__webpack_require__("./app/constants/countries.ts"),TextField=__webpack_require__("./node_modules/@goshippo/components/esm/TextField/TextField.js"),validations=__webpack_require__("./app/utils/validations.ts"),validationByType={url:function(value){return(0,validations.Gz)(value)||"validations:url"}},FormFieldMap={country:function(_a){var _b=_a.fieldConfig,defaultValue=_b.defaultValue,errorText=_b.errorText,label=_b.label,name=_b.name,t=_a.t,control=(0,index_esm.xW)().control;return(0,emotion_react_jsx_runtime_browser_esm.Y)(index_esm.xI,{control,defaultValue,name,render:function(_a){var _b,_c=_a.field,onChange=_c.onChange,ref=_c.ref,value=_c.value,fieldProps=(0,tslib_es6.Tt)(_c,["onChange","ref","value"]),formState=_a.formState;return(0,emotion_react_jsx_runtime_browser_esm.Y)(CountryField.Ay,(0,tslib_es6.Cl)({},fieldProps,{defaultCountry:defaultValue?countries.Xr[defaultValue]:void 0,error:Boolean(formState.errors[name]),formBaseName:"",helperText:null===(_b=formState.errors[name])||void 0===_b?void 0:_b.message,inputRef:ref,label:t(label),name,onChange:function(country){return onChange(null==country?void 0:country.iso2)},value:countries.Xr[value]||void 0}))},rules:{required:t(errorText)}})},input:function(_a){var _b=_a.fieldConfig,defaultValue=_b.defaultValue,errorText=_b.errorText,_c=_b.inputType,inputType=void 0===_c?"text":_c,label=_b.label,name=_b.name,placeholder=_b.placeholder,t=_a.t,control=(0,index_esm.xW)().control;return(0,emotion_react_jsx_runtime_browser_esm.Y)(index_esm.xI,{control,defaultValue,name,render:function(_a){var _b,_c=_a.field,ref=_c.ref,fieldProps=(0,tslib_es6.Tt)(_c,["ref"]),errors=_a.formState.errors;return(0,emotion_react_jsx_runtime_browser_esm.Y)(TextField.A,(0,tslib_es6.Cl)({error:Boolean(errors[name]),fullWidth:!0,helperText:(null===(_b=errors[name])||void 0===_b?void 0:_b.message)&&t(errors[name].message),inputRef:ref,label:t(label),placeholder:t(placeholder),type:inputType},fieldProps))},rules:{required:errorText,validate:validationByType[inputType]}})}},StoreConnectionForm=function(_a){var inputFields=_a.inputFields,onSubmit=_a.onSubmit,t=_a.t;return(null==inputFields?void 0:inputFields.length)?(0,emotion_react_jsx_runtime_browser_esm.Y)(Box.A,(0,tslib_es6.Cl)({mt:shippoTheme.A.spacing(1)},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("form",(0,tslib_es6.Cl)({onSubmit},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Box.A,(0,tslib_es6.Cl)({display:"flex",flexDirection:"column",gap:shippoTheme.A.spacing(4)},{children:inputFields.map((function(inputField){var InputComponent=FormFieldMap[inputField.type];return(0,emotion_react_jsx_runtime_browser_esm.Y)(InputComponent,{fieldConfig:inputField,t},inputField.name)}))}))}))})):null},renderDescriptionComponents=function(components,t){return void 0===components&&(components=[]),components.map((function(_a){var href=_a.href,key=_a.key,label=_a.label;if("link"===_a.type)return(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({color:"primary",href,target:"_blank"},{children:t(label)}),key)}))},TranslatedStoreConnectionStore=(0,translate.Tl)(["stores","validations"])((function(_a){var onSubmit=_a.onSubmit,_b=_a.store,description=_b.description,descriptionComponents=_b.descriptionComponents,inputFields=_b.inputFields,logo=_b.logo,name=_b.name,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({flexDirection:"column",gap:shippoTheme.A.spacing(3)},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack.A,(0,tslib_es6.Cl)({alignItems:"center",height:shippoTheme.A.spacing(9),justifyContent:"center"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:name,src:logo})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"body",whiteSpace:"pre-line"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(translate.x6,{components:(0,tslib_es6.fX)([(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{children:t("connections.buttons.continue")},"continue")],(0,tslib_es6.zs)(renderDescriptionComponents(descriptionComponents||[],t)),!1),i18nKey:description})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(StoreConnectionForm,{inputFields,onSubmit,t})]}))})),GlobalComponentsProvider=__webpack_require__("./app/contexts/GlobalComponentsProvider.tsx"),store_connect_service=__webpack_require__("./app/services/store-connect.service.ts"),StoreConnectionCard=(0,styled.Ay)(Box.A)(((StoreConnectionView_a={border:"1px solid ".concat(colors.T.borders),borderRadius:shippoTheme.A.spacing(2),boxSizing:"border-box",margin:"0 auto",maxWidth:"100%",padding:shippoTheme.A.spacing(3,2,5)})[shippoTheme.A.breakpoints.up("sm")]={padding:shippoTheme.A.spacing(3,5,5)},StoreConnectionView_a.width=shippoTheme.A.spacing(75),StoreConnectionView_a)),TranslatedStoreConnectionView=(0,translate.Tl)("stores")((function(_a){var store=_a.store,t=_a.t,history=(0,react_router.W6)(),storeConnectionForm=(0,index_esm.mN)({mode:"onBlur"}),startStoreConnection=function(_a){var t=_a.t,addSnackbarAlert=(0,GlobalComponentsProvider.s)().snackbar.addSnackbarAlert;return{startStoreConnection:function(store,params,beforeRedirect,handleRedirect){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var name,_a,serviceName,_b,setupService,redirectUrl,error_1,message,_c,_d;return(0,tslib_es6.YH)(this,(function(_e){switch(_e.label){case 0:name=store.name,_a=store.serviceName,serviceName=void 0===_a?name.toLowerCase():_a,_b=store.setupService,setupService=void 0===_b?store_connect_service.$O:_b,_e.label=1;case 1:return _e.trys.push([1,5,,6]),[4,setupService(serviceName,params)];case 2:return redirectUrl=_e.sent().data.redirectUrl,beforeRedirect?[4,beforeRedirect()]:[3,4];case 3:_e.sent(),_e.label=4;case 4:return handleRedirect&&handleRedirect(redirectUrl)?[2]:(window.location.href=redirectUrl,[3,6]);case 5:return error_1=_e.sent(),message=(null===(_d=null===(_c=error_1.response)||void 0===_c?void 0:_c.data)||void 0===_d?void 0:_d.error)||"CATCH_ALL",addSnackbarAlert(t("connections.errors.".concat(message),{store:name}),"error"),[3,6];case 6:return[2]}}))}))}}}({t}).startStoreConnection,handleFormSubmit=storeConnectionForm.handleSubmit((function(fieldValues){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,startStoreConnection(store,fieldValues,(function(){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,tracking.tb)("connect_store","connect_store",(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},(0,tracking.YF)(types.Ar.connectStore)),{current_step_name:"onboarding.".concat(store.name,"Connect")}))];case 1:return _a.sent(),[4,(0,tracking.IA)("".concat(store.name," Connection"))];case 2:return _a.sent(),(0,onboarding.pt)(),[2]}}))}))}))];case 1:return _a.sent(),[2]}}))}))}));return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(StoreConnectionContent,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(StoreConnectionCard,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(index_esm.Op,(0,tslib_es6.Cl)({},storeConnectionForm,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(TranslatedStoreConnectionStore,{onSubmit:handleFormSubmit,store})}))})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(TranslatedStoreConnectionFooter,{onBack:history.goBack,onContinue:handleFormSubmit})]})}));const StoreConnectionStore_stories={component:TranslatedStoreConnectionView,parameters:{layout:"fullscreen"},render:function(_a){var store=_a.store;return(0,emotion_react_jsx_runtime_browser_esm.Y)(react_router.fS,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(StoreConnectionLayout,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(TranslatedStoreConnectionView,{store})})})},title:"Store Connection/Stores"};var Shopify={args:{store:stores.aW.Shopify}},Amazon={args:{store:stores.aW.Amazon}},Wix={args:{store:stores.aW.Wix}},Etsy={args:{store:stores.aW.Etsy}},Walmart={args:{store:stores.aW.Walmart}};Shopify.parameters={...Shopify.parameters,docs:{...Shopify.parameters?.docs,source:{originalSource:"{\n  args: {\n    store: StoreConnectionsConfigurations.Shopify\n  }\n}",...Shopify.parameters?.docs?.source}}},Amazon.parameters={...Amazon.parameters,docs:{...Amazon.parameters?.docs,source:{originalSource:"{\n  args: {\n    store: StoreConnectionsConfigurations.Amazon\n  }\n}",...Amazon.parameters?.docs?.source}}},Wix.parameters={...Wix.parameters,docs:{...Wix.parameters?.docs,source:{originalSource:"{\n  args: {\n    store: StoreConnectionsConfigurations.Wix\n  }\n}",...Wix.parameters?.docs?.source}}},Etsy.parameters={...Etsy.parameters,docs:{...Etsy.parameters?.docs,source:{originalSource:"{\n  args: {\n    store: StoreConnectionsConfigurations.Etsy\n  }\n}",...Etsy.parameters?.docs?.source}}},Walmart.parameters={...Walmart.parameters,docs:{...Walmart.parameters?.docs,source:{originalSource:"{\n  args: {\n    store: StoreConnectionsConfigurations.Walmart\n  }\n}",...Walmart.parameters?.docs?.source}}}}}]);