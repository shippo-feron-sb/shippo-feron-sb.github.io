"use strict";(self.webpackChunk_shippo_feron=self.webpackChunk_shippo_feron||[]).push([[4499],{"./app/pages/StoreConnections/store/store-connect.actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var StoreConnectActionKeys;__webpack_require__.d(__webpack_exports__,{I:()=>startStoreConnect,U:()=>StoreConnectActionKeys}),function(StoreConnectActionKeys){StoreConnectActionKeys.START_STORE_CONNECT="START_STORE_CONNECT"}(StoreConnectActionKeys||(StoreConnectActionKeys={}));var startStoreConnect=function(storeSelection,readyForUrl,shippoLocation,params){return{payload:{params,readyForUrl,shippoLocation,storeSelection},type:StoreConnectActionKeys.START_STORE_CONNECT}}},"./app/services/stores.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CF:()=>fetchLegacyStores,hO:()=>fetchStores});var _services_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/services/api.ts"),fetchStores=function(){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.get("ui/stores?connected=True&results=50")},fetchLegacyStores=function(){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.get("ui/shops")}},"./app/pages/Onboarding/components/OnboardingLayout.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AddYourOrder:()=>AddYourOrder,ChoosePlan:()=>ChoosePlan,default:()=>OnboardingLayout_stories});var templateObject_1,OnboardingHeader_templateObject_1,OnboardingLayout_templateObject_1,templateObject_2,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),Button=__webpack_require__("./node_modules/@goshippo/components/esm/Button/Button.js"),ArrowBack=__webpack_require__("./node_modules/@mui/icons-material/esm/ArrowBack.js"),shippoTheme=__webpack_require__("./node_modules/@goshippo/components/esm/styles/shippoTheme.js"),ArrowForward=__webpack_require__("./node_modules/@mui/icons-material/esm/ArrowForward.js"),react=__webpack_require__("./node_modules/react/index.js"),react_sdk=__webpack_require__("./node_modules/@optimizely/react-sdk/dist/react-sdk.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),stores=__webpack_require__("./app/components/StoreConnection/stores.ts"),constants_stores=__webpack_require__("./app/constants/stores.ts"),store_connect_actions=__webpack_require__("./app/pages/StoreConnections/store/store-connect.actions.ts"),stores_service=__webpack_require__("./app/services/stores.service.ts"),newRelic=__webpack_require__("./app/utils/newRelic/newRelic.ts"),types=__webpack_require__("./app/pages/Onboarding/types.ts"),onboarding=__webpack_require__("./app/pages/Onboarding/utils/onboarding.ts"),tracking=__webpack_require__("./app/pages/Onboarding/utils/tracking.ts"),OnboardingContext=(0,react.createContext)(null),Box=((0,react_sdk.Fc)((function(_a){var children=_a.children,optimizely=_a.optimizely,_b=(0,tslib_es6.zs)((0,react.useState)(""),2),header=_b[0],setHeader=_b[1],_c=(0,tslib_es6.zs)((0,react.useState)([]),2),footerActions=_c[0],setFooterActions=_c[1],_d=(0,tslib_es6.zs)((0,react.useState)(void 0),2),containerStyle=_d[0],setContainerStyle=_d[1],history=(0,react_router.W6)(),dispatch=(0,es.wA)();return(0,emotion_react_jsx_runtime_browser_esm.Y)(OnboardingContext.Provider,(0,tslib_es6.Cl)({value:{containerStyle,footerActions,goToNextStep:function(additionalData){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var stepCompletePlan,storeResult,error_1,stepCompleteConnectStore,storeAsset,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:switch(history.location.pathname){case types.PA.plan:return[3,1];case types.PA.connectStore:return[3,6]}return[3,10];case 1:if(stepCompletePlan=(0,tracking.YF)(types.Ar.plan),additionalData.selectedPlan===types.tz.api)return(0,tracking.tb)("plan","api",stepCompletePlan),(0,tracking.IA)("API"),(0,onboarding.pt)(),window.location.assign("https://portal-dev-qa.shippodev.com"),[2];(0,tracking.tb)("plan","advance",stepCompletePlan),_c.label=2;case 2:return _c.trys.push([2,4,,5]),[4,(0,stores_service.hO)()];case 3:return storeResult=_c.sent(),(null===(_b=null==storeResult?void 0:storeResult.data)||void 0===_b?void 0:_b.count)?((0,tracking.IA)("orders"),(0,onboarding.pt)(),history.push("/orders"),[2]):[3,5];case 4:return error_1=_c.sent(),newRelic.S.noticeError("Failed to fetch stores",{error:error_1}),[3,5];case 5:return history.push(types.PA.connectStore),[2];case 6:return stepCompleteConnectStore=(0,tracking.YF)(types.Ar.addOrders),additionalData.orderImportMethod===types.us.manual?((0,tracking.IA)("Manual"),(0,onboarding.pt)(),(0,tracking.tb)("connect_store","manual-order",(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},stepCompleteConnectStore),{store_connection_started:"Manual Order"})),history.push("/orders/create"),[2]):additionalData.orderImportMethod===types.us.csvImport?((0,tracking.IA)("CSV"),(0,onboarding.pt)(),(0,tracking.tb)("connect_store","csv-upload",(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},stepCompleteConnectStore),{store_connection_started:"CSV Upload"})),history.push("/orders/csv-import"),[2]):additionalData.orderImportMethod?stores.aW[additionalData.orderImportMethod]&&function(storeConfig,optimizely){return!storeConfig.featureFlagName||!!optimizely&&optimizely.isFeatureEnabled(storeConfig.featureFlagName)}(stores.aW[additionalData.orderImportMethod],optimizely)?[4,(0,tracking.tb)("connect_store","connect_store",(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},stepCompleteConnectStore),{store_connection_started:additionalData.orderImportMethod}))]:[3,8]:[3,9];case 7:return _c.sent(),history.push("/connect/".concat(additionalData.orderImportMethod.toLowerCase(),"?shippo_location=").concat(encodeURIComponent(history.location.pathname))),[2];case 8:(0,tracking.IA)("Store"),(0,onboarding.pt)(),storeAsset=constants_stores.tT[additionalData.orderImportMethod],(0,tracking.tb)("connect_store","connect_store",(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},stepCompleteConnectStore),{store_connection_started:null==storeAsset?void 0:storeAsset.name})),dispatch((0,store_connect_actions.I)(storeAsset,!1,history.location.pathname)),_c.label=9;case 9:case 10:return[2]}}))}))},goToPreviousStep:function(){history.location.pathname!==types.PA.connectStore||history.push(types.PA.plan)},header,setContainerStyle,setFooterActions,setHeader}},{children}))})),__webpack_require__("./node_modules/@goshippo/components/esm/Box/Box.js")),emotion_styled_browser_esm=__webpack_require__("./node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),FooterContainer=(0,emotion_styled_browser_esm.A)(Box.A)(templateObject_1||(templateObject_1=(0,tslib_es6.ue)(["\n  flex: 0 0 ",";\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 ",";\n  border-top: 1px solid #d9d9d9;\n  box-shadow: 0px -4px 4px 0px #00000014;\n  "," {\n    padding: 0 ",";\n  }\n"],["\n  flex: 0 0 ",";\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 ",";\n  border-top: 1px solid #d9d9d9;\n  box-shadow: 0px -4px 4px 0px #00000014;\n  "," {\n    padding: 0 ",";\n  }\n"])),shippoTheme.A.spacing(9.875),shippoTheme.A.spacing(5),shippoTheme.A.breakpoints.down("lg"),shippoTheme.A.spacing(1)),OnboardingFooter=function(_a){var footerActions=_a.footerActions;return(0,emotion_react_jsx_runtime_browser_esm.Y)(FooterContainer,{children:null==footerActions?void 0:footerActions.map((function(action,index){return(0,emotion_react_jsx_runtime_browser_esm.Y)(Box.A,{children:action},index)}))})},Typography=__webpack_require__("./node_modules/@goshippo/components/esm/Typography/Typography.js"),grid_line=__webpack_require__("./app/assets/grid_line.svg"),StyledHeaderBoxContainer=(0,emotion_styled_browser_esm.A)(Box.A)(OnboardingHeader_templateObject_1||(OnboardingHeader_templateObject_1=(0,tslib_es6.ue)(["\n  background-image: url(",");\n  background-size: 1632px 4650px;\n  background-color: #25d695;\n  flex: 0 0 ",";\n  display: flex;\n  align-items: center;\n  width: 100%;\n  .header {\n    margin-left: ",";\n  }\n  "," {\n    height: ",";\n    justify-content: center;\n    .header {\n      font-size: ",";\n      margin-left: ",";\n    }\n  }\n"],["\n  background-image: url(",");\n  background-size: 1632px 4650px;\n  background-color: #25d695;\n  flex: 0 0 ",";\n  display: flex;\n  align-items: center;\n  width: 100%;\n  .header {\n    margin-left: ",";\n  }\n  "," {\n    height: ",";\n    justify-content: center;\n    .header {\n      font-size: ",";\n      margin-left: ",";\n    }\n  }\n"])),grid_line,shippoTheme.A.spacing(16),shippoTheme.A.spacing(10),shippoTheme.A.breakpoints.down("sm"),shippoTheme.A.spacing(10),shippoTheme.A.typography.h6,shippoTheme.A.spacing(0)),OnboardingHeader=function(_a){var header=_a.header;return(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledHeaderBoxContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({className:"header",component:"h1",variant:"h1"},{children:header}))})},StyledContainer=(0,emotion_styled_browser_esm.A)(Box.A)(OnboardingLayout_templateObject_1||(OnboardingLayout_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n"],["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n"]))),MainContent=(0,emotion_styled_browser_esm.A)(Box.A)(templateObject_2||(templateObject_2=(0,tslib_es6.ue)(["\n  flex: 1 1 auto;\n  display: flex;\n  width: 100%;\n  overflow-y: auto;\n  box-sizing: border-box;\n"],["\n  flex: 1 1 auto;\n  display: flex;\n  width: 100%;\n  overflow-y: auto;\n  box-sizing: border-box;\n"]))),OnboardingLayout=function(props){var _a=function(){var context=(0,react.useContext)(OnboardingContext);if(!context)throw new Error("OnboardingContext is not defined");return context}(),containerStyle=_a.containerStyle,footerActions=_a.footerActions,header=_a.header,children=props.children;return(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(OnboardingHeader,{header}),(0,emotion_react_jsx_runtime_browser_esm.Y)(MainContent,(0,tslib_es6.Cl)({sx:(0,tslib_es6.Cl)({},containerStyle)},{children})),(0,emotion_react_jsx_runtime_browser_esm.Y)(OnboardingFooter,{footerActions:footerActions||[]})]})};const OnboardingLayout_stories={argTypes:{onBack:{action:"onBack"},onNext:{action:"onNext"}},component:OnboardingLayout,parameters:{backgrounds:{default:"grey"},layout:"fullscreen"},title:"Onboarding / Layout"};var AddYourOrderContextValues={containerStyle:{alignItems:"center",display:"flex",justifyContent:"center"},footerActions:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Button.A,(0,tslib_es6.Cl)({size:"large",sx:{fontSize:"0.9rem"},variant:"text"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ArrowBack.A,{sx:{marginRight:shippoTheme.A.spacing(1)}}),"Back"]}),"1"),(0,emotion_react_jsx_runtime_browser_esm.FD)(Button.A,(0,tslib_es6.Cl)({size:"large",sx:{fontSize:"0.9rem",width:shippoTheme.A.spacing(20)},variant:"contained"},{children:["Next",(0,emotion_react_jsx_runtime_browser_esm.Y)(ArrowForward.A,{sx:{marginLeft:shippoTheme.A.spacing(1)}})]}),"2")],goToNextStep:function(){return new Promise((function(){}))},goToPreviousStep:function(){},header:"Add your orders",setContainerStyle:function(){},setFooterActions:function(){},setHeader:function(){}},AddYourOrder=function(args){return(0,emotion_react_jsx_runtime_browser_esm.Y)(OnboardingContext.Provider,(0,tslib_es6.Cl)({value:AddYourOrderContextValues},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(OnboardingLayout,(0,tslib_es6.Cl)({},args,{children:"Hello world"}))}))}.bind({}),ChoosePlanContextValues={containerStyle:{alignItems:"center",display:"flex",justifyContent:"center"},footerActions:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({href:"https://www.shippo.com/pricing/",size:"large",sx:{fontSize:"0.9rem"},target:"_blank",variant:"text"},{children:"Learn more"}),"1"),(0,emotion_react_jsx_runtime_browser_esm.FD)(Button.A,(0,tslib_es6.Cl)({size:"large",sx:{fontSize:"0.9rem",width:shippoTheme.A.spacing(20)},variant:"contained"},{children:["Next",(0,emotion_react_jsx_runtime_browser_esm.Y)(ArrowForward.A,{sx:{marginLeft:shippoTheme.A.spacing(1)}})]}),"2")],goToNextStep:function(){return new Promise((function(){}))},goToPreviousStep:function(){},header:"Choose plan",setContainerStyle:function(){},setFooterActions:function(){},setHeader:function(){}},ChoosePlan=function(args){return(0,emotion_react_jsx_runtime_browser_esm.Y)(OnboardingContext.Provider,(0,tslib_es6.Cl)({value:ChoosePlanContextValues},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(OnboardingLayout,(0,tslib_es6.Cl)({},args,{children:"Hello world"}))}))}.bind({});AddYourOrder.parameters={...AddYourOrder.parameters,docs:{...AddYourOrder.parameters?.docs,source:{originalSource:"(args: OnboardingLayoutProps) => <OnboardingContext.Provider value={AddYourOrderContextValues}>\n    <OnboardingLayout {...args}>Hello world</OnboardingLayout>\n  </OnboardingContext.Provider>",...AddYourOrder.parameters?.docs?.source}}},ChoosePlan.parameters={...ChoosePlan.parameters,docs:{...ChoosePlan.parameters?.docs,source:{originalSource:"(args: OnboardingLayoutProps) => <OnboardingContext.Provider value={ChoosePlanContextValues}>\n    <OnboardingLayout {...args}>Hello world</OnboardingLayout>\n  </OnboardingContext.Provider>",...ChoosePlan.parameters?.docs?.source}}}}}]);