"use strict";(self.webpackChunk_shippo_feron=self.webpackChunk_shippo_feron||[]).push([[240],{"./app/types/CustomsDeclaration.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{gG:()=>getCustomsPhoneErrors});var _constants_countries__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/constants/countries.ts"),_Address__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./app/constants/customsDeclaration.ts"),__webpack_require__("./app/types/Address.ts"));function getCustomsPhoneErrors(_a){var addressFrom=_a.addressFrom,addressTo=_a.addressTo,isCrossBorderShipment=function requiresCustomsDeclaration(a,b){return!(!a||!b)&&(a.country&&a.country.iso2===_constants_countries__WEBPACK_IMPORTED_MODULE_0__.ZP.US.iso2&&b.country&&b.country.iso2===_constants_countries__WEBPACK_IMPORTED_MODULE_0__.ZP.US.iso2?(0,_Address__WEBPACK_IMPORTED_MODULE_2__.dJ)(a)||(0,_Address__WEBPACK_IMPORTED_MODULE_2__.dJ)(b)||(0,_Address__WEBPACK_IMPORTED_MODULE_2__.Ao)(a)||(0,_Address__WEBPACK_IMPORTED_MODULE_2__.Ao)(b):!!a.country&&!!b.country&&a.country.iso2!==b.country.iso2)}(addressFrom,addressTo);return{hasPhoneNumberRequiredError:isCrossBorderShipment&&!addressFrom.phone,hasPhoneNumberRequiredWarning:isCrossBorderShipment&&!(null==addressTo?void 0:addressTo.phone)}}},"./app/types/LineItem.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{hM:()=>lineItemHasWeight});__webpack_require__("./app/constants/countries.ts"),__webpack_require__("./app/constants/currency.ts"),__webpack_require__("./node_modules/moment/moment.js");function lineItemHasWeight(lineItem){return null!==lineItem.weightUnit&&0!==lineItem.quantity&&!!lineItem.totalWeight&&0!==parseFloat(lineItem.totalWeight)}},"./app/types/Order.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$I:()=>hasRecipientAddressError,$x:()=>fromWebOrderToOrderToTagsMapping,Ef:()=>isFulfilledInShippoOldExperience,KD:()=>isFulfilled,Lq:()=>orderHasWeight,Qe:()=>OrderValidationStatus,ge:()=>isFulfilledOutsideShippo,iF:()=>OrderStatus,j2:()=>isCancelled,si:()=>orderHasAmount});__webpack_require__("./node_modules/moment/moment.js"),__webpack_require__("./app/types/Store.ts");var OrderStatus,OrderValidationStatus,OrderState,SyncStatus,_utils_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/utils/utils.ts"),_Address__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/types/Address.ts"),_LineItem__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__("./app/types/CustomsDeclaration.ts"),__webpack_require__("./app/types/LineItem.ts")),_Transaction__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__("./app/types/OrderBatchEntry.ts"),__webpack_require__("./app/types/OrdersBatch.ts"),__webpack_require__("./app/types/Parcel.ts"),__webpack_require__("./app/types/Rate.ts"),__webpack_require__("./app/types/Transaction.ts"));function orderHasWeight(order){var orderWeight=order.weight&&parseFloat(order.weight);return orderWeight&&!isNaN(orderWeight)&&orderWeight>0&&!!order.weightUnit||order.lineItems.length>0&&order.lineItems.every(_LineItem__WEBPACK_IMPORTED_MODULE_5__.hM)}function orderHasAmount(order){return null!==order.currency&&((0,_utils_utils__WEBPACK_IMPORTED_MODULE_2__.DX)(order.totalPrice)&&0!==parseFloat(order.totalPrice)||(0,_utils_utils__WEBPACK_IMPORTED_MODULE_2__.DX)(order.subtotalPrice)&&0!==parseFloat(order.subtotalPrice))}function isCancelled(order){return order.orderStatus===OrderStatus.CANCELLED}function isFulfilled(order){return order.orderStatus===OrderStatus.SHIPPED}function isPartiallyFulfilled(order){return order.orderStatus===OrderStatus.PARTIALLY_FULFILLED}function isRefundPending(order){var successfulLiveTransactions=order.transactions.filter((function(txn){return!txn.test&&txn.status!==_Transaction__WEBPACK_IMPORTED_MODULE_10__.LN.ERROR}));return 0!==successfulLiveTransactions.length&&successfulLiveTransactions.every((function(txn){return txn.status===_Transaction__WEBPACK_IMPORTED_MODULE_10__.LN.REFUNDPENDING}))}function isRefundRejected(order){var successfulLiveTransactions=order.transactions.filter((function(txn){return!txn.test&&txn.status!==_Transaction__WEBPACK_IMPORTED_MODULE_10__.LN.ERROR}));return 0!==successfulLiveTransactions.length&&successfulLiveTransactions.every((function(txn){return txn.status===_Transaction__WEBPACK_IMPORTED_MODULE_10__.LN.REFUNDREJECTED}))}function isRefunded(order){var successfulLiveTransactions=order.transactions.filter((function(txn){return!txn.test&&txn.status!==_Transaction__WEBPACK_IMPORTED_MODULE_10__.LN.ERROR}));return 0!==successfulLiveTransactions.length&&successfulLiveTransactions.every((function(txn){return txn.status===_Transaction__WEBPACK_IMPORTED_MODULE_10__.LN.REFUNDED}))}function getOrderState(order){return isPartiallyFulfilled(order)?0===order.transactions.length?OrderState.FULFILLED_OUTSIDE_SHIPPO:1===order.transactions.length?isRefunded(order)||isRefundRejected(order)||isRefundPending(order)?OrderState.PARTIALLY_FULFILLED_SINGLE_REFUND:OrderState.PARTIALLY_FULFILLED_SINGLE_LABEL:OrderState.PARTIALLY_FULFILLED_MULTIPLE_LABELS:isFulfilled(order)||isPartiallyFulfilled(order)?0===order.transactions.length?OrderState.FULFILLED_OUTSIDE_SHIPPO:isRefunded(order)?OrderState.REFUNDED:isRefundRejected(order)?OrderState.REFUND_REJECTED:isRefundPending(order)?OrderState.REFUND_PENDING:1===order.transactions.filter((function(transaction){return transaction.status===_Transaction__WEBPACK_IMPORTED_MODULE_10__.LN.SUCCESS})).length?OrderState.FULFILLED_SINGLE_LABEL:OrderState.FULFILLED_MULTIPLE_LABELS:isCancelled(order)?OrderState.CANCELLED:function isRefundedOutsideShippo(order){return order.orderStatus===OrderStatus.REFUNDED}(order)?OrderState.REFUNDED:OrderState.NOT_FULFILLED}function isFulfilledOutsideShippo(order){return getOrderState(order)===OrderState.FULFILLED_OUTSIDE_SHIPPO}function isFulfilledInShippoOldExperience(order){return isFulfilled(order)&&!order.parcel}!function(OrderStatus){OrderStatus.AWAITPAY="AWAITPAY",OrderStatus.VALID="VALID",OrderStatus.INVALID="INVALID",OrderStatus.PAID="PAID",OrderStatus.PARTIALLY_FULFILLED="PARTIALLY_FULFILLED",OrderStatus.SHIPPED="SHIPPED",OrderStatus.REFUNDED="REFUNDED",OrderStatus.CANCELLED="CANCELLED",OrderStatus.UNKNOWN="UNKNOWN",OrderStatus.GENERIC="GENERIC"}(OrderStatus||(OrderStatus={})),function(OrderValidationStatus){OrderValidationStatus.VALID="VALID",OrderValidationStatus.INVALID="INVALID"}(OrderValidationStatus||(OrderValidationStatus={})),function(OrderState){OrderState.CANCELLED="CANCELLED",OrderState.REFUNDED="REFUNDED",OrderState.REFUND_REJECTED="REFUND_REJECTED",OrderState.REFUND_PENDING="REFUND_PENDING",OrderState.FULFILLED_OUTSIDE_SHIPPO="FULFILLED_OUTSIDE_SHIPPO",OrderState.FULFILLED_SINGLE_LABEL="FULFILLED_SINGLE_LABEL",OrderState.FULFILLED_MULTIPLE_LABELS="FULFILLED_MULTIPLE_LABELS",OrderState.PARTIALLY_FULFILLED_SINGLE_LABEL="PARTIALLY_FULFILLED_SINGLE_LABEL",OrderState.PARTIALLY_FULFILLED_SINGLE_REFUND="PARTIALLY_FULFILLED_SINGLE_REFUND",OrderState.PARTIALLY_FULFILLED_MULTIPLE_LABELS="PARTIALLY_FULFILLED_MULTIPLE_LABELS",OrderState.NOT_FULFILLED="NOT_FULFILLED"}(OrderState||(OrderState={})),function(SyncStatus){SyncStatus.COMPLETE="COMPLETE",SyncStatus.IN_PROGRESS="IN_PROGRESS",SyncStatus.FAILED="FAILED"}(SyncStatus||(SyncStatus={}));function hasRecipientAddressError(order){return!!order&&!order.toAddress||!!(null==order?void 0:order.toAddress)&&_Address__WEBPACK_IMPORTED_MODULE_3__.I2(order.toAddress)}var fromWebOrderToOrderToTagsMapping=function(webOrder){var _a;return(_a={})[webOrder.object_id]=webOrder.tags||[],_a}},"./app/types/OrderBatchEntry.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ud:()=>getBatchEntriesIdsSortedByRank,j4:()=>isReadyForPurchase,fg:()=>requiresNewRates});__webpack_require__("./app/constants/currency.ts"),__webpack_require__("./node_modules/moment/moment.js"),__webpack_require__("./app/types/Parcel.ts"),__webpack_require__("./app/utils/businessRules.ts"),__webpack_require__("./app/types/Address.ts"),__webpack_require__("./app/types/CustomsDeclaration.ts"),__webpack_require__("./app/constants/countries.ts"),__webpack_require__("./app/constants/weight.ts");var OrdersBatch=__webpack_require__("./app/types/OrdersBatch.ts");function isReadyForPurchase(batchEntry){return!!batchEntry.shipmentObjectId&&batchEntry.objectStatus===OrdersBatch.jV.COMPLETE_SHIPMENT}function getBatchEntriesIdsSortedByRank(batchEntryIds,batchEntries){return batchEntryIds.map((function(beId){return batchEntries[beId]})).filter((function(be){return!!be})).sort((function(a,b){return a.partialFulfillmentRank-b.partialFulfillmentRank})).map((function(be){return be.id}))}function requiresNewRates(batchEntry){return!batchEntry||(batchEntry.objectStatus===OrdersBatch.jV.SHIPMENT_REQUEST_FAILED||batchEntry.objectStatus===OrdersBatch.jV.PENDING&&null===batchEntry.shipmentObjectId&&!!batchEntry.parcel)}},"./app/types/Parcel.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{au:()=>toJSON});__webpack_require__("./app/constants/distance.ts"),__webpack_require__("./app/constants/weight.ts");var _types_ParcelTemplate__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/types/ParcelTemplate.ts"),_types_CarrierParcelTemplate__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/types/CarrierParcelTemplate.ts");__webpack_require__("./app/types/SignatureConfirmation.ts");function toJSON(parcel){return{length:parcel.length,width:parcel.width,height:parcel.height,distance_unit:parcel.distanceUnit,weight:parcel.weight,mass_unit:parcel.weightUnit,user_parcel_template:parcel.userParcelTemplate&&(0,_types_ParcelTemplate__WEBPACK_IMPORTED_MODULE_2__.au)(parcel.userParcelTemplate),carrier_parcel_template:parcel.carrierParcelTemplate&&(0,_types_CarrierParcelTemplate__WEBPACK_IMPORTED_MODULE_3__.au)(parcel.carrierParcelTemplate),use_imported_order_weight:parcel.useImportedOrderWeight}}},"./app/utils/businessRules.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l$:()=>approximateServiceLevelNameFromToken});__webpack_require__("./app/components/Select/options.ts");var _a,_b,RuleTypes,automationRuleForm=__webpack_require__("./app/constants/automationRuleForm.ts"),operators=(__webpack_require__("./app/constants/countries.ts"),__webpack_require__("./app/constants/operators.ts"));__webpack_require__("./app/types/Address.ts"),__webpack_require__("./app/types/APIAddress.ts"),__webpack_require__("./app/types/ParcelTemplate.ts");!function(RuleTypes){RuleTypes.Insurance="INSURANCE",RuleTypes.ParcelTemplate="PARCEL_TEMPLATE"}(RuleTypes||(RuleTypes={}));(_a={})[operators.jT.EQ]={word:"is equal to",symbol:"="},_a[operators.jT.NEQ]={word:"is not equal to",symbol:"!="},_a[operators.jT.GT]={word:"is greater than",symbol:">"},_a[operators.jT.GTE]={word:"is greater than or equal to",symbol:">="},_a[operators.jT.LTE]={word:"is less than or equal to",symbol:"<="},_a[operators.jT.LT]={word:"is less than",symbol:"<"},_a[operators.jT.IN]={word:"is in",symbol:"in"},_a[operators.jT.STARTS_WITH]={word:"starts with",symbol:"starts with"},_a[operators.jT.ENDS_WITH]={word:"ends with",symbol:"ends with"},_a[operators.jT.INCLUDES]={word:"includes",symbol:"includes"};(_b={})[automationRuleForm.wQ.WEIGHT]={name:"Order weight",prefix:"Order weight"},_b[automationRuleForm.wQ.PRODUCT_NAME]={name:"Product name",prefix:"Product name"},_b[automationRuleForm.wQ.ITEM_SKU]={name:"Item SKU",prefix:"Item SKU"},_b[automationRuleForm.wQ.ORDER_ITEM_QUANTITY]={name:"Order item quantity",prefix:"Order item quantity"},_b[automationRuleForm.wQ.SHIPPING_DESTINATION]={name:"Shipping destination",prefix:"Shipping destination is"},_b[automationRuleForm.wQ.IS_INTERNATIONAL]={name:"Shipping destination",prefix:"Shipping destination is"},_b[automationRuleForm.wQ.SHIPPING_STATES]={name:"Shipping states",prefix:"Shipping to states in"},_b[automationRuleForm.wQ.SHIPPING_ZIPCODES]={name:"Shipping zip codes",prefix:"Shipping to zip codes in"},_b[automationRuleForm.wQ.SHIPPING_COUNTRIES]={name:"Shipping countries",prefix:"Shipping to countries including"};var approximateServiceLevelNameFromToken=function(token){return token.split("_").map((function(str){return str.charAt(0).toUpperCase()+str.slice(1)})).join(" ")}}}]);