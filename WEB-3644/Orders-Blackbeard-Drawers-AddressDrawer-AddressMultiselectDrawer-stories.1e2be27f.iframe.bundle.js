(self.webpackChunk_shippo_feron=self.webpackChunk_shippo_feron||[]).push([[1478],{"./app/assets/carriers/dhl_express.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"6806ccde39008fc09aee75c78f040990.svg"},"./app/assets/carriers/fedex.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"ceca6c481f96ff5740c0c6c243f4405f.svg"},"./app/assets/carriers/ups.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"9b63d9637405200a9eb3dc38bc1c631c.svg"},"./app/assets/carriers/usps.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"3e56917ce9c7ee00563f723f6d0a7b53.svg"},"./app/assets/icon-notes.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"96f19044456b7cb6d52fd111cba95754.svg"},"./app/assets/icons/arrow-left.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"3b71b9d593f617edaacbb31ee2623092.svg"},"./app/assets/icons/arrow-right.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"faa8d22d0420197c0b80c3ce1c3671e0.svg"},"./app/assets/icons/arrow-sea600.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"a16c3c4c1f584ccb16684eb161ba30e6.svg"},"./app/assets/icons/exclamation-circle.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"e86b1aa96d824f8e505d50cb8b3add1e.svg"},"./app/assets/icons/exclamation_circle_yellow.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"2c1271f28b91b31033fe49290c1c563e.svg"},"./app/assets/icons/icon_alert_info_filled.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"44f7f9a5bc5af9c9ba37d05ca78458c2.svg"},"./app/assets/icons/icon_carrierparcel.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"0902662931e8ef36b5b4ac4b0278da6c.svg"},"./app/assets/icons/icon_check_gray.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"6410d663d1e03ff3814c237226e364fd.svg"},"./app/assets/icons/icon_customdims.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"75ba0e943aecfae3952a06a031dbae7e.svg"},"./app/assets/icons/icon_customs_declaration.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"644d24dbf57bdc698e4b8697b67e7a4f.svg"},"./app/assets/icons/icon_package.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"1bad3c57d9286dc9926dfa65b7ab3920.svg"},"./app/assets/icons/icon_splitment_arrow.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"d36b35bea3a334c173d2f3d07d21f316.svg"},"./app/assets/icons/icon_success_green_bg.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"ed56c338a93ff308dea76cb399ba66c0.svg"},"./app/assets/icons/parcel.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"56ab8a103d4bdd2f175b2e80db603b7c.svg"},"./app/assets/icons/plus/plus.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"fcd883ccaf779b32201c3855b562796c.svg"},"./app/assets/icons/question_circle_gray.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"1aae4e36e05eeeb09c57239478f5d557.svg"},"./app/assets/icons/refresh/refresh_gray.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"2f0983ff4287434738c56b9586adf501.svg"},"./app/assets/icons/refresh/refresh_green.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"2d4bb6dd55eb2b288efc3e6a949cdc26.svg"},"./app/assets/logo/shippo_logo_charcoal.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"bc86cacb2396451bff66be931f9fee11.svg"},"./app/assets/shops/icons/shippo.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"1010a0e58f5213024b35b02974494507.svg"},"./app/assets/shops/vector/wix.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"cfab25b2a937d42cb7b2074c161f48cf.svg"},"./app/assets/register/godaddy.png":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"assets/2df62c2aba340f07b5eb082f6f0b0eb0.png"},"./app/assets/register/shopify.png":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"assets/e22e29f9e63b2fe25b246f2ba07b4676.png"},"./app/assets/register/square.png":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"assets/7341e990ef7dc4c225ea4453bc09a610.png"},"./app/assets/register/wix.png":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"assets/1fd1bc6ca9d2f9a0ff7635d71163fc05.png"},"./app/actions/auth.actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{BP:()=>finishRegister,EM:()=>initializeAnonymousGTM,I0:()=>clearAuthError,Jj:()=>registerSuccess,MA:()=>registerError,Sz:()=>userDidAuthenticate,jb:()=>resendVerificationError,kz:()=>register,oT:()=>resendVerificationSuccess});var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/actions/constants.ts"),register=function(payload,next){return{next,payload,type:_constants__WEBPACK_IMPORTED_MODULE_0__.t.REGISTER}},registerSuccess=function(sessionToken,next){return{payload:{next,sessionToken},type:_constants__WEBPACK_IMPORTED_MODULE_0__.t.REGISTER_SUCCESS}},registerError=function(err){return{payload:{error:err},type:_constants__WEBPACK_IMPORTED_MODULE_0__.t.REGISTER_ERROR}},resendVerificationSuccess=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_0__.t.RESEND_VERIFICATION_SUCCESS}},resendVerificationError=function(err){return{payload:{error:err},type:_constants__WEBPACK_IMPORTED_MODULE_0__.t.RESEND_VERIFICATION_ERROR}},userDidAuthenticate=function(payload){return{payload:{currentUser:payload.user},type:_constants__WEBPACK_IMPORTED_MODULE_0__.t.USER_DID_AUTHENTICATE}},initializeAnonymousGTM=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_0__.t.INITIALIZE_ANONYMOUS_TAG_MANAGER}},finishRegister=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_0__.t.FINISH_REGISTER}},clearAuthError=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_0__.t.RESET_AUTH_ERROR}}},"./app/actions/user.actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$4:()=>refreshUser,$A:()=>showPromoApplicationNotice,DA:()=>emailVerificationSuccess,DE:()=>publishAssetSuccess,EO:()=>uploadAndPublishLogoSuccess,ES:()=>fetchAssets,Ep:()=>updateBrandColorsSuccess,FX:()=>uploadAndPublishLogoError,GN:()=>publishAssetError,Iy:()=>updateCompanySuccess,K:()=>userSetUnauthenticated,Me:()=>fetchUserEntitlementsError,N1:()=>uploadAssetDraftError,NI:()=>clearAssetDraftError,Nf:()=>fetchUserEntitlementsSuccess,OM:()=>fetchAssetsError,Qu:()=>fetchUserError,T$:()=>updateFirstLabelPurchased,TD:()=>updateBrandColorsError,UG:()=>uploadAssetDraftSuccess,UI:()=>updateUserDefaultReturnAddress,UZ:()=>updateUserDefaultAddress,Ur:()=>fetchCompanyError,YL:()=>clearAssetDraftSuccess,Yj:()=>showEmailVerificationModal,Z5:()=>updateCompanyError,bL:()=>updateUserDefaultReturnServiceLevel,dw:()=>fetchCompanySuccess,ee:()=>updateActivationData,hD:()=>revertAssetDraftSuccess,hZ:()=>setIdVerificationStatus,lU:()=>fetchAssetsSuccess,ph:()=>updateUserDefaultServiceLevel,qw:()=>fetchUserEntitlements,rz:()=>updateHasFailedPayment,uF:()=>fetchCompany,yH:()=>revertAssetDraftError,zi:()=>fetchUserSuccess});__webpack_require__("./app/types/IDVerification.ts");var _constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/actions/constants.ts"),updateCompanySuccess=function(payload){return{payload,type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.COMPANY_UPDATE_SUCCESS}},updateCompanyError=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.COMPANY_UPDATE_ERROR}},fetchCompany=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.COMPANY_FETCH}},fetchCompanySuccess=function(payload){return{payload,type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.COMPANY_FETCH_SUCCESS}},fetchCompanyError=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.COMPANY_FETCH_ERROR}},fetchUserSuccess=function(payload){return{payload,type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_FETCH_SUCCESS}},fetchUserError=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_FETCH_ERROR}},fetchUserEntitlements=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ENTITLEMENTS_FETCH}},fetchUserEntitlementsSuccess=function(payload){return{payload,type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ENTITLEMENTS_FETCH_SUCCESS}},fetchUserEntitlementsError=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ENTITLEMENTS_FETCH_ERROR}},updateFirstLabelPurchased=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_FIRST_LABEL_PURCHASED}},updateUserDefaultServiceLevel=function(defaultProvider,defaultServiceLevel){return{defaultProvider,defaultServiceLevel,type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.UPDATE_USER_DEFAULT_SERVICE_LEVEL}},updateUserDefaultReturnServiceLevel=function(defaultReturnProvider,defaultReturnServiceLevel){return{defaultReturnProvider,defaultReturnServiceLevel,type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.UPDATE_USER_DEFAULT_RETURN_SERVICE_LEVEL}},updateUserDefaultAddress=function(payload){return{payload,type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.UPDATE_DEFAULT_ADDRESS}},updateUserDefaultReturnAddress=function(payload){return{payload,type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.UPDATE_DEFAULT_RETURN_ADDRESS}},userSetUnauthenticated=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_SET_UNAUTHENTICATED}},refreshUser=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_REFRESH}},fetchAssets=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSETS_FETCH}},fetchAssetsSuccess=function(assets){return{payload:{assets},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSETS_FETCH_SUCCESS}},fetchAssetsError=function(errorCode){return{payload:{errorCode},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSETS_FETCH_ERROR}},uploadAssetDraftSuccess=function(assetType,rank){return{payload:{assetType,rank},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSET_UPLOAD_DRAFT_SUCCESS}},uploadAssetDraftError=function(assetType,rank,errorCode){return{payload:{assetType,errorCode,rank},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSET_UPLOAD_DRAFT_ERROR}},clearAssetDraftSuccess=function(assetType,rank){return{payload:{assetType,rank},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSET_CLEAR_DRAFT_SUCCESS}},clearAssetDraftError=function(assetType,rank,errorCode){return{payload:{assetType,errorCode,rank},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSET_CLEAR_DRAFT_ERROR}},revertAssetDraftSuccess=function(assetType,rank){return{payload:{assetType,rank},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSET_REVERT_DRAFT_SUCCESS}},revertAssetDraftError=function(assetType,rank,errorCode){return{payload:{assetType,errorCode,rank},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSET_REVERT_DRAFT_ERROR}},publishAssetSuccess=function(assetType,rank){return{payload:{assetType,rank},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSET_PUBLISH_SUCCESS}},publishAssetError=function(assetType,rank,errorCode){return{payload:{assetType,errorCode,rank},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSET_PUBLISH_ERROR}},uploadAndPublishLogoSuccess=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSET_UPLOAD_AND_PUBLISH_LOGO_SUCCESS}},uploadAndPublishLogoError=function(errorCode){return{payload:{errorCode},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_ASSET_UPLOAD_AND_PUBLISH_LOGO_ERROR}},updateBrandColorsSuccess=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_BRAND_UPDATE_COLORS_SUCCESS}},updateBrandColorsError=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_BRAND_UPDATE_COLORS_ERROR}},setIdVerificationStatus=function(idVerification){return{payload:{idVerification},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_SET_VERIFICATION_STATUS}},updateActivationData=function(activation){return{payload:activation,type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.UPDATE_ACTIVATION_DATA}},showPromoApplicationNotice=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.SHOW_PROMO_APPLICATION_NOTICE}},showEmailVerificationModal=function(nextModalAction){return{payload:{nextModalAction},type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.SHOW_EMAIL_VERIFICATION_MODAL}},emailVerificationSuccess=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_EMAIL_VERIFICATION_SUCCESS}},updateHasFailedPayment=function(){return{type:_constants__WEBPACK_IMPORTED_MODULE_1__.t.USER_UPDATE_HAS_FAILED_PAYMENT}}},"./app/components/CountryFlag/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>components_CountryFlag});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),emotion_styled_browser_esm=__webpack_require__("./node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),constants=__webpack_require__("./app/styles/constants.ts"),Flag=(0,emotion_styled_browser_esm.A)("span")(templateObject_1||(templateObject_1=(0,tslib_es6.ue)(["\n  border: 1px solid ",";\n  border-radius: 2px;\n  height: fit-content;\n  align-self: center;\n  line-height: 0;\n  min-width: 0.875rem;\n"],["\n  border: 1px solid ",";\n  border-radius: 2px;\n  height: fit-content;\n  align-self: center;\n  line-height: 0;\n  min-width: 0.875rem;\n"])),constants.Tj.gray100);var templateObject_1;const components_CountryFlag=function(_a){var className=_a.className,country=_a.country,props=(0,tslib_es6.Tt)(_a,["className","country"]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(Flag,(0,tslib_es6.Cl)({className:"".concat(className||""," flag-icon flag-icon-").concat(country.toLocaleLowerCase())},props))}},"./app/components/OrderStatus/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>OrderStatus_ReturnOrderStatus,A:()=>OrderStatus_OrderStatus});var templateObject_1,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),Chip=__webpack_require__("./node_modules/@goshippo/components/esm/Chip/Chip.js"),Order=__webpack_require__("./app/types/Order.ts"),translate=__webpack_require__("./app/utils/translate.ts"),styled=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),colors=__webpack_require__("./node_modules/@goshippo/components/esm/styles/colors.js"),CancelledChipStyled=(0,styled.Ay)(Chip.A)(templateObject_1||(templateObject_1=(0,tslib_es6.ue)(["\n  background-color: ",";\n  color: ",";\n\n  & .custom-chip-icon.filled {\n    background-color: ",";\n  }\n"],["\n  background-color: ",";\n  color: ",";\n\n  & .custom-chip-icon.filled {\n    background-color: ",";\n  }\n"])),colors.T.secondary,colors.T.white,colors.T.white);const OrderStatus_OrderStatus=(0,translate.Tl)("orders")((function(_a){var status=_a.status,t=_a.t;if(!["AWAITPAY","CANCELLED","PAID","PARTIALLY_FULFILLED","SHIPPED"].includes(status))return null;return(0,emotion_react_jsx_runtime_browser_esm.Y)(react.Fragment,{children:function(){var defaultChipProps={label:t("orders:status:order:".concat(status)),size:"small"};switch(status){case Order.Re.PAID:return(0,emotion_react_jsx_runtime_browser_esm.Y)(Chip.A,(0,tslib_es6.Cl)({},defaultChipProps,{color:"success"}));case Order.Re.SHIPPED:return(0,emotion_react_jsx_runtime_browser_esm.Y)(Chip.A,(0,tslib_es6.Cl)({},defaultChipProps,{color:"info"}));case Order.Re.PARTIALLY_FULFILLED:return(0,emotion_react_jsx_runtime_browser_esm.Y)(Chip.A,(0,tslib_es6.Cl)({},defaultChipProps,{color:"success",iconVariant:"outlined"}));case Order.Re.AWAITPAY:return(0,emotion_react_jsx_runtime_browser_esm.Y)(Chip.A,(0,tslib_es6.Cl)({},defaultChipProps,{color:"warning",iconVariant:"outlined"}));case Order.Re.CANCELLED:return(0,emotion_react_jsx_runtime_browser_esm.Y)(CancelledChipStyled,(0,tslib_es6.Cl)({},defaultChipProps,{iconVariant:"filled"}));default:return null}}()})}));const OrderStatus_ReturnOrderStatus=(0,translate.Tl)("orders")((function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(Chip.A,{color:"info",icon:(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{}),label:(0,emotion_react_jsx_runtime_browser_esm.Y)(translate.x6,{i18nKey:"orders:status:order:RETURN"}),size:"small",sx:{paddingLeft:"0px"}})}))},"./app/components/Rules/RuleDescription.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var tslib__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),redux__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/redux/es/redux.js"),_constants_automationRuleForm__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/constants/automationRuleForm.ts"),_contexts_OrderTagsProvider__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/contexts/OrderTagsProvider.tsx"),_selectors_providers_selectors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./app/selectors/providers.selectors.ts"),_utils_businessRules__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./app/utils/businessRules.ts"),_utils_fetchable__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./app/utils/fetchable.ts"),_utils_translate__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./app/utils/translate.ts");const __WEBPACK_DEFAULT_EXPORT__=(0,redux__WEBPACK_IMPORTED_MODULE_10__.Zz)((0,_utils_translate__WEBPACK_IMPORTED_MODULE_6__.Tl)("settings"))((function(props){var rules=props.rules,showTitle=props.showTitle,t=props.t,serviceLevelsByAccountRequest=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)(_selectors_providers_selectors__WEBPACK_IMPORTED_MODULE_4__.eA),uniqueTags=(0,_contexts_OrderTagsProvider__WEBPACK_IMPORTED_MODULE_3__.uq)().uniqueTags;if(0===rules.length)return null;var actions=rules.map((function(rule){var _a,_b,_c,_d;if(rule.ruleType===_constants_automationRuleForm__WEBPACK_IMPORTED_MODULE_2__.X2.PARCEL_TEMPLATE&&rule.userParcelTemplate)return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FD)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:["•"," ",(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Y)("span",(0,tslib__WEBPACK_IMPORTED_MODULE_8__.Cl)({className:"italic"},{children:(null===(_a=rule.userParcelTemplate)||void 0===_a?void 0:_a.name)||(null===(_c=null===(_b=rule.userParcelTemplate)||void 0===_b?void 0:_b.carrierTemplate)||void 0===_c?void 0:_c.name)}))," ",t("automations.ruleDescriptions.actions.package"),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Y)("br",{})]},rule.objectId);if(rule.ruleType===_constants_automationRuleForm__WEBPACK_IMPORTED_MODULE_2__.X2.SERVICE_LEVEL&&rule.serviceLevelToken){var serviceLevelName=function(rule){var _a;if((0,_utils_fetchable__WEBPACK_IMPORTED_MODULE_9__.Fd)(serviceLevelsByAccountRequest)&&rule.serviceLevelToken){var providers=null!==(_a=(0,_utils_fetchable__WEBPACK_IMPORTED_MODULE_9__.Vn)(serviceLevelsByAccountRequest))&&void 0!==_a?_a:[];if(providers.length>0){rule.accountObjectId&&(providers=providers.filter((function(provider){return provider.objectId===rule.accountObjectId})));var provider=providers.find((function(provider){var _a;return null===(_a=provider.serviceLevels)||void 0===_a?void 0:_a.find((function(serviceLevel){return serviceLevel.token===rule.serviceLevelToken}))}));if(provider){var serviceLevel=provider.serviceLevels.find((function(serviceLevel){return serviceLevel.token===rule.serviceLevelToken}));if(serviceLevel)return null==serviceLevel?void 0:serviceLevel.name}}}return rule.serviceLevelToken?(0,_utils_businessRules__WEBPACK_IMPORTED_MODULE_5__.M4)(rule.serviceLevelToken):"N/A"}(rule);return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FD)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:["• ",(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Y)("span",(0,tslib__WEBPACK_IMPORTED_MODULE_8__.Cl)({className:"italic"},{children:serviceLevelName})),t("automations.ruleDescriptions.actions.serviceLevel"),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Y)("br",{})]},rule.objectId)}if(rule.ruleType===_constants_automationRuleForm__WEBPACK_IMPORTED_MODULE_2__.X2.SENDER_ADDRESS&&rule.senderAPIAddress){var senderAddress=null===(_d=rule.senderAPIAddress)||void 0===_d?void 0:_d.street1;return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FD)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:["• ",(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Y)("span",(0,tslib__WEBPACK_IMPORTED_MODULE_8__.Cl)({className:"italic"},{children:senderAddress})),t("automations.ruleDescriptions.actions.senderAddress"),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Y)("br",{})]},rule.objectId)}if(rule.ruleType===_constants_automationRuleForm__WEBPACK_IMPORTED_MODULE_2__.X2.ASSIGN_TAG&&rule.tagId){var tag=uniqueTags.find((function(tag){return tag.id===rule.tagId})),tagName=(null==tag?void 0:tag.name)||"N/A";return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FD)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:["• ",(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Y)("span",(0,tslib__WEBPACK_IMPORTED_MODULE_8__.Cl)({className:"italic"},{children:tagName}))," ",t("automations.ruleDescriptions.actions.tagAssignment"),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Y)("br",{})]},rule.objectId)}}));return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FD)("span",{children:[showTitle&&(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FD)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FK,{children:[function(rules){var titleBase=rules.length>1?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FD)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FK,{children:[rules.length,t("automations.ruleDescriptions.automationsSuffix")]}):(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FD)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FK,{children:[t("automations.ruleDescriptions.automationsPrefix"),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Y)("span",(0,tslib__WEBPACK_IMPORTED_MODULE_8__.Cl)({className:"italic"},{children:rules[0].name}))]});return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FD)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.FK,{children:[titleBase,t("automations.ruleDescriptions.automationsActions")]})}(rules),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Y)("br",{})]}),actions]})}))},"./app/contexts/DrawerProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>DrawerProvider,g:()=>useDrawerContext});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),DrawerContext=(0,react.createContext)({footerOptions:{},isOpen:!1,setFooterOptions:function(){},setIsOpen:function(){}}),DrawerProvider=function(_a){var children=_a.children,_b=function(_a){var _b=void 0===_a?{}:_a,_c=_b.footerOptions,footerOptions=void 0===_c?{}:_c,_d=_b.isOpen,isOpen=void 0!==_d&&_d,_e=(0,tslib_es6.zs)((0,react.useState)(isOpen),2),drawerIsOpen=_e[0],setDrawerIsOpen=_e[1],_f=(0,tslib_es6.zs)((0,react.useState)(footerOptions),2);return{footerOptions:_f[0],isOpen:drawerIsOpen,setFooterOptions:_f[1],setIsOpen:(0,react.useCallback)((function(value,callback){setDrawerIsOpen(value),callback&&callback()}),[setDrawerIsOpen])}}(_a.drawerInitialSettings),footerOptions=_b.footerOptions,isOpen=_b.isOpen,setFooterOptions=_b.setFooterOptions,setIsOpen=_b.setIsOpen;return(0,emotion_react_jsx_runtime_browser_esm.Y)(DrawerContext.Provider,(0,tslib_es6.Cl)({value:{footerOptions,isOpen,setFooterOptions,setIsOpen}},{children}))},useDrawerContext=function(){return(0,react.useContext)(DrawerContext)}},"./app/hooks/useRequest.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/axios/index.js"),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__);const __WEBPACK_DEFAULT_EXPORT__=function(){var _a=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.zs)((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),loading=_a[0],setLoading=_a[1],_b=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.zs)((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),2),data=_b[0],setData=_b[1],_c=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.zs)((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),2),error=_c[0],setError=_c[1],_d=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.zs)((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0),2),errorDetails=_d[0],setErrorDetails=_d[1],unmountedRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){return function(){unmountedRef.current=!0}}),[]);var reset=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){setLoading(!1),setData(null),setError(null),setErrorDetails(void 0)}),[]),request=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(requestFunction){return setLoading(!0),setData(null),setError(null),(0,tslib__WEBPACK_IMPORTED_MODULE_2__.sH)(void 0,void 0,void 0,(function(){var response,e_1;return(0,tslib__WEBPACK_IMPORTED_MODULE_2__.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,requestFunction()];case 1:return response=_a.sent(),unmountedRef.current?[2]:(setData(response),setLoading(!1),[3,3]);case 2:return e_1=_a.sent(),unmountedRef.current?[2]:(axios__WEBPACK_IMPORTED_MODULE_1___default().isAxiosError(e_1)?setError(e_1.message):setError((null==e_1?void 0:e_1.message)||"An error was encountered loading data"),setErrorDetails(e_1.response),setLoading(!1),[3,3]);case 3:return[2]}}))}))}),[]);return{data,error,errorDetails,loading,request,reset}}},"./app/modules/eelPfc/constants/eelPfc.const.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>EEL_PFC_OPTION,l:()=>OPTIONS});var EEL_PFC_OPTION={AESITN:"AES_ITN",NOEEI3036:"NOEEI_30_36",NOEEI3037A:"NOEEI_30_37_a",NOEEI3037F:"NOEEI_30_37_f",NOEEI3037H:"NOEEI_30_37_h"},OPTIONS=[{label:"NOEEI 30 37(a)",value:EEL_PFC_OPTION.NOEEI3037A},{label:"NOEEI 30 37(f)",value:EEL_PFC_OPTION.NOEEI3037F},{label:"NOEEI 30 37(h)",value:EEL_PFC_OPTION.NOEEI3037H},{label:"NOEEI 30 36",value:EEL_PFC_OPTION.NOEEI3036},{label:"AES / ITN",value:EEL_PFC_OPTION.AESITN}]},"./app/modules/eelPfc/hooks/useEELPFCRollout.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{y:()=>useEELPFCRollout});var _utils_featureflags__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/utils/featureflags/index.ts"),useEELPFCRollout=function(){var aesItnFlag=(0,_utils_featureflags__WEBPACK_IMPORTED_MODULE_0__.u)(_utils_featureflags__WEBPACK_IMPORTED_MODULE_0__.gH.USPS_AES_ITN_UI),oauthEnabledFlag=(0,_utils_featureflags__WEBPACK_IMPORTED_MODULE_0__.u)(_utils_featureflags__WEBPACK_IMPORTED_MODULE_0__.gH.USPS_V3_OAUTH_ENABLED);return!!(null==aesItnFlag?void 0:aesItnFlag.enabled)&&!!(null==oauthEnabledFlag?void 0:oauthEnabledFlag.enabled)}},"./app/modules/eelPfc/utils/eelPfc.util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Nn:()=>isEELPFCRequiredForEntryAndRate,Vf:()=>getEELPFCOptionLabelByValue,_H:()=>defaultFormValues});var _constants_carriers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/constants/carriers.ts"),_types_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/types/CustomsDeclaration.ts"),_constants_eelPfc_const__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/modules/eelPfc/constants/eelPfc.const.ts"),getEELPFCOptionLabelByValue=function(value){var idx=_constants_eelPfc_const__WEBPACK_IMPORTED_MODULE_2__.l.findIndex((function(o){return o.value===value}));return idx>-1?_constants_eelPfc_const__WEBPACK_IMPORTED_MODULE_2__.l[idx].label:"NA"},defaultFormValues=function(defaultValues,eelPfcDecision){return{aesItn:(null==defaultValues?void 0:defaultValues.aesItn)||(null==eelPfcDecision?void 0:eelPfcDecision.aesItn)||"",eelPfc:(null==defaultValues?void 0:defaultValues.eelPfc)||(null==eelPfcDecision?void 0:eelPfcDecision.eelPfc)||_constants_eelPfc_const__WEBPACK_IMPORTED_MODULE_2__.D.AESITN}},isEELPFCRequiredForEntryAndRate=function(batchEntry,selectedRateProvider,aesItnFlag){return!!(batchEntry&&selectedRateProvider&&aesItnFlag)&&(!(!batchEntry.addressFrom||!batchEntry.addressTo)&&(!!(0,_types_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_1__.p2)(batchEntry.addressFrom,batchEntry.addressTo)&&(selectedRateProvider===_constants_carriers__WEBPACK_IMPORTED_MODULE_0__.We.name&&!function(customsDeclaration){if(!customsDeclaration)return!1;var aesItn=customsDeclaration.aesItn,eelPfc=customsDeclaration.eelPfc;return!!(eelPfc&&(eelPfc===_constants_eelPfc_const__WEBPACK_IMPORTED_MODULE_2__.D.AESITN?aesItn&&aesItn.length&&aesItn.match(/(x|X)\d{14}/):_constants_eelPfc_const__WEBPACK_IMPORTED_MODULE_2__.l.map((function(o){return o.value})).includes(eelPfc)))}(batchEntry.customsDeclaration))))}},"./app/pages/Onboarding/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ar:()=>ONBOARDING_STEP_NAMES,PA:()=>ONBOARDING_ROUTES,tz:()=>ONBOARDING_PLANS,us:()=>ONBOARDING_ORDER_IMPORT_METHODS});var ONBOARDING_ROUTES={connectStore:"/onboarding/connect_store",plan:"/onboarding/plan"},ONBOARDING_PLANS={api:"API",pro:"PRO",starter:"PAYG-Standard"},ONBOARDING_ORDER_IMPORT_METHODS={csvImport:"csv_import",manual:"manual"},ONBOARDING_STEP_NAMES={addOrders:"onboarding.AddOrders",connectStore:"onboarding.ConnectStore",plan:"onboarding.ChoosePlan"}},"./app/pages/Onboarding/utils/onboarding.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{pt:()=>clearOnboardingLocalStorage,zZ:()=>getOnboardingMonthlyVolume,kr:()=>getOnboardingSelectedPlan,U_:()=>setOnboardingInProgress,Zc:()=>setOnboardingMonthlyVolume});var _a,onboarding=__webpack_require__("./app/constants/onboarding.ts"),types=__webpack_require__("./app/pages/Onboarding/types.ts"),setOnboardingInProgress=((_a={})[types.PA.connectStore]=[types.PA.plan,"/orders/create","/orders/csv-import"],_a[types.PA.plan]=[types.PA.connectStore,"/settings/api"],function(value){localStorage.setItem("onboarding_in_progress",value.toString())}),getOnboardingSelectedPlan=function(){return localStorage.getItem("onboarding_selected_plan")},clearOnboardingLocalStorage=function(){localStorage.removeItem(onboarding.k.ONBOARDING_LAST_COMPLETED_STEP),localStorage.removeItem(onboarding.k.ONBOARDING_CURRENT_STEP),localStorage.removeItem(onboarding.k.ONBOARDING_ACTIVE),localStorage.removeItem(onboarding.k.ONBOARDING_BUSINESS_TYPE),localStorage.removeItem(onboarding.k.ONBOARDING_BUSINESS_NEED),localStorage.removeItem(onboarding.k.ONBOARDING_SHOW_WELCOME_MESSAGE),localStorage.removeItem(onboarding.k.ONBOARDING_ORDER_MECHANISM),localStorage.removeItem(onboarding.k.ONBOARDING_ACTIVE_STORE),localStorage.removeItem(onboarding.k.ONBOARDING_USER_COUNTRY),localStorage.removeItem(onboarding.k.ONBOARDING_COMPLETED),localStorage.removeItem("onboarding_in_progress"),localStorage.removeItem("onboarding_current_step"),localStorage.removeItem("onboarding_selected_plan")},setOnboardingMonthlyVolume=function(value){localStorage.setItem("onboarding_monthly_volume",value)},getOnboardingMonthlyVolume=function(){return localStorage.getItem("onboarding_monthly_volume")||""}},"./app/pages/Orders/All/CustomerShippingMethod/CustomerShippingMethodText.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const __WEBPACK_DEFAULT_EXPORT__=function(props){var amountTextWithCurrency=props.amountTextWithCurrency,isCostValid=props.isCostValid,shippingMethod=props.shippingMethod,_a=props.truncate,truncateProps=void 0!==_a&&_a?{className:"truncate"}:{};return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Y)("span",(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cl)({},truncateProps,{children:'"'.concat(shippingMethod).concat(shippingMethod&&isCostValid?" - ":"").concat(isCostValid?amountTextWithCurrency:"",'"')}))}},"./app/pages/Orders/All/CustomerShippingMethod/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>CustomerShippingMethod_CustomerShippingMethod,x:()=>CustomerShippingMethodText.A});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),react=__webpack_require__("./node_modules/react/index.js"),Typography=__webpack_require__("./node_modules/@goshippo/components/esm/Typography/Typography.js"),shippoTheme=__webpack_require__("./node_modules/@goshippo/components/esm/styles/shippoTheme.js"),StickyNote2Outlined=__webpack_require__("./node_modules/@mui/icons-material/esm/StickyNote2Outlined.js"),Info=__webpack_require__("./node_modules/@mui/icons-material/esm/Info.js"),Popup=__webpack_require__("./app/components/Popup/index.ts"),translate=__webpack_require__("./app/utils/translate.ts"),CustomerShippingMethodText=__webpack_require__("./app/pages/Orders/All/CustomerShippingMethod/CustomerShippingMethodText.tsx"),iconSx={height:"1rem",mr:.5,width:"1rem"};const CustomerShippingMethod_CustomerShippingMethod=react.memo((0,translate.Tl)()((function(props){var _a=props.disablePopup,disablePopup=void 0!==_a&&_a,cost=props.shippingCost,currency=props.shippingCostCurrency,method=props.shippingMethod,t=props.t,isCostValid=Number(cost)>0;if(!method&&!isCostValid)return null;var amountTextWithCurrency=t("translations:currency",{value:{currency_iso:currency,value:cost}});return(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({className:"mt-1 grid items-center",component:"div",sx:{color:shippoTheme.A.palette.grey[900],gridTemplateColumns:"fit-content(100%) fit-content(100%)"},variant:"caption"},{children:[disablePopup?(0,emotion_react_jsx_runtime_browser_esm.Y)(StickyNote2Outlined.A,{sx:iconSx}):(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({hoverable:!0,inverted:!0,on:"hover",position:"top center",trigger:(0,emotion_react_jsx_runtime_browser_esm.Y)(Info.A,{sx:iconSx}),wrapperClassName:"flex"},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({component:"span",variant:"caption"},{children:[t("orders:calculateRates:tabs:shipmentInfo:shippingMethod"),(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomerShippingMethodText.A,{amountTextWithCurrency,isCostValid,shippingMethod:method})]}))})),(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomerShippingMethodText.A,{amountTextWithCurrency,isCostValid,shippingMethod:method,truncate:!0})]}))})))},"./app/pages/Orders/All/OrderDetailsPage/RatingErrors/RateWarningConstants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{pn:()=>UPS_LARGE_PACKAGE_SURCHARGE,pp:()=>CUSTOMS_PHONE_WARNING,tu:()=>CUSTOMS_EEL_PFC_WARNING,zt:()=>UPS_MAX_SIZE_SURCHARGE});var CUSTOMS_PHONE_WARNING="CUSTOMS_PHONE_WARNING",CUSTOMS_EEL_PFC_WARNING="CUSTOMS_EEL_PFC_WARNING",UPS_MAX_SIZE_SURCHARGE="UPS_MAX_SIZE_SURCHARGE",UPS_LARGE_PACKAGE_SURCHARGE="UPS_LARGE_PACKAGE_SURCHARGE"},"./app/pages/Orders/All/OrderDetailsPage/RatingErrors/getRateWarnings.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});var convert_units__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/convert-units/lib/index.js"),_constants_carriers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/constants/carriers.ts"),_constants_distance__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/constants/distance.ts"),_constants_weight__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/constants/weight.ts"),_modules_eelPfc_utils_eelPfc_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./app/modules/eelPfc/utils/eelPfc.util.ts"),_types_Address__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./app/types/Address.ts"),_types_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./app/types/CustomsDeclaration.ts"),_utils_segment__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./app/utils/segment/index.ts"),_RateWarningConstants__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./app/pages/Orders/All/OrderDetailsPage/RatingErrors/RateWarningConstants.ts"),_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./app/pages/Orders/All/OrderDetailsPage/RatingErrors/util.ts"),UPSWarningLink="https://www.UPS.com/assets/resources/webcontent/en_US/retail_rates.pdf#page=130",isPackageAboutToExceedUPSGirth=function(girthThresold,order,selectedRate){var _a,_b,_c,_d;if(!(null==selectedRate?void 0:selectedRate.provider)||(null==selectedRate?void 0:selectedRate.provider)!==_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.$5.name)return!1;var sorted=(0,_util__WEBPACK_IMPORTED_MODULE_8__.Z7)((null===(_a=order.parcel)||void 0===_a?void 0:_a.length)||"0",(null===(_b=order.parcel)||void 0===_b?void 0:_b.width)||"0",(null===(_c=order.parcel)||void 0===_c?void 0:_c.height)||"0"),distanceUnit=(null===(_d=order.parcel)||void 0===_d?void 0:_d.distanceUnit)||_constants_distance__WEBPACK_IMPORTED_MODULE_2__.k.IN,girth=parseFloat(convert_units__WEBPACK_IMPORTED_MODULE_0__(sorted.length).from(distanceUnit).to(_constants_distance__WEBPACK_IMPORTED_MODULE_2__.k.IN))+2*parseFloat(convert_units__WEBPACK_IMPORTED_MODULE_0__(sorted.width).from(distanceUnit).to(_constants_distance__WEBPACK_IMPORTED_MODULE_2__.k.IN))+2*parseFloat(convert_units__WEBPACK_IMPORTED_MODULE_0__(sorted.height).from(distanceUnit).to(_constants_distance__WEBPACK_IMPORTED_MODULE_2__.k.IN));return girth>=girthThresold*_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.WY&&girth<=girthThresold},isPackageAboutToExceedUPSLength=function(lengthThresold,order,selectedRate){var _a,_b,_c,_d;if(!(null==selectedRate?void 0:selectedRate.provider)||(null==selectedRate?void 0:selectedRate.provider)!==_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.$5.name)return!1;var sorted=(0,_util__WEBPACK_IMPORTED_MODULE_8__.Z7)((null===(_a=order.parcel)||void 0===_a?void 0:_a.length)||"0",(null===(_b=order.parcel)||void 0===_b?void 0:_b.width)||"0",(null===(_c=order.parcel)||void 0===_c?void 0:_c.height)||"0"),distanceUnit=(null===(_d=order.parcel)||void 0===_d?void 0:_d.distanceUnit)||_constants_distance__WEBPACK_IMPORTED_MODULE_2__.k.IN,length=parseFloat(convert_units__WEBPACK_IMPORTED_MODULE_0__(sorted.length).from(distanceUnit).to(_constants_distance__WEBPACK_IMPORTED_MODULE_2__.k.IN));return length>=lengthThresold*_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.WY&&length<=lengthThresold},trackWarning=function(warning,order_id){var kind=warning.kind,message=warning.message;(0,_utils_segment__WEBPACK_IMPORTED_MODULE_7__.u4)(_utils_segment__WEBPACK_IMPORTED_MODULE_7__.sV.ups_surcharge_warning,{kind,message,order_id})};const __WEBPACK_DEFAULT_EXPORT__=function(order,batchEntry,selectedRate,aesItnFlag){var _a,warning,warnings=[],_b=(0,_types_Address__WEBPACK_IMPORTED_MODULE_5__.tS)(order,batchEntry),addressFrom=_b.addressFrom,addressTo=_b.addressTo,hasPhoneNumberRequiredWarning=(0,_types_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_6__.e8)({addressFrom,addressTo}).hasPhoneNumberRequiredWarning,hasEELPFCWarning=(0,_modules_eelPfc_utils_eelPfc_util__WEBPACK_IMPORTED_MODULE_4__.Nn)(null!=batchEntry?batchEntry:void 0,null!==(_a=null==selectedRate?void 0:selectedRate.provider)&&void 0!==_a?_a:void 0,aesItnFlag);switch(!0){case function(order,selectedRate){var _a,_b;if(!(null==selectedRate?void 0:selectedRate.provider)||(null==selectedRate?void 0:selectedRate.provider)!==_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.$5.name)return!1;var weightUnit=(null===(_a=order.parcel)||void 0===_a?void 0:_a.weightUnit)||_constants_weight__WEBPACK_IMPORTED_MODULE_3__.VV.LB,weight=parseFloat(convert_units__WEBPACK_IMPORTED_MODULE_0__(null===(_b=order.parcel)||void 0===_b?void 0:_b.weight).from(weightUnit).to(_constants_weight__WEBPACK_IMPORTED_MODULE_3__.VV.LB));return weight>=_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.FO*_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.WY&&weight<=_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.FO}(order,selectedRate):warning={kind:_RateWarningConstants__WEBPACK_IMPORTED_MODULE_9__.pn,linkCopy:"orders:table:errors:learnMore",linkURL:UPSWarningLink,message:"orders:table:errors:packageAboutToExceedWeightWarningUPS",messageArgs:{amount:_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.ht.toString(),weight:_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.WY.toString()}},warnings.push(warning),trackWarning(warning,order.objectId);break;case isPackageAboutToExceedUPSGirth(_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.ID,order,selectedRate):warning={kind:_RateWarningConstants__WEBPACK_IMPORTED_MODULE_9__.pn,linkCopy:"orders:table:errors:learnWhenThisApplies",linkURL:UPSWarningLink,message:"orders:table:errors:largePackageAboutToExceedGirthWarningUPS",messageArgs:{amount:_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.ht.toString(),girth:_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.ID.toString()}},warnings.push(warning),trackWarning(warning,order.objectId);break;case isPackageAboutToExceedUPSLength(_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.CR,order,selectedRate):warning={kind:_RateWarningConstants__WEBPACK_IMPORTED_MODULE_9__.pn,linkCopy:"orders:table:errors:learnMore",linkURL:UPSWarningLink,message:"orders:table:errors:largePackageAboutToExceedLengthWarningUPS",messageArgs:{amount:_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.ht.toString(),length:_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.CR.toString()}},warnings.push(warning),trackWarning(warning,order.objectId);break;case isPackageAboutToExceedUPSGirth(_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.Lt,order,selectedRate):warning={kind:_RateWarningConstants__WEBPACK_IMPORTED_MODULE_9__.zt,linkCopy:"orders:table:errors:learnWhenThisApplies",linkURL:UPSWarningLink,message:"orders:table:errors:packageAboutToExceedGirthWarningUPS",messageArgs:{amount:_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.ht.toString(),girth:_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.Lt.toString()}},warnings.push(warning),trackWarning(warning,order.objectId);break;case isPackageAboutToExceedUPSLength(_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.RO,order,selectedRate):warning={kind:_RateWarningConstants__WEBPACK_IMPORTED_MODULE_9__.zt,linkCopy:"orders:table:errors:learnMore",linkURL:UPSWarningLink,message:"orders:table:errors:packageAboutToExceedLengthWarningUPS",messageArgs:{amount:_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.ht.toString(),length:_constants_carriers__WEBPACK_IMPORTED_MODULE_1__.RO.toString()}},warnings.push(warning),trackWarning(warning,order.objectId)}return hasPhoneNumberRequiredWarning&&warnings.push({kind:_RateWarningConstants__WEBPACK_IMPORTED_MODULE_9__.pp,linkCopy:"orders:calculateRates:tabs:shipmentInfo:recipientAddressEdit",message:"orders:table:errors:ratesCustomsPhoneWarning"}),hasEELPFCWarning&&warnings.push({kind:_RateWarningConstants__WEBPACK_IMPORTED_MODULE_9__.tu,linkCopy:"orders:eelPfcSection:warningLink",message:"orders:eelPfcSection:warningMessage"}),warnings}},"./app/pages/Orders/All/OrderDetailsPage/RatingErrors/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Gz:()=>deduplicateWarnings,KF:()=>getUPSWarningCardExpandableHeader,Lj:()=>separateUPSSurchargeWarnings,Z7:()=>sortDimension});var _constants_carriers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/constants/carriers.ts"),_RateWarningConstants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/pages/Orders/All/OrderDetailsPage/RatingErrors/RateWarningConstants.ts"),deduplicateWarnings=function(warnings){var warningsMap=warnings.reduce((function(accum,curr){return accum[curr.message]=curr,accum}),{});return Object.values(warningsMap)},separateUPSSurchargeWarnings=function(warnings){var UPSWarnings=[],nonUPSSurchargeWarnings=[];return warnings.forEach((function(w,idx){w.kind===_RateWarningConstants__WEBPACK_IMPORTED_MODULE_1__.pn||w.kind===_RateWarningConstants__WEBPACK_IMPORTED_MODULE_1__.zt?UPSWarnings.push(warnings[idx]):nonUPSSurchargeWarnings.push(warnings[idx])})),{UPSWarnings,nonUPSSurchargeWarnings}},getUPSWarningCardExpandableHeader=function(t,warningKind){switch(!0){case warningKind===_RateWarningConstants__WEBPACK_IMPORTED_MODULE_1__.zt:return t("orders:table:errors:surchargeTitleUPS");case warningKind===_RateWarningConstants__WEBPACK_IMPORTED_MODULE_1__.pn:return t("orders:table:errors:surchargeTitleUPSLargePackage",{amount:_constants_carriers__WEBPACK_IMPORTED_MODULE_0__.ht.toString()});default:return""}},sortDimension=function(length,width,height){var stringifiedDimensions=[length,width,height].map((function(i){return parseFloat(i)})).sort((function(a,b){return a-b})).map((function(i){return i.toString()}));return{height:stringifiedDimensions[0],length:stringifiedDimensions[2],width:stringifiedDimensions[1]}}},"./app/pages/Orders/Blackbeard/Drawers/AddressDrawer/AddressBookList.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>AddressBookList});var tslib__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@goshippo/components/esm/Stack/Stack.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@goshippo/components/esm/styles/shippoTheme.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@goshippo/components/esm/Alert/Alert.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@goshippo/components/esm/Typography/Typography.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@goshippo/components/esm/Box/Box.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@goshippo/components/esm/Divider/Divider.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@goshippo/components/esm/Button/Button.js"),_contexts_DrawerProvider__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/contexts/DrawerProvider.tsx"),_AddressBookListItem__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/pages/Orders/Blackbeard/Drawers/AddressDrawer/AddressBookListItem.tsx"),_useAddressFromAddressBook__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/pages/Orders/Blackbeard/Drawers/AddressDrawer/useAddressFromAddressBook.ts"),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./app/pages/Orders/Blackbeard/Drawers/AddressDrawer/utils.ts"),AddressBookList=function(_a){var addressInfo=_a.addressInfo,addresses=_a.addresses,_b=_a.canSelectInternationalAddress,canSelectInternationalAddress=void 0===_b||_b,editingAddressType=_a.editingAddressType,onClickAddNewAddress=_a.onClickAddNewAddress,onEditAddress=_a.onEditAddress,onUpdateAddress=_a.onUpdateAddress,t=_a.t,setFooterOptions=(0,_contexts_DrawerProvider__WEBPACK_IMPORTED_MODULE_1__.g)().setFooterOptions,selectedAddresses=addressInfo[editingAddressType],_c=(0,_useAddressFromAddressBook__WEBPACK_IMPORTED_MODULE_3__.V)({addresses,selectedAddresses}),addressFromAddressBook=_c.addressFromAddressBook,currentAddress=_c.currentAddress,sortedAddresses=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return addressFromAddressBook?Array.from(addresses).sort((function(a){return a===addressFromAddressBook?-1:0})):addresses}),[addressFromAddressBook,addresses]),_d=(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(addressFromAddressBook),2),selectedAddress=_d[0],setSelectedAddress=_d[1],updateAddressSelection=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){onUpdateAddress(selectedAddress,!1)}),[onUpdateAddress,selectedAddress]),isInternationalError=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){var _a,_b;if(canSelectInternationalAddress)return!1;if(!selectedAddress)return!1;var baseAddress=(0,_utils__WEBPACK_IMPORTED_MODULE_4__.y)(addressInfo["to"===editingAddressType?"sender":"to"]);return(null===(_a=null==baseAddress?void 0:baseAddress.country)||void 0===_a?void 0:_a.iso2)!==(null===(_b=selectedAddress.country)||void 0===_b?void 0:_b.iso2)}),[selectedAddress,addressInfo,editingAddressType,canSelectInternationalAddress]),isFooterButtonEnabled=(null==addressFromAddressBook?void 0:addressFromAddressBook.id)!==(null==selectedAddress?void 0:selectedAddress.id)&&!isInternationalError,selectedAddressesCount=selectedAddresses&&Array.isArray(selectedAddresses)?selectedAddresses.length:0;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){return setFooterOptions({explicitFooterObject:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Y)("div",{}),footerButtonPrimary:{action:updateAddressSelection,disabled:!isFooterButtonEnabled,text:t("orders:manualLabel:updateAddress")}}),function(){setFooterOptions({})}}),[isFooterButtonEnabled,setFooterOptions,t,updateAddressSelection]);var onSelect=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(address){setSelectedAddress(address===currentAddress?null:address)}),[currentAddress,setSelectedAddress]);return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.FD)(_goshippo_components__WEBPACK_IMPORTED_MODULE_7__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({spacing:_goshippo_components__WEBPACK_IMPORTED_MODULE_8__.A.spacing(2)},{children:[isInternationalError&&(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_9__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({"aria-labelledby":"cross-border-return-error",severity:"error"},{children:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_10__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({component:"div",id:"cross-border-return-error",variant:"body"},{children:t("orders:addressDrawer.errors.noCrossBorderReturn")}))})),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.FD)(_goshippo_components__WEBPACK_IMPORTED_MODULE_11__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({display:"flex",flexDirection:"column",gap:_goshippo_components__WEBPACK_IMPORTED_MODULE_8__.A.spacing(2),role:"list"},{children:[!addressFromAddressBook&&currentAddress?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.FD)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.FK,{children:[(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Y)(_AddressBookListItem__WEBPACK_IMPORTED_MODULE_2__.Lv,{address:currentAddress,isSelected:null===selectedAddress,onEdit:onEditAddress,onSelect,t},currentAddress.id),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_12__.A,{})]}):null,selectedAddressesCount>1?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.FD)(_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.FK,{children:[(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.FD)(_AddressBookListItem__WEBPACK_IMPORTED_MODULE_2__.q_,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({isSelected:!selectedAddress,onClick:function(){return setSelectedAddress(null)},role:"listitem"},{children:[(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_10__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({component:"p",variant:"bodyEmphasized"},{children:t("orders:addressDrawer:keepCurrentSelections")})),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.FD)(_goshippo_components__WEBPACK_IMPORTED_MODULE_10__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({component:"p",variant:"body"},{children:[selectedAddressesCount," ",t("orders:addressDrawer:addresses")]}))]})),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_12__.A,{})]}):null,sortedAddresses.map((function(address){return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Y)(_AddressBookListItem__WEBPACK_IMPORTED_MODULE_2__.Lv,{address,isSelected:address.id===(null==selectedAddress?void 0:selectedAddress.id),onEdit:onEditAddress,onSelect,t},address.id)}))]})),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_13__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({color:"secondary","data-e2e":"address-modal-new-button","data-testid":"address-modal-new-button",fullWidth:!0,onClick:onClickAddNewAddress},{children:t("orders:addressDrawer:useNewAddress")}))]}))}},"./app/pages/Orders/Blackbeard/Drawers/AddressDrawer/AddressBookListItem.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Lv:()=>AddressBookListItem,q_:()=>StyledAddressBookListItem});var templateObject_1,tslib__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@goshippo/components/esm/Box/Box.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@goshippo/components/esm/styles/colors.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@goshippo/components/esm/styles/elevations.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@goshippo/components/esm/styles/shippoTheme.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@goshippo/components/esm/IconButton/IconButton.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@goshippo/components/esm/Typography/Typography.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@goshippo/components/esm/Alert/Alert.js"),_components_customIcons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/components/customIcons/index.ts"),_constants_countries__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/constants/countries.ts"),_styles_constants__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/styles/constants.ts"),_types_Address__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./app/types/Address.ts"),getCityLine=function(city,state,zip){return"".concat(city).concat(state||zip?", ":"").concat(state).concat(state&&zip?" ":"").concat(zip)},StyledAddressBookListItem=(0,_goshippo_components__WEBPACK_IMPORTED_MODULE_5__.Ay)(_goshippo_components__WEBPACK_IMPORTED_MODULE_6__.A,{name:"AddressBookListItem",shouldForwardProp:function(propName){return!["isClickable","isSelected"].includes(propName)}})((function(_a){var isClickable=_a.isClickable,isSelected=_a.isSelected;return{":focus":{boxShadow:"0px 0px 0px 4px ".concat(_goshippo_components__WEBPACK_IMPORTED_MODULE_7__.T.borderFocus)},":focus-visible":{boxShadow:"0px 0px 0px 4px ".concat(_goshippo_components__WEBPACK_IMPORTED_MODULE_7__.T.borderFocus),outline:"none"},":hover":{boxShadow:_goshippo_components__WEBPACK_IMPORTED_MODULE_8__.$[2]},backgroundColor:isSelected?_goshippo_components__WEBPACK_IMPORTED_MODULE_7__.T.selectedBackground:_goshippo_components__WEBPACK_IMPORTED_MODULE_7__.T.white,border:"solid ".concat(isSelected?_goshippo_components__WEBPACK_IMPORTED_MODULE_7__.T.primary:_goshippo_components__WEBPACK_IMPORTED_MODULE_7__.T.borders),borderRadius:_goshippo_components__WEBPACK_IMPORTED_MODULE_9__.A.spacing(.5),borderWidth:isSelected?"2px":"1px",cursor:isClickable?"pointer":"default",padding:"".concat(_goshippo_components__WEBPACK_IMPORTED_MODULE_9__.A.spacing(1)," ").concat(_goshippo_components__WEBPACK_IMPORTED_MODULE_9__.A.spacing(2))}})),StyledIconButton=(0,_goshippo_components__WEBPACK_IMPORTED_MODULE_5__.Ay)(_goshippo_components__WEBPACK_IMPORTED_MODULE_10__.A,{name:"AddressBookListEditButton"})((function(){return{":hover":{backgroundColor:_goshippo_components__WEBPACK_IMPORTED_MODULE_7__.T.hoverFocus},color:_goshippo_components__WEBPACK_IMPORTED_MODULE_7__.T.secondary}})),OverflowTextLine=(0,_goshippo_components__WEBPACK_IMPORTED_MODULE_5__.Ay)("span")(templateObject_1||(templateObject_1=(0,tslib__WEBPACK_IMPORTED_MODULE_11__.ue)(["\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"],["\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),AddressTextLine=function(_a){var elementId=_a.elementId,line1=_a.line1,line1Style=_a.line1Style,line2=_a.line2,line1WithStyle=(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)("span",(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({style:line1Style},{children:line1})),line2WithSeparator=line1?" | ".concat(line2):line2;return line2&&(line1+line2WithSeparator).length>34?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.FD)(_goshippo_components__WEBPACK_IMPORTED_MODULE_13__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({component:"p",id:elementId,variant:"body"},{children:[(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(OverflowTextLine,{children:line1WithStyle}),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(OverflowTextLine,{children:line2})]})):line2?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.FD)(_goshippo_components__WEBPACK_IMPORTED_MODULE_13__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({component:"p",id:elementId,variant:"body"},{children:[line1WithStyle,line2&&line2WithSeparator]})):(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_13__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({component:"p",id:elementId,variant:"body"},{children:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(OverflowTextLine,{children:line1WithStyle})}))},AddressBookListItem=function(_a){var address=_a.address,isSelected=_a.isSelected,onEdit=_a.onEdit,onSelect=_a.onSelect,t=_a.t,city=address.city,company=address.company,country=address.country,email=address.email,name=address.name,phone=address.phone,state=address.state,street1=address.street1,street2=address.street2,streetNumber=address.streetNumber,zip=address.zip,requiredAddressFields=(0,_types_Address__WEBPACK_IMPORTED_MODULE_4__.UV)(country),isAddressComplete=(0,_types_Address__WEBPACK_IMPORTED_MODULE_4__.$v)(address,requiredAddressFields),handleOnEdit=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(evt){evt.stopPropagation(),onEdit(address)}),[onEdit,address]),handleOnSelect=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){onSelect(address)}),[onSelect,address]),handleOnKeydown=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(code){"Enter"!==code&&"Space"!==code||!isAddressComplete||handleOnSelect()}),[handleOnSelect,isAddressComplete]),elementId="address-book-list-item-".concat(address.id);return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.FD)(StyledAddressBookListItem,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({"aria-describedby":elementId,isClickable:isAddressComplete,isSelected,onClick:isAddressComplete?handleOnSelect:void 0,onKeyDown:function(e){return handleOnKeydown(e.code)},role:"listitem",tabIndex:0},{children:[(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.FD)(_goshippo_components__WEBPACK_IMPORTED_MODULE_6__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({display:"flex",gap:_goshippo_components__WEBPACK_IMPORTED_MODULE_9__.A.spacing(1),justifyContent:"space-between"},{children:[(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.FD)(_goshippo_components__WEBPACK_IMPORTED_MODULE_6__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({overflow:"hidden"},{children:[(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(AddressTextLine,{elementId,line1:name,line1Style:{fontWeight:_styles_constants__WEBPACK_IMPORTED_MODULE_3__.Wy.medium},line2:company}),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(AddressTextLine,{line1:email,line2:phone}),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.FD)(_goshippo_components__WEBPACK_IMPORTED_MODULE_13__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({component:"p",variant:"body"},{children:[street1," ",streetNumber]})),street2?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_13__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({component:"p",variant:"body"},{children:street2})):null,(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_13__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({component:"p",variant:"body"},{children:getCityLine(city,state,zip)})),country&&country.iso2!==_constants_countries__WEBPACK_IMPORTED_MODULE_2__.Xr.US.iso2?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_13__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({component:"p",variant:"body"},{children:country.name})):null]})),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_6__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({alignItems:"center",display:"flex",justifyContent:"center"},{children:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(StyledIconButton,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({name:"edit-".concat(address.id),onClick:handleOnEdit},{children:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(_components_customIcons__WEBPACK_IMPORTED_MODULE_1__.qN,{})}))}))]})),isAddressComplete?null:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_14__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_11__.Cl)({severity:"error",sx:{mt:_goshippo_components__WEBPACK_IMPORTED_MODULE_9__.A.spacing(1)}},{children:t("address-form:missingInfo")}))]}))}},"./app/pages/Orders/Blackbeard/Drawers/AddressDrawer/useAddressFromAddressBook.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V:()=>useAddressFromAddressBook});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_types_Address__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/types/Address.ts"),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/pages/Orders/Blackbeard/Drawers/AddressDrawer/utils.ts"),useAddressFromAddressBook=function(_a){var addresses=_a.addresses,selectedAddresses=_a.selectedAddresses,currentAddress=(0,_utils__WEBPACK_IMPORTED_MODULE_2__.y)(selectedAddresses),addressFromAddressBook=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(addresses,selectedAddress){return selectedAddress&&addresses.find((function(address){return(0,_types_Address__WEBPACK_IMPORTED_MODULE_1__.fq)(address,selectedAddress)}))||null}(addresses,currentAddress)}),[addresses,currentAddress]);return{addressFromAddressBook,currentAddress}}},"./app/pages/Orders/Blackbeard/Drawers/LabelPurchaseDrawer/orderErrors.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{uF:()=>getOrderErrors});var tslib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),date_fns__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/date-fns/esm/isSameDay/index.js"),_types_Address__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/types/Address.ts"),_types_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/types/CustomsDeclaration.ts"),_types_Order__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/types/Order.ts"),_types_OrderBatchEntry__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/types/OrderBatchEntry.ts"),getOrderErrors=function(selectedOrders,batchEntries,ordersData,mostCommonShipmentDate,selectedOrdersAddresses,defaultUserAddress,ratesByShipmentObjectID){var carrierParcelNoRatesErrors=0,customsErrors=0,dateErrors=0,senderErrors=0,returnErrors=0,recipientErrors=0,packageErrors=0,returnAddresses=selectedOrdersAddresses.returnAddresses,senderAddresses=selectedOrdersAddresses.senderAddresses,hasNoSenderAddresses=0===senderAddresses.length,hasIncompleteSenderAddress=senderAddresses.some((function(address){return(0,_types_Address__WEBPACK_IMPORTED_MODULE_0__.X2)(address)}));(hasNoSenderAddresses||hasIncompleteSenderAddress)&&senderErrors++;var hasNoReturnAddresses=0===returnAddresses.length,hasIncompleteReturnAddress=returnAddresses.some((function(address){return(0,_types_Address__WEBPACK_IMPORTED_MODULE_0__.X2)(address)}));return(hasNoReturnAddresses||hasIncompleteReturnAddress)&&returnErrors++,Object.entries(selectedOrders).forEach((function(_a){var _b=(0,tslib__WEBPACK_IMPORTED_MODULE_4__.zs)(_a,2),orderId=_b[0];if(!_b[1].length){var order=ordersData[orderId];orderHasCustomsError(order,void 0,defaultUserAddress)&&customsErrors++,orderHasShipmentDateError(mostCommonShipmentDate)&&dateErrors++,orderHasRecipientError(order)&&recipientErrors++,orderHasPackageError(order)&&packageErrors++}})),batchEntries.forEach((function(batchEntry){var order=ordersData[batchEntry.orderObjectId];orderHasCarrierParcelNoRatesError(batchEntry,ratesByShipmentObjectID)&&carrierParcelNoRatesErrors++,orderHasCustomsError(order,batchEntry,defaultUserAddress)&&customsErrors++,orderHasShipmentDateError(mostCommonShipmentDate,batchEntry)&&dateErrors++,orderHasRecipientError(order,batchEntry)&&recipientErrors++,orderHasPackageError(order,batchEntry)&&packageErrors++})),{carrierParcelNoRatesErrors,customsErrors,dateErrors,packageErrors,recipientErrors,returnErrors,senderErrors}},orderHasCarrierParcelNoRatesError=function(batchEntry,ratesByShipmentObjectID){var _a;return(null===(_a=batchEntry.parcel)||void 0===_a?void 0:_a.carrierParcelTemplate)&&batchEntry.shipmentObjectId&&ratesByShipmentObjectID&&batchEntry.shipmentObjectId in ratesByShipmentObjectID&&0===ratesByShipmentObjectID[batchEntry.shipmentObjectId].length},orderHasCustomsError=function(order,batchEntry,defaultUserAddress){var _a,_b,isBypassCustoms=!!(null===(_a=null==batchEntry?void 0:batchEntry.extras)||void 0===_a?void 0:_a.isBypassCustoms),requiresCustoms=batchEntry?(0,_types_OrderBatchEntry__WEBPACK_IMPORTED_MODULE_3__.p2)(batchEntry)&&!isBypassCustoms:(0,_types_Order__WEBPACK_IMPORTED_MODULE_2__.p2)(order,defaultUserAddress),customsItems=(null===(_b=null==batchEntry?void 0:batchEntry.customsItems)||void 0===_b?void 0:_b.length)?batchEntry.customsItems:[];return requiresCustoms&&!(0,_types_Order__WEBPACK_IMPORTED_MODULE_2__.sf)(order)&&!customsItems.length},orderHasShipmentDateError=function(mostCommonShipmentDate,batchEntry){return!(0,date_fns__WEBPACK_IMPORTED_MODULE_5__.default)(mostCommonShipmentDate,(null==batchEntry?void 0:batchEntry.shipmentDate)?batchEntry.shipmentDate.toDate():new Date)},orderHasPackageError=function(order,batchEntry){var _a,_b,_c,_d,hasParcelError=!(null==batchEntry?void 0:batchEntry.parcel),hasParcelWeightErrors=batchEntry?!(Number(null===(_a=batchEntry.parcel)||void 0===_a?void 0:_a.weight)>0&&(null===(_b=batchEntry.parcel)||void 0===_b?void 0:_b.weightUnit)):!(Number(null===(_c=null==order?void 0:order.parcel)||void 0===_c?void 0:_c.weight)>0&&(null===(_d=null==order?void 0:order.parcel)||void 0===_d?void 0:_d.weightUnit)),batchEntryErrors=(null==batchEntry?void 0:batchEntry.errors)?(0,tslib__WEBPACK_IMPORTED_MODULE_4__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_4__.zs)(batchEntry.errors),!1):[],orderErrors=0===(null==batchEntry?void 0:batchEntry.partialFulfillmentRank)||0===(null==order?void 0:order.partialFulfillmentRequests.length)?(0,tslib__WEBPACK_IMPORTED_MODULE_4__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_4__.zs)(order.errors),!1):[],hasExceededPackageWeightError=!!(batchEntryErrors.length?batchEntryErrors:orderErrors).find((function(error){return"order_weight_exceeded"===error.code}));return hasParcelError||hasParcelWeightErrors||hasExceededPackageWeightError},orderHasRecipientError=function(order,batchEntry){var _a=(0,_types_Address__WEBPACK_IMPORTED_MODULE_0__.tS)(order,batchEntry),addressFrom=_a.addressFrom,addressTo=_a.addressTo;return!!(0,_types_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_1__.e8)({addressFrom,addressTo}).hasPhoneNumberRequiredError||!(batchEntry&&!(0,_types_Address__WEBPACK_IMPORTED_MODULE_0__.X2)(null==batchEntry?void 0:batchEntry.addressTo))&&!!(0,_types_Address__WEBPACK_IMPORTED_MODULE_0__.X2)(null==order?void 0:order.toAddress)}},"./app/pages/Orders/Blackbeard/Drawers/LabelPurchaseDrawer/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Bc:()=>singleOrMultiSelectionShouldShowCustoms,GZ:()=>batchEntriesOrdersCountMessage,Yt:()=>getSelectedFulfilledOrders,ut:()=>singleOrderMessage});var tslib__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_types_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./app/constants/currency.ts"),__webpack_require__("./app/services/user.service.ts"),__webpack_require__("./app/types/CustomsDeclaration.ts")),_utils_batchEntryRendering__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./app/types/IDVerification.ts"),__webpack_require__("./app/utils/batchEntryRendering.ts")),batchEntriesOrdersCountMessage=function(selectedOrdersCount,batchEntriesToBuyCount,t){return 0===selectedOrdersCount?"":t("orders:actions:multi:readyToBuy",{count:batchEntriesToBuyCount,total:selectedOrdersCount})},getTruncatedOrderNumber=function(orderNumber,maxLength){return void 0===maxLength&&(maxLength=25),orderNumber.length>maxLength?"...".concat(orderNumber.slice(-maxLength)):orderNumber},singleOrderMessage=function(t,orderNumber,isReturnLabel){if(void 0===isReturnLabel&&(isReturnLabel=!1),orderNumber){var truncatedOrderNumber=getTruncatedOrderNumber(orderNumber);return isReturnLabel?"".concat(t("orders:drawers:buyLabel:forOrder")," ").concat(truncatedOrderNumber):truncatedOrderNumber}},getSelectedFulfilledOrders=function(batchEntryIds,ordersData,batchEntryData){var ordersDataHashmap=ordersData.reduce((function(accum,curr){return accum[curr.objectId]=curr,accum}),{}),selectedBatchEntries=function(batchEntryIds,batchEntryData){return batchEntryIds.map((function(id){return batchEntryData[id]})).filter((function(be){return!!be}))}(batchEntryIds,batchEntryData);return selectedBatchEntries.filter((function(batchEntry){var order=ordersDataHashmap[batchEntry.orderObjectId];return!!order&&!batchEntry.isReturn&&(0,_utils_batchEntryRendering__WEBPACK_IMPORTED_MODULE_4__.WO)(order,!1,batchEntry)}))},singleOrMultiSelectionShouldShowCustoms=function(batchEntries,ordersData,selectedOrders,defaultUserAddress){var e_1,_a,e_2,_b;try{for(var _c=(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Ju)(Object.entries(selectedOrders)),_d=_c.next();!_d.done;_d=_c.next()){var _e=(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(_d.value,2),orderId=_e[0];if(!_e[1].length){var order=ordersData[orderId];if(order){var fromAddress=order.addressFrom||defaultUserAddress;if(order.toAddress&&fromAddress&&(0,_types_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_2__.p2)(order.toAddress,fromAddress))return!0}}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}try{for(var batchEntries_1=(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Ju)(batchEntries),batchEntries_1_1=batchEntries_1.next();!batchEntries_1_1.done;batchEntries_1_1=batchEntries_1.next()){var entry=batchEntries_1_1.value;if(entry.addressFrom&&entry.addressTo&&(0,_types_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_2__.p2)(entry.addressTo,entry.addressFrom))return!0}}catch(e_2_1){e_2={error:e_2_1}}finally{try{batchEntries_1_1&&!batchEntries_1_1.done&&(_b=batchEntries_1.return)&&_b.call(batchEntries_1)}finally{if(e_2)throw e_2.error}}return!1}},"./app/pages/Orders/Blackbeard/LabelPurchase/modules/Card/CardSummaryButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Card_CardSummaryButton});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),Stack=__webpack_require__("./node_modules/@goshippo/components/esm/Stack/Stack.js"),CheckCircle=__webpack_require__("./node_modules/@mui/icons-material/esm/CheckCircle.js"),colors=__webpack_require__("./node_modules/@goshippo/components/esm/styles/colors.js"),shippoTheme=__webpack_require__("./node_modules/@goshippo/components/esm/styles/shippoTheme.js"),ExpandLess=__webpack_require__("./node_modules/@mui/icons-material/esm/ExpandLess.js"),ExpandMore=__webpack_require__("./node_modules/@mui/icons-material/esm/ExpandMore.js"),Box=__webpack_require__("./node_modules/@goshippo/components/esm/Box/Box.js"),Card=__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/LabelPurchaseModules/Card/index.js"),react=__webpack_require__("./node_modules/react/index.js");const Card_useSaved=function(_a){var isUpdating=_a.isUpdating,_b=(0,tslib_es6.zs)((0,react.useState)(!1),2),isJustSaved=_b[0],setIsJustSaved=_b[1],isUpdatingPreviousRef=(0,react.useRef)(isUpdating);return isUpdatingPreviousRef.current&&!isUpdating&&(setIsJustSaved(!0),setTimeout((function(){setIsJustSaved(!1)}),1200)),isUpdatingPreviousRef.current=isUpdating,{showSaved:isJustSaved}};const Card_CardSummaryButton=function(_a){var hasUnsavedChanges=_a.hasUnsavedChanges,isError=_a.isError,isOpen=_a.isOpen,isUpdating=_a.isUpdating,savedText=_a.savedText,text=_a.text,color=isError||hasUnsavedChanges?"error":"secondary",variant=isError?"contained":"text",buttonContent=Card_useSaved({isUpdating:!!isUpdating}).showSaved&&!hasUnsavedChanges?(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({alignContent:"center",direction:"row"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CheckCircle.A,{sx:{color:"".concat(colors.T.primary," !important"),marginRight:shippoTheme.A.spacing(1)}}),savedText]})):text;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Card.V.vN,(0,tslib_es6.Cl)({color,"data-testid":isError?"card-summary-error-button":"card-summary-button",endIcon:isOpen?(0,emotion_react_jsx_runtime_browser_esm.Y)(ExpandLess.A,{"data-testid":"expand-less-icon",fontSize:"large"}):(0,emotion_react_jsx_runtime_browser_esm.Y)(ExpandMore.A,{"data-testid":"expand-more-icon",fontSize:"large"}),hasError:isError,size:"small",variant},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Box.A,{children:buttonContent})}))}},"./app/pages/Orders/Blackbeard/LabelPurchase/modules/CarrierIconMui.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@goshippo/components/esm/Badge/Badge.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@goshippo/components/esm/styles/colors.js"),_constants_carriers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/constants/carriers.ts");const __WEBPACK_DEFAULT_EXPORT__=function(_a){var _b,count=_a.count,provider=_a.provider,size=_a.size;_constants_carriers__WEBPACK_IMPORTED_MODULE_0__.bK[provider]&&(provider=_constants_carriers__WEBPACK_IMPORTED_MODULE_0__.bK[provider]);var icon=null===(_b=_constants_carriers__WEBPACK_IMPORTED_MODULE_0__.Ay.find((function(x){return x.name.toLowerCase()===provider.toLowerCase()})))||void 0===_b?void 0:_b.icon,sizeOrDefault=size||40;return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_2__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_3__.Cl)({badgeContent:count,color:"default",sx:{".MuiBadge-badge":{backgroundColor:_goshippo_components__WEBPACK_IMPORTED_MODULE_4__.T.secondary,color:_goshippo_components__WEBPACK_IMPORTED_MODULE_4__.T.white}}},{children:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Y)("img",{alt:provider,src:icon,style:{borderRadius:"0.125rem",height:"".concat(sizeOrDefault,"px"),width:"".concat(sizeOrDefault,"px")}})}))}},"./app/pages/Orders/Blackbeard/hooks/hooks/useRefreshRates.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var tslib__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-router/esm/react-router.js"),_actions_orders_actions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/actions/orders.actions.ts"),_selectors_batch_entry_composite_selectors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/selectors/batch-entry.composite.selectors.ts"),_selectors_batch_entry_selectors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./app/selectors/batch-entry.selectors.ts"),_utils_segment__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./app/utils/segment/index.ts"),_types_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./app/pages/Orders/Blackbeard/types/utils.ts");const __WEBPACK_DEFAULT_EXPORT__=function(orderSelection){var dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.wA)(),history=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_7__.W6)(),params=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_7__.g)(),_a=(0,tslib__WEBPACK_IMPORTED_MODULE_8__.zs)((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),isRefreshing=_a[0],setIsRefreshing=_a[1],batchEntries=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(orderSelection){var orders=Object.keys(orderSelection),batchEntries=Object.values(orderSelection);return orders.length>0&&batchEntries.length>0&&batchEntries[0].length>0}(orderSelection)?Object.values(orderSelection).flat():[]}),[orderSelection]),getBatchEntryIsCompleted=(0,_selectors_batch_entry_selectors__WEBPACK_IMPORTED_MODULE_4__.WX)(),getIsBatchEntryProcessingShipment=(0,_selectors_batch_entry_selectors__WEBPACK_IMPORTED_MODULE_4__.gx)(),getShipmentIsLoadingFromBatchEntry=(0,_selectors_batch_entry_composite_selectors__WEBPACK_IMPORTED_MODULE_3__.$T)(),completedEntries=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)((function(state){return getBatchEntryIsCompleted(state,{batchEntryIds:batchEntries})}),_types_utils__WEBPACK_IMPORTED_MODULE_6__.t7),processingEntries=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)((function(state){return getIsBatchEntryProcessingShipment(state,{batchEntryIds:batchEntries})}),_types_utils__WEBPACK_IMPORTED_MODULE_6__.t7),loadingEntries=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)((function(state){return getShipmentIsLoadingFromBatchEntry(state,{batchEntryIds:batchEntries})}),_types_utils__WEBPACK_IMPORTED_MODULE_6__.t7),newBatchEntry=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)((function(state){return(0,_selectors_batch_entry_selectors__WEBPACK_IMPORTED_MODULE_4__.rk)(state,{orderObjectId:params.orderId})}),_types_utils__WEBPACK_IMPORTED_MODULE_6__.t7);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){setIsRefreshing((function(oldValue){var newValue=0===batchEntries.length||!completedEntries&&(processingEntries||loadingEntries);return params.orderId&&batchEntries.length>0&&newBatchEntry.indexOf(batchEntries[0])<0&&!oldValue&&oldValue!==newValue&&history.push("/orders/".concat(params.orderId)),newValue}))}),[completedEntries,processingEntries,loadingEntries,batchEntries,params.orderId,newBatchEntry,history]);var selectedThingsCount=Object.entries(orderSelection).reduce((function(count,_a){var _b=(0,tslib__WEBPACK_IMPORTED_MODULE_8__.zs)(_a,2);_b[0];return count+(_b[1].length||1)}),0),handleRefresh=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(event){event.preventDefault(),event.stopPropagation(),(0,_utils_segment__WEBPACK_IMPORTED_MODULE_5__.u4)("Carrier Rates Updated",{orders_selected:selectedThingsCount}),dispatch((0,_actions_orders_actions__WEBPACK_IMPORTED_MODULE_2__.lN)(orderSelection))}),[dispatch,orderSelection,selectedThingsCount]);return{batchEntries,handleRefresh,isRefreshing}}},"./app/pages/Shipments/ShipmentsPage/ShipmentsTable/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>trackingStatusFieldToObject});__webpack_require__("./app/types/Transaction.ts");var trackingStatusFieldToObject=function(trackingStatus,isReturn){if(trackingStatus){var splitStatus=trackingStatus.split(": ");if(splitStatus.length<2)return{title:splitStatus[0].trim()};var title=splitStatus[0].trim();if("pre-transit"===title.toLowerCase()&&(title="Pre-transit"),isReturn)switch(title.toLowerCase()){case"pre-transit":title="".concat(title," return");break;case"in transit":case"in-transit":title="Return in transit";break;case"delivered":title="Return delivered";break;case"failure":title="Return failure"}return{description:splitStatus.slice(1).join(": ").trim(),title}}}},"./app/pages/StoreConnections/store/store-connect.actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var StoreConnectActionKeys;__webpack_require__.d(__webpack_exports__,{I:()=>startStoreConnect,U:()=>StoreConnectActionKeys}),function(StoreConnectActionKeys){StoreConnectActionKeys.START_STORE_CONNECT="START_STORE_CONNECT"}(StoreConnectActionKeys||(StoreConnectActionKeys={}));var startStoreConnect=function(storeSelection,readyForUrl,shippoLocation,params){return{payload:{params,readyForUrl,shippoLocation,storeSelection},type:StoreConnectActionKeys.START_STORE_CONNECT}}},"./app/pages/common/EmbeddableAuth/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ie:()=>checkForEmbeddableUser,jY:()=>getEmbeddableUser});var _a,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),colors=__webpack_require__("./node_modules/@goshippo/components/esm/styles/colors.js"),emotion_styled_browser_esm=__webpack_require__("./node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),dhl_express=(__webpack_require__("./app/assets/logo/shippo_logo_charcoal.svg"),__webpack_require__("./app/assets/carriers/dhl_express.svg")),fedex=__webpack_require__("./app/assets/carriers/fedex.svg"),ups=__webpack_require__("./app/assets/carriers/ups.svg"),usps=__webpack_require__("./app/assets/carriers/usps.svg"),godaddy=__webpack_require__("./app/assets/register/godaddy.png"),shopify=__webpack_require__("./app/assets/register/shopify.png"),square=__webpack_require__("./app/assets/register/square.png"),wix=__webpack_require__("./app/assets/register/wix.png"),ebay=__webpack_require__("./app/assets/shops/logos/ebay.svg"),logos_godaddy=__webpack_require__("./app/assets/shops/logos/godaddy.svg"),logos_shopify=__webpack_require__("./app/assets/shops/logos/shopify.svg"),logos_square=__webpack_require__("./app/assets/shops/logos/square.svg"),vector_wix=__webpack_require__("./app/assets/shops/vector/wix.svg"),Store=__webpack_require__("./app/types/Store.ts"),register_shopify={alt:"Shopify - Logo",appUrl:"https://apps.shopify.com/shippo",cobranded:!0,logo:logos_shopify,margin:"2rem",rightContent:shopify},register_wix={alt:"Wix - Logo",appUrl:"https://www.wix.com/app-market/shippo/overview",cobranded:!0,compact:!0,logo:vector_wix,rightContent:wix},register_godaddy={alt:"GoDaddy - Logo",cobranded:!1,logo:logos_godaddy,rightContent:godaddy},register_square={alt:"Square - Logo",cobranded:!1,logo:logos_square,rightContent:square},weebly={alt:"Square - Logo",cobranded:!1,logo:logos_square,rightContent:square},register_ebay={alt:"eBay - Logo",cobranded:!0,compact:!0,logo:ebay},register_usps={alt:"USPS - Logo",cobranded:!0,compact:!1,logo:usps,width:"9rem"},register_fedex={alt:"FedEx - Logo",cobranded:!0,compact:!1,logo:fedex,width:"7rem"},register_ups={alt:"UPS - Logo",cobranded:!0,compact:!1,height:"5rem",logo:ups,width:"5rem"},register_dhl_express={alt:"DHL Express - Logo",cobranded:!0,compact:!1,logo:dhl_express,margin:"2.188rem",width:"5rem"},responsive=((_a={})[Store.F8.Godaddy.toLowerCase()]=register_godaddy,_a[Store.F8.Shopify.toLowerCase()]=register_shopify,_a[Store.F8.Square.toLowerCase()]=register_square,_a[Store.F8.Weebly.toLowerCase()]=weebly,_a[Store.F8.Wix.toLowerCase()]=register_wix,_a[Store.F8.eBay.toLowerCase()]=register_ebay,_a.dhl_express=register_dhl_express,_a.fedex=register_fedex,_a.ups=register_ups,_a.usps=register_usps,__webpack_require__("./app/constants/responsive.ts"));(0,emotion_styled_browser_esm.A)("header")(templateObject_1||(templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 100%;\n  flex-shrink: 0;\n  background-color: ",";\n  padding: 2.5rem 0;\n\n  @media (max-width: ","px) {\n    padding: 1.5rem 0;\n    a {\n      display: block;\n    }\n  }\n"],["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: 100%;\n  flex-shrink: 0;\n  background-color: ",";\n  padding: 2.5rem 0;\n\n  @media (max-width: ","px) {\n    padding: 1.5rem 0;\n    a {\n      display: block;\n    }\n  }\n"])),colors.T.white,responsive.P.Tablet),(0,emotion_styled_browser_esm.A)("img")(templateObject_2||(templateObject_2=(0,tslib_es6.ue)(["\n  height: auto;\n  width: 7.75rem;\n  margin-left: 2.5rem;\n  @media (max-width: ","px) {\n    width: 6.25rem;\n    margin-left: 1.5rem;\n  }\n"],["\n  height: auto;\n  width: 7.75rem;\n  margin-left: 2.5rem;\n  @media (max-width: ","px) {\n    width: 6.25rem;\n    margin-left: 1.5rem;\n  }\n"])),responsive.P.Tablet),(0,emotion_styled_browser_esm.A)("img")(templateObject_3||(templateObject_3=(0,tslib_es6.ue)(["\n  height: auto;\n  width: 2.5rem;\n"],["\n  height: auto;\n  width: 2.5rem;\n"]))),(0,emotion_styled_browser_esm.A)("hr")(templateObject_4||(templateObject_4=(0,tslib_es6.ue)(["\n  height: 3rem;\n  margin: 0 1rem;\n  border: 0.5px solid ",";\n  @media (max-width: ","px) {\n    height: 2rem;\n    margin: 0 1rem;\n  }\n"],["\n  height: 3rem;\n  margin: 0 1rem;\n  border: 0.5px solid ",";\n  @media (max-width: ","px) {\n    height: 2rem;\n    margin: 0 1rem;\n  }\n"])),colors.T.borders,responsive.P.Tablet);var templateObject_1,templateObject_2,templateObject_3,templateObject_4,lib=__webpack_require__("./node_modules/qs/lib/index.js"),AcceptedInstallIntents=["bm-flow","bm-stores-orders","bm-stores-orders-list"],checkForEmbeddableUser=function(queryString){var queryParams=lib.parse(queryString,{decoder:decodeURIComponent,ignoreQueryPrefix:!0});return!!(queryParams.installIntent&&AcceptedInstallIntents.includes(queryParams.installIntent)||window.location.search.includes("Embed"))&&(localStorage.setItem("shippo_embeddable_user","true"),!0)},getEmbeddableUser=function(){return"true"===localStorage.getItem("shippo_embeddable_user")}},"./app/services/settings.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{closeAccount:()=>closeAccount,default:()=>__WEBPACK_DEFAULT_EXPORT__,fetchLabelSettings:()=>fetchLabelSettings,saveAreOrderTagsVisible:()=>saveAreOrderTagsVisible,saveDefaultServiceLevel:()=>saveDefaultServiceLevel,saveLabelSettings:()=>saveLabelSettings});var _services_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/services/api.ts"),saveLabelSettings=function(payload){return _services_api__WEBPACK_IMPORTED_MODULE_0__.YZ.request({data:payload,method:"POST",url:"/setting/label"})},fetchLabelSettings=function(){return _services_api__WEBPACK_IMPORTED_MODULE_0__.YZ.request({method:"GET",url:"/setting/label"})},saveDefaultServiceLevel=function(defaultServiceLevel,defaultReturnServiceLevel){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({data:{default_return_service_level:defaultReturnServiceLevel,default_service_level:defaultServiceLevel},method:"PATCH",url:"v1/ui/account"})},saveAreOrderTagsVisible=function(value){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({data:{are_order_tags_visible:value},method:"PATCH",url:"v1/ui/account"})},closeAccount=function(payload){return _services_api__WEBPACK_IMPORTED_MODULE_0__.YZ.request({data:payload,method:"POST",url:"/setting/close-account",validateStatus:function(status){return 200===status||201===status||400===status}})};const __WEBPACK_DEFAULT_EXPORT__={closeAccount,fetchLabelSettings,saveDefaultServiceLevel,saveLabelSettings}},"./app/services/stores.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{CF:()=>fetchLegacyStores,hO:()=>fetchStores});var _services_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/services/api.ts"),fetchStores=function(){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.get("ui/stores?connected=True&results=50")},fetchLegacyStores=function(){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.get("ui/shops")}},"./app/services/user.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$o:()=>createAsset,ES:()=>fetchAssets,HW:()=>getCurrentUser,JT:()=>updateCompany,Rh:()=>uploadAssetDraft,SK:()=>revertAssetDraft,SU:()=>uploadAndPublishAsset,gT:()=>updateAsset,hG:()=>deleteUser,hV:()=>publishAssetDraft,kw:()=>sendInvite,lw:()=>clearAssetDraft,nu:()=>addUser,qY:()=>getLoginUsers,uF:()=>fetchCompany,um:()=>createVerificationIntent,ut:()=>getVerificationStatus});var _services_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/services/api.ts"),_types_Asset__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/types/Asset.ts"),getCurrentUser=function(){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({method:"GET",url:"v1/ui/account"})},updateCompany=function(payload){return _services_api__WEBPACK_IMPORTED_MODULE_0__.YZ.request({data:payload,headers:{},method:"PUT",url:"/setting/company"})},fetchCompany=function(){return _services_api__WEBPACK_IMPORTED_MODULE_0__.YZ.request({method:"GET",url:"/setting/company/"})},fetchAssets=function(){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({method:"GET",url:"/ui/assets"})},uploadAssetDraft=function(assetObjectId,file){var formData=new FormData;return formData.append("file",file),_services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({data:formData,headers:{"Content-Type":"multipart/form-data"},method:"POST",url:"/ui/assets/".concat(assetObjectId,"/draft_image")})},publishAssetDraft=function(assetObjectId){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({method:"POST",url:"/ui/assets/".concat(assetObjectId,"/draft_image/publish")})},clearAssetDraft=function(assetObjectId){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({method:"POST",url:"/ui/assets/".concat(assetObjectId,"/draft_image/clear")})},revertAssetDraft=function(assetObjectId){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({method:"DELETE",url:"/ui/assets/".concat(assetObjectId,"/draft_image")})},uploadAndPublishAsset=function(assetType,file){var formData=new FormData;return formData.append("asset_type",assetType),formData.append("rank","1"),formData.append("file",file),_services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({data:formData,method:"POST",url:"/ui/assets/upload_and_publish"})},updateAsset=function(asset){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({data:(0,_types_Asset__WEBPACK_IMPORTED_MODULE_1__.U2)(asset),method:"PUT",url:"/ui/assets/".concat(asset.objectId)})},createAsset=function(asset){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({data:(0,_types_Asset__WEBPACK_IMPORTED_MODULE_1__.U2)(asset),method:"POST",url:"/ui/assets"})},createVerificationIntent=function(returnUrl){return _services_api__WEBPACK_IMPORTED_MODULE_0__.YZ.request({data:{return_url:returnUrl},method:"POST",url:"/id_verification"})},getVerificationStatus=function(){return _services_api__WEBPACK_IMPORTED_MODULE_0__.YZ.request({method:"GET",url:"/id_verification"})};var addUser=function(email){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({data:{email},method:"POST",url:"/ui/account/login_users"})},sendInvite=function(id){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({method:"POST",url:"/ui/account/login_users/".concat(id,"/send_invitation_email")})},deleteUser=function(id){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({method:"DELETE",url:"/ui/account/login_users/".concat(id)})},getLoginUsers=function(){return _services_api__WEBPACK_IMPORTED_MODULE_0__.Ay.request({method:"GET",url:"/ui/account/login_users?results=200"})}},"./app/utils/batchEntryRendering.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{GE:()=>getOldExperienceTransaction,MY:()=>noRatesErrorState,WO:()=>isRowEntryFulfilled,lo:()=>getShouldRenderOldExperienceData,nr:()=>lineItemsFromBatchEntry,s0:()=>isPartialParentRow});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_types_Order__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/types/Order.ts"),_types_OrdersBatch__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/types/OrdersBatch.ts"),getOldExperienceTransaction=(__webpack_require__("./app/types/Transaction.ts"),function(transactions,batchEntry){return(null==batchEntry?void 0:batchEntry.transactionObjectId)?transactions.find((function(t){return t.objectId===batchEntry.transactionObjectId})):transactions[transactions.length-1]}),getShouldRenderOldExperienceData=function(order,batchEntry){var isFulfilledWithCompleteOrErrorBatchEntry=function(order,batchEntry){return!(!(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.sf)(order)||!batchEntry||[_types_OrdersBatch__WEBPACK_IMPORTED_MODULE_1__.DO.COMPLETE_SHIPMENT,_types_OrdersBatch__WEBPACK_IMPORTED_MODULE_1__.DO.PENDING,_types_OrdersBatch__WEBPACK_IMPORTED_MODULE_1__.DO.PROCESSING_SHIPMENT].includes(batchEntry.objectStatus)||0!==batchEntry.partialFulfillmentRank)}(order,batchEntry);return((0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.Pt)(order)&&!batchEntry||isFulfilledWithCompleteOrErrorBatchEntry)&&!(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.Gy)(order)},noRatesErrorState=function(batchEntry,shipment){return!!(batchEntry&&batchEntry.objectStatus===_types_OrdersBatch__WEBPACK_IMPORTED_MODULE_1__.DO.COMPLETE_SHIPMENT&&shipment&&0===shipment.rates.length&&shipment.messages.length>0)},isPartialParentRow=function(ordersRenderData){return"partial-parent"===ordersRenderData.kind},isRowEntryFulfilled=function(order,partialParentRow,batchEntry){return!(!batchEntry||batchEntry.objectStatus!==_types_OrdersBatch__WEBPACK_IMPORTED_MODULE_1__.DO.COMPLETE_TRANSACTION||!(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.sf)(order)&&!(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.AJ)(order))||(!(!partialParentRow||!(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__._g)(order))||!!(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.Pt)(order))},lineItemsFromBatchEntry=function(order,batchEntry){if(!batchEntry||0===batchEntry.lineItems.length)return order.lineItems;var orderLineItemMap=order.lineItems.reduce((function(accum,li){return accum[li.objectId]=li,accum}),{});return batchEntry.lineItems.filter((function(lineItem){return orderLineItemMap[lineItem.objectId]})).reduce((function(list,lineItemLite){var lineItem=orderLineItemMap[lineItemLite.objectId],quantity=lineItemLite.quantity;return list.push((0,tslib__WEBPACK_IMPORTED_MODULE_3__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_3__.Cl)({},lineItem),{quantity,totalAmount:(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.YN)(lineItem.unitAmount,quantity),totalWeight:(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.YN)(lineItem.unitWeight,quantity)})),list}),[])}},"./app/utils/orderValidation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>getPackageErrors,u:()=>getOrderErrors});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),getOrderErrors=function(order,batchEntry){var batchEntryErrors=(null==batchEntry?void 0:batchEntry.errors)?(0,tslib__WEBPACK_IMPORTED_MODULE_0__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_0__.zs)(batchEntry.errors),!1):[],orderErrors=0===(null==batchEntry?void 0:batchEntry.partialFulfillmentRank)||0===order.partialFulfillmentRequests.length?(0,tslib__WEBPACK_IMPORTED_MODULE_0__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_0__.zs)(order.errors||[]),!1):[];return batchEntryErrors.length?batchEntryErrors:orderErrors},getPackageErrors=function(t,hasValidSenderAddress,hasPhoneNumberRequiredError,order,batchEntry,addressFrom){var _a,_b,_c,_d,errors=[];batchEntry&&!batchEntry.parcel||!batchEntry&&!order.parcel?errors.push(t("orders:table:errors:missingParcelInfo")):(batchEntry?Number(null===(_a=null==batchEntry?void 0:batchEntry.parcel)||void 0===_a?void 0:_a.weight)>0&&(null===(_b=null==batchEntry?void 0:batchEntry.parcel)||void 0===_b?void 0:_b.weightUnit):Number(null===(_c=null==order?void 0:order.parcel)||void 0===_c?void 0:_c.weight)>0&&(null===(_d=null==order?void 0:order.parcel)||void 0===_d?void 0:_d.weightUnit))||errors.push(t("orders:table:errors:missingParcelWeight"));return order.toAddress||(null==batchEntry?void 0:batchEntry.addressTo)||errors.push(t("orders:table:errors:missingRecipientAddress")),hasValidSenderAddress||addressFrom||errors.push(t("orders:table:errors:missingSenderAddress")),hasPhoneNumberRequiredError&&errors.push(t("orders:calculateRates:rates:errors:senderPhoneNumber")),errors}},"./app/pages/Orders/Blackbeard/Drawers/AddressDrawer/AddressMultiselectDrawer.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Regular:()=>Regular,default:()=>AddressMultiselectDrawer_stories});var packages_service_namespaceObject={};__webpack_require__.r(packages_service_namespaceObject),__webpack_require__.d(packages_service_namespaceObject,{create:()=>create,del:()=>del,get:()=>packages_service_get,put:()=>packages_service_put,update:()=>update});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),redux=__webpack_require__("./node_modules/redux/es/redux.js"),mocks=__webpack_require__("./app/tests/mocks/index.ts"),utils_translate=__webpack_require__("./app/utils/translate.ts"),reducers=__webpack_require__("./app/reducers/index.ts"),react=__webpack_require__("./node_modules/react/index.js"),MobileAndDesktopDrawer=__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/shared/MobileAndDesktopDrawer/index.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),addressBook=__webpack_require__("./app/constants/addressBook.ts"),DrawerProvider=__webpack_require__("./app/contexts/DrawerProvider.tsx"),countries=__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/constants/countries.js"),states=__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/constants/states.js"),lodash_es_flatten=__webpack_require__("./node_modules/lodash-es/flatten.js"),orders_actions=__webpack_require__("./app/actions/orders.actions.ts"),reselect_es=__webpack_require__("./node_modules/reselect/es/index.js"),address_actions=__webpack_require__("./app/actions/address.actions.ts"),address_selectors=__webpack_require__("./app/selectors/address.selectors.ts"),batch_entry_composite_selectors=__webpack_require__("./app/selectors/batch-entry.composite.selectors.ts"),user_selectors=__webpack_require__("./app/selectors/user.selectors.ts"),utils_observability=__webpack_require__("./app/utils/observability/index.ts"),getNamedAddressBook=(0,reselect_es.Mz)([function(state){return state.address.addressBookInstances},function(_,addressBookName){return addressBookName}],(function(instances,addressBookName){return instances[addressBookName]})),getAddressBookInitialized=(0,reselect_es.Mz)(getNamedAddressBook,(function(instance){return!!(null==instance?void 0:instance.initialized)})),getCurrentAction=(0,reselect_es.Mz)(getNamedAddressBook,(function(instance){return(null==instance?void 0:instance.currentAction)||null})),getCombineSenderReturnAddresses=(0,reselect_es.Mz)(getNamedAddressBook,(function(instance){return!!(null==instance?void 0:instance.combineSenderReturnAddresses)})),useAddressBook=function(addressBookName){var _a=function(addressBookName){var addresses=(0,es.d4)(address_selectors.tS),addressesList=(0,react.useMemo)((function(){return Object.values(addresses)}),[addresses]),selectedAddresses=(0,es.d4)((function(state){return(0,address_selectors.Ae)(state,{addressBookName})})),currentAction=(0,es.d4)((function(state){return getCurrentAction(state,addressBookName)})),initialized=(0,es.d4)((function(state){return getAddressBookInitialized(state,addressBookName)})),combineSenderReturnAddresses=(0,es.d4)((function(state){return getCombineSenderReturnAddresses(state,addressBookName)})),isSenderAddressValid=(0,es.d4)(user_selectors.Oz),isSelectedSenderInSavedAddresses=(0,es.d4)((function(state){return(0,address_selectors.A1)(state,{addressBookName,addressKey:addressBook.y9})})),isSelectedReturnInSavedAddresses=(0,es.d4)((function(state){return(0,address_selectors.A1)(state,{addressBookName,addressKey:addressBook.lj})})),areAllSenderReturnAddressesEqual=(0,es.d4)(batch_entry_composite_selectors.lu);return{addressErrorMessage:(0,es.d4)(address_selectors.sH),addresses,addressesList,areAllSenderReturnAddressesEqual,combineSenderReturnAddresses,currentAction,initialized,isSelectedReturnInSavedAddresses,isSelectedSenderInSavedAddresses,isSenderAddressValid,selectedAddresses}}(addressBookName),addresses=_a.addresses,addressesList=_a.addressesList,areAllSenderReturnAddressesEqual=_a.areAllSenderReturnAddressesEqual,combineSenderReturnAddresses=_a.combineSenderReturnAddresses,currentAction=_a.currentAction,initialized=_a.initialized,isSelectedReturnInSavedAddresses=_a.isSelectedReturnInSavedAddresses,isSelectedSenderInSavedAddresses=_a.isSelectedSenderInSavedAddresses,isSenderAddressValid=_a.isSenderAddressValid,selectedAddresses=_a.selectedAddresses,addressBookCallbacks=function(addressBookName,combineSenderReturnAddresses){var dispatch=(0,es.wA)(),initializeAddressBook=(0,react.useCallback)((function(addresses,combineSenderReturnAddresses){dispatch((0,address_actions.gX)(addressBookName,addresses,combineSenderReturnAddresses))}),[addressBookName,dispatch]),selectAddress=(0,react.useCallback)((function(key,address){dispatch((0,address_actions.YK)(addressBookName,key,address))}),[addressBookName,dispatch]),onSelectAddressForOrders=(0,react.useCallback)((function(addressType,orderSelection,newAddress,trackingReference){utils_observability.O.startEvent("RATE_REFRESH_LABEL_DRAWER_ADDRESS_CARD");var dupedNewAddress=(0,tslib_es6.Cl)({},newAddress);dupedNewAddress.id&&delete dupedNewAddress.id,dispatch((0,orders_actions.kR)({address:dupedNewAddress,addressType,combineSenderReturnAddresses:!1,createUserAddress:!1,orderSelection,source:"",trackingReference})),dispatch((0,address_actions.YK)(addressBookName,addressType,dupedNewAddress))}),[addressBookName,dispatch]),clearAddress=(0,react.useCallback)((function(key){dispatch((0,address_actions.Vl)(addressBookName,key))}),[addressBookName,dispatch]),fetchAddresses=(0,react.useCallback)((function(){dispatch((0,address_actions.ls)())}),[dispatch]),toggleCombineSenderReturnAddresses=(0,react.useCallback)((function(){return dispatch((0,address_actions.Fd)(addressBookName))}),[addressBookName,dispatch]),clearAddressBook=(0,react.useCallback)((function(){dispatch((0,address_actions.OK)(addressBookName))}),[addressBookName,dispatch]),onAddressBookConsumerMounted=(0,react.useCallback)((function(initialAddresses){void 0===initialAddresses&&(initialAddresses={}),(0,address_actions.gX)(addressBookName,initialAddresses)}),[addressBookName]),onSubmitEditedAddress=(0,react.useCallback)((function(orderSelection,newAddress,addressType,_a,trackingReference){var shouldSaveAddress=_a.shouldSaveAddress,useAsReturn=_a.useAsReturn;useAsReturn!==combineSenderReturnAddresses&&toggleCombineSenderReturnAddresses(),selectAddress(addressType,newAddress),orderSelection&&dispatch((0,orders_actions.kR)({address:newAddress,addressType,combineSenderReturnAddresses:useAsReturn,createUserAddress:shouldSaveAddress,orderSelection,source:addressBookName,trackingReference})),addressType===addressBook.y9&&useAsReturn&&(selectAddress(addressBook.lj,newAddress),orderSelection&&dispatch((0,orders_actions.kR)({address:newAddress,addressType:addressBook.lj,combineSenderReturnAddresses:useAsReturn,createUserAddress:!1,orderSelection,source:addressBookName,trackingReference})))}),[addressBookName,combineSenderReturnAddresses,dispatch,selectAddress,toggleCombineSenderReturnAddresses]);return{clearAddress,clearAddressBook,fetchAddresses,initializeAddressBook,onAddressBookConsumerMounted,onSelectAddressForOrders,onSubmitEditAddressBookAddress:(0,react.useCallback)((function(payload){dispatch((0,address_actions.h_)(payload))}),[address_actions.h_,dispatch]),onSubmitEditedAddress,selectAddress,toggleCombineSenderReturnAddresses}}(addressBookName,combineSenderReturnAddresses),clearAddressBook=addressBookCallbacks.clearAddressBook,fetchAddresses=addressBookCallbacks.fetchAddresses;return(0,react.useEffect)((function(){return fetchAddresses(),function(){clearAddressBook()}}),[clearAddressBook,fetchAddresses]),(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},addressBookCallbacks),{addresses,addressesList,areAllSenderReturnAddressesEqual,combineSenderReturnAddresses,currentAction,initialized,isSelectedReturnInSavedAddresses,isSelectedSenderInSavedAddresses,isSenderAddressValid,selectedAddresses})},orders_selectors=__webpack_require__("./app/selectors/orders.selectors.ts"),Address=__webpack_require__("./app/types/Address.ts"),getAddressFromAddressBook=function(address,addresses){var matchingAddressBookEntry=address&&Object.values(addresses).find((function(a){return(0,Address.fq)(a,address)}));return(null==matchingAddressBookEntry?void 0:matchingAddressBookEntry.id)||address||null},constants_countries=__webpack_require__("./app/constants/countries.ts"),hooks_usePrevious=__webpack_require__("./app/hooks/usePrevious.ts"),useEELPFCRollout=__webpack_require__("./app/modules/eelPfc/hooks/useEELPFCRollout.ts"),styles_colors=__webpack_require__("./node_modules/@goshippo/components/esm/styles/colors.js"),emotion_react_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),emotion_styled_browser_esm=__webpack_require__("./node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),noop=__webpack_require__("./node_modules/lodash-es/noop.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),constants=__webpack_require__("./app/actions/constants.ts"),fetchServiceLevelsByAccount=function(){return{type:constants.t.FETCH_SERVICE_LEVELS_BY_ACCOUNT}},fetchServiceLevelsByAccountSuccess=function(providerAccounts){return{payload:{providerAccounts},type:constants.t.FETCH_SERVICE_LEVELS_BY_ACCOUNT_SUCCESS}},fetchServiceLevelsByAccountError=function(errorMessage){return{payload:{errorMessage},type:constants.t.FETCH_SERVICE_LEVELS_BY_ACCOUNT_ERROR}},icon_splitment_arrow=__webpack_require__("./app/assets/icons/icon_splitment_arrow.svg"),CountryFlag=__webpack_require__("./app/components/CountryFlag/index.ts"),kebabCase=__webpack_require__("./node_modules/lodash-es/kebabCase.js"),styles_constants=__webpack_require__("./app/styles/constants.ts"),cellStyles=(0,emotion_react_browser_esm.AH)(templateObject_1||(templateObject_1=(0,tslib_es6.ue)(["\n  display: table-cell;\n  height: inherit;\n  padding: 15px 15px;\n  vertical-align: middle;\n  font-size: 13px;\n  line-height: 18px;\n  font-weight: ",";\n\n  :first-of-type {\n    padding-left: 10px;\n  }\n\n  :last-of-type {\n    padding-right: 10px;\n  }\n"],["\n  display: table-cell;\n  height: inherit;\n  padding: 15px 15px;\n  vertical-align: middle;\n  font-size: 13px;\n  line-height: 18px;\n  font-weight: ",";\n\n  :first-of-type {\n    padding-left: 10px;\n  }\n\n  :last-of-type {\n    padding-right: 10px;\n  }\n"])),styles_constants.Wy.normal),Cell=(0,emotion_styled_browser_esm.A)("td")(templateObject_2||(templateObject_2=(0,tslib_es6.ue)(["\n  ",";\n  ","\n\n  color: ",";\n\n  ","\n  ","\n  ","\n  ","\n  ",";\n"],["\n  ",";\n  ","\n\n  color: ",";\n\n  ","\n  ","\n  ","\n  ","\n  ",";\n"])),cellStyles,(function(props){return props.cursor?"cursor: ".concat(props.cursor,";"):props.onClick?"cursor: pointer;":""}),styles_constants.Tj.gray700,(function(props){return props.noLeftPadding?"padding-left: 0;":""}),(function(props){return props.noRightPadding?"padding-right: 0;":""}),(function(_a){return _a.noPadding?"padding: 0;":""}),(function(props){return props.verticalAlign?"vertical-align: ".concat(props.verticalAlign,";"):""}),(function(props){return props.customStyles})),Header=(0,emotion_styled_browser_esm.A)("th")(templateObject_3||(templateObject_3=(0,tslib_es6.ue)(["\n  ",";\n  color: ",";\n  font-size: 12px;\n  font-weight: 400;\n  width: ",";\n  ","\n  text-align: left;\n\n  ","\n  ","\n  ","\n"],["\n  ",";\n  color: ",";\n  font-size: 12px;\n  font-weight: 400;\n  width: ",";\n  ","\n  text-align: left;\n\n  ","\n  ","\n  ","\n"])),cellStyles,styles_constants.Tj.secondary,(function(props){return props.width||"inherit"}),(function(props){return props.minWidth?"min-width: ".concat(props.minWidth,";"):""}),(function(props){return props.noLeftPadding?"padding-left: 0;":""}),(function(props){return props.noRightPadding?"padding-right: 0;":""}),(function(props){return props.customStyles}));const Table_TableCell=react.memo((function(props){var asGrid=props.asGrid,children=props.children,colSpan=props.colSpan,cursor=props.cursor,customStyles=props.customStyles,isHeader=props.isHeader,noLeftPadding=props.noLeftPadding,noPadding=props.noPadding,noRightPadding=props.noRightPadding,onClick=props.onClick,rowIndex=props.rowIndex,verticalAlign=props.verticalAlign,width=props.width,onClickCallback=react.useCallback((function(evt){if(onClick&&void 0!==rowIndex)return evt.stopPropagation(),onClick(rowIndex)}),[onClick,rowIndex]),CellComponent=isHeader?Header:Cell;return(0,emotion_react_jsx_runtime_browser_esm.Y)(CellComponent,(0,tslib_es6.Cl)({asGrid,colSpan,cursor,customStyles,isHeader,noLeftPadding,noPadding,noRightPadding,onClick:onClick?onClickCallback:void 0,verticalAlign,width},{children}))}));var templateObject_1,templateObject_2,templateObject_3,Row=(0,emotion_styled_browser_esm.A)("tr")(TableRow_templateObject_1||(TableRow_templateObject_1=(0,tslib_es6.ue)(["\n  ","\n\n  border-bottom: 1px solid ",";\n\n  :hover {\n    background-color: ",";\n  }\n\n  thead > &:hover {\n    background-color: white;\n  }\n\n  ","\n\n  ",";\n"],["\n  ","\n\n  border-bottom: 1px solid ",";\n\n  :hover {\n    background-color: ",";\n  }\n\n  thead > &:hover {\n    background-color: white;\n  }\n\n  ","\n\n  ",";\n"])),(function(props){return props.clickable?"cursor: pointer;":""}),styles_constants.Tj.gray50,styles_colors.T.accent.background.success,(function(_a){var asGrid=_a.asGrid,customStyles=_a.customStyles;return asGrid?"display: contents; :hover > td {\n        background-color: ".concat(styles_colors.T.accent.background.success,";\n        }\n        > td {\n          border-bottom: 1px solid ").concat(styles_constants.Tj.gray50,";\n          ").concat(null==customStyles?void 0:customStyles.styles,"\n        }\n        > th {\n          border-bottom: 1px solid ").concat(styles_constants.Tj.gray50,";\n        }\n        "):""}),(function(props){return props.customStyles})),selectedStyles=(0,emotion_react_browser_esm.AH)(TableRow_templateObject_2||(TableRow_templateObject_2=(0,tslib_es6.ue)(["\n  background-color: ",";\n"],["\n  background-color: ",";\n"])),styles_colors.T.accent.background.success),TableRow=react.memo((function(props){var asGrid=props.asGrid,children=props.children,customStyles=props.customStyles,dataPendo=props.dataPendo,forwardRef=props.forwardRef,isSelected=props.isSelected,onClick=props.onClick,rowIndex=props.rowIndex,classes=isSelected?selectedStyles:void 0,onClickCallback=react.useCallback((function(){if(onClick)return onClick(rowIndex||0)}),[onClick,rowIndex]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(Row,(0,tslib_es6.Cl)({asGrid,clickable:!!onClick,css:classes,customStyles,"data-pendo":dataPendo,onClick:onClickCallback,ref:forwardRef},{children}))})),MessageRow=(0,emotion_styled_browser_esm.A)(Row)(TableRow_templateObject_3||(TableRow_templateObject_3=(0,tslib_es6.ue)(["\n  color: #95a3b7;\n  background-color: #f1f6fa;\n  text-align: center;\n"],["\n  color: #95a3b7;\n  background-color: #f1f6fa;\n  text-align: center;\n"])));const Table_TableRow=TableRow;var TableRow_templateObject_1,TableRow_templateObject_2,TableRow_templateObject_3,Container=(0,emotion_styled_browser_esm.A)("table")(Table_templateObject_1||(Table_templateObject_1=(0,tslib_es6.ue)(["\n  width: 100%;\n  border-collapse: collapse;\n  table-layout: ",";\n  ","\n"],["\n  width: 100%;\n  border-collapse: collapse;\n  table-layout: ",";\n  ","\n"])),(function(_a){return _a.autoLayout?"auto":"fixed"}),(function(_a){var grid=_a.grid;return grid?Object.entries(grid).reduce((function(css,_a){var _b=(0,tslib_es6.zs)(_a,2),key=_b[0],val=_b[1];return val?"".concat(css).concat((0,kebabCase.A)(key),":").concat(val,";"):css}),"display:grid;"):""})),TableHeader=(0,emotion_styled_browser_esm.A)("thead")(Table_templateObject_2||(Table_templateObject_2=(0,tslib_es6.ue)(["\n  ","\n"],["\n  ","\n"])),(function(_a){return _a.asGrid?"display: contents;":""})),TableBody=(0,emotion_styled_browser_esm.A)("tbody")(Table_templateObject_3||(Table_templateObject_3=(0,tslib_es6.ue)(["\n  ","\n"],["\n  ","\n"])),(function(_a){return _a.asGrid?"display: contents;":""})),MessageLink=(0,emotion_styled_browser_esm.A)("a")(templateObject_4||(templateObject_4=(0,tslib_es6.ue)(["\n  text-decoration: underline;\n  cursor: pointer;\n"],["\n  text-decoration: underline;\n  cursor: pointer;\n"])));const Table_Table=function(props){var autoLayout=props.autoLayout,children=props.children,columns=props.columns,customRowStyles=props.customRowStyles,data=props.data,fixedFirstRow=props.fixedFirstRow,grid=props.grid,message=props.message,messageTag=props.messageTag,onMessageClick=props.onMessageClick,onRowClick=props.onRowClick,rowClickTag=props.rowClickTag,selectedIndexes=props.selectedIndexes,hideHeader=react.useMemo((function(){return columns.every((function(col){return!col.header}))}),[columns]),renderCell=function(column,data,cellIndex,rowIndex){var cell=column.cell,cursor=column.cursor,customCellStyles=column.customCellStyles,noLeftPadding=column.noLeftPadding,noPadding=column.noPadding,noRightPadding=column.noRightPadding,onCellClick=column.onCellClick,verticalAlign=column.verticalAlign,width=column.width,CellComponent=cell,columnAlignment=verticalAlign||props.columnVerticalAlignment||void 0,cellProps={cursor,customStyles:"function"==typeof customCellStyles?customCellStyles({data,rowIndex}):customCellStyles,noLeftPadding,noPadding,noRightPadding,rowIndex,verticalAlign:columnAlignment};return hideHeader&&(cellProps.width=width),(0,emotion_react_browser_esm.n)(Table_TableCell,(0,tslib_es6.Cl)({},cellProps,{asGrid:!!grid,key:"cell-".concat(rowIndex,"-").concat(cellIndex),onClick:onCellClick}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CellComponent,{data,rowIndex}))},header=react.useMemo((function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(TableHeader,(0,tslib_es6.Cl)({asGrid:!!grid},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Table_TableRow,(0,tslib_es6.Cl)({asGrid:!!grid},{children:columns.map((function(column,index){var isComponent="string"!=typeof column.header,HeaderComponent=column.header;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Table_TableCell,(0,tslib_es6.Cl)({customStyles:"function"==typeof column.customHeaderStyles?column.customHeaderStyles():column.customHeaderStyles,isHeader:!0,minWidth:column.minWidth,noLeftPadding:column.noLeftPadding,noRightPadding:column.noRightPadding,width:column.width},{children:isComponent?(0,emotion_react_jsx_runtime_browser_esm.Y)(HeaderComponent,{}):column.header}),"heading-".concat(index))}))}))}))}),[columns]),rows=react.useMemo((function(){return data.map((function(d,rowIndex){return(0,emotion_react_jsx_runtime_browser_esm.Y)(Table_TableRow,(0,tslib_es6.Cl)({asGrid:!!grid,customStyles:"function"==typeof customRowStyles?customRowStyles({data:d,rowIndex}):customRowStyles,dataPendo:rowClickTag||"",isSelected:!!selectedIndexes&&selectedIndexes.includes(rowIndex),onClick:onRowClick,rowIndex},{children:columns.map((function(column,cellIndex){return renderCell(column,d,cellIndex,rowIndex)}))}),"row-".concat(rowIndex))}))}),[data,columns,selectedIndexes]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(Container,(0,tslib_es6.Cl)({autoLayout,className:props.className,grid},{children:[!hideHeader&&header,(0,emotion_react_jsx_runtime_browser_esm.FD)(TableBody,(0,tslib_es6.Cl)({asGrid:!!grid},{children:[message&&!grid&&(0,emotion_react_jsx_runtime_browser_esm.Y)(MessageRow,(0,tslib_es6.Cl)({"data-pendo":messageTag||"",onClick:onMessageClick},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Table_TableCell,(0,tslib_es6.Cl)({colSpan:columns.length},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(MessageLink,{children:message})}))})),fixedFirstRow&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Table_TableRow,{children:(props.fixedFirstRow||[]).map((function(column,cellIndex){return renderCell(column,null,cellIndex,0)}))},"custom-row"),rows]})),children]}))};var Table_templateObject_1,Table_templateObject_2,Table_templateObject_3,templateObject_4,AddressText=__webpack_require__("./app/components/AddressText/index.ts"),Link=__webpack_require__("./app/components/Link/index.ts"),exclamation_circle_yellow=__webpack_require__("./app/assets/icons/exclamation_circle_yellow.svg"),RequiredText=(0,emotion_styled_browser_esm.A)("div")(OrderInfoHeader_templateObject_1||(OrderInfoHeader_templateObject_1=(0,tslib_es6.ue)(["\n  color: ",";\n  font-size: 0.875rem;\n"],["\n  color: ",";\n  font-size: 0.875rem;\n"])),styles_constants.Tj.macaroni900);var OrderInfoHeader_templateObject_1;const components_OrderInfoHeader=(0,utils_translate.Tl)("orders")((function(props){var required=props.required,t=props.t,title=props.title;return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex justify-between items-center"},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex items-center leading-6"},{children:[required?(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"",className:"h-4 mr-2",src:exclamation_circle_yellow}):null,(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"font-medium text-base"},{children:title}))]})),required?(0,emotion_react_jsx_runtime_browser_esm.Y)(RequiredText,{children:t("orders:errors:popup:required")}):null]}))}));var Description=(0,emotion_styled_browser_esm.A)("div")(OrderError_templateObject_1||(OrderError_templateObject_1=(0,tslib_es6.ue)(["\n  line-height: 1.25rem;\n  font-size: 0.75rem;\n  color: ",";\n  padding-top: 0.5rem;\n  text-align: center;\n"],["\n  line-height: 1.25rem;\n  font-size: 0.75rem;\n  color: ",";\n  padding-top: 0.5rem;\n  text-align: center;\n"])),styles_constants.Tj.gray400);var OrderError_templateObject_1;const components_OrderError=function(props){var description=props.description,title=props.title;return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(components_OrderInfoHeader,{required:!0,title}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Description,{children:description})]})};var plus=__webpack_require__("./app/assets/icons/plus/plus.svg");const components_PlusButton=function(props){var children=props.children,dataAnalytics=props.dataAnalytics,onClick=props.onClick;return(0,emotion_react_jsx_runtime_browser_esm.FD)("button",(0,tslib_es6.Cl)({className:"flex items-center border-none bg-transparent cursor-pointer p-0 focus:outline-none","data-analytics":dataAnalytics,onClick},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"",className:"h-6",src:plus}),children]}))};var Popup=__webpack_require__("./app/components/Popup/index.ts"),context=__webpack_require__("./app/components/withAddressBook/context.ts"),AddressValue=(0,emotion_styled_browser_esm.A)("div")(CustomerInfo_templateObject_1||(CustomerInfo_templateObject_1=(0,tslib_es6.ue)(["\n  word-break: break-word;\n  color: ",";\n  font-size: 0.875rem;\n"],["\n  word-break: break-word;\n  color: ",";\n  font-size: 0.875rem;\n"])),styles_constants.Tj.gray1000),NormalAddressValue=(0,emotion_styled_browser_esm.A)(AddressValue)(CustomerInfo_templateObject_2||(CustomerInfo_templateObject_2=(0,tslib_es6.ue)(["\n  font-weight: ",";\n"],["\n  font-weight: ",";\n"])),styles_constants.Wy.normal),PrimaryCellContentText=(0,emotion_styled_browser_esm.A)("div")(CustomerInfo_templateObject_3||(CustomerInfo_templateObject_3=(0,tslib_es6.ue)(["\n  color: ",";\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n  word-break: break-word;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"],["\n  color: ",";\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n  word-break: break-word;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"])),styles_constants.Tj.gray1000,styles_constants.Wy.medium),SecondaryCellContentText=(0,emotion_styled_browser_esm.A)("div")(CustomerInfo_templateObject_4||(CustomerInfo_templateObject_4=(0,tslib_es6.ue)(["\n  color: ",";\n  font-size: 0.8125rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n  word-break: break-word;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"],["\n  color: ",";\n  font-size: 0.8125rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n  word-break: break-word;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"])),styles_constants.Tj.gray700,styles_constants.Wy.normal),PopupContainer=(0,emotion_styled_browser_esm.A)("div")(templateObject_5||(templateObject_5=(0,tslib_es6.ue)(["\n  width: 15rem;\n"],["\n  width: 15rem;\n"]))),RecipientAddressTriggerWrapper=(0,emotion_styled_browser_esm.A)("div")(templateObject_6||(templateObject_6=(0,tslib_es6.ue)(["\n  min-height: ",";\n"],["\n  min-height: ",";\n"])),styles_constants.df);const CustomerInfo=(0,utils_translate.Tl)("orders")((function(props){var triggerContent,popupContent,address=props.address,orderSelection=props.orderSelection,t=props.t,addressBookContext=react.useContext(context.o),handleOpenAddressModal=react.useCallback((function(mode){return function(e){e.stopPropagation(),address&&"edit"===mode?(addressBookContext.selectAddress(addressBook.i1,address),addressBookContext.openEditAddress(addressBook.i1,orderSelection)):"create"===mode&&addressBookContext.openCreateAddress(addressBook.i1,orderSelection)}}),[address,orderSelection]);if(address){var zip=address.country&&"US"===address.country.iso2?(0,Address.dY)(address.zip):address.zip,countryCode=address.country&&address.country.iso2;triggerContent=props.shortenedAddress?(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex h-full p-2 mx-0.5"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CountryFlag.A,{className:"mr-3",country:countryCode||"US"}),(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex flex-col self-center"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(PrimaryCellContentText,(0,tslib_es6.Cl)({className:"".concat(styles_constants.xW.fulfilledOrderText," w-full")},{children:address.name})),(0,emotion_react_jsx_runtime_browser_esm.Y)(SecondaryCellContentText,(0,tslib_es6.Cl)({className:"mt-1"},{children:"".concat(address.city,", ").concat(address.state," ").concat(zip)}))]}))]})):(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(NormalAddressValue,(0,tslib_es6.Cl)({className:styles_constants.xW.fulfilledOrderText},{children:address.name})),(0,emotion_react_jsx_runtime_browser_esm.Y)("span",{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(AddressValue,(0,tslib_es6.Cl)({className:styles_constants.xW.fulfilledOrderText},{children:[address.city," ",address.state," ",address.zip," ",address.country?address.country.iso2:""]}))})]}),popupContent=(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(AddressText.A,{address,showContact:!0,showNameOrCompany:!0}),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"flex flex-row-reverse leading-6 text-sm pt-2 font-medium"},{children:orderSelection&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.tp,(0,tslib_es6.Cl)({onClick:handleOpenAddressModal("edit")},{children:t("orders:address:editRecipient")}))}))]})}else{if(!orderSelection)return null;triggerContent=(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"-ml-1 p-4"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(components_PlusButton,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"leading-4 font-medium text-sm text-left"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.tp,{children:t("orders:address:addRecipient")})}))})})),popupContent=(0,emotion_react_jsx_runtime_browser_esm.Y)(components_OrderError,{description:t("orders:errors:popup:recipient:description"),title:t("orders:errors:popup:recipient:title")})}return(0,emotion_react_jsx_runtime_browser_esm.Y)(RecipientAddressTriggerWrapper,(0,tslib_es6.Cl)({className:"h-full w-full flex items-center","data-e2e":"recipient-address",onClick:address?void 0:handleOpenAddressModal("create")},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({flowing:!0,hoverable:!0,on:"hover",position:"bottom center",trigger:triggerContent,wrapperClassName:"w-full h-full flex flex-col justify-center",wrapperStyle:{minHeight:styles_constants.df}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(PopupContainer,{children:popupContent})}))}))}));var CustomerInfo_templateObject_1,CustomerInfo_templateObject_2,CustomerInfo_templateObject_3,CustomerInfo_templateObject_4,templateObject_5,templateObject_6,LineItemText=(0,emotion_styled_browser_esm.A)("div")(LineItems_templateObject_1||(LineItems_templateObject_1=(0,tslib_es6.ue)(["\n  line-height: 18px;\n  word-break: break-word;\n"],["\n  line-height: 18px;\n  word-break: break-word;\n"])));const LineItems=(0,utils_translate.Tl)(["orders"])((function(props){var lineItem,variantText,fullItemText,needsTruncate,itemText,renderTotal=function(total){if(!total)return null;var currency=props.t("translations:currency",{value:{currency_iso:props.currency,value:total}});return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:["(",currency," total)"]})},renderLineItem=function(lineItem,index){var variantText=lineItem.variantTitle?" - ".concat(lineItem.variantTitle):"",itemText="".concat(lineItem.title).concat(variantText);return(0,emotion_react_jsx_runtime_browser_esm.FD)(LineItemText,{children:[lineItem.quantity," x ",itemText,renderTotal(Number(lineItem.totalAmount))]},"".concat(lineItem.title,"-").concat(index))},lineItems=props.data;if(!(lineItems&&lineItems.length>0))return null;if(1===lineItems.length)return lineItem=lineItems[0],variantText=lineItem.variantTitle?" - ".concat(lineItem.variantTitle):"",fullItemText="".concat(lineItem.title).concat(variantText),needsTruncate=fullItemText.length>=25,itemText=needsTruncate?"".concat(fullItemText.substring(0,25),"..."):fullItemText,needsTruncate?(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({inverted:!0,position:"top center",size:"mini",trigger:(0,emotion_react_jsx_runtime_browser_esm.FD)("span",{children:[lineItem.quantity," x ",itemText]})},{children:renderLineItem(lineItem,0)})),renderTotal(props.total)]}):(0,emotion_react_jsx_runtime_browser_esm.FD)(LineItemText,{children:[lineItem.quantity," x ",itemText,renderTotal(props.total)]});var multipleLineItemsText=props.t("table.multipleLineItems");return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({inverted:!0,position:"top center",size:"mini",trigger:(0,emotion_react_jsx_runtime_browser_esm.Y)("span",{children:multipleLineItemsText})},{children:lineItems.map(renderLineItem)})),renderTotal(props.total)]})}));var LineItems_templateObject_1,is_prop_valid_browser_esm=__webpack_require__("./node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js"),index_browser=__webpack_require__("./node_modules/nanoid/index.browser.js"),icon_notes=__webpack_require__("./app/assets/icon-notes.svg"),TruncatedTextWrapper=(0,emotion_styled_browser_esm.A)("p")(TruncatedText_templateObject_1||(TruncatedText_templateObject_1=(0,tslib_es6.ue)(["\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  margin: 0;\n\n  ","\n"],["\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  margin: 0;\n\n  ","\n"])),(function(props){return props.customStyles||""}));var TruncatedText_templateObject_1;const components_TruncatedText=function(props){return(0,emotion_react_jsx_runtime_browser_esm.Y)(TruncatedTextWrapper,(0,tslib_es6.Cl)({customStyles:props.customStyles},{children:props.children}))};var constants_currency=__webpack_require__("./app/constants/currency.ts"),LineItem=__webpack_require__("./app/types/LineItem.ts"),OrderBatchEntry=__webpack_require__("./app/types/OrderBatchEntry.ts"),list=__webpack_require__("./app/utils/list.ts"),LineItemTextContainer=(0,emotion_styled_browser_esm.A)("div")(LineItemsNew_templateObject_1||(LineItemsNew_templateObject_1=(0,tslib_es6.ue)(["\n  font-size: 13px;\n  font-weight: ",";\n  line-height: 18px;\n  word-break: break-word;\n  width: 100%;\n  flex-direction: column;\n  display: flex;\n  justify-content: center;\n  color: ",";\n"],["\n  font-size: 13px;\n  font-weight: ",";\n  line-height: 18px;\n  word-break: break-word;\n  width: 100%;\n  flex-direction: column;\n  display: flex;\n  justify-content: center;\n  color: ",";\n"])),styles_constants.Wy.normal,styles_constants.Tj.gray700),TotalText=(0,emotion_styled_browser_esm.A)("div",{shouldForwardProp:is_prop_valid_browser_esm.A})(LineItemsNew_templateObject_2||(LineItemsNew_templateObject_2=(0,tslib_es6.ue)(["\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n  line-height: 1.25rem;\n  word-break: break-word;\n"],["\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n  line-height: 1.25rem;\n  word-break: break-word;\n"])),styles_constants.Tj.gray1000,(function(props){return props.inTooltip?"1rem":".875rem"}),styles_constants.Wy.medium),NoLineItemText=(0,emotion_styled_browser_esm.A)("div")(LineItemsNew_templateObject_3||(LineItemsNew_templateObject_3=(0,tslib_es6.ue)(["\n  color: ",";\n  font-weight: ",";\n  line-height: 18px;\n  word-break: break-word;\n  min-height: ",";\n"],["\n  color: ",";\n  font-weight: ",";\n  line-height: 18px;\n  word-break: break-word;\n  min-height: ",";\n"])),styles_constants.Tj.form.disabledLabelFontColor,styles_constants.Wy.normal,styles_constants.df),ItemQuantity=(0,emotion_styled_browser_esm.A)("div")(LineItemsNew_templateObject_4||(LineItemsNew_templateObject_4=(0,tslib_es6.ue)(["\n  line-height: 20px;\n  font-weight: ",";\n  font-size: 13px;\n  width: 19px;\n  height: 12px;\n  text-align: center;\n  padding: 4px;\n  margin-right: 8px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background: ",";\n  color: ",";\n  border-radius: 6px;\n"],["\n  line-height: 20px;\n  font-weight: ",";\n  font-size: 13px;\n  width: 19px;\n  height: 12px;\n  text-align: center;\n  padding: 4px;\n  margin-right: 8px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background: ",";\n  color: ",";\n  border-radius: 6px;\n"])),styles_constants.Wy.medium,styles_constants.Tj.gray50,styles_constants.Tj.gray700),ItemText=(0,emotion_styled_browser_esm.A)("p")(LineItemsNew_templateObject_5||(LineItemsNew_templateObject_5=(0,tslib_es6.ue)(["\n  font-weight: ",";\n  font-size: 14px;\n  color: ",";\n  margin: 0;\n"],["\n  font-weight: ",";\n  font-size: 14px;\n  color: ",";\n  margin: 0;\n"])),styles_constants.Wy.medium,styles_constants.Tj.gray1000),ItemSku=(0,emotion_styled_browser_esm.A)("div")(LineItemsNew_templateObject_6||(LineItemsNew_templateObject_6=(0,tslib_es6.ue)(["\n  line-height: 20px;\n  font-size: 13px;\n  font-weight: ",";\n  color: ",";\n"],["\n  line-height: 20px;\n  font-size: 13px;\n  font-weight: ",";\n  color: ",";\n"])),styles_constants.Wy.normal,styles_constants.Tj.gray700),LineItemContainer=(0,emotion_styled_browser_esm.A)("div")(templateObject_7||(templateObject_7=(0,tslib_es6.ue)(["\n  margin: 12px 0;\n  display: flex;\n"],["\n  margin: 12px 0;\n  display: flex;\n"]))),ToolTipContainer=(0,emotion_styled_browser_esm.A)("div")(templateObject_8||(templateObject_8=(0,tslib_es6.ue)(["\n  padding: 12px 16px;\n  width: 272px;\n  max-height: 480px;\n  overflow-y: auto;\n"],["\n  padding: 12px 16px;\n  width: 272px;\n  max-height: 480px;\n  overflow-y: auto;\n"]))),WeightValueContainer=(0,emotion_styled_browser_esm.A)("div")(templateObject_9||(templateObject_9=(0,tslib_es6.ue)(["\n  margin-top: 0.25rem;\n  display: flex;\n  flex-direction: row;\n  font-size: 0.8125rem;\n  color: ",";\n"],["\n  margin-top: 0.25rem;\n  display: flex;\n  flex-direction: row;\n  font-size: 0.8125rem;\n  color: ",";\n"])),styles_constants.Tj.gray700),WeightValue=(0,emotion_styled_browser_esm.A)("span")(templateObject_10||(templateObject_10=(0,tslib_es6.ue)(["\n  margin-right: 8px;\n"],["\n  margin-right: 8px;\n"]))),NotesContainer=(0,emotion_styled_browser_esm.A)("div")(templateObject_11||(templateObject_11=(0,tslib_es6.ue)(["\n  background: ",";\n  border: 1px solid ",";\n  box-sizing: border-box;\n  border-radius: 4px;\n  padding: 12px;\n  margin-top: 1rem;\n"],["\n  background: ",";\n  border: 1px solid ",";\n  box-sizing: border-box;\n  border-radius: 4px;\n  padding: 12px;\n  margin-top: 1rem;\n"])),styles_constants.Tj.gray25,styles_constants.Tj.containerBorderColor),FlexTitleContainer=(0,emotion_styled_browser_esm.A)("div")(templateObject_12||(templateObject_12=(0,tslib_es6.ue)(["\n  display: flex;\n  flex-direction: row;\n"],["\n  display: flex;\n  flex-direction: row;\n"]))),NoteIcon=(0,emotion_styled_browser_esm.A)("img")(templateObject_13||(templateObject_13=(0,tslib_es6.ue)(["\n  margin-left: 4px;\n  vertical-align: middle;\n  padding-bottom: 2px;\n"],["\n  margin-left: 4px;\n  vertical-align: middle;\n  padding-bottom: 2px;\n"]))),NotesTitle=(0,emotion_styled_browser_esm.A)("div")(templateObject_14||(templateObject_14=(0,tslib_es6.ue)(["\n  margin-left: 8px;\n  font-size: 12px;\n  text-transform: uppercase;\n  color: ",";\n  font-weight: ",";\n"],["\n  margin-left: 8px;\n  font-size: 12px;\n  text-transform: uppercase;\n  color: ",";\n  font-weight: ",";\n"])),styles_constants.Tj.gray700,styles_constants.Wy.normal),NotesText=(0,emotion_styled_browser_esm.A)("div")(templateObject_15||(templateObject_15=(0,tslib_es6.ue)(["\n  margin-top: 10px;\n  font-size: 13px;\n  line-height: 20px;\n  color: ",";\n  font-weight: ",";\n  word-break: break-word;\n"],["\n  margin-top: 10px;\n  font-size: 13px;\n  line-height: 20px;\n  color: ",";\n  font-weight: ",";\n  word-break: break-word;\n"])),styles_constants.Tj.gray1000,styles_constants.Wy.normal),LineItemsCellContent=(0,emotion_styled_browser_esm.A)("div")(templateObject_16||(templateObject_16=(0,tslib_es6.ue)(["\n  min-height: ",";\n"],["\n  min-height: ",";\n"])),styles_constants.df),LineItemsPopupTrigger=(0,emotion_styled_browser_esm.A)("div")(templateObject_17||(templateObject_17=(0,tslib_es6.ue)(["\n  min-height: ",";\n"],["\n  min-height: ",";\n"])),styles_constants.df),getLineItemQuantity=function(partialFulfillmentRequestLineItemObjectIdToQuantityMap,lineItem,hasBatchEntryLineItems){var quantity=lineItem.quantity;if(hasBatchEntryLineItems){var foundQuantity=partialFulfillmentRequestLineItemObjectIdToQuantityMap[lineItem.objectId];!foundQuantity&&isNaN(foundQuantity)||(quantity=foundQuantity)}return quantity};const LineItemsNew=(0,redux.Zz)((0,utils_translate.Tl)("orders"),react.memo)((function(props){var _a,batchEntry=props.batchEntry,order=props.order,t=props.t,orderLineItemsMap=(0,list.fL)(order.lineItems),batchEntryLineItems=(0,react.useMemo)((function(){return(null==batchEntry?void 0:batchEntry.lineItems)||[]}),[batchEntry]),lineItems=(0,react.useMemo)((function(){return batchEntryLineItems.length>0?batchEntryLineItems.map((function(beli){return orderLineItemsMap[beli.objectId]})).filter((function(x){return x})):order.lineItems}),[batchEntryLineItems,order.lineItems,orderLineItemsMap]),hasLineItems=lineItems.length>0,partialFulfillmentRequestLineItemObjectIdToQuantityMap=(0,react.useMemo)((function(){return batchEntryLineItems.reduce((function(acc,curr){var _a;return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},acc),((_a={})[curr.objectId]=curr.quantity,_a))}),{})}),[batchEntryLineItems]),getItemText=(0,react.useCallback)((function(lineItems,totalQuantity,inTooltip){if(!inTooltip&&lineItems&&lineItems.length<3){var customStyles_1=1===lineItems.length?{WebkitBoxOrient:"vertical",WebkitLineClamp:"2",display:"-webkit-box;",whiteSpace:"normal"}:{};return lineItems.map((function(lineItem){var variantText=lineItem.variantTitle?" - ".concat(lineItem.variantTitle):"",quantity=getLineItemQuantity(partialFulfillmentRequestLineItemObjectIdToQuantityMap,lineItem,!!batchEntryLineItems.length);return(0,emotion_react_jsx_runtime_browser_esm.FD)(components_TruncatedText,(0,tslib_es6.Cl)({customStyles:customStyles_1},{children:[quantity,"x ",lineItem.title," ",variantText]}),(0,index_browser.Ak)())}))}return"".concat(t("orders:table:totalItems",{count:totalQuantity}))}),[batchEntryLineItems.length,partialFulfillmentRequestLineItemObjectIdToQuantityMap,t]),renderTotalLine=react.useCallback((function(lineItems,inTooltip){if(void 0===inTooltip&&(inTooltip=!1),!lineItems)return null;var itemsTotalAmount=(0,LineItem._)(lineItems),totalQuantity=(0,LineItem.WG)(lineItems),partialFulfillmentRequestTotalValue=(0,OrderBatchEntry.S0)(batchEntryLineItems,lineItems),orderTotalAmount=!!order.partialFulfillmentRequests.length&&partialFulfillmentRequestTotalValue||order.totalPrice,currency=order.currency||constants_currency.q.USD.iso,formattedTotal=t("translations:currency",{value:{currency_iso:currency,value:orderTotalAmount||itemsTotalAmount}}),totalValue=formattedTotal?"".concat(formattedTotal):"";batchEntryLineItems.length&&(totalQuantity=batchEntryLineItems.reduce((function(summedQuantity,li){return summedQuantity+li.quantity}),0));var itemText=getItemText(lineItems,totalQuantity,inTooltip),lineItemWeight=order.partialFulfillmentRequests.length?(0,OrderBatchEntry.f2)(batchEntryLineItems,order.lineItems):order.weight;return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"leading-5 w-full"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(TotalText,(0,tslib_es6.Cl)({className:"".concat(styles_constants.xW.fulfilledOrderText),inTooltip},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"block"},{children:itemText}))})),(0,emotion_react_jsx_runtime_browser_esm.FD)(WeightValueContainer,{children:[lineItemWeight&&order.weightUnit&&(0,emotion_react_jsx_runtime_browser_esm.Y)(WeightValue,{children:"".concat(lineItemWeight," ").concat(order.weightUnit)}),(0,emotion_react_jsx_runtime_browser_esm.Y)("span",{children:totalValue}),order.notes&&!inTooltip&&(0,emotion_react_jsx_runtime_browser_esm.Y)("span",{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(NoteIcon,{className:"ml-2",src:icon_notes},"orderNotes")})]})]}))}),[batchEntryLineItems,order.partialFulfillmentRequests.length,order.totalPrice,order.currency,order.lineItems,order.weight,order.weightUnit,order.notes,t,getItemText]),renderTooltipLineItem=react.useCallback((function(lineItem){var variantText=lineItem.variantTitle?" - ".concat(lineItem.variantTitle):"",itemText="".concat(lineItem.title).concat(variantText),sku=lineItem.sku,quantity=getLineItemQuantity(partialFulfillmentRequestLineItemObjectIdToQuantityMap,lineItem,!!(null==batchEntryLineItems?void 0:batchEntryLineItems.length));return(0,emotion_react_jsx_runtime_browser_esm.FD)(LineItemContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ItemQuantity,{children:quantity>99?"99+":"".concat(quantity)}),(0,emotion_react_jsx_runtime_browser_esm.FD)(LineItemTextContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ItemText,{children:itemText}),sku&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ItemSku,{children:sku})]})]},(0,index_browser.Ak)())}),[null==batchEntryLineItems?void 0:batchEntryLineItems.length,partialFulfillmentRequestLineItemObjectIdToQuantityMap]),renderOrderNotes=react.useCallback((function(order){if(order.notes)return(0,emotion_react_jsx_runtime_browser_esm.FD)(NotesContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(FlexTitleContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(NoteIcon,{src:icon_notes},"orderNotes"),(0,emotion_react_jsx_runtime_browser_esm.Y)(NotesTitle,{children:"Notes"})]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(NotesText,{children:order.notes})]})}),[order]),renderPackingSlipNoteBlock=react.useCallback((function(packingSlipText){if(packingSlipText)return(0,emotion_react_jsx_runtime_browser_esm.Y)(NotesContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(FlexTitleContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(NoteIcon,{src:icon_notes},"orderNotes"),(0,emotion_react_jsx_runtime_browser_esm.Y)(NotesTitle,{children:t("orders:table:packingSlipNoteAdded")})]})})}),[order]);return hasLineItems?(0,emotion_react_jsx_runtime_browser_esm.Y)(LineItemsCellContent,(0,tslib_es6.Cl)({className:"h-full w-full"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({flowing:!0,hoverable:!0,on:"hover",position:"bottom center",style:{padding:0},trigger:(0,emotion_react_jsx_runtime_browser_esm.Y)(LineItemsPopupTrigger,(0,tslib_es6.Cl)({className:"h-full p-2 mx-0.5 flex items-center box-border"},{children:renderTotalLine(lineItems)})),wrapperClassName:"w-full h-full",wrapperStyle:{minHeight:styles_constants.df}},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(ToolTipContainer,{children:[renderTotalLine(lineItems,!0),lineItems.map(renderTooltipLineItem),renderOrderNotes(order),renderPackingSlipNoteBlock(null===(_a=null==batchEntry?void 0:batchEntry.extras)||void 0===_a?void 0:_a.packingSlipText)]})}))})):(0,emotion_react_jsx_runtime_browser_esm.Y)(NoLineItemText,(0,tslib_es6.Cl)({className:"px-2 h-full flex items-center"},{children:t("orders:table:noItems")}))}));var LineItemsNew_templateObject_1,LineItemsNew_templateObject_2,LineItemsNew_templateObject_3,LineItemsNew_templateObject_4,LineItemsNew_templateObject_5,LineItemsNew_templateObject_6,templateObject_7,templateObject_8,templateObject_9,templateObject_10,templateObject_11,templateObject_12,templateObject_13,templateObject_14,templateObject_15,templateObject_16,templateObject_17,OrderStatus=__webpack_require__("./app/components/OrderStatus/index.ts"),RuleDescription=__webpack_require__("./app/components/Rules/RuleDescription.tsx"),icons=__webpack_require__("./app/constants/icons.ts"),Order=__webpack_require__("./app/types/Order.ts"),OrderNumber=(0,emotion_styled_browser_esm.A)("span")(OrderNumberWithDate_templateObject_1||(OrderNumberWithDate_templateObject_1=(0,tslib_es6.ue)(["\n  font-size: 0.875rem;\n  color: ",";\n  font-weight: ",";\n  word-break: break-word;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"],["\n  font-size: 0.875rem;\n  color: ",";\n  font-weight: ",";\n  word-break: break-word;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"])),styles_constants.Tj.gray1000,styles_constants.Wy.medium),DateIcon=(0,emotion_styled_browser_esm.A)("img")(OrderNumberWithDate_templateObject_2||(OrderNumberWithDate_templateObject_2=(0,tslib_es6.ue)(["\n  width: 1.5rem;\n  height: 1.5rem;\n"],["\n  width: 1.5rem;\n  height: 1.5rem;\n"]))),LightningBoltIcon=(0,emotion_styled_browser_esm.A)("img")(OrderNumberWithDate_templateObject_3||(OrderNumberWithDate_templateObject_3=(0,tslib_es6.ue)(["\n  margin-right: 0.5rem;\n"],["\n  margin-right: 0.5rem;\n"]))),ActionText=(0,emotion_styled_browser_esm.A)("div")(OrderNumberWithDate_templateObject_4||(OrderNumberWithDate_templateObject_4=(0,tslib_es6.ue)(["\n  color: ",";\n"],["\n  color: ",";\n"])),styles_constants.Tj.gray700),OrderNumberPopupContent=(0,emotion_styled_browser_esm.A)("div")(OrderNumberWithDate_templateObject_5||(OrderNumberWithDate_templateObject_5=(0,tslib_es6.ue)(["\n  word-break: break-word;\n  max-width: 272px;\n  font-size: 1rem;\n  font-weight: ",";\n  line-height: 1.5rem;\n"],["\n  word-break: break-word;\n  max-width: 272px;\n  font-size: 1rem;\n  font-weight: ",";\n  line-height: 1.5rem;\n"])),styles_constants.Wy.medium),OrderDate=(0,emotion_styled_browser_esm.A)("span")(OrderNumberWithDate_templateObject_6||(OrderNumberWithDate_templateObject_6=(0,tslib_es6.ue)(["\n  font-size: 0.8125rem;\n"],["\n  font-size: 0.8125rem;\n"]))),DateWithIcon=(0,emotion_styled_browser_esm.A)("div")(OrderNumberWithDate_templateObject_7||(OrderNumberWithDate_templateObject_7=(0,tslib_es6.ue)(["\n  font-size: 0.8125rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n  color: ",";\n"],["\n  font-size: 0.8125rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n  color: ",";\n"])),styles_constants.Wy.normal,styles_constants.Tj.gray700),OrderNumberContainer=(0,emotion_styled_browser_esm.A)("div")(OrderNumberWithDate_templateObject_8||(OrderNumberWithDate_templateObject_8=(0,tslib_es6.ue)(["\n  line-height: 1.125rem;\n  &:hover {\n    .order-number-text {\n      text-decoration: underline;\n    }\n  }\n"],["\n  line-height: 1.125rem;\n  &:hover {\n    .order-number-text {\n      text-decoration: underline;\n    }\n  }\n"]))),getIsBatchEntryTransactionSuccess=(0,batch_entry_composite_selectors.sc)(),getIsOrderPartiallyFulfilled=(0,orders_selectors.YC)();const cells_OrderNumberWithDate=function(props){var _a,_b,data=props.data,isBatchEntryTransactionSuccess=(0,es.d4)((function(state){var _a;return getIsBatchEntryTransactionSuccess(state,{batchEntryId:"partial-parent"!==data.kind&&(null===(_a=data.batchEntry)||void 0===_a?void 0:_a.id)||-1})})),isOrderPartiallyFulfilled=(0,es.d4)((function(state){return getIsOrderPartiallyFulfilled(state,{orderObjectId:data.order.objectId})})),_c=data.order,orderNumber=_c.orderNumber,orderStatus=_c.orderStatus,placedAt=_c.placedAt,totalPartialFulfillments=_c.totalPartialFulfillments,batchEntryRules=null===(_b=null===(_a=data.batchEntry)||void 0===_a?void 0:_a.rules)||void 0===_b?void 0:_b.filter((function(rule){return null==rule?void 0:rule.name}));switch(data.kind){case"partial-parent":case"single":var orderNumberElement=orderNumber?(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderNumber,(0,tslib_es6.Cl)({className:"".concat(styles_constants.xW.fulfilledOrderText," order-number-text my-1")},{children:orderNumber})):"-";return(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({hoverable:!0,on:"hover",position:"bottom center",trigger:(0,emotion_react_jsx_runtime_browser_esm.FD)(OrderNumberContainer,(0,tslib_es6.Cl)({className:"h-full"},{children:[orderNumberElement,(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"".concat(styles_constants.xW.fulfilledOrderText," flex items-center flex-wrap w-full")},{children:[batchEntryRules&&batchEntryRules.length>0&&(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"Order has automation actions",className:"mr-1",src:icons.l2}),(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderDate,(0,tslib_es6.Cl)({className:"mr-1"},{children:placedAt.format(placedAt.localeData().longDateFormat("L").replace(/YYYY/g,"YY"))})),(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderStatus.A,{status:isOrderPartiallyFulfilled?Order.Re.PARTIALLY_FULFILLED:orderStatus})]}))]})),wrapperClassName:"order-number-cell"},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(OrderNumberPopupContent,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderStatus.A,{status:isOrderPartiallyFulfilled?Order.Re.PARTIALLY_FULFILLED:orderStatus}),!!orderNumber&&(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"mt-1"},{children:"Order ".concat(orderNumber)})),batchEntryRules&&batchEntryRules.length>0&&(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex items-start"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(LightningBoltIcon,{src:icons.l2}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ActionText,(0,tslib_es6.Cl)({className:"text-sm font-normal leading-5"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(RuleDescription.A,{rules:batchEntryRules,showTitle:!0})}))]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(DateWithIcon,(0,tslib_es6.Cl)({className:"flex items-center mt-1"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(DateIcon,{src:icons.ki}),placedAt.format("L")]}))]})}));case"partial-child":var fulfillmentRequestStatus=isBatchEntryTransactionSuccess?Order.Re.SHIPPED:Order.Re.UNKNOWN;return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"pl-2"},{children:["Shipment ".concat(data.batchEntry.partialFulfillmentRank," of ").concat(totalPartialFulfillments),(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderStatus.A,{status:fulfillmentRequestStatus})]}))}};var OrderNumberWithDate_templateObject_1,OrderNumberWithDate_templateObject_2,OrderNumberWithDate_templateObject_3,OrderNumberWithDate_templateObject_4,OrderNumberWithDate_templateObject_5,OrderNumberWithDate_templateObject_6,OrderNumberWithDate_templateObject_7,OrderNumberWithDate_templateObject_8,epages=__webpack_require__("./app/assets/shops/icons/epages.svg"),amazon=__webpack_require__("./app/assets/shops/icons/amazon.svg"),bigcommerce=__webpack_require__("./app/assets/shops/icons/bigcommerce.svg"),channeladvisor=__webpack_require__("./app/assets/shops/icons/channeladvisor.svg"),ebay=__webpack_require__("./app/assets/shops/icons/ebay.svg"),etsy=__webpack_require__("./app/assets/shops/icons/etsy.svg"),godaddy=__webpack_require__("./app/assets/shops/icons/godaddy.svg"),magento=__webpack_require__("./app/assets/shops/icons/magento.svg"),magento2=__webpack_require__("./app/assets/shops/icons/magento2.svg"),shippo=__webpack_require__("./app/assets/shops/icons/shippo.svg"),shopify=__webpack_require__("./app/assets/shops/icons/shopify.svg"),spree=__webpack_require__("./app/assets/shops/icons/spree.svg"),square=__webpack_require__("./app/assets/shops/icons/square.svg"),squarespace=__webpack_require__("./app/assets/shops/icons/squarespace.svg"),stripe=__webpack_require__("./app/assets/shops/icons/stripe.svg"),walmart=__webpack_require__("./app/assets/shops/icons/walmart.svg"),weebly=__webpack_require__("./app/assets/shops/icons/weebly.svg"),wix=__webpack_require__("./app/assets/shops/icons/wix.svg"),woocommerce=__webpack_require__("./app/assets/shops/icons/woocommerce.svg");const utils_shopAppImage=function(shopAppName){if(shopAppName)switch(shopAppName.toUpperCase()){case"AMAZON":return amazon;case"ETSY":return etsy;case"SHOPIFY":return shopify;case"BIGCOMMERCE":return bigcommerce;case"MAGENTO":return magento2;case"MAGENTO_2":return magento;case"SPREECOMMERCE":return spree;case"SHIPPO":return shippo;case"STRIPERELAY":return stripe;case"EPAGES":return epages;case"GODADDY":return godaddy;case"WEEBLY":return weebly;case"WOOCOMMERCE":return woocommerce;case"EBAY":return ebay;case"CHANNELADVISOR":return channeladvisor;case"SQUARESPACE":return squarespace;case"WIX":return wix;case"SQUARE":return square;case"WALMART":return walmart}return""};var ShopImg=(0,emotion_styled_browser_esm.A)("img")(OrderShopImage_templateObject_1||(OrderShopImage_templateObject_1=(0,tslib_es6.ue)(["\n  height: 16px;\n"],["\n  height: 16px;\n"])));const cells_OrderShopImage=function(_a){var shopApp=_a.shopApp,shopImage=utils_shopAppImage(shopApp);return(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"flex px-1"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(ShopImg,{src:shopImage})}))};var OrderShopImage_templateObject_1,Checkbox=__webpack_require__("./app/components/Checkbox/Checkbox.tsx");const OrderCheckbox_container=(0,es.Ng)((function(state,ownProps){var batchEntryId=ownProps.batchEntryId,orderObjectId=ownProps.orderObjectId,isOrderSelected=(0,orders_selectors.q2)(state,{orderObjectId}),isBatchEntrySelected=batchEntryId&&(0,orders_selectors.qf)(state,{batchEntryId,orderObjectId}),order=(0,orders_selectors.yD)(state,ownProps),areAllPartialFulfillmentRequestsSelected=(0,batch_entry_composite_selectors.w3)(state,{orderObjectId}),areSomePartialFulfillmentRequestsSelected=(0,batch_entry_composite_selectors.tQ)(state,{orderObjectId}),isChecked=(0,Order.Cm)(order)?areAllPartialFulfillmentRequestsSelected:isOrderSelected;return{checked:(0,Order.Cm)(order)&&areSomePartialFulfillmentRequestsSelected&&!areAllPartialFulfillmentRequestsSelected&&!batchEntryId?"partial":isBatchEntrySelected||isChecked}}))(Checkbox.Ay);var SingleFulfillmentWrapper=emotion_styled_browser_esm.A.div(OrderInfoCell_templateObject_1||(OrderInfoCell_templateObject_1=(0,tslib_es6.ue)(["\n  min-height: 72px;\n  margin: 0 0.25rem;\n"],["\n  min-height: 72px;\n  margin: 0 0.25rem;\n"]))),PartialFulfillmentShipmentWrapper=emotion_styled_browser_esm.A.div(OrderInfoCell_templateObject_2||(OrderInfoCell_templateObject_2=(0,tslib_es6.ue)(["\n  left: -1.5rem;\n  margin-right: -1.5rem;\n  padding-left: 1.75rem;\n"],["\n  left: -1.5rem;\n  margin-right: -1.5rem;\n  padding-left: 1.75rem;\n"]))),PartialFulfillmentCheckboxWrapper=emotion_styled_browser_esm.A.div(OrderInfoCell_templateObject_3||(OrderInfoCell_templateObject_3=(0,tslib_es6.ue)(["\n  top: 0;\n  left: 0;\n  /* Prevents hovering on sibling from covering contents */\n  z-index: ",";\n"],["\n  top: 0;\n  left: 0;\n  /* Prevents hovering on sibling from covering contents */\n  z-index: ",";\n"])),styles_constants.N2.base);const cells_OrderInfoCell=function(props){var data=props.data,onSplitOrderCheckboxChange=props.onSplitOrderCheckboxChange,onSplitOrderCheckboxClick=props.onSplitOrderCheckboxClick,rowIndex=props.rowIndex;switch(data.kind){case"partial-child":var checkboxID="orders-table-row-checkbox-split-".concat(rowIndex);return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex items-center h-full w-full"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(PartialFulfillmentCheckboxWrapper,(0,tslib_es6.Cl)({className:"relative w-6 h-full flex items-center justify-center cursor-pointer ml-1",onClick:function(rowIndex){return function(e){e.stopPropagation(),onSplitOrderCheckboxChange(rowIndex)()}}(rowIndex)},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("label",(0,tslib_es6.Cl)({htmlFor:checkboxID,onClick:onSplitOrderCheckboxClick},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderCheckbox_container,{batchEntryId:data.batchEntry.id,dataPendo:"orders-select-row",id:checkboxID,onChange:onSplitOrderCheckboxChange(rowIndex),orderObjectId:data.order.objectId})}))})),(0,emotion_react_jsx_runtime_browser_esm.Y)(PartialFulfillmentShipmentWrapper,(0,tslib_es6.Cl)({className:"relative flex flex-1 items-center pr-3 h-full w-full"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(cells_OrderNumberWithDate,{data})}))]}));case"partial-parent":case"single":var shopApp=data.order.shopApp||null;return shopApp?(0,emotion_react_jsx_runtime_browser_esm.FD)(SingleFulfillmentWrapper,(0,tslib_es6.Cl)({className:"flex items-center h-full cursor-pointer mx-0.5"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"w-6 h-full flex items-center justify-center"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(cells_OrderShopImage,{shopApp})})),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"flex items-center p-2 h-full w-full"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(cells_OrderNumberWithDate,{data})}))]})):null}};var OrderInfoCell_templateObject_1,OrderInfoCell_templateObject_2,OrderInfoCell_templateObject_3,IconContainer=(0,emotion_styled_browser_esm.A)("div")(OrderIcon_templateObject_1||(OrderIcon_templateObject_1=(0,tslib_es6.ue)(["\n  text-align: center;\n  width: 100%;\n"],["\n  text-align: center;\n  width: 100%;\n"]))),Icon=(0,emotion_styled_browser_esm.A)("i")(OrderIcon_templateObject_2||(OrderIcon_templateObject_2=(0,tslib_es6.ue)(["\n  color: ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  cursor: ",";\n"],["\n  color: ",";\n  ",";\n  ",";\n  ",";\n  ",";\n  cursor: ",";\n"])),styles_constants.Tj.disabledIcon,(function(props){return props.ok?"color: ".concat(styles_constants.Tj.primary,";"):""}),(function(props){return props.error?"color: ".concat(styles_constants.Tj.dangerRed,";"):""}),(function(props){return props.info?"color: #555;":""}),(function(props){return props.warning?"color: ".concat(styles_constants.Tj.macaroni700,";"):""}),(function(props){return props.error?"pointer":"normal"}));const OrderIcon_OrderIcon=function(props){var orderIcon=(0,emotion_react_jsx_runtime_browser_esm.Y)(IconContainer,(0,tslib_es6.Cl)({"data-pendo":props.dataPendo,onClick:props.onClick},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Icon,{className:props.className,error:props.error,info:props.info,ok:props.ok})}));return props.tooltipText&&(orderIcon=(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({inverted:!0,position:"top center",size:"mini",trigger:orderIcon},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("span",(0,tslib_es6.Cl)({className:"relative block"},{children:props.tooltipText}))}))),orderIcon};var OrderIcon_templateObject_1,OrderIcon_templateObject_2;const cells_OrderError=(0,utils_translate.Tl)()((function(props){if(props.order.errors&&0===props.order.errors.length)return null;var errors;return(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderIcon_OrderIcon,{className:"fa fa-exclamation-triangle",dataPendo:"orders-status-error",error:!0,onClick:(errors=props.order.errors,function(evt){evt.stopPropagation();var messages=errors.map((function(error){return error.message}));if(props.onErrorClick)return props.onErrorClick({messages})}),tooltipText:props.t("orders:table:invalidMessage")})}));var _a,fulfillmentStatusIcons=((_a={})[Order.Re.AWAITPAY]="truck",_a[Order.Re.CANCELLED]="",_a[Order.Re.GENERIC]="truck",_a[Order.Re.INVALID]="",_a[Order.Re.PAID]="truck",_a[Order.Re.PARTIALLY_FULFILLED]="archive",_a[Order.Re.REFUNDED]="",_a[Order.Re.SHIPPED]="truck",_a[Order.Re.UNKNOWN]="",_a[Order.Re.VALID]="",_a);const cells_OrderFulfillmentStatus=(0,utils_translate.Tl)("orders")((function(props){var fulfillmentStatusIcon=fulfillmentStatusIcons[props.order.orderStatus]||"";return fulfillmentStatusIcon?(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderIcon_OrderIcon,{className:"fa fa-".concat(fulfillmentStatusIcon),ok:(0,Order.sf)(props.order)||(0,Order.AJ)(props.order),tooltipText:props.t("orders:status:fulfillment:".concat(props.order.orderStatus))}):null}));var OrderNotes_IconContainer=(0,emotion_styled_browser_esm.A)("div")(OrderNotes_templateObject_1||(OrderNotes_templateObject_1=(0,tslib_es6.ue)(["\n  text-align: center;\n  width: 100%;\n"],["\n  text-align: center;\n  width: 100%;\n"]))),OrderNotes_NoteIcon=(0,emotion_styled_browser_esm.A)("img")(OrderNotes_templateObject_2||(OrderNotes_templateObject_2=(0,tslib_es6.ue)(["\n  vertical-align: middle;\n  padding-bottom: 2px;\n"],["\n  vertical-align: middle;\n  padding-bottom: 2px;\n"])));const cells_OrderNotes=function(props){return props.notes?(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({inverted:!0,position:"top center",size:"mini",trigger:(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderNotes_IconContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderNotes_NoteIcon,{src:icon_notes},"orderNotes")})},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"block relative"},{children:props.notes}))})):null};var OrderNotes_templateObject_1,OrderNotes_templateObject_2,OrderNumberWithImage_ShopImg=(0,emotion_styled_browser_esm.A)("img")(OrderNumberWithImage_templateObject_1||(OrderNumberWithImage_templateObject_1=(0,tslib_es6.ue)(["\n  vertical-align: middle;\n  margin-right: 8px;\n"],["\n  vertical-align: middle;\n  margin-right: 8px;\n"]))),OrderNumberWithImage_OrderNumber=(0,emotion_styled_browser_esm.A)("span")(OrderNumberWithImage_templateObject_2||(OrderNumberWithImage_templateObject_2=(0,tslib_es6.ue)(["\n  vertical-align: middle;\n  word-break: break-word;\n"],["\n  vertical-align: middle;\n  word-break: break-word;\n"])));const OrderNumberWithImage=function(props){var order=props.order,orderNumber=order.orderNumber,shopApp=order.shopApp,shopImage=utils_shopAppImage(shopApp);return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderNumberWithImage_ShopImg,{src:shopImage}),orderNumber&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({inverted:!0,position:"top center",size:"mini",trigger:(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderNumberWithImage_OrderNumber,{children:orderNumber})},{children:orderNumber}))]})};var OrderNumberWithImage_templateObject_1,OrderNumberWithImage_templateObject_2,isInvalid=__webpack_require__("./node_modules/redux-form/es/isInvalid.js"),isSubmitting=__webpack_require__("./node_modules/redux-form/es/isSubmitting.js"),redux_form_es=__webpack_require__("./node_modules/redux-form/es/index.js"),components_Button=__webpack_require__("./app/components/Button/index.ts"),Modal=__webpack_require__("./app/components/Modal/index.ts"),react_dom=__webpack_require__("./node_modules/react-dom/index.js"),Label=__webpack_require__("./app/components/Label/Label.tsx"),capitalize=__webpack_require__("./node_modules/lodash-es/capitalize.js"),OptionsContainer=(0,emotion_styled_browser_esm.A)("div")(Radio_templateObject_1||(Radio_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n\n  & > div {\n    margin-right: 13px;\n  }\n\n  & > div:last-child {\n    margin-right: 0;\n  }\n"],["\n  display: flex;\n\n  & > div {\n    margin-right: 13px;\n  }\n\n  & > div:last-child {\n    margin-right: 0;\n  }\n"]))),RadioInput=(0,emotion_styled_browser_esm.A)("input")(Radio_templateObject_2||(Radio_templateObject_2=(0,tslib_es6.ue)(["\n  margin: 0;\n  margin-right: 5px;\n  position: relative;\n  &:checked::after {\n    content: '';\n    display: block;\n    position: relative;\n    background: ",";\n    width: 7px;\n    height: 7px;\n    border: 0;\n    border-radius: 50%;\n    top: 3px;\n    left: 3px;\n  }\n  &:checked::before {\n    content: '';\n    display: block;\n    position: absolute;\n    background: white;\n    border: 1px solid ",";\n    width: 11px;\n    height: 11px;\n    border-radius: 50%;\n    top: 0px;\n    left: 0px;\n  }\n"],["\n  margin: 0;\n  margin-right: 5px;\n  position: relative;\n  &:checked::after {\n    content: '';\n    display: block;\n    position: relative;\n    background: ",";\n    width: 7px;\n    height: 7px;\n    border: 0;\n    border-radius: 50%;\n    top: 3px;\n    left: 3px;\n  }\n  &:checked::before {\n    content: '';\n    display: block;\n    position: absolute;\n    background: white;\n    border: 1px solid ",";\n    width: 11px;\n    height: 11px;\n    border-radius: 50%;\n    top: 0px;\n    left: 0px;\n  }\n"])),styles_constants.Tj.forest700,styles_constants.Tj.forest700),RadioLabel=(0,emotion_styled_browser_esm.A)("label")(Radio_templateObject_3||(Radio_templateObject_3=(0,tslib_es6.ue)(["\n  color: ",";\n  padding: ",";\n  cursor: pointer;\n"],["\n  color: ",";\n  padding: ",";\n  cursor: pointer;\n"])),(function(props){return props.disabled?styles_constants.Tj.form.disabledLabelFontColor:styles_constants.Tj.black}),(function(props){return props.vertical?"8px 0":"0"})),RadioContainer=(0,emotion_styled_browser_esm.A)("div")(Radio_templateObject_4||(Radio_templateObject_4=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"])));const Radio_Radio=function(props){var dataAnalytics=props.dataAnalytics,disabled=props.disabled,label=props.label,name=props.name,onChange=props.onChange,options=props.options,toolTipContent=props.toolTipContent,value=props.value,onChangeCallback=react.useCallback((function(evt){var option=options.find((function(option){return option.value===evt.target.value}));if(option)return onChange(option,evt)}),[]);return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:[label&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Label.A,(0,tslib_es6.Cl)({},props.labelProps,{children:label})),(0,emotion_react_jsx_runtime_browser_esm.Y)(OptionsContainer,(0,tslib_es6.Cl)({className:props.className,style:props.vertical?{alignItems:"flex-start",flexDirection:"column"}:{alignItems:"center",flexDirection:"row"}},{children:null==options?void 0:options.map((function(option,idx){var _a,_b;return(0,emotion_react_jsx_runtime_browser_esm.FD)(RadioContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(RadioInput,{checked:option.value===(null==value?void 0:value.value),"data-analytics":dataAnalytics&&"".concat(dataAnalytics).concat((0,capitalize.A)(null===(_a=option.value)||void 0===_a?void 0:_a.toString()),"Input"),disabled,id:option.label,name,onChange:onChangeCallback,type:"radio",value:String(option.value)}),(0,emotion_react_jsx_runtime_browser_esm.Y)(RadioLabel,(0,tslib_es6.Cl)({"data-analytics":dataAnalytics&&"".concat(dataAnalytics).concat((0,capitalize.A)(null===(_b=option.value)||void 0===_b?void 0:_b.toString()),"Label"),disabled,htmlFor:option.label,vertical:props.vertical},{children:option.label})),option.addToolTip&&toolTipContent]},idx)}))}))]})};var Radio_templateObject_1,Radio_templateObject_2,Radio_templateObject_3,Radio_templateObject_4;const Radio_RadioField=react.memo((function(props){var hideErrors=props.hideErrors,input=props.input,meta=props.meta,selectProps=(0,tslib_es6.Tt)(props,["hideErrors","input","meta"]),errorMessage=!hideErrors&&meta&&meta.touched&&meta.error?meta.error:null;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Radio_Radio,(0,tslib_es6.Cl)({name:input.name,onChange:input.onChange,value:input.value},selectProps,{errorMessage}))})),components_Radio=Radio_Radio;var SelectButton=__webpack_require__("./app/components/SelectButton/index.ts"),constants_form=__webpack_require__("./app/constants/form.ts"),SelectButtonStyled=(0,emotion_styled_browser_esm.A)("button")(SelectLink_templateObject_1||(SelectLink_templateObject_1=(0,tslib_es6.ue)(["\n  background: transparent;\n  border: none;\n  font-family: ",";\n  ",";\n  text-align: left;\n  font-size: 14px;\n  color: ",";\n  position: relative;\n  outline: none;\n  text-decoration: underline;\n  cursor: pointer;\n  line-height: 19px;\n  display: inline-block;\n\n  :focus,\n  &:active {\n    border-color: ",";\n  }\n\n  :disabled {\n    background-color: ",";\n    border-color: ",";\n  }\n"],["\n  background: transparent;\n  border: none;\n  font-family: ",";\n  ",";\n  text-align: left;\n  font-size: 14px;\n  color: ",";\n  position: relative;\n  outline: none;\n  text-decoration: underline;\n  cursor: pointer;\n  line-height: 19px;\n  display: inline-block;\n\n  :focus,\n  &:active {\n    border-color: ",";\n  }\n\n  :disabled {\n    background-color: ",";\n    border-color: ",";\n  }\n"])),styles_constants.mw,(function(props){return props.responsive?"width: 100%;":"width: ".concat(props.size,"px;")}),(function(props){return props.hasOptionSelected?styles_constants.Tj.gray600:styles_constants.Tj.placeholderColor}),styles_constants.Tj.primaryAlternative,styles_constants.Tj.form.greyDisabled,styles_constants.Tj.form.greyDisabledBorder),StyledIcon=(0,emotion_styled_browser_esm.A)("i")(SelectLink_templateObject_2||(SelectLink_templateObject_2=(0,tslib_es6.ue)(["\n  margin-left: 4px;\n  font-size: 12px;\n  color: ",";\n"],["\n  margin-left: 4px;\n  font-size: 12px;\n  color: ",";\n"])),styles_constants.Tj.placeholderColor);const SelectLink=function(props){var buttonRef=props.buttonRef,children=props.children,className=props.className,dataAnalytics=props.dataAnalytics,dataE2E=props.dataE2E,dataPendo=props.dataPendo,dataTestid=props.dataTestid,disabled=props.disabled,hasOptionSelected=props.hasOptionSelected,isMultiSelect=props.isMultiSelect,onClick=props.onClick,responsive=props.responsive,size=props.size,tabIndex=props.tabIndex,linkSize=size||constants_form.YI.medium;return(0,emotion_react_jsx_runtime_browser_esm.FD)(SelectButtonStyled,(0,tslib_es6.Cl)({className,"data-analytics":dataAnalytics,"data-e2e":dataE2E,"data-pendo":dataPendo,"data-testid":dataTestid,disabled:!!disabled,hasOptionSelected:!!hasOptionSelected,isMultiSelect,onClick,ref:buttonRef,responsive,size:linkSize,tabIndex,type:"button"},{children:[children,(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledIcon,{className:"fa fa-chevron-down"})]}))};var SelectLink_templateObject_1,SelectLink_templateObject_2;const components_SelectLink=SelectLink;var keys=__webpack_require__("./app/constants/keys.ts"),Dropdown=__webpack_require__("./app/components/Dropdown/index.ts"),SelectList=(0,emotion_styled_browser_esm.A)("ul")(Select_templateObject_1||(Select_templateObject_1=(0,tslib_es6.ue)(["\n  padding: 0;\n  margin: 0;\n  max-height: 300px;\n  overflow-y: auto;\n"],["\n  padding: 0;\n  margin: 0;\n  max-height: 300px;\n  overflow-y: auto;\n"]))),disabledOptionStyle=(0,emotion_react_browser_esm.AH)(Select_templateObject_2||(Select_templateObject_2=(0,tslib_es6.ue)(["\n  cursor: default;\n  color: ",";\n  font-weight: ",";\n"],["\n  cursor: default;\n  color: ",";\n  font-weight: ",";\n"])),styles_constants.Tj.gray300,styles_constants.Wy.normal),Option=(0,emotion_styled_browser_esm.A)("li")(Select_templateObject_3||(Select_templateObject_3=(0,tslib_es6.ue)(["\n  padding: 8px 0 8px 30px;\n  font-size: 14px;\n  line-height: 14px;\n  color: ",";\n  ",";\n  ",";\n  position: relative;\n  cursor: pointer;\n  ",";\n\n  :first-of-type {\n    margin-top: 8px;\n  }\n\n  :last-of-type {\n    margin-bottom: 8px;\n  }\n"],["\n  padding: 8px 0 8px 30px;\n  font-size: 14px;\n  line-height: 14px;\n  color: ",";\n  ",";\n  ",";\n  position: relative;\n  cursor: pointer;\n  ",";\n\n  :first-of-type {\n    margin-top: 8px;\n  }\n\n  :last-of-type {\n    margin-bottom: 8px;\n  }\n"])),styles_constants.Tj.fontColor,(function(props){return props.isActive?"font-weight: ".concat(styles_constants.Wy.medium,";"):""}),(function(props){return props.isHighlighted?"background-color: ".concat(styles_constants.Tj.gray25,";"):""}),(function(_a){return _a.disabled?disabledOptionStyle:""})),SpinnerContainer=(0,emotion_styled_browser_esm.A)("div")(Select_templateObject_4||(Select_templateObject_4=(0,tslib_es6.ue)(["\n  width: 100%;\n  text-align: center;\n  overflow: hidden;\n"],["\n  width: 100%;\n  text-align: center;\n  overflow: hidden;\n"]))),OptionSelectedIcon=(0,emotion_styled_browser_esm.A)("span")(Select_templateObject_5||(Select_templateObject_5=(0,tslib_es6.ue)(["\n  position: absolute;\n  left: 12px;\n  font-size: 10px;\n  line-height: 15px;\n"],["\n  position: absolute;\n  left: 12px;\n  font-size: 10px;\n  line-height: 15px;\n"]))),OptionDeleteIcon=(0,emotion_styled_browser_esm.A)("span")(Select_templateObject_6||(Select_templateObject_6=(0,tslib_es6.ue)(["\n  position: absolute;\n  right: 12px;\n  font-size: 10px;\n  line-height: 15px;\n"],["\n  position: absolute;\n  right: 12px;\n  font-size: 10px;\n  line-height: 15px;\n"]))),ErrorMessage=(0,emotion_styled_browser_esm.A)("div")(Select_templateObject_7||(Select_templateObject_7=(0,tslib_es6.ue)(["\n  font-size: 12px;\n  color: ",";\n  margin-top: 5px;\n"],["\n  font-size: 12px;\n  color: ",";\n  margin-top: 5px;\n"])),styles_constants.Tj.dangerRed),Select_Container=(0,emotion_styled_browser_esm.A)("div")(Select_templateObject_8||(Select_templateObject_8=(0,tslib_es6.ue)(["\n  display: ",";\n"],["\n  display: ",";\n"])),(function(_a){return _a.responsive?"block":"inline-block"})),Select=function(_super){function Select(props){var _this=_super.call(this,props)||this;return _this.createOnDeleteCallback=function(value,label){return function(evt){_this.props.onDelete&&_this.props.onDelete(value,label,evt)}},_this.onClick=function(evt){evt.stopPropagation(),_this.setState({isOpen:!_this.state.isOpen})},_this.onClickOutside=function(evt){-1===evt.propagationPath().indexOf(react_dom.findDOMNode(_this.trigger))&&_this.setState({isOpen:!1})},_this.onClose=function(){_this.setState({highlightedOptionIndex:0,isOpen:!1})},_this.onKeyDown=function(evt){var options=_this.props.options,highlightedOptionIndex=_this.state.highlightedOptionIndex;switch(evt.key){case keys.D.ArrowDown:if(!_this.state.isOpen)return _this.onClick(evt);if(evt.preventDefault(),evt.stopPropagation(),options){var optionsLength_1=options.length;return _this.setState((function(state){return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},state),{highlightedOptionIndex:state.highlightedOptionIndex+1>=optionsLength_1-1?optionsLength_1-1:state.highlightedOptionIndex+1})}))}break;case keys.D.ArrowUp:return evt.preventDefault(),evt.stopPropagation(),_this.setState((function(state){return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},state),{highlightedOptionIndex:state.highlightedOptionIndex-1<0?0:state.highlightedOptionIndex-1})}));case keys.D.Enter:var disabled=(options&&options[highlightedOptionIndex]||{disabled:!1}).disabled;if(!_this.state.isOpen&&!disabled)return _this.onClick(evt);if(evt.preventDefault(),evt.stopPropagation(),options&&!disabled)return _this.selectOption(options[highlightedOptionIndex]);break;case keys.D.Escape:case keys.D.Tab:return _this.onClose()}},_this.renderDropdownOption=function(option,index){var deleteIcon,disabled=option.disabled,selectedOption=_this.props.value,_a=_this.props,dataPendo=_a.dataPendo,optionDataAnalytics=_a.optionDataAnalytics,optionDataPendo=_a.optionDataPendo,selectedIcon=null,optionIsActive=!1;return!disabled&&selectedOption&&option.value===selectedOption.value&&(selectedIcon=(0,emotion_react_jsx_runtime_browser_esm.Y)(OptionSelectedIcon,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{className:"fa fa-check"})}),optionIsActive=!0),deleteIcon=(0,emotion_react_jsx_runtime_browser_esm.Y)(OptionDeleteIcon,(0,tslib_es6.Cl)({onClick:_this.createOnDeleteCallback(option.value,option.label)},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{className:"fa fa-trash"})})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Option,(0,tslib_es6.Cl)({"data-analytics":optionDataAnalytics,"data-pendo":optionDataPendo||dataPendo,disabled,isActive:optionIsActive,isHighlighted:_this.state.highlightedOptionIndex===index,onClick:_this.selectOption.bind(_this,option),onMouseEnter:_this.setHighlightedIndex(index,disabled)},{children:[selectedIcon,option.label,option.isDeletable?deleteIcon:null]}),String(option.value))},_this.renderSelectList=function(){if(!_this.props.options)return null;var Spinner=_this.props.spinnerComponent||null,spinner=_this.props.displaySpinner?(0,emotion_react_jsx_runtime_browser_esm.Y)(SpinnerContainer,{children:Spinner&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Spinner,{})}):null;return(0,emotion_react_jsx_runtime_browser_esm.FD)(SelectList,(0,tslib_es6.Cl)({width:_this.props.size},{children:[_this.props.options.map(_this.renderDropdownOption),spinner]}))},_this.selectOption=function(option){var onChange=_this.props.onChange,disabled=option.disabled;!disabled&&onChange&&onChange(option),disabled||_this.onClose()},_this.setHighlightedIndex=function(index,disabled){return function(){disabled||_this.setState({highlightedOptionIndex:index})}},_this.setTriggerRef=function(node){return _this.trigger=node},_this.trigger=null,_this.state={highlightedOptionIndex:0,isOpen:!1},_this}return(0,tslib_es6.C6)(Select,_super),Select.prototype.render=function(){var _this=this,_a=this.props,className=_a.className,customLabel=_a.customLabel,dataAnalytics=_a.dataAnalytics,dataE2E=_a.dataE2E,dataTestid=_a.dataTestid,disabled=_a.disabled,height=_a.height,invalid=_a.invalid,label=_a.label,placeholder=_a.placeholder,postOptionsContent=_a.postOptionsContent,renderSelectButtonContent=_a.renderSelectButtonContent,responsive=_a.responsive,size=_a.size,tabIndex=_a.tabIndex,useLinkButton=_a.useLinkButton,selectedOption=this.props.value,buttonText=selectedOption?selectedOption.label:placeholder;buttonText=renderSelectButtonContent?renderSelectButtonContent(selectedOption):buttonText;var ButtonComponent=useLinkButton?components_SelectLink:SelectButton.A,labelComponent=label?(0,emotion_react_jsx_runtime_browser_esm.Y)(Label.A,(0,tslib_es6.Cl)({},this.props.labelProps,{children:label})):null;return customLabel&&(labelComponent=customLabel),(0,emotion_react_jsx_runtime_browser_esm.FD)(Select_Container,(0,tslib_es6.Cl)({className,"data-e2e":dataE2E,onKeyDown:this.onKeyDown,responsive},{children:[labelComponent,(0,emotion_react_jsx_runtime_browser_esm.FD)(Dropdown.A,(0,tslib_es6.Cl)({className,isOpen:this.state.isOpen||this.props.isOpen,minWidth:size,onClickOutside:this.onClickOutside,onClose:this.onClose,triggerComponent:function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(ButtonComponent,(0,tslib_es6.Cl)({buttonRef:_this.setTriggerRef,className,dataAnalytics,dataPendo:_this.props.dataPendo,dataTestid,disabled,hasOptionSelected:!!selectedOption,height,invalid,onClick:_this.onClick,responsive,size,tabIndex},{children:buttonText}))}},{children:[this.renderSelectList(),postOptionsContent]})),this.renderErrorMessage()]}))},Select.prototype.renderErrorMessage=function(){var errorMessage=this.props.errorMessage;return errorMessage?(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorMessage,{children:errorMessage}):null},Select.defaultProps={size:constants_form.YI.medium,useLinkButton:!1,value:null},Select}(react.Component),SelectField=(function(_super){function SelectWithRadio(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.renderSelectList=function(){if(!_this.props.options)return null;var Spinner=_this.props.spinnerComponent||null,spinner=_this.props.displaySpinner?(0,emotion_react_jsx_runtime_browser_esm.Y)(SpinnerContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Spinner,{})}):null;return(0,emotion_react_jsx_runtime_browser_esm.FD)(SelectList,(0,tslib_es6.Cl)({width:_this.props.size},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Radio,{className:_this.props.className,htmlFor:"selectRadio",name:"selectRadio",onChange:_this.selectOption,options:_this.props.options,value:_this.props.value,vertical:!0}),spinner]}))},_this}(0,tslib_es6.C6)(SelectWithRadio,_super)}(Select),function(props){var hideErrors=props.hideErrors,input=props.input,meta=props.meta,selectProps=(0,tslib_es6.Tt)(props,["hideErrors","input","meta"]),errorMessage=!hideErrors&&meta&&meta.touched&&meta.error?meta.error:null;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Select,(0,tslib_es6.Cl)({onChange:input.onChange,value:input.value},selectProps,{"data-e2e":selectProps.dataE2E,errorMessage}))});const Select_Select=Select;var Select_templateObject_1,Select_templateObject_2,Select_templateObject_3,Select_templateObject_4,Select_templateObject_5,Select_templateObject_6,Select_templateObject_7,Select_templateObject_8,options=__webpack_require__("./app/components/Select/options.ts");const components_Select=Select_Select;var batch_entry_selectors=__webpack_require__("./app/selectors/batch-entry.selectors.ts"),Parcel=__webpack_require__("./app/types/Parcel.ts"),TrackingHelper=__webpack_require__("./app/utils/TrackingHelper/index.ts"),types=__webpack_require__("./app/utils/TrackingHelper/types.ts"),schema=__webpack_require__("./app/utils/segment/schema.ts"),ComposedPackageWeightDimensionsWarning=(0,utils_translate.Tl)()((function(_a){var t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:t("orders:calculateRates:tabs:shipmentInfo:packageWeightDimensionsWarning")})}));const Tabs_PackageWeightDimensionsWarning=ComposedPackageWeightDimensionsWarning;var AdditionalServicesFormStyles_templateObject_1,AdditionalServicesFormStyles_templateObject_2,AdditionalServicesFormStyles_templateObject_3,PackageExtrasForm_templateObject_1,PackageExtrasForm_templateObject_2,reduxForm=__webpack_require__("./node_modules/redux-form/es/reduxForm.js"),Typography=__webpack_require__("./node_modules/@goshippo/components/esm/Typography/Typography.js"),shippoTheme=__webpack_require__("./node_modules/@goshippo/components/esm/styles/shippoTheme.js"),TextField=__webpack_require__("./node_modules/@goshippo/components/esm/TextField/TextField.js"),MenuItem=__webpack_require__("./node_modules/@goshippo/components/esm/MenuItem/MenuItem.js"),Divider=__webpack_require__("./node_modules/@goshippo/components/esm/Divider/Divider.js"),dist_es=__webpack_require__("./node_modules/i18next/dist/es/index.js"),Field=__webpack_require__("./node_modules/redux-form/es/Field.js"),getFormValues=__webpack_require__("./node_modules/redux-form/es/getFormValues.js"),FormSection=__webpack_require__("./node_modules/redux-form/es/FormSection.js"),Fields=__webpack_require__("./node_modules/redux-form/es/Fields.js"),components_Checkbox=__webpack_require__("./app/components/Checkbox/index.ts"),Input=__webpack_require__("./app/components/Input/index.ts"),recipientTypeOptions=[{label:"Consumer",value:"CONSUMER"},{label:"Licensee",value:"LICENSEE"}],hazmatHelpUrl="https://support.goshippo.com/hc/en-us/articles/15969609312539-How-to-Ship-HAZMAT-with-USPS",DryIceWeightContainer=(0,emotion_styled_browser_esm.A)("div")(AdditionalServicesFormStyles_templateObject_1||(AdditionalServicesFormStyles_templateObject_1=(0,tslib_es6.ue)(["\n  width: 9.375rem;\n"],["\n  width: 9.375rem;\n"]))),Subsection=(0,emotion_styled_browser_esm.A)("div")(AdditionalServicesFormStyles_templateObject_2||(AdditionalServicesFormStyles_templateObject_2=(0,tslib_es6.ue)(["\n  margin-top: 0.25rem;\n  padding-left: 1.5rem;\n\n  label {\n    padding: 2px 0;\n  }\n"],["\n  margin-top: 0.25rem;\n  padding-left: 1.5rem;\n\n  label {\n    padding: 2px 0;\n  }\n"]))),DisclaimerText=(0,emotion_styled_browser_esm.A)("div")(AdditionalServicesFormStyles_templateObject_3||(AdditionalServicesFormStyles_templateObject_3=(0,tslib_es6.ue)(["\n  font-size: 0.75rem;\n"],["\n  font-size: 0.75rem;\n"]))),Tooltip=__webpack_require__("./node_modules/@goshippo/components/esm/Tooltip/Tooltip.js"),InfoOutlined=__webpack_require__("./node_modules/@mui/icons-material/esm/InfoOutlined.js"),HazmatTooltip=function(_a){var t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Tooltip.A,(0,tslib_es6.Cl)({enterTouchDelay:0,placement:"top",title:(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"p",variant:"captionEmphasized"},{children:t("orders:additionalServices:hazmatInfo:titleIncludes")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"p",variant:"caption"},{children:t("orders:additionalServices:hazmatInfo:descriptionIncludes")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"p",marginTop:"1rem",variant:"captionEmphasized"},{children:t("orders:additionalServices:hazmatInfo:titleHow")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"p",variant:"caption"},{children:t("orders:additionalServices:hazmatInfo:descriptionHow")}))]}),variant:"secondary"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(InfoOutlined.A,{color:"secondary",fontSize:"small",sx:{alignSelf:"center",marginLeft:"0.25rem",marginRight:"-0.25rem"}})}))},props_selectors=__webpack_require__("./app/selectors/props.selectors.ts"),lib=__webpack_require__("./node_modules/qs/lib/index.js"),getLocation=(0,reselect_es.Mz)((function(state){return state.router}),(function(routerStore){return routerStore.location})),getQS=(0,reselect_es.Mz)(getLocation,(function(location){return location.search})),getParsedQS=(0,reselect_es.Mz)(getQS,(function(querystring){return lib.parse(querystring.substring(1))})),router_selectors_getPathname=(0,reselect_es.Mz)(getLocation,(function(location){return location.pathname})),getQSResults=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.results})),getQSHidden=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return!!queryParams.hidden})),getQSOrderStatus=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.order_status})),getQSSortBy=((0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.sort||""})),(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.sort_by||""}))),getQSOrderBy=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.order_by||""})),getQSWeightUnit=((0,reselect_es.Mz)(getParsedQS,(function(queryParams){return Number(queryParams.page||"1")})),(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.weight_unit}))),getQSWeightLt=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.weight_lt})),getQSWeightGt=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.weight_gt})),getQSShippingMethod=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.shipping_method})),getQSItem=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return function(items){if(items)return"string"==typeof items?[items]:Array.isArray(items)?items.sort():Object.values(items).sort()}(queryParams.item)})),getQSIsInternational=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.is_international})),getQSShopApp=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.shop_app})),getQSStartDate=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.start_date})),getQSEndDate=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.end_date})),getQSTag=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return function(tags){if(tags)return"string"==typeof tags?[tags]:Array.isArray(tags)?tags:Object.values(tags)}(queryParams.tag)})),getQSUntagged=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.untagged})),getQSSaved=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.saved})),getQSQ=(0,reselect_es.Mz)(getParsedQS,(function(queryParams){return queryParams.q})),getOrderFiltersValues=(0,reselect_es.Mz)(getQSIsInternational,getQSShippingMethod,getQSShopApp,getQSStartDate,getQSEndDate,getQSWeightUnit,getQSWeightLt,getQSWeightGt,getQSOrderStatus,getQSQ,getQSSortBy,getQSOrderBy,getQSItem,getQSTag,getQSUntagged,(function(isInternational,shippingMethod,shopApp,startDate,endDate,weightUnit,weightLt,weightGt,orderStatus,q,SortBy,OrderBy,item,tag,untagged){return{end_date:endDate,is_international:isInternational,item,order_by:OrderBy,order_status:orderStatus,q,shipping_method:shippingMethod,shop_app:shopApp,sort_by:SortBy,start_date:startDate,tag,untagged,weight_gt:weightGt,weight_lt:weightLt,weight_unit:weightUnit}})),getNotEmptyOrdersFilters=(0,reselect_es.Mz)(getOrderFiltersValues,(function(ordersFiltersValues){return Object.keys(ordersFiltersValues).filter((function(key){return ordersFiltersValues[key]}))})),getCrossBorderOrdersObjectIds=((0,reselect_es.Mz)(orders_selectors.SP,getQSResults,(function(totalOrders,fetchCount){return Math.ceil(totalOrders/Number(fetchCount||"25"))})),(0,reselect_es.Mz)(user_selectors.GA,orders_selectors.Sv,props_selectors.Kz,(function(defaultSenderAddress,orderData,orderIds){return orderIds.filter((function(orderId){return!orderData[orderId]||(0,Order.p2)(orderData[orderId],defaultSenderAddress)}))}))),ExtrasBox=(0,emotion_styled_browser_esm.A)("div")(PackageExtrasForm_templateObject_1||(PackageExtrasForm_templateObject_1=(0,tslib_es6.ue)(["\n  padding: 1rem 1rem 0 0;\n"],["\n  padding: 1rem 1rem 0 0;\n"]))),ExtraContainer=(0,emotion_styled_browser_esm.A)("div")(PackageExtrasForm_templateObject_2||(PackageExtrasForm_templateObject_2=(0,tslib_es6.ue)(["\n  margin-bottom: 0.5rem;\n"],["\n  margin-bottom: 0.5rem;\n"]))),AlcoholFields=function(fields){var t=dist_es.t,submitting=(0,es.d4)((function(state){return(0,isSubmitting.A)(constants_form.n6)(state)}));return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:components_Checkbox.Y,dataAnalytics:"".concat("orders_table_batchBar","ShipmentOptions-click-alcoholCheckbox"),disabled:submitting,id:"package-extras-contains-alcohol",label:t("orders:additionalServices:containsAlcohol"),name:"containsAlcohol"}),fields.containsAlcohol.input.value&&(0,emotion_react_jsx_runtime_browser_esm.FD)(Subsection,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,(0,tslib_es6.Cl)({},fields.recipientType.input,{component:Radio_RadioField,dataAnalytics:"".concat("orders_table_batchBar","ShipmentOptions-click-alcoholRecipiantRadio"),disabled:submitting,label:t("orders:additionalServices:alcoholRecipientType"),name:"recipientType",options:recipientTypeOptions,responsive:!0})),(0,emotion_react_jsx_runtime_browser_esm.Y)(DisclaimerText,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(utils_translate.x6,(0,tslib_es6.Cl)({i18nKey:"orders:additionalServices:alcoholDisclaimer"},{children:["Compliant account with UPS or FedEx is required. For more info,",(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.tp,(0,tslib_es6.Cl)({href:"https://support.goshippo.com/hc/en-us/articles/360042823431",rel:"noreferrer noopener",target:"_blank"},{children:"visit our FAQ"})),"."]}))})]})]})},DryIceFields=function(fields){var t=dist_es.t,submitting=(0,es.d4)((function(state){return(0,isSubmitting.A)(constants_form.n6)(state)})),defaultMassUnit=(0,es.d4)(user_selectors.Og).defaultMassUnit;return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:components_Checkbox.Y,dataAnalytics:"".concat("orders_table_batchBar","ShipmentOptions-click-dryIceCheckbox"),dataPendo:"service-dry-ice",disabled:submitting,id:"package-extras-contains-dry-ice",label:t("orders:additionalServices:dryIce"),name:"containsDryIce"}),fields.containsDryIce.input.value&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Subsection,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(DryIceWeightContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,(0,tslib_es6.Cl)({},fields.weight.input,{component:Input.FO,dataAnalytics:"".concat("orders_table_batchBar","ShipmentOptions-input-dryIceWeight"),dataPendo:"dry-ice-weight",disabled:submitting,label:"".concat(t("orders:additionalServices:dryIceInputLabel")," (").concat(defaultMassUnit,")"),labelProps:{required:!0},name:"weight",placeholder:t("orders:additionalServices:dryIceInputPlaceholder"),responsive:!0}))})})]})},HazmatFields=function(fields){var _a,t=dist_es.t,submitting=(0,es.d4)((function(state){return(0,isSubmitting.A)(constants_form.n6)(state)})),formValues=(0,es.d4)((function(state){return(0,getFormValues.A)(constants_form.n6)(state)})),showReturnLabelClassification=!!formValues.isReturnRequested&&!!(null===(_a=formValues.hazmat)||void 0===_a?void 0:_a.containsHazmat);react.useEffect((function(){fields.containsBiologicalMaterial.input.onChange(!!fields.containsBiologicalMaterial.input.value&&showReturnLabelClassification)}),[showReturnLabelClassification]),react.useEffect((function(){fields.containsLithiumBatteries.input.onChange(!1)}),[]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:components_Checkbox.Y,dataAnalytics:"".concat("orders_table_batchBar","ShipmentOptions-click-hazmatCheckbox"),disabled:submitting,id:"package-extras-contains-hazmat",label:(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[t("orders:additionalServices:hazmat"),(0,emotion_react_jsx_runtime_browser_esm.Y)(HazmatTooltip,{t})]}),name:"containsHazmat"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,(0,tslib_es6.Cl)({style:{display:"none"}},fields.containsBiologicalMaterial.input,{component:"input",disabled:submitting,id:"package-extras-contains-hazmat-biomat",label:"hazmat biomat",name:"containsBiologicalMaterial",type:"checkbox"})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,(0,tslib_es6.Cl)({style:{display:"none"}},fields.containsLithiumBatteries.input,{checked:!1,component:"input",disabled:submitting,id:"package-extras-contains-hazmat-biomat",label:"hazmat lithium bat",name:"containsLithiumBatteries",type:"checkbox"})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Subsection,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({component:"p",sx:{color:styles_constants.Tj.gray700,fontSize:shippoTheme.A.spacing(1.75)},variant:"caption"},{children:[t("orders:additionalServices:hazmatSubtext"),(0,emotion_react_jsx_runtime_browser_esm.Y)("a",(0,tslib_es6.Cl)({href:hazmatHelpUrl,rel:"noreferrer",style:{color:styles_constants.Tj.primary,fontSize:shippoTheme.A.spacing(1.75),marginLeft:shippoTheme.A.spacing(.5)},target:"_blank"},{children:t("orders:additionalServices:hazmatLearnMore")}))]})),showReturnLabelClassification&&(0,emotion_react_jsx_runtime_browser_esm.FD)(TextField.A,(0,tslib_es6.Cl)({disabled:submitting,fullWidth:!0,label:t("orders:additionalServices:returnLabelClassificationField"),onChange:function(event){fields.containsBiologicalMaterial.input.onChange("true"===event.target.value)},required:!0,select:!0,sx:{marginTop:shippoTheme.A.spacing(2)},value:(!!fields.containsBiologicalMaterial.input.value).toString()},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(MenuItem.A,(0,tslib_es6.Cl)({value:"false"},{children:t("orders:additionalServices:generalHazmat")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(MenuItem.A,(0,tslib_es6.Cl)({value:"true"},{children:t("orders:additionalServices:biologicalMaterial")}))]}))]})]})},HazmatCrossBorderFields=function(fields){var t=dist_es.t,submitting=(0,es.d4)((function(state){return(0,isSubmitting.A)(constants_form.n6)(state)}));return react.useEffect((function(){fields.containsLithiumBatteries.input.onChange(!!fields.containsHazmat.input.value)}),[fields.containsHazmat.input.value]),react.useEffect((function(){fields.containsBiologicalMaterial.input.onChange(!1)}),[]),(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:components_Checkbox.Y,dataAnalytics:"".concat("orders_table_batchBar","ShipmentOptions-click-hazmatCheckbox"),disabled:submitting,id:"package-extras-contains-hazmat",label:(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[t("orders:additionalServices:lithiumBatteries"),(0,emotion_react_jsx_runtime_browser_esm.Y)(HazmatTooltip,{t})]}),name:"containsHazmat",value:fields.containsHazmat.input.value}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,(0,tslib_es6.Cl)({style:{display:"none"}},fields.containsBiologicalMaterial.input,{checked:!1,component:"input",disabled:submitting,id:"package-extras-contains-hazmat-biomat",label:"hazmat biomat",name:"containsBiologicalMaterial",type:"checkbox"})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,(0,tslib_es6.Cl)({style:{display:"none"}},fields.containsLithiumBatteries.input,{component:"input",disabled:submitting,id:"package-extras-contains-hazmat-biomat",label:"hazmat lithium bat",name:"containsLithiumBatteries",type:"checkbox"})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Subsection,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({component:"p",sx:{color:styles_constants.Tj.gray700,fontSize:shippoTheme.A.spacing(1.75)},variant:"caption"},{children:[t("orders:additionalServices:hazmatSubtext"),(0,emotion_react_jsx_runtime_browser_esm.Y)("a",(0,tslib_es6.Cl)({href:hazmatHelpUrl,rel:"noreferrer",style:{color:styles_constants.Tj.forest700,fontSize:shippoTheme.A.spacing(1.75),marginLeft:shippoTheme.A.spacing(.5)},target:"_blank"},{children:t("orders:additionalServices:hazmatLearnMore")}))]}))})]})},HazmatFieldsDisabled=function(fields){var t=dist_es.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{checked:!1,component:components_Checkbox.Y,dataAnalytics:"".concat("orders_table_batchBar","ShipmentOptions-click-hazmatCheckbox"),disabled:!0,id:"package-extras-contains-hazmat",label:(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[t("orders:additionalServices:hazmat"),(0,emotion_react_jsx_runtime_browser_esm.Y)(HazmatTooltip,{t})]}),name:"containsHazmat"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,(0,tslib_es6.Cl)({style:{display:"none"}},fields.containsBiologicalMaterial.input,{checked:!1,component:"input",id:"package-extras-contains-hazmat-biomat",label:"hazmat biomat",name:"containsBiologicalMaterial",type:"checkbox"})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,(0,tslib_es6.Cl)({style:{display:"none"}},fields.containsLithiumBatteries.input,{checked:!1,component:"input",id:"package-extras-contains-hazmat-biomat",label:"hazmat lithium bat",name:"containsLithiumBatteries",type:"checkbox"}))]})},HazmatFieldsDisabledCrossBorder=function(fields){var t=dist_es.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{checked:!1,component:components_Checkbox.Y,dataAnalytics:"".concat("orders_table_batchBar","ShipmentOptions-click-hazmatCheckbox"),disabled:!0,id:"package-extras-contains-hazmat",label:(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[t("orders:additionalServices:lithiumBatteries"),(0,emotion_react_jsx_runtime_browser_esm.Y)(HazmatTooltip,{t})]}),name:"containsHazmat"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,(0,tslib_es6.Cl)({style:{display:"none"}},fields.containsBiologicalMaterial.input,{checked:!1,component:"input",id:"package-extras-contains-hazmat-biomat",label:"hazmat biomat",name:"containsBiologicalMaterial",type:"checkbox"})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,(0,tslib_es6.Cl)({style:{display:"none"}},fields.containsLithiumBatteries.input,{checked:!1,component:"input",id:"package-extras-contains-hazmat-biomat",label:"hazmat lithium bat",name:"containsLithiumBatteries",type:"checkbox"}))]})},HazmatFieldWrapper=function(_a){var crossBorderOrderObjectIds=_a.crossBorderOrderObjectIds,disableHazmat=_a.disableHazmat,isInternational=crossBorderOrderObjectIds.length>0;return(0,emotion_react_jsx_runtime_browser_esm.Y)(FormSection.A,(0,tslib_es6.Cl)({disa:!0,name:"hazmat"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Fields.A,{component:disableHazmat?isInternational?HazmatFieldsDisabledCrossBorder:HazmatFieldsDisabled:isInternational?HazmatCrossBorderFields:HazmatFields,names:["containsHazmat","containsBiologicalMaterial","containsLithiumBatteries"]})}))},IsReturnRequested=function(_a){var crossBorderOrderObjectIds=_a.crossBorderOrderObjectIds,orderObjectIds=_a.orderObjectIds,t=dist_es.t,isDisabled=(0,react.useMemo)((function(){return crossBorderOrderObjectIds.length===orderObjectIds.length}),[crossBorderOrderObjectIds,orderObjectIds]),tooltipText=(0,react.useMemo)((function(){return crossBorderOrderObjectIds.length>0&&crossBorderOrderObjectIds.length<orderObjectIds.length?t("orders:additionalServices:notEligibleForReturnBulk"):1===orderObjectIds.length&&isDisabled?t("orders:additionalServices:notEligibleForReturn"):void 0}),[crossBorderOrderObjectIds,orderObjectIds,isDisabled]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:components_Checkbox.Y,dataAnalytics:"".concat("orders_table_batchBar","ShipmentOptions-click-returnLabelCheckbox"),dataPendo:"service-return-label",disabled:isDisabled,id:"package-extras-is-return-requested",label:t("orders:additionalServices:returns"),name:"isReturnRequested",tooltipText})},PackageExtrasForm=function(_a){var orderSelection=_a.orderSelection,orderObjectIds=(0,react.useMemo)((function(){return orderSelection?Object.keys(orderSelection):[]}),[orderSelection]),crossBorderOrderObjectIds=(0,es.d4)((function(state){return getCrossBorderOrdersObjectIds(state,{orderObjectIds})})),batchEntryIds=[];orderObjectIds.forEach((function(orderObjectId){batchEntryIds=(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(batchEntryIds),!1),(0,tslib_es6.zs)(orderSelection[orderObjectId]),!1)}));var batchEntries=(0,es.d4)((function(state){return(0,batch_entry_selectors.uq)(state,{batchEntryIds})})),disableHazmat=(0,react.useMemo)((function(){var _a,_b;if(1===batchEntries.length)return!1;for(var i=1;i<batchEntries.length;i++)if(!(0,lodash.isEqual)(null===(_a=batchEntries[i].extras)||void 0===_a?void 0:_a.hazmat,null===(_b=batchEntries[i-1].extras)||void 0===_b?void 0:_b.hazmat))return!0;return!1}),[batchEntries]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Divider.A,{style:{padding:"0.5rem"}}),(0,emotion_react_jsx_runtime_browser_esm.FD)(ExtrasBox,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ExtraContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(FormSection.A,(0,tslib_es6.Cl)({name:"alcohol"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Fields.A,{component:AlcoholFields,names:["containsAlcohol","recipientType"]})}))}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ExtraContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(FormSection.A,(0,tslib_es6.Cl)({name:"dryIce"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Fields.A,{component:DryIceFields,names:["containsDryIce","weight"]})}))}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ExtraContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(IsReturnRequested,{crossBorderOrderObjectIds,orderObjectIds})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ExtraContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(HazmatFieldWrapper,{crossBorderOrderObjectIds,disableHazmat,orderObjectIds})})]})]})},getFormMeta=__webpack_require__("./node_modules/redux-form/es/getFormMeta.js"),getFormSyncErrors=__webpack_require__("./node_modules/redux-form/es/getFormSyncErrors.js"),parcel_template_actions_fetchParcelTemplates=function(){return{type:constants.t.PARCEL_TEMPLATE_FETCH}},fetchParcelTemplatesSuccess=function(payload){return{payload,type:constants.t.PARCEL_TEMPLATE_FETCH_SUCCESS}},fetchCarrierParcelTemplatesSuccess=function(payload){return{payload,type:constants.t.CARRIER_PARCEL_TEMPLATE_FETCH_SUCCESS}},FormError_FormError=__webpack_require__("./app/components/FormError/FormError.tsx"),emotion_element_c39617d8_browser_esm=__webpack_require__("./node_modules/@emotion/react/dist/emotion-element-c39617d8.browser.esm.js"),responsive=__webpack_require__("./app/constants/responsive.ts"),StyledInputContainer=(0,emotion_styled_browser_esm.A)("div")(InputExtended_templateObject_1||(InputExtended_templateObject_1=(0,tslib_es6.ue)(["\n  border-radius: 3px;\n  background-color: ",";\n  border: 1px solid ",";\n  color: ",";\n\n  ",";\n  ",";\n  /* Input is 35px.. subtracting by 2 because 2 extra pixels are added by the borders 1px */\n  height: ","px;\n  width: 100%;\n  @media screen and (min-width: ","px) {\n    /* width: ","; */\n    width: 74px;\n  }\n  display: flex;\n  align-items: center;\n"],["\n  border-radius: 3px;\n  background-color: ",";\n  border: 1px solid ",";\n  color: ",";\n\n  ",";\n  ",";\n  /* Input is 35px.. subtracting by 2 because 2 extra pixels are added by the borders 1px */\n  height: ","px;\n  width: 100%;\n  @media screen and (min-width: ","px) {\n    /* width: ","; */\n    width: 74px;\n  }\n  display: flex;\n  align-items: center;\n"])),(function(props){return props.theme.backgroundColor}),(function(props){return props.theme.borderColor}),(function(props){return props.theme.color}),(function(props){return props.hasPrefix?"":"padding-left: 10px"}),(function(props){return props.hasSuffix?"":"padding-right: 10px"}),constants_form.hx.medium-2,responsive.P.Mobile,styles_constants.vi.inputWidth),StyledInput=(0,emotion_styled_browser_esm.A)("input")(InputExtended_templateObject_2||(InputExtended_templateObject_2=(0,tslib_es6.ue)(["\n  font-size: 14px;\n  height: 18px;\n  line-height: 18px;\n  border: none;\n  width: 100%;\n  outline: none;\n  overflow: hidden;\n  ",";\n\n  ::placeholder {\n    /* Chrome, Firefox, Opera, Safari 10.1+ */\n    color: ",";\n    opacity: 1; /* Firefox */\n  }\n\n  ::-ms-input-placeholder {\n    /* Microsoft Edge */\n    color: ",";\n  }\n\n  :-ms-input-placeholder {\n    /* Internet Explorer 10-11 */\n    color: ",";\n  }\n\n  :focus,\n  :active {\n    border-color: inherit;\n  }\n\n  :disabled {\n    background-color: inherit;\n    color: inherit;\n  }\n"],["\n  font-size: 14px;\n  height: 18px;\n  line-height: 18px;\n  border: none;\n  width: 100%;\n  outline: none;\n  overflow: hidden;\n  ",";\n\n  ::placeholder {\n    /* Chrome, Firefox, Opera, Safari 10.1+ */\n    color: ",";\n    opacity: 1; /* Firefox */\n  }\n\n  ::-ms-input-placeholder {\n    /* Microsoft Edge */\n    color: ",";\n  }\n\n  :-ms-input-placeholder {\n    /* Internet Explorer 10-11 */\n    color: ",";\n  }\n\n  :focus,\n  :active {\n    border-color: inherit;\n  }\n\n  :disabled {\n    background-color: inherit;\n    color: inherit;\n  }\n"])),(function(props){return props.theme.isRightAligned?"text-align: right;":""}),styles_constants.Tj.form.placeholderFontColor,styles_constants.Tj.form.placeholderFontColor,styles_constants.Tj.form.placeholderFontColor),Prefix=(0,emotion_styled_browser_esm.A)("div")(InputExtended_templateObject_3||(InputExtended_templateObject_3=(0,tslib_es6.ue)(["\n  height: 20px;\n  width: 20px;\n  background-color: ",";\n  border-radius: 2px;\n  text-align: center;\n  font-size: 13px;\n  line-height: 20px;\n  margin: 0 5px 0 6px;\n"],["\n  height: 20px;\n  width: 20px;\n  background-color: ",";\n  border-radius: 2px;\n  text-align: center;\n  font-size: 13px;\n  line-height: 20px;\n  margin: 0 5px 0 6px;\n"])),styles_constants.Tj.gray25),InputExtended=function(_super){function InputExtended(props){var _this=_super.call(this,props)||this;return _this.getTheme=function(){var theme={backgroundColor:"inherit",borderColor:styles_constants.Tj.form.greyBorder,color:styles_constants.Tj.form.fontColor,isRightAligned:!!_this.props.isRightAligned};return _this.props.isInvalid&&(theme.borderColor=styles_constants.Tj.dangerRed),_this.state.isFocused&&(theme.borderColor=styles_constants.Tj.primaryAlternative),_this.props.disabled&&(theme.backgroundColor=styles_constants.Tj.form.greyDisabled,theme.borderColor=styles_constants.Tj.form.greyDisabled,theme.color=styles_constants.Tj.form.disabledLabelFontColor),theme},_this.onInputBlur=function(){_this.setState({isFocused:!1}),_this.props.onBlur&&_this.props.onBlur()},_this.onInputFocus=function(){_this.setState({isFocused:!0}),_this.props.onFocus&&_this.props.onFocus()},_this.state={isFocused:!1},_this}return(0,tslib_es6.C6)(InputExtended,_super),InputExtended.prototype.render=function(){var props=this.props,autoComplete=props.autoComplete,dataAnalytics=props.dataAnalytics,dataE2E=props.dataE2E,dataPendo=props.dataPendo,disabled=props.disabled,id=props.id,inputMode=props.inputMode,inputRef=props.inputRef,isAutoFocus=props.isAutoFocus,onChange=props.onChange,onKeyDown=props.onKeyDown,placeholder=props.placeholder,renderPrefix=props.renderPrefix,renderSuffix=props.renderSuffix,tabIndex=props.tabIndex,type=props.type,value=props.value,inputProps={autoComplete,autoFocus:isAutoFocus,disabled,id,inputMode,onBlur:this.onInputBlur,onChange,onFocus:this.onInputFocus,onKeyDown,placeholder,tabIndex,type:type||"text",value};return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_element_c39617d8_browser_esm.a,(0,tslib_es6.Cl)({theme:this.getTheme()},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledInputContainer,(0,tslib_es6.Cl)({className:props.className,hasPrefix:!!renderPrefix,hasSuffix:!!renderSuffix,isResponsive:props.isResponsive},{children:[renderPrefix?renderPrefix(value):null,(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledInput,(0,tslib_es6.Cl)({},inputProps,{"data-analytics":dataAnalytics,"data-e2e":dataE2E,"data-pendo":dataPendo,ref:inputRef})),renderSuffix?renderSuffix(value):null]}))}))},InputExtended}(react.PureComponent),InputExtendedField=function(props){var input=props.input,meta=props.meta,inputProps=(0,tslib_es6.Tt)(props,["input","meta"]),invalid=meta&&meta.touched&&meta.error,errors=invalid?meta.error:null;return(0,emotion_react_jsx_runtime_browser_esm.Y)(InputExtended,(0,tslib_es6.Cl)({isInvalid:invalid,onChange:input.onChange,value:input.value},inputProps,{children:errors}))};var InputExtended_templateObject_1,InputExtended_templateObject_2,InputExtended_templateObject_3;const components_InputExtended=InputExtended;var closeModal=function(){return{type:constants.t.SETTINGS_CLOSE_SAVE_PACKAGE_TEMPLATE_MODAL}},icon_carrierparcel=__webpack_require__("./app/assets/icons/icon_carrierparcel.svg"),icon_customdims=__webpack_require__("./app/assets/icons/icon_customdims.svg"),BackButtonContainer=(0,emotion_styled_browser_esm.A)("div")(BackButton_templateObject_1||(BackButton_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  padding: 14px 24px 14px 24px;\n  border-bottom: 1px solid #efefef;\n  margin-bottom: 14px;\n  cursor: pointer;\n  color: ",";\n  font-size: 14px;\n  align-items: center;\n  font-weight: ",";\n\n  i {\n    color: ",";\n    margin-right: 14px;\n  }\n"],["\n  display: flex;\n  padding: 14px 24px 14px 24px;\n  border-bottom: 1px solid #efefef;\n  margin-bottom: 14px;\n  cursor: pointer;\n  color: ",";\n  font-size: 14px;\n  align-items: center;\n  font-weight: ",";\n\n  i {\n    color: ",";\n    margin-right: 14px;\n  }\n"])),styles_constants.Tj.fontColor,styles_constants.Wy.medium,styles_constants.Tj.placeholderColor);var BackButton_templateObject_1;const ParcelSelect_BackButton=function(props){return(0,emotion_react_jsx_runtime_browser_esm.FD)(BackButtonContainer,(0,tslib_es6.Cl)({onClick:props.onClick},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{className:"fa fa-chevron-left"}),"Carrier Provided Parcels"]}))};var icon_package=__webpack_require__("./app/assets/icons/icon_package.svg"),parcel=__webpack_require__("./app/assets/icons/parcel.svg"),ParcelTemplate=__webpack_require__("./app/types/ParcelTemplate.ts"),FlexWrapper=(0,emotion_styled_browser_esm.A)("div")(ListItem_templateObject_1||(ListItem_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  flex-direction: column;\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  flex-direction: column;\n"]))),StyledListItem=(0,emotion_styled_browser_esm.A)("li")(ListItem_templateObject_2||(ListItem_templateObject_2=(0,tslib_es6.ue)(["\n  margin: 0;\n  padding: 8px 24px;\n  cursor: pointer;\n  transition: background-color 100ms;\n  font-size: 14px;\n  line-height: 1.8;\n  color: ",";\n  display: flex;\n  align-items: center;\n\n  :hover {\n    background-color: ",";\n  }\n"],["\n  margin: 0;\n  padding: 8px 24px;\n  cursor: pointer;\n  transition: background-color 100ms;\n  font-size: 14px;\n  line-height: 1.8;\n  color: ",";\n  display: flex;\n  align-items: center;\n\n  :hover {\n    background-color: ",";\n  }\n"])),styles_constants.Tj.fontColor,styles_constants.Tj.almostWhite),BoxIconFigure=(0,emotion_styled_browser_esm.A)("figure")(ListItem_templateObject_3||(ListItem_templateObject_3=(0,tslib_es6.ue)(["\n  margin: 0 24px 0 0;\n  display: flex;\n  align-items: center;\n\n  img {\n    width: ",";\n  }\n"],["\n  margin: 0 24px 0 0;\n  display: flex;\n  align-items: center;\n\n  img {\n    width: ",";\n  }\n"])),(function(props){return props.isCarrier?"45px":"25px"})),ListItemSubtitle=(0,emotion_styled_browser_esm.A)("div")(ListItem_templateObject_4||(ListItem_templateObject_4=(0,tslib_es6.ue)(["\n  font-weight: 300;\n  line-height: 1;\n"],["\n  font-weight: 300;\n  line-height: 1;\n"])));var ListItem_templateObject_1,ListItem_templateObject_2,ListItem_templateObject_3,ListItem_templateObject_4;const ParcelSelect_ListItem=function(props){var figure=props.icon?(0,emotion_react_jsx_runtime_browser_esm.Y)(BoxIconFigure,(0,tslib_es6.Cl)({isCarrier:props.isCarrier},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"",src:props.icon})})):null;return(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledListItem,(0,tslib_es6.Cl)({"data-analytics":props.dataAnalytics,"data-pendo":props.dataPendo,onClick:props.onClick},{children:[figure,(0,emotion_react_jsx_runtime_browser_esm.FD)(FlexWrapper,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:props.children}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ListItemSubtitle,{children:props.subtitle})]})]}))};var Wrapper=(0,emotion_styled_browser_esm.A)("div")(SectionTitle_templateObject_1||(SectionTitle_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n  padding: 0 24px;\n"],["\n  display: flex;\n  align-items: center;\n  padding: 0 24px;\n"]))),Title=(0,emotion_styled_browser_esm.A)("h3")(SectionTitle_templateObject_2||(SectionTitle_templateObject_2=(0,tslib_es6.ue)(["\n  font-size: 11px;\n  font-weight: ",";\n  padding-right: 8px;\n  color: ",";\n"],["\n  font-size: 11px;\n  font-weight: ",";\n  padding-right: 8px;\n  color: ",";\n"])),styles_constants.Wy.medium,styles_constants.Tj.loblolly),Line=(0,emotion_styled_browser_esm.A)("div")(SectionTitle_templateObject_3||(SectionTitle_templateObject_3=(0,tslib_es6.ue)(["\n  border: 1px solid #efefef;\n  flex: 1;\n"],["\n  border: 1px solid #efefef;\n  flex: 1;\n"]))),FAIcon=(0,emotion_styled_browser_esm.A)("i")(SectionTitle_templateObject_4||(SectionTitle_templateObject_4=(0,tslib_es6.ue)(["\n  padding-left: 1px;\n  padding-top: 2px;\n  cursor: pointer;\n  color: ",";\n"],["\n  padding-left: 1px;\n  padding-top: 2px;\n  cursor: pointer;\n  color: ",";\n"])),styles_constants.Tj.primaryAlternative),SectionTitle_IconContainer=(0,emotion_styled_browser_esm.A)("div")(SectionTitle_templateObject_5||(SectionTitle_templateObject_5=(0,tslib_es6.ue)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-left: 8px;\n  width: 20px;\n  height: 20px;\n  line-height: 22px;\n  border-radius: 50%;\n  box-shadow: 0 2px 4px 0 rgba(214, 214, 214);\n"],["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-left: 8px;\n  width: 20px;\n  height: 20px;\n  line-height: 22px;\n  border-radius: 50%;\n  box-shadow: 0 2px 4px 0 rgba(214, 214, 214);\n"])));var SectionTitle_templateObject_1,SectionTitle_templateObject_2,SectionTitle_templateObject_3,SectionTitle_templateObject_4,SectionTitle_templateObject_5;const ParcelSelect_SectionTitle=function(props){return(0,emotion_react_jsx_runtime_browser_esm.FD)(Wrapper,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Title,{children:props.children}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Line,{}),props.onAddPackageClick&&(0,emotion_react_jsx_runtime_browser_esm.Y)(SectionTitle_IconContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(FAIcon,{className:"fa fa-plus",onClick:props.onAddPackageClick})})]})};var List=(0,emotion_styled_browser_esm.A)("ul")(CustomParcelTemplate_templateObject_1||(CustomParcelTemplate_templateObject_1=(0,tslib_es6.ue)(["\n  margin: 0;\n  padding: 0;\n"],["\n  margin: 0;\n  padding: 0;\n"]))),ZeroStateWrapper=(0,emotion_styled_browser_esm.A)("div")(CustomParcelTemplate_templateObject_2||(CustomParcelTemplate_templateObject_2=(0,tslib_es6.ue)(["\n  display: flex;\n  padding: 0 24px 24px 24px;\n"],["\n  display: flex;\n  padding: 0 24px 24px 24px;\n"]))),ZeroStateContainer=(0,emotion_styled_browser_esm.A)("div")(CustomParcelTemplate_templateObject_3||(CustomParcelTemplate_templateObject_3=(0,tslib_es6.ue)(["\n  border-radius: 3px;\n  background-color: #f7fafc;\n  width: 100%;\n  height: 140px;\n  @media screen and (min-width: ","px) {\n    height: 120px;\n  }\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  padding: 24px;\n"],["\n  border-radius: 3px;\n  background-color: #f7fafc;\n  width: 100%;\n  height: 140px;\n  @media screen and (min-width: ","px) {\n    height: 120px;\n  }\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  padding: 24px;\n"])),responsive.P.SmallMobile),PackageIconContainer=(0,emotion_styled_browser_esm.A)("div")(CustomParcelTemplate_templateObject_4||(CustomParcelTemplate_templateObject_4=(0,tslib_es6.ue)(["\n  height: 48px;\n  width: 48px;\n  min-width: 48px;\n  min-height: 48px;\n  background-color: ",";\n  box-shadow: 0 2px 4px 0 rgba(214, 214, 214, 0.5);\n  border-radius: 50%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"],["\n  height: 48px;\n  width: 48px;\n  min-width: 48px;\n  min-height: 48px;\n  background-color: ",";\n  box-shadow: 0 2px 4px 0 rgba(214, 214, 214, 0.5);\n  border-radius: 50%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"])),styles_constants.Tj.white),ZeroStateHelpText=(0,emotion_styled_browser_esm.A)("div")(CustomParcelTemplate_templateObject_5||(CustomParcelTemplate_templateObject_5=(0,tslib_es6.ue)(["\n  text-align: center;\n  padding: 10px 0;\n"],["\n  text-align: center;\n  padding: 10px 0;\n"]))),CreatePackageLink=(0,emotion_styled_browser_esm.A)("div")(CustomParcelTemplate_templateObject_6||(CustomParcelTemplate_templateObject_6=(0,tslib_es6.ue)(["\n  color: ",";\n  cursor: pointer;\n"],["\n  color: ",";\n  cursor: pointer;\n"])),styles_constants.Tj.primaryAlternative),CustomParcelTemplate=function(_super){function CustomParcelTemplate(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.getParcelTemplateSubtitle=function(parcelTemplate){var dimensionsProvider=parcelTemplate.carrierTemplate&&!parcelTemplate.carrierTemplate.isVariableDimensions?parcelTemplate.carrierTemplate:parcelTemplate,weightString=parcelTemplate.weight?", ".concat((0,ParcelTemplate.E_)(parcelTemplate)):"";return"".concat((0,ParcelTemplate.$)(dimensionsProvider)).concat(weightString)},_this.handleCreatePackageClick=function(){_this.props.openSavePackageTemplateModal()},_this.renderParcelTemplates=function(parcelTemplate){var _a=_this.props,dataAnalytics=_a.dataAnalytics,onOptionSelection=_a.onOptionSelection;return(0,emotion_react_jsx_runtime_browser_esm.Y)(ParcelSelect_ListItem,(0,tslib_es6.Cl)({dataAnalytics,dataPendo:"parcel-select-template",icon:parcel,onClick:onOptionSelection.bind(_this,parcelTemplate),subtitle:_this.getParcelTemplateSubtitle(parcelTemplate)},{children:(0,ParcelTemplate.mG)(parcelTemplate)}),parcelTemplate.objectId)},_this}return(0,tslib_es6.C6)(CustomParcelTemplate,_super),CustomParcelTemplate.prototype.render=function(){var _a=this.props,parcelTemplates=_a.parcelTemplates,showZeroState=_a.showZeroState;return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ParcelSelect_SectionTitle,(0,tslib_es6.Cl)({onAddPackageClick:showZeroState?this.handleCreatePackageClick:void 0},{children:"Choose from package templates"})),parcelTemplates.length>0?(0,emotion_react_jsx_runtime_browser_esm.Y)(List,{children:parcelTemplates.map(this.renderParcelTemplates)}):showZeroState&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ZeroStateWrapper,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(ZeroStateContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(PackageIconContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"",src:icon_package})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ZeroStateHelpText,{children:"Package templates allow you to save your packaging measurements for easy re-use"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CreatePackageLink,(0,tslib_es6.Cl)({onClick:this.handleCreatePackageClick},{children:"+ Create Package Template"}))]})})]})},CustomParcelTemplate}(react.Component);const ParcelSelect_CustomParcelTemplate=CustomParcelTemplate;var CustomParcelTemplate_templateObject_1,CustomParcelTemplate_templateObject_2,CustomParcelTemplate_templateObject_3,CustomParcelTemplate_templateObject_4,CustomParcelTemplate_templateObject_5,CustomParcelTemplate_templateObject_6,SelectButtonContent_FlexWrapper=(0,emotion_styled_browser_esm.A)("div")(SelectButtonContent_templateObject_1||(SelectButtonContent_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n  margin-left: 6px;\n  font-family: ",";\n"],["\n  display: flex;\n  align-items: center;\n  margin-left: 6px;\n  font-family: ",";\n"])),styles_constants.mw),SelectButtonContent_OptionSelectedIcon=(0,emotion_styled_browser_esm.A)(SelectButtonContent_FlexWrapper)(SelectButtonContent_templateObject_2||(SelectButtonContent_templateObject_2=(0,tslib_es6.ue)(["\n  margin-right: 12px;\n  padding-right: 12px;\n  padding-left: 8px;\n  border-right: 1px solid ",";\n  height: 32px;\n\n  img {\n    width: 16px;\n  }\n"],["\n  margin-right: 12px;\n  padding-right: 12px;\n  padding-left: 8px;\n  border-right: 1px solid ",";\n  height: 32px;\n\n  img {\n    width: 16px;\n  }\n"])),styles_constants.Tj.gray50);const SelectButtonContent_SelectButtonContent=function(props){var hideDimensions=props.hideDimensions,hideIcon=props.hideIcon,initialContentString=props.initialContentString,isUsingCustomDimensions=props.isUsingCustomDimensions,selectedParcel=props.selectedParcel,dimensionProvider=selectedParcel&&selectedParcel.carrierTemplate?selectedParcel.carrierTemplate:selectedParcel,content="",icon=parcel;if(isUsingCustomDimensions)content="Custom Dimensions",icon=icon_customdims;else if(selectedParcel&&(selectedParcel&&selectedParcel.isVariableDimensions||selectedParcel.objectId&&selectedParcel.carrierTemplate&&selectedParcel.carrierTemplate.isVariableDimensions))content="".concat((0,ParcelTemplate.mG)(selectedParcel)),selectedParcel.objectId||(icon=icon_carrierparcel);else if(selectedParcel){var dimensions=(0,ParcelTemplate.$)(dimensionProvider);content="".concat((0,ParcelTemplate.mG)(selectedParcel)," ").concat(dimensions&&!hideDimensions?"(".concat(dimensions,")"):""),selectedParcel.objectId||(icon=icon_carrierparcel)}else content=initialContentString||"Select Template or Enter Dimensions...";var selectIcon=hideIcon||!selectedParcel&&!isUsingCustomDimensions?null:(0,emotion_react_jsx_runtime_browser_esm.Y)(SelectButtonContent_OptionSelectedIcon,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"",src:icon})});return(0,emotion_react_jsx_runtime_browser_esm.FD)(SelectButtonContent_FlexWrapper,{children:[selectIcon,content]})};var SelectButtonContent_templateObject_1,SelectButtonContent_templateObject_2,Spinner=__webpack_require__("./app/components/Spinner/index.ts"),carriers=__webpack_require__("./app/constants/carriers.ts"),utils=__webpack_require__("./app/utils/TrackingHelper/utils.ts"),ParcelSelect_Container=(0,emotion_styled_browser_esm.A)("div")(ParcelSelect_templateObject_1||(ParcelSelect_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n"],["\n  display: flex;\n  align-items: center;\n  width: 100%;\n"]))),GreenSpinnerWithMargin=(0,emotion_styled_browser_esm.A)(Spinner.hQ)(ParcelSelect_templateObject_2||(ParcelSelect_templateObject_2=(0,tslib_es6.ue)(["\n  margin-left: 5px;\n"],["\n  margin-left: 5px;\n"]))),ParcelSelect_Wrapper=(0,emotion_styled_browser_esm.A)("div")(ParcelSelect_templateObject_3||(ParcelSelect_templateObject_3=(0,tslib_es6.ue)(["\n  width: 100%;\n  overflow: auto;\n  max-height: 260px;\n  position: relative;\n  background-color: ",";\n"],["\n  width: 100%;\n  overflow: auto;\n  max-height: 260px;\n  position: relative;\n  background-color: ",";\n"])),styles_constants.Tj.white),ListSection=(0,emotion_styled_browser_esm.A)("section")(ParcelSelect_templateObject_4||(ParcelSelect_templateObject_4=(0,tslib_es6.ue)(["\n  width: 100%;\n  margin: 0;\n  padding: 5px 0 0 0;\n  box-sizing: border-box;\n  height: ",";\n"],["\n  width: 100%;\n  margin: 0;\n  padding: 5px 0 0 0;\n  box-sizing: border-box;\n  height: ",";\n"])),(function(props){return props.isExpanded?"500px":"auto"})),ParcelSelect_List=(0,emotion_styled_browser_esm.A)("ul")(ParcelSelect_templateObject_5||(ParcelSelect_templateObject_5=(0,tslib_es6.ue)(["\n  margin: 0;\n  padding: 0;\n"],["\n  margin: 0;\n  padding: 0;\n"]))),ListIcon=(0,emotion_styled_browser_esm.A)("img")(ParcelSelect_templateObject_6||(ParcelSelect_templateObject_6=(0,tslib_es6.ue)(["\n  padding-right: 12px;\n  vertical-align: middle;\n  padding-bottom: 2px;\n"],["\n  padding-right: 12px;\n  vertical-align: middle;\n  padding-bottom: 2px;\n"]))),FormErrorWithMarginTop=(0,emotion_styled_browser_esm.A)(FormError_FormError.A)(ParcelSelect_templateObject_7||(ParcelSelect_templateObject_7=(0,tslib_es6.ue)(["\n  margin-top: 5px;\n  font-size: 12px;\n  color: ",";\n"],["\n  margin-top: 5px;\n  font-size: 12px;\n  color: ",";\n"])),styles_constants.Tj.dangerRed),CustomSelectButton=(0,emotion_styled_browser_esm.A)(SelectButton.A)(ParcelSelect_templateObject_8||(ParcelSelect_templateObject_8=(0,tslib_es6.ue)(["\n  color: ",";\n  ",";\n  ",";\n"],["\n  color: ",";\n  ",";\n  ",";\n"])),styles_constants.Tj.fontColor,(function(_a){return _a.customSelectButtonStyle}),(function(props){return props.invalid?"border: 1px solid ".concat(styles_constants.Tj.dangerRed):""})),ParcelSelect=function(_super){function ParcelSelect(props){var _this=_super.call(this,props)||this;return _this.expandList=function(evt){evt.stopPropagation(),evt.preventDefault(),_this.setState({isExpanded:!0})},_this.goBack=function(){_this.setState({isExpanded:!1})},_this.handleClickOutside=function(evt){-1===evt.propagationPath().indexOf(react_dom.findDOMNode(_this.triggerRef))&&_this.setState({isDropdownOpen:!1,isExpanded:!1})},_this.handleCustomDimensionsSelected=function(){var _a=_this.props,onChange=_a.onChange,onCustomDimensionsSelected=_a.onCustomDimensionsSelected;onCustomDimensionsSelected&&onCustomDimensionsSelected(),onChange&&onChange(null),_this.setState({isDropdownOpen:!1})},_this.handleOptionSelection=function(option){var onChange=_this.props.onChange,parcelOption=option;if(onChange&&(onChange(option),null==parcelOption?void 0:parcelOption.objectId)){var trackingReference=TrackingHelper.U.getTrackingReference(types.wK.name,_this.props.appLocation,{isAutoSave:!1,isQuickSelect:!1,parcelId:null==parcelOption?void 0:parcelOption.objectId});(0,utils.bT)(trackingReference,types.wK.operations.ADDED,{parcelId:null==parcelOption?void 0:parcelOption.objectId})}_this.setState({isDropdownOpen:!1,isExpanded:!1})},_this.handleSelectButtonClick=function(){if(!_this.props.isLoadingParcels&&!_this.props.disabled){_this.setState({isDropdownOpen:!_this.state.isDropdownOpen});var trackingReference=TrackingHelper.U.getTrackingReference(types.wK.name,_this.props.appLocation,{isAutoSave:!1,isQuickSelect:!1,parcelId:void 0});(0,utils.bT)(trackingReference,types.wK.operations.BROWSED,{parcelId:void 0})}},_this.onKeyDown=function(evt){switch(evt.key){case keys.D.Escape:case keys.D.Tab:return _this.setState({highlightedOptionIndex:0,isDropdownOpen:!1,isExpanded:!1})}},_this.renderCarrierParcelTemplate=function(carrier,carrierParcelTemplates){return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ParcelSelect_SectionTitle,{children:carrier.name}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ParcelSelect_List,{children:carrierParcelTemplates.map((function(parcelTemplate){return _this.renderCarrierParcelTemplateItem(carrier,parcelTemplate)}))})]},carrier.id)},_this.renderCarrierParcelTemplateItem=function(carrier,carrierParcelTemplate){var dataAnalyticsContext=_this.props.dataAnalyticsContext;return(0,emotion_react_jsx_runtime_browser_esm.Y)(ParcelSelect_ListItem,(0,tslib_es6.Cl)({dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"Carrier-click-selectOption"),dataPendo:"package-select-carrier",icon:carrier.imgTrademark?carrier.imgTrademark:carrier.img,isCarrier:!0,onClick:_this.handleOptionSelection.bind(_this,carrierParcelTemplate),subtitle:(0,ParcelTemplate.$)(carrierParcelTemplate)},{children:carrierParcelTemplate.name}),carrierParcelTemplate.token)},_this.renderCarrierParcelTemplates=function(){return Object.keys(_this.props.carrierParcelTemplates).map((function(key){var carrier=carriers.Ps[key]||{id:key,img:"",name:key,token:key};return _this.renderCarrierParcelTemplate(carrier,_this.props.carrierParcelTemplates[key])}))},_this.renderExpandedOptions=function(){return _this.state.isExpanded?(0,emotion_react_jsx_runtime_browser_esm.FD)(ListSection,(0,tslib_es6.Cl)({isExpanded:_this.state.isExpanded,size:_this.props.size},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ParcelSelect_BackButton,{onClick:_this.goBack}),_this.renderCarrierParcelTemplates()]})):null},_this.renderOptions=function(){if(_this.state.isExpanded)return null;var _a=_this.props,dataAnalyticsContext=_a.dataAnalyticsContext,omitCustomParcelTemplate=_a.omitCustomParcelTemplate,openSavePackageTemplateModal=_a.openSavePackageTemplateModal,parcelTemplates=_a.parcelTemplates,showZeroState=_a.showZeroState;return(0,emotion_react_jsx_runtime_browser_esm.FD)(ListSection,(0,tslib_es6.Cl)({isExpanded:_this.state.isExpanded,size:_this.props.size},{children:[!_this.props.disableCustomDimensions&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ParcelSelect_SectionTitle,{children:"New package"}),(0,emotion_react_jsx_runtime_browser_esm.FD)(ParcelSelect_List,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(ParcelSelect_ListItem,(0,tslib_es6.Cl)({dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"CustomDimensions-click-selectOption"),dataPendo:"package-select-custom",onClick:_this.handleCustomDimensionsSelected},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ListIcon,{alt:"",src:icon_customdims})," Enter Custom Dimensions"]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(ParcelSelect_ListItem,(0,tslib_es6.Cl)({dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"Carrier-click-selectOption"),onClick:_this.expandList},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ListIcon,{alt:"",src:icon_carrierparcel})," Carrier Provided Parcels"]}))]})]}),omitCustomParcelTemplate?null:(0,emotion_react_jsx_runtime_browser_esm.Y)(ParcelSelect_CustomParcelTemplate,{dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageTemplate-click-selectOption"),onOptionSelection:_this.handleOptionSelection,openSavePackageTemplateModal,parcelTemplates,showZeroState})]}))},_this.setTriggerRef=function(node){return _this.triggerRef=node},_this.triggerRef=null,_this.state={highlightedOptionIndex:0,isDropdownOpen:!1,isExpanded:!1},_this}return(0,tslib_es6.C6)(ParcelSelect,_super),ParcelSelect.prototype.render=function(){var _this=this,isDropdownOpen=this.state.isDropdownOpen,_a=this.props,className=_a.className,customSelectButtonStyle=_a.customSelectButtonStyle,disabled=_a.disabled,initialContentString=_a.initialContentString,isLoadingParcels=_a.isLoadingParcels,isUsingCustomDimensions=_a.isUsingCustomDimensions,selectedParcel=_a.selectedParcel,size=_a.size,tabIndex=_a.tabIndex,loader=(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"flex items-center"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(GreenSpinnerWithMargin,{})})),triggerComponentContent=(0,emotion_react_jsx_runtime_browser_esm.Y)(SelectButtonContent_SelectButtonContent,{hideDimensions:!0,hideIcon:!0,initialContentString,isUsingCustomDimensions,selectedParcel});return(0,emotion_react_jsx_runtime_browser_esm.Y)(ParcelSelect_Container,(0,tslib_es6.Cl)({className,onKeyDown:this.onKeyDown},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Dropdown.A,(0,tslib_es6.Cl)({isOpen:isDropdownOpen,onClickOutside:this.handleClickOutside,ref:this.setTriggerRef,size,triggerComponent:function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomSelectButton,(0,tslib_es6.Cl)({customSelectButtonStyle,disabled:isLoadingParcels||disabled,hasOptionSelected:!!selectedParcel,invalid:_this.props.invalid,onClick:_this.handleSelectButtonClick,responsive:!0,size,tabIndex},{children:isLoadingParcels?loader:triggerComponentContent}))}},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(ParcelSelect_Wrapper,(0,tslib_es6.Cl)({onKeyDown:this.onKeyDown,size,tabIndex:0},{children:[this.renderOptions(),this.renderExpandedOptions()]}))}))}))},ParcelSelect.defaultProps={size:constants_form.YI.medlarge},ParcelSelect}(react.Component);var ParcelSelect_templateObject_1,ParcelSelect_templateObject_2,ParcelSelect_templateObject_3,ParcelSelect_templateObject_4,ParcelSelect_templateObject_5,ParcelSelect_templateObject_6,ParcelSelect_templateObject_7,ParcelSelect_templateObject_8;const components_ParcelSelect=ParcelSelect;var getParcelTemplateStore=function(state){return state.parcelTemplate},parcel_template_selectors_getParcelTemplates=(0,reselect_es.Mz)(getParcelTemplateStore,(function(parcelTemplateStore){return(0,tslib_es6.fX)([],(0,tslib_es6.zs)(parcelTemplateStore.parcelTemplates),!1).sort((function(a,b){var _a,_b,_c,_d,dateComparison=(null!==(_b=null===(_a=b.objectCreated)||void 0===_a?void 0:_a.getTime())&&void 0!==_b?_b:0)-(null!==(_d=null===(_c=a.objectCreated)||void 0===_c?void 0:_c.getTime())&&void 0!==_d?_d:0);if(0!==dateComparison)return dateComparison;var aName=(0,ParcelTemplate.mG)(a),bName=(0,ParcelTemplate.mG)(b);return aName&&bName?aName.localeCompare(bName):0}))})),parcel_template_selectors_getCarrierParcelTemplates=(0,reselect_es.Mz)(getParcelTemplateStore,(function(parcelTemplateStore){return parcelTemplateStore.carrierParcelTemplates})),parcel_template_selectors_isLoadingParcels=(0,reselect_es.Mz)(getParcelTemplateStore,(function(parcelTemplateStore){return parcelTemplateStore.isLoadingCarrierParcelTemplates&&parcelTemplateStore.isLoadingParcelTemplates})),isDeleting=(0,reselect_es.Mz)(getParcelTemplateStore,(function(parcelTemplatesStore){return parcelTemplatesStore.isDeleting})),ParcelSelect_container_mapStateToProps=((0,reselect_es.Mz)(parcel_template_selectors_getParcelTemplates,(function(parcelTemplates){return parcelTemplates.some((function(parcelTemplate){return parcelTemplate.isDefault}))})),(0,reselect_es.Mz)(parcel_template_selectors_getParcelTemplates,(function(parcelTemplates){return parcelTemplates.find((function(parcelTemplate){return parcelTemplate.isDefault}))})),function(state){return{carrierParcelTemplates:parcel_template_selectors_getCarrierParcelTemplates(state),isLoadingParcels:parcel_template_selectors_isLoadingParcels(state),parcelTemplates:parcel_template_selectors_getParcelTemplates(state)}}),mapDispatchToProps=function(dispatch){return{openSavePackageTemplateModal:function(){return dispatch((void 0===parcelTemplate&&(parcelTemplate=null),{parcelTemplate,type:constants.t.SETTINGS_OPEN_SAVE_PACKAGE_TEMPLATE_MODAL}));var parcelTemplate}}};(0,es.Ng)(ParcelSelect_container_mapStateToProps,mapDispatchToProps)(components_ParcelSelect);var ParcelSelectFieldContainer=(0,es.Ng)(ParcelSelect_container_mapStateToProps,mapDispatchToProps)((function(props){var input=props.input,meta=props.meta,parcelSelectProps=(0,tslib_es6.Tt)(props,["input","meta"]),errors=meta.touched&&meta.error?(0,emotion_react_jsx_runtime_browser_esm.Y)(FormErrorWithMarginTop,{children:meta.error}):null;return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ParcelSelect,(0,tslib_es6.Cl)({invalid:!!errors,onChange:input.onChange,selectedParcel:input.value},parcelSelectProps)),errors]})}));var allowKeyboardNumberInput=function(event){["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter","Home","End",".","0","1","2","3","4","5","6","7","8","9"].includes(event.key)||event.ctrlKey||event.metaKey||event.preventDefault()},Stack=__webpack_require__("./node_modules/@goshippo/components/esm/Stack/Stack.js"),Button=__webpack_require__("./node_modules/@goshippo/components/esm/Button/Button.js"),Alert=__webpack_require__("./node_modules/@goshippo/components/esm/Alert/Alert.js"),Link_Link=__webpack_require__("./node_modules/@goshippo/components/esm/Link/Link.js"),ShipmentInsuranceModal=__webpack_require__("./app/pages/Orders/All/OrderDetailsPage/Tabs/ShipmentExtrasCard/Insurance/ShipmentInsuranceModal.tsx"),helpers=__webpack_require__("./app/pages/Orders/All/OrderDetailsPage/Tabs/ShipmentExtrasCard/Insurance/helpers.ts"),util=__webpack_require__("./app/pages/Orders/All/OrderDetailsPage/Tabs/ShipmentExtrasCard/util.ts"),hooks_useRequest=__webpack_require__("./app/hooks/useRequest.ts"),services_api=__webpack_require__("./app/services/api.ts"),insurance_service_put=function(data){return services_api.YZ.request({data,method:"PUT",url:"/setting/insurance"})},featureflags=__webpack_require__("./app/utils/featureflags/index.ts"),newRelic_newRelic=__webpack_require__("./app/utils/newRelic/newRelic.ts"),AlertAction=function(_a){var setDismissed=_a.setDismissed,setShowModal=_a.setShowModal,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({color:"secondary",onClick:function(){(0,utils.nk)(TrackingHelper.U.getTrackingReference(types.Gf.name,"order_details",{}),types.Gf.operations.PROTECT_SHIPMENT_ORDER_DETAIL,{}),setShowModal(!0)},size:"small",variant:"outlined"},{children:t("orders:insurance:upsell:protectPackage")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({onClick:function(){return setDismissed(!0)},size:"small",variant:"text"},{children:t("orders:insurance:upsell:dismiss")}))]})},InsuranceLargePackagesUpSell=function(_a){var customDimensions=_a.customDimensions,hasInsurance=_a.hasInsurance,setShowModal=_a.setShowModal,t=_a.t,_b=(0,tslib_es6.zs)((0,react.useState)(!1),2),dismissed=_b[0],setDismissed=_b[1],insuranceLargePackagesUpsell=(0,featureflags.u)(featureflags.gH.INSURANCE_LARGE_PACKAGES_UPSELL),_c=function(){var _a=(0,hooks_useRequest.A)(),insuranceSettings=_a.data,error=_a.error,isLoading=_a.loading,request=_a.request,getInsuranceSettings=(0,react.useCallback)((function(){request((function(){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var response;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,services_api.YZ.request({method:"GET",url:"/setting/insurance"})];case 1:return response=_a.sent(),[2,(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},response.data),{minimum_amount:Number(response.data.minimum_amount).toFixed(2)})]}}))}))}))}),[request]),updateInsuranceSettings=(0,react.useCallback)((function(insuranceSettings){return request((function(){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var payload,response,data;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return payload=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},insuranceSettings),{minimum_amount:parseFloat(insuranceSettings.minimum_amount)}),[4,insurance_service_put(payload)];case 1:return response=_a.sent(),data=response.data,[2,(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},data),{minimum_amount:Number(data.minimum_amount).toFixed(2)})]}}))}))}))}),[request]);return{error,getInsuranceSettings,insuranceSettings,isLoading,updateInsuranceSettings}}(),getInsuranceSettings=_c.getInsuranceSettings,insuranceSettings=_c.insuranceSettings;return(0,react.useEffect)((function(){getInsuranceSettings()}),[getInsuranceSettings]),(0,helpers.Tb)(customDimensions,dismissed,hasInsurance,"variant"===(null==insuranceLargePackagesUpsell?void 0:insuranceLargePackagesUpsell.variation),null==insuranceSettings?void 0:insuranceSettings.is_auto_apply)?(0,emotion_react_jsx_runtime_browser_esm.Y)(Alert.A,(0,tslib_es6.Cl)({action:(0,emotion_react_jsx_runtime_browser_esm.Y)(AlertAction,{setDismissed,setShowModal,t}),severity:"info",sx:{marginTop:shippoTheme.A.spacing(2)},variant:"inline"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack.A,(0,tslib_es6.Cl)({alignItems:"flex-start",direction:"row",justifyContent:"flex-start",spacing:2},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",fontSize:"12px",fontWeight:500},{children:t("orders:insurance:upsell:recommendation")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",fontSize:"12px",marginTop:"10px"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(utils_translate.x6,{components:[(0,emotion_react_jsx_runtime_browser_esm.Y)("br",{},1),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link_Link.A,(0,tslib_es6.Cl)({color:"secondary",href:helpers.r,target:"_blank"},{children:"0"}),0)],i18nKey:"orders:insurance:upsell:longDisclaimer"})}))]})}))})):null},InsuranceModal=function(_a){var batchEntry=_a.batchEntry,order=_a.order,setShowModal=_a.setShowModal,showModal=_a.showModal,t=_a.t,updateInsurance=_a.updateInsurance;return showModal?(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceModal.A,{batchEntry,onClose:function(){setShowModal(!1)},onSubmit:function(newInsuranceValues){var _a;if(order){var orderSelection=((_a={})[order.objectId]=batchEntry?[batchEntry.id]:[],_a);updateInsurance(orderSelection,(0,util.E)(newInsuranceValues)),setShowModal(!1)}else newRelic_newRelic.S.noticeError("Failed to submit insurance (order is null)",{batchEntry:null==batchEntry?void 0:batchEntry.id})},order,t}):null};const PackageTemplateChooser_InsuranceUpsellComponent=function(_a){var batchEntry=_a.batchEntry,customDimensions=_a.customDimensions,hasInsurance=_a.hasInsurance,order=_a.order,t=_a.t,updateInsurance=_a.updateInsurance,_b=(0,tslib_es6.zs)((0,react.useState)(!1),2),showModal=_b[0],setShowModal=_b[1];return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(InsuranceLargePackagesUpSell,{customDimensions,hasInsurance,setShowModal,t}),(0,emotion_react_jsx_runtime_browser_esm.Y)(InsuranceModal,{batchEntry,order,setShowModal,showModal,t,updateInsurance})]})};var PackageTemplateRadioGroup_styled_templateObject_1,FormGroup=(0,emotion_styled_browser_esm.A)("div")(PackageTemplateRadioGroup_styled_templateObject_1||(PackageTemplateRadioGroup_styled_templateObject_1=(0,tslib_es6.ue)(["\n  margin: 1.5rem 0;\n  i {\n    margin: 0.25rem 0 0 0.5rem;\n    cursor: pointer;\n  }\n"],["\n  margin: 1.5rem 0;\n  i {\n    margin: 0.25rem 0 0 0.5rem;\n    cursor: pointer;\n  }\n"]))),ComposedPackageTemplateRadioGroup=(0,utils_translate.Tl)("orders")((function(_a){var dimensionType=_a.dimensionType,input=_a.input,onChangeCallback=_a.onChangeCallback,t=_a.t,selectedProps=(0,tslib_es6.Tt)(_a,["dimensionType","input","onChangeCallback","t"]),updatePackageRadio=react.useCallback((function(val){onChangeCallback(val)}),[]),PackageTooltip=(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({inverted:!0,on:"hover",position:"top center",size:"mini",trigger:(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{className:"fa fa-question-circle"})},{children:t("orders:packageDimensionTypes:polymailerTooltipText")}));return(0,emotion_react_jsx_runtime_browser_esm.Y)(FormGroup,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Radio,(0,tslib_es6.Cl)({name:"packageDimensionType",onChange:updatePackageRadio,toolTipContent:PackageTooltip,value:dimensionType||input.value,vertical:!0},selectedProps))})}));const PackageTemplateChooser_PackageTemplateRadioGroup=ComposedPackageTemplateRadioGroup;var InlineFieldContainer=(0,emotion_styled_browser_esm.A)("div")(PackageTemplateChooser_templateObject_1||(PackageTemplateChooser_templateObject_1=(0,tslib_es6.ue)(["\n  margin-left: 10px;\n  display: flex;\n  align-items: center;\n"],["\n  margin-left: 10px;\n  display: flex;\n  align-items: center;\n"]))),MaxContentLabel=(0,emotion_styled_browser_esm.A)("div")(PackageTemplateChooser_templateObject_2||(PackageTemplateChooser_templateObject_2=(0,tslib_es6.ue)(["\n  width: max-content;\n"],["\n  width: max-content;\n"]))),FieldsWrapper=(0,emotion_styled_browser_esm.A)("div")(PackageTemplateChooser_templateObject_3||(PackageTemplateChooser_templateObject_3=(0,tslib_es6.ue)(["\n  display: flex;\n  margin: 8px 0 8px 0;\n  align-items: flex-start;\n  @media screen and (min-width: ","px) {\n    flex-wrap: wrap;\n  }\n"],["\n  display: flex;\n  margin: 8px 0 8px 0;\n  align-items: flex-start;\n  @media screen and (min-width: ","px) {\n    flex-wrap: wrap;\n  }\n"])),responsive.P.Mobile),XContainer=(0,emotion_styled_browser_esm.A)("div")(PackageTemplateChooser_templateObject_4||(PackageTemplateChooser_templateObject_4=(0,tslib_es6.ue)(["\n  line-height: ",";\n  width: 8px;\n  margin: 0 10px;\n"],["\n  line-height: ",";\n  width: 8px;\n  margin: 0 10px;\n"])),styles_constants.vi.inputHeight),FieldLabel=(0,emotion_styled_browser_esm.A)("div")(PackageTemplateChooser_templateObject_5||(PackageTemplateChooser_templateObject_5=(0,tslib_es6.ue)(["\n  color: ",";\n  font-weight: normal;\n  margin: 15px 0 0 0;\n"],["\n  color: ",";\n  font-weight: normal;\n  margin: 15px 0 0 0;\n"])),styles_constants.Tj.gray700),Subtext=(0,emotion_styled_browser_esm.A)("div")(PackageTemplateChooser_templateObject_6||(PackageTemplateChooser_templateObject_6=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n  color: ",";\n  font-size: 0.75rem;\n  line-height: 1.25rem;\n"],["\n  display: flex;\n  align-items: center;\n  color: ",";\n  font-size: 0.75rem;\n  line-height: 1.25rem;\n"])),styles_constants.Tj.gray400),InputExtendedReduxFormField=Field.A,PackageTemplateChooser=function(_super){function PackageTemplateChooser(props){var _this=_super.call(this,props)||this;return _this.weightInput=react.createRef(),_this.getHeightValueByDistanceUnit=function(){var _a,_b,_c,_d;return"polymailer"===(null===(_b=null===(_a=_this.state)||void 0===_a?void 0:_a.packageDimensionType)||void 0===_b?void 0:_b.value)?"mm"===(null===(_c=_this.props)||void 0===_c?void 0:_c.getCurrentDistanceUnit.value)?6.35:"cm"===(null===(_d=_this.props)||void 0===_d?void 0:_d.getCurrentDistanceUnit.value)?.635:.25:0},_this.handleCustomDimensionsSelected=function(){return _this.props.onCustomDimensionsSelected(!0)},_this.onParcelTemplateSelected=function(value){var _a;if(!value)return _this.setState({shouldShowRadioGroup:!0}),_this.props.removeSelectedParcelTemplate(),_this.props.onCarrierTemplateWithCustomDimensionsSelected(!1),_this.props.onCustomDimensionsSelected(!0);(value.name||value.carrierTemplate&&value.carrierTemplate.name)&&(_this.setState({shouldShowRadioGroup:!1}),value.isVariableDimensions?(_this.props.onCarrierTemplateWithCustomDimensionsSelected(!0),_this.props.onCustomDimensionsSelected(!1)):(null===(_a=_this.weightInput.current)||void 0===_a||_a.focus(),_this.props.onCarrierTemplateWithCustomDimensionsSelected(!1),_this.props.onCustomDimensionsSelected(!1)),value.weight&&value.weightUnit&&(_this.props.changePackageWeight(value.weight.toString()),_this.props.changePackageWeightUnit(options.Ay.commonWeightOptions[value.weightUnit]),_this.props.changeUseImportedWeight(!1)))},_this.onUseImportedWeightChange=function(){var _a;isNaN(Number(_this.props.importedWeight))?_this.props.changePackageWeight(""):_this.props.changePackageWeight((null===(_a=_this.props.importedWeight)||void 0===_a?void 0:_a.toString())||""),_this.props.importedWeightOption&&_this.props.changePackageWeightUnit(_this.props.importedWeightOption)},_this.packageTemplateRadioChange=function(option){_this.setState({packageDimensionType:option},(function(){var setHeightValue=_this.getHeightValueByDistanceUnit();_this.props.changePackageHeight(setHeightValue)})),_this.props.changePackageDimenstionType(option)},_this.packageTypesOptions=[{label:_this.props.t("orders:packageDimensionTypes:boxRadioLabel"),value:"box"},{addToolTip:!0,label:_this.props.t("orders:packageDimensionTypes:boxPolymailerLabel"),value:"polymailer"}],_this.state={packageDimensionType:null,shouldShowRadioGroup:!0},_this}return(0,tslib_es6.C6)(PackageTemplateChooser,_super),PackageTemplateChooser.prototype.componentDidMount=function(){var _a=this.props,editingCustomTemplate=_a.editingCustomTemplate,onCarrierTemplateWithCustomDimensionsSelected=_a.onCarrierTemplateWithCustomDimensionsSelected,onCustomDimensionsSelected=_a.onCustomDimensionsSelected,selectedParcelTemplate=_a.selectedParcelTemplate;this.props.fetchCarrierParcelTemplates();var selectedPolymailerHeightInches=!(!(null==selectedParcelTemplate?void 0:selectedParcelTemplate.distanceUnit)||"in"!==(null==selectedParcelTemplate?void 0:selectedParcelTemplate.distanceUnit)||!(null==selectedParcelTemplate?void 0:selectedParcelTemplate.height)||.25!==selectedParcelTemplate.height),selectedPolymailerHeightCm=!(!(null==selectedParcelTemplate?void 0:selectedParcelTemplate.distanceUnit)||"cm"!==(null==selectedParcelTemplate?void 0:selectedParcelTemplate.distanceUnit)||!(null==selectedParcelTemplate?void 0:selectedParcelTemplate.height)||.635!==selectedParcelTemplate.height),selectedPolymailerHeightMm=!(!(null==selectedParcelTemplate?void 0:selectedParcelTemplate.distanceUnit)||"mm"!==(null==selectedParcelTemplate?void 0:selectedParcelTemplate.distanceUnit)||!(null==selectedParcelTemplate?void 0:selectedParcelTemplate.height)||6.35!==selectedParcelTemplate.height);(selectedPolymailerHeightInches||selectedPolymailerHeightCm||selectedPolymailerHeightMm)&&this.setState({packageDimensionType:this.packageTypesOptions[1]}),editingCustomTemplate?!selectedParcelTemplate||selectedParcelTemplate&&(0,ParcelTemplate.MS)(selectedParcelTemplate)&&null===selectedParcelTemplate.carrierTemplate?(onCustomDimensionsSelected(!0),this.setState({shouldShowRadioGroup:!0})):selectedParcelTemplate&&(0,ParcelTemplate.MS)(selectedParcelTemplate)&&selectedParcelTemplate.carrierTemplate&&selectedParcelTemplate.carrierTemplate.isVariableDimensions&&onCarrierTemplateWithCustomDimensionsSelected(!0):(this.props.fetchParcelTemplates(),selectedParcelTemplate||onCustomDimensionsSelected(!0)),this.props.isWeightRequired&&this.props.changeIsWeightRequired(this.props.isWeightRequired),selectedParcelTemplate&&(0,ParcelTemplate.MS)(selectedParcelTemplate)&&null!==selectedParcelTemplate.carrierTemplate&&this.setState({shouldShowRadioGroup:!1})},PackageTemplateChooser.prototype.componentDidUpdate=function(prevProps){var _a,_b,getCurrentDistanceUnit=this.props.getCurrentDistanceUnit;if(prevProps.getCurrentDistanceUnit!==getCurrentDistanceUnit&&"polymailer"===(null===(_b=null===(_a=this.state)||void 0===_a?void 0:_a.packageDimensionType)||void 0===_b?void 0:_b.value)){var setHeightValue=this.getHeightValueByDistanceUnit();this.props.changePackageHeight(setHeightValue)}},PackageTemplateChooser.prototype.getDimensions=function(){return null!==this.props.selectedParcelTemplate?this.toDimensions(this.props.selectedParcelTemplate):this.props.customDimensions},PackageTemplateChooser.prototype.getProvidedParcelTemplate=function(selectedParcelTemplate){return(0,ParcelTemplate.MS)(selectedParcelTemplate)&&selectedParcelTemplate.carrierTemplate?selectedParcelTemplate.carrierTemplate.isVariableDimensions?selectedParcelTemplate:selectedParcelTemplate.carrierTemplate:selectedParcelTemplate},PackageTemplateChooser.prototype.render=function(){var _a,_b;return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{appLocation:this.props.appLocation,component:ParcelSelectFieldContainer,dataAnalyticsContext:this.props.dataAnalyticsContext&&"".concat(this.props.dataAnalyticsContext,"PackageInfo"),dataPendo:"package-select",disabled:this.props.disableDropdown,isUsingCustomDimensions:this.props.isUsingCustomDimensions,name:"parcelTemplate",omitCustomParcelTemplate:this.props.editingCustomTemplate,onChange:this.onParcelTemplateSelected,onCustomDimensionsSelected:this.handleCustomDimensionsSelected,showZeroState:this.props.showZeroState,tabIndex:this.props.startingTabIndex}),this.state.shouldShowRadioGroup&&this.props.shouldShowPolymailer&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:PackageTemplateChooser_PackageTemplateRadioGroup,dimensionType:this.state.packageDimensionType?this.state.packageDimensionType:this.packageTypesOptions[0],name:"packageDimensionType",onChangeCallback:this.packageTemplateRadioChange,options:this.packageTypesOptions}),this.renderDimensions(),(0,emotion_react_jsx_runtime_browser_esm.Y)(PackageTemplateChooser_InsuranceUpsellComponent,{batchEntry:this.props.batchEntry,customDimensions:this.getDimensions(),hasInsurance:!!(null===(_b=null===(_a=this.props.batchEntry)||void 0===_a?void 0:_a.extras)||void 0===_b?void 0:_b.insurance),order:this.props.order,t:this.props.t,updateInsurance:this.props.updateInsurance}),this.renderWeight()]})})},PackageTemplateChooser.prototype.renderDimensions=function(){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k=this.props,carrierTemplatewithCustomDimensions=_k.carrierTemplatewithCustomDimensions,dataAnalyticsContext=_k.dataAnalyticsContext,isUsingCustomDimensions=_k.isUsingCustomDimensions,selectedParcelTemplate=_k.selectedParcelTemplate,startingTabIndex=_k.startingTabIndex,t=_k.t,dimensions=null;if(isUsingCustomDimensions||carrierTemplatewithCustomDimensions){var _l=this.props,formMetaData=_l.formMetaData,formSyncErrors=_l.formSyncErrors,customDimensions=formMetaData.customDimensions,lengthTouched=null===(_a=null==customDimensions?void 0:customDimensions.length)||void 0===_a?void 0:_a.touched,widthTouched=null===(_b=null==customDimensions?void 0:customDimensions.width)||void 0===_b?void 0:_b.touched,heightTouched=null===(_c=null==customDimensions?void 0:customDimensions.height)||void 0===_c?void 0:_c.touched,unitTouched=null===(_d=null==customDimensions?void 0:customDimensions.distanceUnit)||void 0===_d?void 0:_d.touched,errors=null;if(lengthTouched&&(null===(_e=formSyncErrors.customDimensions)||void 0===_e?void 0:_e.length)){var errorMessage=formSyncErrors.customDimensions.length;errors=(0,emotion_react_jsx_runtime_browser_esm.Y)(FormError_FormError.A,{children:errorMessage})}else if(widthTouched&&(null===(_f=formSyncErrors.customDimensions)||void 0===_f?void 0:_f.width)){errorMessage=formSyncErrors.customDimensions.width;errors=(0,emotion_react_jsx_runtime_browser_esm.Y)(FormError_FormError.A,{children:errorMessage})}else if(heightTouched&&(null===(_g=formSyncErrors.customDimensions)||void 0===_g?void 0:_g.height)){errorMessage=formSyncErrors.customDimensions.height;errors=(0,emotion_react_jsx_runtime_browser_esm.Y)(FormError_FormError.A,{children:errorMessage})}else if(unitTouched&&(null===(_h=formSyncErrors.customDimensions)||void 0===_h?void 0:_h.distanceUnit)){errorMessage=formSyncErrors.customDimensions.distanceUnit;errors=(0,emotion_react_jsx_runtime_browser_esm.Y)(FormError_FormError.A,{children:errorMessage})}var renderPrefixWithText=function(text){return function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(Prefix,{children:text})}};dimensions=carrierTemplatewithCustomDimensions?(0,emotion_react_jsx_runtime_browser_esm.FD)(FormSection.A,(0,tslib_es6.Cl)({name:"customDimensions"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(FieldLabel,{children:t("orders:calculateRates:tabs:shipmentInfo:dimensions")}),(0,emotion_react_jsx_runtime_browser_esm.FD)(FieldsWrapper,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(InputExtendedReduxFormField,{component:InputExtendedField,dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfoCustomDimensions-click-lengthInput"),inputMode:"decimal",isResponsive:!0,isRightAligned:!0,name:"length",renderPrefix:renderPrefixWithText("L"),tabIndex:startingTabIndex}),(0,emotion_react_jsx_runtime_browser_esm.Y)(XContainer,{children:"X"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:InputExtendedField,dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfoCustomDimensions-click-widthInput"),dataE2E:"parcel-form-customdims-width",hideErrors:!0,inputMode:"decimal",isResponsive:!0,isRightAligned:!0,name:"width",renderPrefix:renderPrefixWithText("W"),size:constants_form.YI.xs,tabIndex:startingTabIndex}),(0,emotion_react_jsx_runtime_browser_esm.Y)(InlineFieldContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfoCustomDimensions-click-lengthUnitsSelect"),height:constants_form.hx.medium,hideErrors:!0,name:"distanceUnit",optionDataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfoCustomDimensions-click-lengthUnitOption"),options:options.Ay.distanceOptions,placeholder:"Unit",size:constants_form.YI.xs,tabIndex:startingTabIndex})})]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Subtext,{children:t("orders:calculateRates:tabs:shipmentInfo:customDimensionsSubtext")}),errors]})):(0,emotion_react_jsx_runtime_browser_esm.FD)(FormSection.A,(0,tslib_es6.Cl)({name:"customDimensions"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(FieldLabel,{children:t("orders:calculateRates:tabs:shipmentInfo:dimensions")}),(0,emotion_react_jsx_runtime_browser_esm.FD)(FieldsWrapper,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{autofocus:!0,component:InputExtendedField,dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfoCustomDimensions-click-lengthInput"),dataE2E:"parcel-form-customdims-length",hideErrors:!0,inputMode:"decimal",isResponsive:!0,isRightAligned:!0,name:"length",onKeyDown:allowKeyboardNumberInput,renderPrefix:renderPrefixWithText("L"),size:constants_form.YI.xs,tabIndex:startingTabIndex}),(0,emotion_react_jsx_runtime_browser_esm.Y)(XContainer,{children:"X"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:InputExtendedField,dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfoCustomDimensions-click-widthInput"),dataE2E:"parcel-form-customdims-width",hideErrors:!0,inputMode:"decimal",isResponsive:!0,isRightAligned:!0,name:"width",onKeyDown:allowKeyboardNumberInput,renderPrefix:renderPrefixWithText("W"),size:constants_form.YI.xs,tabIndex:startingTabIndex}),("polymailer"!==(null===(_j=this.state.packageDimensionType)||void 0===_j?void 0:_j.value)||!this.props.shouldShowPolymailer)&&(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(XContainer,{children:"X"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:InputExtendedField,dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfoCustomDimensions-click-heightInput"),dataE2E:"parcel-form-customdims-height",hideErrors:!0,inputMode:"decimal",isResponsive:!0,isRightAligned:!0,name:"height",onKeyDown:allowKeyboardNumberInput,renderPrefix:renderPrefixWithText("H"),size:constants_form.YI.xs,tabIndex:startingTabIndex})]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(InlineFieldContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfoCustomDimensions-click-lengthUnitsSelect"),height:constants_form.hx.medium,hideErrors:!0,name:"distanceUnit",optionDataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfoCustomDimensions-click-lengthUnitOption"),options:options.Ay.distanceOptions,placeholder:"Unit",size:constants_form.YI.xs,tabIndex:startingTabIndex})})]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Subtext,{children:t("orders:calculateRates:tabs:shipmentInfo:customDimensionsSubtext")}),errors]}))}else if(selectedParcelTemplate){var dimensionsProvider=this.getProvidedParcelTemplate(selectedParcelTemplate);dimensions=(0,emotion_react_jsx_runtime_browser_esm.FD)(Subtext,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"mr-1"},{children:t("orders:calculateRates:tabs:shipmentInfo:dimensionsSubtext")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(FieldsWrapper,{children:(0,ParcelTemplate.$)(dimensionsProvider)})]})}return dimensions},PackageTemplateChooser.prototype.renderWeight=function(){var _a,_b=this.props,dataAnalyticsContext=_b.dataAnalyticsContext,formMetaData=_b.formMetaData,formSyncErrors=_b.formSyncErrors,importedWeight=_b.importedWeight,isWeightRequired=_b.isWeightRequired,someOrderHasImportedWeight=_b.someOrderHasImportedWeight,startingTabIndex=_b.startingTabIndex,t=_b.t,useImportedOrderWeight=_b.useImportedOrderWeight,label="".concat(t("orders:calculateRates:tabs:shipmentInfo:packageWeightLabel")).concat(isWeightRequired?"":" (".concat(t("orders:calculateRates:tabs:shipmentInfo:optionalLabel"),")")),errorMessage=formSyncErrors.weight||formSyncErrors.weightUnit,errors=(null===(_a=null==formMetaData?void 0:formMetaData.weight)||void 0===_a?void 0:_a.touched)&&errorMessage?(0,emotion_react_jsx_runtime_browser_esm.Y)(FormError_FormError.A,{children:errorMessage}):null,importedWeightIsNaN=isNaN(Number(importedWeight));return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(FieldLabel,{children:label}),(0,emotion_react_jsx_runtime_browser_esm.FD)(FieldsWrapper,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{autofocus:!0,component:InputExtendedField,dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfo-click-weightInput"),dataE2E:"parcel-form-weight",dataPendo:"package-weight",disabled:useImportedOrderWeight,hideErrors:!0,inputMode:"decimal",inputRef:this.weightInput,isResponsive:!0,isRightAligned:!0,name:"weight",onKeyDown:allowKeyboardNumberInput,placeholder:importedWeightIsNaN&&importedWeight||"Weight",size:constants_form.YI.xs,tabIndex:startingTabIndex}),(0,emotion_react_jsx_runtime_browser_esm.Y)(InlineFieldContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfo-click-weightUnitSelect"),dataPendo:"package-weight-unit",disabled:useImportedOrderWeight,height:constants_form.hx.medium,hideErrors:!0,name:"weightUnit",optionDataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfo-click-weightUnitOption"),options:options.Ay.weightOptions,placeholder:"Unit",size:constants_form.YI.xs,tabIndex:startingTabIndex})}),someOrderHasImportedWeight&&(0,emotion_react_jsx_runtime_browser_esm.Y)(InlineFieldContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Checkbox.Yh,dataAnalytics:dataAnalyticsContext&&"".concat(dataAnalyticsContext,"PackageInfo-click-importedWeightCheckbox"),dataPendo:"package-use-imported-weight",label:(0,emotion_react_jsx_runtime_browser_esm.Y)(MaxContentLabel,{children:t("orders:calculateRates:tabs:shipmentInfo:useImportedWeight")}),labelPosition:"right",name:"useImportedOrderWeight",onChange:this.onUseImportedWeightChange,size:constants_form.YI.xs,tabIndex:startingTabIndex})})]}),errors,(0,emotion_react_jsx_runtime_browser_esm.Y)(Subtext,{children:t("orders:calculateRates:tabs:shipmentInfo:includesPackaging")})]})},PackageTemplateChooser.prototype.toDimensions=function(selectedParcelTemplate){var parcelTemplate=this.getProvidedParcelTemplate(selectedParcelTemplate);return parcelTemplate?{distanceUnit:{label:"distanceUnit",value:parcelTemplate.distanceUnit},height:parcelTemplate.height.toString(),length:parcelTemplate.length.toString(),width:parcelTemplate.width.toString()}:null},PackageTemplateChooser}(react.Component);const PackageTemplateChooser_PackageTemplateChooser=(0,redux.Zz)((0,es.Ng)((function(state,ownProps){var _a,_b,_c,_d,_e,formValues=(0,getFormValues.A)(ownProps.formName)(state),orderObjectId=null===(_a=ownProps.batchEntry)||void 0===_a?void 0:_a.orderObjectId;return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},(0,user_selectors.Og)(state)),{carrierTemplatewithCustomDimensions:(null===(_b=null==formValues?void 0:formValues.extras)||void 0===_b?void 0:_b.carrierTemplateWithCustomDimensions)||!1,customDimensions:(null==formValues?void 0:formValues.customDimensions)||null,formMetaData:(0,getFormMeta.A)(ownProps.formName)(state),formSyncErrors:(0,getFormSyncErrors.A)(ownProps.formName)(state),getCurrentDistanceUnit:(null===(_c=null==formValues?void 0:formValues.customDimensions)||void 0===_c?void 0:_c.distanceUnit)||null,isUsingCustomDimensions:(null===(_d=null==formValues?void 0:formValues.extras)||void 0===_d?void 0:_d.isUsingCustomDimensions)||!1,order:null===(_e=state.orders)||void 0===_e?void 0:_e.data[null!=orderObjectId?orderObjectId:""],selectedParcelTemplate:(null==formValues?void 0:formValues.parcelTemplate)||null,useImportedOrderWeight:(null==formValues?void 0:formValues.useImportedOrderWeight)||!1})}),(function(dispatch,ownProps){return{changeIsWeightRequired:function(isWeightRequired){return dispatch((0,redux_form_es.Zg)(ownProps.formName,"extras.isWeightRequired",isWeightRequired))},changePackageDimenstionType:function(packageDimensionType){return dispatch((0,redux_form_es.Zg)(ownProps.formName,"packageDimensionType",packageDimensionType))},changePackageForm:function(formValues){dispatch((0,redux_form_es.n_)(ownProps.formName,formValues))},changePackageHeight:function(heightValue){return dispatch((0,redux_form_es.Zg)(ownProps.formName,"customDimensions.height",heightValue))},changePackageTemplateIsSetDefault:function(isDefault){return dispatch((0,redux_form_es.Zg)(ownProps.formName,"isDefault",isDefault))},changePackageWeight:function(packageWeight){return dispatch((0,redux_form_es.Zg)(ownProps.formName,"weight",packageWeight))},changePackageWeightUnit:function(packageWeightUnitOption){return dispatch((0,redux_form_es.Zg)(ownProps.formName,"weightUnit",packageWeightUnitOption))},changeParcelTemplateName:function(parcelTemplateName){return dispatch((0,redux_form_es.Zg)(ownProps.formName,"parcelTemplateName",parcelTemplateName))},changeUseImportedWeight:function(useImportedWeight){return dispatch((0,redux_form_es.Zg)(ownProps.formName,"useImportedOrderWeight",useImportedWeight))},fetchCarrierParcelTemplates:function(){return dispatch({type:constants.t.CARRIER_PARCEL_TEMPLATE_FETCH})},fetchParcelTemplates:function(){return dispatch(parcel_template_actions_fetchParcelTemplates())},onCarrierTemplateWithCustomDimensionsSelected:function(selected){return dispatch((0,redux_form_es.Zg)(ownProps.formName,"extras.carrierTemplateWithCustomDimensions",selected))},onCustomDimensionsSelected:function(selected){return dispatch((0,redux_form_es.Zg)(ownProps.formName,"extras.isUsingCustomDimensions",selected))},removeSelectedParcelTemplate:function(){return dispatch((0,redux_form_es.Zg)(ownProps.formName,"parcelTemplate",null))},updateInsurance:function(orderSelection,payload){return dispatch((0,orders_actions.lt)(orderSelection,payload))}}})),(0,utils_translate.Tl)("orders"))(PackageTemplateChooser);var PackageTemplateChooser_templateObject_1,PackageTemplateChooser_templateObject_2,PackageTemplateChooser_templateObject_3,PackageTemplateChooser_templateObject_4,PackageTemplateChooser_templateObject_5,PackageTemplateChooser_templateObject_6,distance=__webpack_require__("./app/constants/distance.ts"),weight=__webpack_require__("./app/constants/weight.ts"),getInitialFormValues=function(templateData,userConfigDefaults,batchEntry,initialExtrasValues,useImportedWeight,initialWeight){var _a,_b;void 0===useImportedWeight&&(useImportedWeight=!1),void 0===initialWeight&&(initialWeight="");var fallbackMassUnit=userConfigDefaults.defaultMassUnit||weight.VV.LB,fallbackDistanceUnit=userConfigDefaults.defaultDistanceUnit||distance.k.IN,inBatchMode=!batchEntry,packageWeight=null===(_a=null==batchEntry?void 0:batchEntry.parcel)||void 0===_a?void 0:_a.weight,packageWeightUnit=(null===(_b=null==batchEntry?void 0:batchEntry.parcel)||void 0===_b?void 0:_b.weightUnit)||weight.VV.LB,extrasInitialFormValues={alcohol:(null==initialExtrasValues?void 0:initialExtrasValues.alcohol)||{containsAlcohol:!1,recipientType:recipientTypeOptions[0]},dryIce:(null==initialExtrasValues?void 0:initialExtrasValues.dryIce)||{containsDryIce:!1,inBatchMode,packageWeight:inBatchMode?void 0:packageWeight,packageWeightUnit,weight:"",weightUnitId:weight.FU[userConfigDefaults.defaultMassUnit||weight.VV.LB]},hazmat:{containsBiologicalMaterial:!!(null==initialExtrasValues?void 0:initialExtrasValues.hazmat.containsBiologicalMaterial),containsHazmat:!!(null==initialExtrasValues?void 0:initialExtrasValues.hazmat.containsHazmat),containsLithiumBatteries:!!(null==initialExtrasValues?void 0:initialExtrasValues.hazmat.containsLithiumBatteries)},isReturnRequested:(null==initialExtrasValues?void 0:initialExtrasValues.isReturnRequested)||!1};return templateData?(0,tslib_es6.Cl)({customDimensions:{distanceUnit:options.Ay.commonDistanceOptions[templateData.distanceUnit||fallbackDistanceUnit],height:templateData.height.toString(),length:templateData.length.toString(),width:templateData.width.toString()},extras:{carrierTemplateWithCustomDimensions:!(!templateData.carrierTemplate||!templateData.carrierTemplate.isVariableDimensions||templateData.objectId),isUsingCustomDimensions:!(templateData.objectId||templateData.carrierTemplate)},parcelTemplate:templateData.objectId?templateData:templateData.carrierTemplate,useImportedOrderWeight:useImportedWeight,weight:templateData.weight?templateData.weight.toString():"",weightUnit:options.Ay.commonWeightOptions[templateData.weightUnit||fallbackMassUnit]},extrasInitialFormValues):(0,tslib_es6.Cl)({customDimensions:{distanceUnit:options.Ay.commonDistanceOptions[fallbackDistanceUnit],height:"",length:"",width:""},extras:{carrierTemplateWithCustomDimensions:!1,isUsingCustomDimensions:!0},packageDimensionType:null,parcelTemplate:null,useImportedOrderWeight:useImportedWeight,weight:isNaN(Number(initialWeight))?"":initialWeight,weightUnit:options.Ay.commonWeightOptions[fallbackMassUnit]},extrasInitialFormValues)},validations=__webpack_require__("./app/utils/validations.ts"),validateExtras=function(values){var errors={dryIce:null};return values.dryIce?(errors.dryIce=function(values){var t,path,dryIceErrTranslations={GreaterThanPackageWeightErr:(t=dist_es.t)("".concat(path="orders:additionalServices:errs:dryIce",":dryIceGtPackageWeight")),PackageInfoMissingErr:t("".concat(path,":missingPackageInfo")),WeightErr:t("".concat(path,":weightGtZero"))},dryIceForm=values.dryIce,packageWeight=values.weight||dryIceForm.packageWeight;if(dryIceForm.containsDryIce){if(!dryIceForm.weight||!(0,validations.aM)(dryIceForm.weight)||!(0,validations.EA)(dryIceForm.weight)||parseFloat(dryIceForm.weight)<=0)return{weight:dryIceErrTranslations.WeightErr};if(dryIceForm.inBatchMode)return null;if(!packageWeight)return{weight:dryIceErrTranslations.PackageInfoMissingErr};if(Number.parseFloat(dryIceForm.weight)>Number.parseFloat(packageWeight))return{weight:dryIceErrTranslations.GreaterThanPackageWeightErr}}return null}(values),errors):errors};const PackageTemplateChooser_validate=function(values){var errors={customDimensions:{height:null,length:null,width:null},parcelTemplate:null,weight:null,weightUnit:null};if(values.parcelTemplate||!values.extras||values.extras.isUsingCustomDimensions||(errors.parcelTemplate="Please select a parcel template or enter custom dimensions."),values.extras&&values.extras.isWeightRequired&&!values.weight&&!values.useImportedOrderWeight&&(errors.weight="Please enter the package weight"),values.weight&&!(0,validations.M3)(values.weight,4)&&(errors.weight="Weight must not be more than 4 decimal places (ex. 0.0001)"),!values.weight||(0,validations.aM)(values.weight)&&(0,validations.EA)(values.weight)||(errors.weight="Weight must be greater than 0"),values.weight&&!values.weightUnit&&(errors.weightUnit="Please select a weight unit"),values.extras&&values.extras.isUsingCustomDimensions&&values.customDimensions&&(values.customDimensions.width?(!(0,validations.aM)(values.customDimensions.width)||+values.customDimensions.width<=0)&&(errors.customDimensions.width="Width must be greater than 0"):errors.customDimensions.width="Width is required",values.customDimensions.length?(!(0,validations.aM)(values.customDimensions.length)||+values.customDimensions.length<=0)&&(errors.customDimensions.length="Length must be greater than 0"):errors.customDimensions.length="Length is required",values.customDimensions.height?(!(0,validations.aM)(values.customDimensions.height)||+values.customDimensions.height<=0)&&(errors.customDimensions.height="Height must be greater than 0"):errors.customDimensions.height="Height is required",values.customDimensions.distanceUnit||(errors.customDimensions.distanceUnit="Please select a distance unit")),values.extras&&values.customDimensions&&values.extras.carrierTemplateWithCustomDimensions&&(values.customDimensions.width?(!(0,validations.aM)(values.customDimensions.width)||+values.customDimensions.width<=0)&&(errors.customDimensions.width="Width must be greater than 0"):errors.customDimensions.width="Width is required",values.customDimensions.length?(!(0,validations.aM)(values.customDimensions.length)||+values.customDimensions.length<=0)&&(errors.customDimensions.length="Length must be greater than 0"):errors.customDimensions.length="Length is required",values.parcelTemplate&&("Soft Pack"===values.parcelTemplate.name||(0,ParcelTemplate.MS)(values.parcelTemplate)&&values.parcelTemplate.carrierTemplate&&"Soft Pack"===values.parcelTemplate.carrierTemplate.name))){var sumLengthWidth=+values.customDimensions.length+ +values.customDimensions.width;values.customDimensions.distanceUnit.value.toString()===distance.k.IN?(+values.customDimensions.length>18?errors.customDimensions.length="For USPS Soft Pack, length cannot be greater than 18 inches":+values.customDimensions.width>18&&(errors.customDimensions.width="For USPS Soft Pack, width cannot be greater than 18 inches"),sumLengthWidth>36&&(errors.customDimensions.length=errors.customDimensions.width="The combined length and width cannot exceed 36 inches. For Soft Packs that exceed 36 inches, please use Custom Dimensions.")):values.customDimensions.distanceUnit.value.toString()===distance.k.CM&&(+values.customDimensions.length>45.72?errors.customDimensions.length="For USPS Soft Pack, length cannot be greater than 45.72 cm":+values.customDimensions.width>45.72&&(errors.customDimensions.width="For USPS Soft Pack, width cannot be greater than 45.72 cm"),sumLengthWidth>91.44&&(errors.customDimensions.length=errors.customDimensions.width="The combined length and width cannot exceed 91.44 cm. For Soft Packs that exceed 91.44 cm, please use Custom Dimensions."))}return errors};var ParcelBox=(0,emotion_styled_browser_esm.A)(Modal.A.Body)(ParcelForm_templateObject_1||(ParcelForm_templateObject_1=(0,tslib_es6.ue)(["\n  ",";\n"],["\n  ",";\n"])),(function(props){return props.insideCard&&"padding: 0"})),formTabIndex_parcelSelector=1,ParcelForm=function(_super){function ParcelForm(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.C6)(ParcelForm,_super),ParcelForm.prototype.componentDidUpdate=function(prevProps){this.props.onSuccess&&prevProps.submitting&&!this.props.submitting&&this.props.submitSucceeded&&this.props.onSuccess(),this.props.onSuccess&&prevProps.submitting&&!this.props.submitting&&this.props.submitFailed&&this.props.onSuccess(),!prevProps.initialized&&this.props.initialized&&this.props.hasExceededPackageWeightError&&this.props.touch("weight"),prevProps.hasExceededPackageWeightError&&!this.props.hasExceededPackageWeightError&&this.props.change("hasExceededPackageWeightError",!1)},ParcelForm.prototype.render=function(){return(0,emotion_react_jsx_runtime_browser_esm.FD)(ParcelBox,(0,tslib_es6.Cl)({insideCard:this.props.insideCard},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(PackageTemplateChooser_PackageTemplateChooser,{appLocation:this.props.appLocation,batchEntry:this.props.batchEntry,dataAnalyticsContext:this.props.dataAnalyticsContext,disableDropdown:!1,formName:constants_form.n6,importedWeight:this.props.importedWeight,importedWeightOption:this.props.importedWeightOption,isWeightRequired:!0,shouldShowPolymailer:!1,showZeroState:this.props.showZeroState,someOrderHasImportedWeight:this.props.someOrderHasImportedWeight,startingTabIndex:formTabIndex_parcelSelector}),this.props.shouldShowParcelExtras&&this.props.orderSelection&&(0,emotion_react_jsx_runtime_browser_esm.Y)(PackageExtrasForm,{orderSelection:this.props.orderSelection})]}))},ParcelForm}(react.Component);const ParcelForm_ParcelForm=(0,redux.Zz)((0,utils_translate.Tl)("orders"),(0,es.Ng)((function(state,ownProps){var batchEntryId=ownProps.batchEntryId,shouldShowParcelExtras=ownProps.shouldShowParcelExtras,batchEntry=(0,batch_entry_selectors.fu)(state,{batchEntryId:Number(batchEntryId)}),userConfigDefaults=(0,user_selectors.Og)(state),selectedTemplate=ownProps.existingParcel?(0,Parcel.lL)(ownProps.existingParcel):userConfigDefaults.defaultParcel,initialFormValues=getInitialFormValues(selectedTemplate,userConfigDefaults,batchEntry,ownProps.initialExtrasValues,ownProps.useImportedWeight,ownProps.importedWeight);return initialFormValues.extras.isWeightRequired=!0,{batchEntry,initialValues:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},initialFormValues),{customItemsTotalWeight:(0,OrderBatchEntry.Ag)(batchEntry),hasExceededPackageWeightError:!!ownProps.hasExceededPackageWeightError}),shouldShowParcelExtras,userConfigDefaults}})),(0,reduxForm.A)({destroyOnUnmount:!0,form:constants_form.n6,onSubmit:function(data,_dispatch,props){return props.handleSubmit(data)},touchOnChange:!0,validate:function(values,props){var _a,t=props.t,parcelErrors=PackageTemplateChooser_validate(values),extrasErrors=validateExtras(values),errors=(0,tslib_es6.Cl)((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},parcelErrors),extrasErrors),{alcohol:""});return values.hasExceededPackageWeightError&&!props.anyTouched&&values.weight===props.initialValues.weight&&(errors.weight=t("orders:calculateRates:tabs:shipmentInfo:errors:orderWeightExceeded",{weight:values.customItemsTotalWeight,weightUnit:null===(_a=props.initialValues.weightUnit)||void 0===_a?void 0:_a.value})),errors}}))(ParcelForm);var ParcelForm_templateObject_1;const All_ParcelForm=ParcelForm_ParcelForm;var segment=__webpack_require__("./app/utils/segment/index.ts"),trackPackageUpdateEvent=function(data,orderSelection,origin,appLocation){var customDimensions=data.customDimensions,parcelTemplate=data.parcelTemplate,is_default=!(!parcelTemplate||!(0,ParcelTemplate.MS)(parcelTemplate))&&parcelTemplate.isDefault,is_saved_package_template=!!parcelTemplate&&(0,ParcelTemplate.MS)(parcelTemplate),is_carrier_package_template=!!parcelTemplate&&!(0,ParcelTemplate.MS)(parcelTemplate),height=(null==parcelTemplate?void 0:parcelTemplate.height)||(null==customDimensions?void 0:customDimensions.height)||0,width=(null==parcelTemplate?void 0:parcelTemplate.width)||(null==customDimensions?void 0:customDimensions.width)||0,length=(null==parcelTemplate?void 0:parcelTemplate.length)||(null==customDimensions?void 0:customDimensions.length)||0,weight=parcelTemplate&&(0,ParcelTemplate.MS)(parcelTemplate)?null==parcelTemplate?void 0:parcelTemplate.weight:data.weight,saved_package_name=!!parcelTemplate&&(null==parcelTemplate?void 0:parcelTemplate.name)||"",type=height&&.25===height?"polymailer":"box",weight_units=parcelTemplate&&(0,ParcelTemplate.MS)(parcelTemplate)?null==parcelTemplate?void 0:parcelTemplate.weightUnit:data.weightUnit.value.toString(),use_item_weight=data.useImportedOrderWeight;(0,utils.f0)(appLocation,segment.sV.package_info_edited,{is_auto_save:!1,is_carrier_package_template,is_default,is_most_recent:!1,is_saved_package_template,length,orders_selected:Object.keys(orderSelection),origin,save_as_template:!1,saved_package_name,type,use_item_weight,weight,weight_units,width})},utils_handleTrackPackageUpdatedOrAdded=function(trackingReference,selectedOrders,batchEntryData,additionalProps){void 0===selectedOrders&&(selectedOrders={});var hasExistingParcel=Object.values(selectedOrders).every((function(batchEntries){var _a;return null===(_a=null==batchEntryData?void 0:batchEntryData[batchEntries[0]])||void 0===_a?void 0:_a.parcel}));trackingReference=TrackingHelper.U.amendTrackingReferenceOrders(trackingReference,Object.keys(selectedOrders)),(0,utils.bT)(trackingReference,types.wK.operations.SAVE_ATTEMPTED,additionalProps),hasExistingParcel?(0,utils.bT)(trackingReference,types.wK.operations.UPDATED,additionalProps):(0,utils.bT)(trackingReference,types.wK.operations.ADDED,additionalProps)},ParcelWrapper=(0,emotion_styled_browser_esm.A)("div")(EditParcelOverlayPanel_templateObject_1||(EditParcelOverlayPanel_templateObject_1=(0,tslib_es6.ue)(["\n  width: 405px;\n"],["\n  width: 405px;\n"]))),WeightDimensionsWarningWrapper=(0,emotion_styled_browser_esm.A)("div")(EditParcelOverlayPanel_templateObject_2||(EditParcelOverlayPanel_templateObject_2=(0,tslib_es6.ue)(["\n  display: flex;\n  max-width: 85%;\n  color: ",";\n  font-size: 0.875rem;\n"],["\n  display: flex;\n  max-width: 85%;\n  color: ",";\n  font-size: 0.875rem;\n"])),styles_constants.Tj.gray400),EditParcelOverlayPanel=function(_super){function EditParcelOverlayPanel(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.handleSubmit=function(data){var _a,_b,_c,parcel=(0,Parcel.On)(data),_d=_this.props,batchEntry=_d.batchEntry,onSubmitForm=_d.onSubmitForm,order=_d.order,saveParcel=_d.saveParcel,orderSelection=((_a={})[order.objectId]=batchEntry?[batchEntry.id]:[],_a),trackingReference=TrackingHelper.U.getTrackingReference(types.wK.name,"order_table",{isAutoSave:!1,isQuickSelect:!1,parcelId:null===(_b=null==parcel?void 0:parcel.userParcelTemplate)||void 0===_b?void 0:_b.objectId});return utils_handleTrackPackageUpdatedOrAdded(trackingReference,orderSelection,_this.props.batchEntryData,{isAutoSave:!1,isQuickSelect:!1,parcelId:null===(_c=null==parcel?void 0:parcel.userParcelTemplate)||void 0===_c?void 0:_c.objectId}),onSubmitForm&&(trackPackageUpdateEvent(data,orderSelection,schema.hX,"order_table"),onSubmitForm()),saveParcel(orderSelection,parcel,trackingReference)},_this}return(0,tslib_es6.C6)(EditParcelOverlayPanel,_super),EditParcelOverlayPanel.prototype.render=function(){var _a,_b=this.props,batchEntry=_b.batchEntry,dataAnalyticsContext=_b.dataAnalyticsContext,order=_b.order,t=_b.t,batchEntryLineItems=(null==batchEntry?void 0:batchEntry.lineItems)||[],hasExceededPackageWeightError=!!(null==batchEntry?void 0:batchEntry.errors.find((function(error){return"order_weight_exceeded"===error.code}))),importedWeightOption=order.weightUnit?options.Ay.commonWeightOptions[order.weightUnit]:options.Ay.commonWeightOptions[this.props.defaultMassUnit],partialFulfillmentRequestImportedWeight="";batchEntry&&(partialFulfillmentRequestImportedWeight=(0,OrderBatchEntry.f2)(batchEntryLineItems,order.lineItems).toString());var importedWeight=batchEntry&&batchEntry.partialFulfillmentRank>0?partialFulfillmentRequestImportedWeight:(null===(_a=(0,Order.J_)(order))||void 0===_a?void 0:_a.toString())||"";return(0,emotion_react_jsx_runtime_browser_esm.FD)(ParcelWrapper,(0,tslib_es6.Cl)({className:"space-y-4 p-4"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(components_OrderInfoHeader,{required:!((null==batchEntry?void 0:batchEntry.parcel)||order.parcel),title:t("orders:packageInfo:popupTitle")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(WeightDimensionsWarningWrapper,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_PackageWeightDimensionsWarning,{})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(All_ParcelForm,{appLocation:"order_table",batchEntryId:null==batchEntry?void 0:batchEntry.id,dataAnalyticsContext,existingParcel:(null==batchEntry?void 0:batchEntry.parcel)||order.parcel,hasExceededPackageWeightError,importedWeight,importedWeightOption,insideCard:!0,onCancel:this.props.onCancel,onSubmit:this.handleSubmit,onSuccess:this.props.onSave,showZeroState:!0,someOrderHasImportedWeight:(0,Order.vz)(order),useDefault:!0,useImportedWeight:!!batchEntry&&batchEntry.useImportedWeight}),(0,emotion_react_jsx_runtime_browser_esm.FD)(Modal.A.Footer,(0,tslib_es6.Cl)({hideBorder:!0,noPadding:!0},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Button.vM,(0,tslib_es6.Cl)({dataAnalytics:"".concat(dataAnalyticsContext,"PackageInfo-click-cancelButton"),dataPendo:"package-cancel",onClick:this.props.onCancel},{children:t("phrases.cancel")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Button.jn,(0,tslib_es6.Cl)({dataAnalytics:"".concat(dataAnalyticsContext,"PackageInfo-click-saveButton"),dataPendo:"package-save",disabled:this.props.isSubmittingParcelForm||this.props.isInvalidParcelForm,isLoading:this.props.isSubmittingParcelForm,onClick:this.props.submitParcelForm},{children:t("phrases.save")}))]}))]}))},EditParcelOverlayPanel}(react.Component);const EditParcelOverlayPanel_EditParcelOverlayPanel=(0,redux.Zz)((0,es.Ng)((function(state,ownProps){var order=ownProps.order;return{batchEntry:ownProps.batchEntry||(0,batch_entry_selectors.Dz)(state,{orderObjectId:order.objectId}),batchEntryData:(0,batch_entry_selectors.zo)(state),defaultMassUnit:(0,user_selectors.cm)(state),isInvalidParcelForm:(0,isInvalid.A)(constants_form.n6)(state),isSubmittingParcelForm:(0,isSubmitting.A)(constants_form.n6)(state)}}),(function(dispatch){return{saveParcel:function(orderSelection,parcel,trackingReference){return dispatch((0,orders_actions.$h)(orderSelection,parcel,trackingReference))},submitParcelForm:function(){return dispatch((0,redux_form_es.tA)(constants_form.n6))}}})),(0,utils_translate.Tl)("orders"))(EditParcelOverlayPanel);var EditParcelOverlayPanel_templateObject_1,EditParcelOverlayPanel_templateObject_2;const All_EditParcelOverlayPanel=EditParcelOverlayPanel_EditParcelOverlayPanel;var ParcelName=(0,emotion_styled_browser_esm.A)("div")(OrderParcelInfo_templateObject_1||(OrderParcelInfo_templateObject_1=(0,tslib_es6.ue)(["\n  color: ",";\n  font-size: 0.875rem;\n  font-weight: ",";\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  text-overflow: ellipsis;\n  overflow: hidden;\n"],["\n  color: ",";\n  font-size: 0.875rem;\n  font-weight: ",";\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  text-overflow: ellipsis;\n  overflow: hidden;\n"])),styles_constants.Tj.gray1000,styles_constants.Wy.medium),DimensionWrapper=(0,emotion_styled_browser_esm.A)("div")(OrderParcelInfo_templateObject_2||(OrderParcelInfo_templateObject_2=(0,tslib_es6.ue)(["\n  color: ",";\n  font-weight: ",";\n  font-size: 0.8125rem;\n"],["\n  color: ",";\n  font-weight: ",";\n  font-size: 0.8125rem;\n"])),styles_constants.Tj.gray700,styles_constants.Wy.normal),OrderParcelInfo_Container=(0,emotion_styled_browser_esm.A)("div")(OrderParcelInfo_templateObject_3||(OrderParcelInfo_templateObject_3=(0,tslib_es6.ue)(["\n  min-height: ",";\n"],["\n  min-height: ",";\n"])),styles_constants.df),CaretIcon=(0,emotion_styled_browser_esm.A)("img")(OrderParcelInfo_templateObject_4||(OrderParcelInfo_templateObject_4=(0,tslib_es6.ue)(["\n  ","\n"],["\n  ","\n"])),(function(_a){return _a.isOpen?"transform: rotate(180deg)":"opacity: 0.2"})),ParcelButton=(0,emotion_styled_browser_esm.A)("button")(OrderParcelInfo_templateObject_5||(OrderParcelInfo_templateObject_5=(0,tslib_es6.ue)(["\n  padding: 0.5rem 0.5rem;\n  min-height: ",";\n\n  ",";\n"],["\n  padding: 0.5rem 0.5rem;\n  min-height: ",";\n\n  ",";\n"])),styles_constants.df,(function(_a){if(_a.isOpen)return"background-color: ".concat(styles_constants.Tj.sea50)})),ButtonContent=(0,emotion_styled_browser_esm.A)("span")(OrderParcelInfo_templateObject_6||(OrderParcelInfo_templateObject_6=(0,tslib_es6.ue)(["\n  ",";\n"],["\n  ",";\n"])),(function(_a){if(_a.hasParcel)return"grid-template-columns: 1fr 1.5rem;"})),OrderParcelInfo=function(_super){function OrderParcelInfo(props){var _this=_super.call(this,props)||this;return _this.getParcelWeightInfo=function(){var _a,_b=_this.props,batchEntry=_b.batchEntry,order=_b.order,batchEntryLineItems=(null==batchEntry?void 0:batchEntry.lineItems)||[],parcel=batchEntry?batchEntry.parcel:order.parcel;if(parcel&&parcel.weight&&parcel.weightUnit)return(0,ParcelTemplate.E_)(parcel);var weight=((batchEntry?(0,OrderBatchEntry.f2)(batchEntryLineItems,order.lineItems):null)||(0,Order.J_)(order)||(0,LineItem.X8)(order.lineItems)).toString(),weightUnit=order.weightUnit||(null===(_a=order.lineItems[0])||void 0===_a?void 0:_a.weightUnit);if(weight&&weightUnit){var weightProvider={weight,weightUnit};return(0,ParcelTemplate.E_)(weightProvider)}return null},_this.handleCellClick=function(evt){evt.stopPropagation()},_this.handleClose=function(){_this.props.closeParcelSelect(),_this.setState({isOpen:!1})},_this.handleOpen=function(){var _a,_b=_this.props,batchEntry=_b.batchEntry;(0,_b.openParcelSelect)(((_a={})[_b.order.objectId]=batchEntry?[batchEntry.id]:[],_a)),_this.setState({isOpen:!0})},_this.renderParcelInfo=function(){var _a=_this.props,batchEntry=_a.batchEntry,order=_a.order,t=_a.t,isOpen=_this.state.isOpen,parcel=batchEntry?batchEntry.parcel:order.parcel;if(!parcel)return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"-ml-2 flex items-center"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"",className:"h-6",src:plus}),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"leading-4 font-medium text-sm text-left"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.tp,{children:t("orders:packageInfo:addPackageInfo")})}))]}));var parcelDimension=(0,ParcelTemplate.$)((0,Parcel.lL)(parcel));return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex flex-col leading-5"},{children:[_this.renderParcelName(),(0,emotion_react_jsx_runtime_browser_esm.FD)(DimensionWrapper,(0,tslib_es6.Cl)({className:"flex flex-wrap mt-1"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"mr-2"},{children:_this.getParcelWeightInfo()})),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:parcelDimension})]}))]})),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"flex justify-center"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CaretIcon,{isOpen,src:icons.jH})}))]})},_this.renderParcelName=function(){var _a=_this.props,batchEntry=_a.batchEntry,order=_a.order,t=_a.t,parcel=batchEntry?batchEntry.parcel:order.parcel;return parcel?(0,emotion_react_jsx_runtime_browser_esm.Y)(ParcelName,(0,tslib_es6.Cl)({className:styles_constants.xW.fulfilledOrderText},{children:(0,Parcel.gY)(parcel)||t("orders:calculateRates:tabs:shipmentInfo:customDimensions")})):null},_this.state={isOpen:!1},_this}return(0,tslib_es6.C6)(OrderParcelInfo,_super),OrderParcelInfo.prototype.render=function(){var _a=this.props,batchEntry=_a.batchEntry,order=_a.order,isOpen=this.state.isOpen,parcel=batchEntry?batchEntry.parcel:order.parcel,hasParcel=Boolean(parcel),buttonBackgroundReset=isOpen?"":"bg-transparent",gridClass=hasParcel?"grid":"";return(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderParcelInfo_Container,(0,tslib_es6.Cl)({className:"h-full","data-pendo":hasParcel?"orders-parcel-edit":"orders-parcel-add",onClick:this.handleCellClick},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({on:"click",onClose:this.handleClose,onOpen:this.handleOpen,open:isOpen,position:"bottom center",style:{margin:0,padding:0},trigger:(0,emotion_react_jsx_runtime_browser_esm.Y)(ParcelButton,(0,tslib_es6.Cl)({className:"h-full w-full border-none cursor-pointer rounded-none items-center text-left ".concat(buttonBackgroundReset),"data-analytics":"".concat("orders_table","PackageInfo-click-button"),isOpen},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(ButtonContent,(0,tslib_es6.Cl)({className:"h-full w-full items-center text-left ".concat(gridClass),hasParcel},{children:this.renderParcelInfo()}))})),wrapperClassName:"w-full h-full",wrapperStyle:{minHeight:styles_constants.df}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(All_EditParcelOverlayPanel,{batchEntry,dataAnalyticsContext:"orders_table",onCancel:this.handleClose,onSave:this.handleClose,order})}))}))},OrderParcelInfo}(react.PureComponent);const cells_OrderParcelInfo=(0,redux.Zz)((0,es.Ng)((function(state,ownProps){var batchEntry=ownProps.batchEntry,order=ownProps.order;return{batchEntry:batchEntry||(0,batch_entry_selectors.Dz)(state,{orderObjectId:order.objectId})}}),(function(dispatch){return{closeParcelSelect:function(){return dispatch((0,orders_actions.m6)())},openParcelSelect:function(orderSelection){return dispatch((0,orders_actions._W)(orderSelection))}}})),(0,utils_translate.Tl)("orders"))(OrderParcelInfo);var OrderParcelInfo_templateObject_1,OrderParcelInfo_templateObject_2,OrderParcelInfo_templateObject_3,OrderParcelInfo_templateObject_4,OrderParcelInfo_templateObject_5,OrderParcelInfo_templateObject_6,OrderPaymentStatus_a,paymentStatusIcons=((OrderPaymentStatus_a={})[Order.Re.AWAITPAY]="dollar",OrderPaymentStatus_a[Order.Re.CANCELLED]="times",OrderPaymentStatus_a[Order.Re.GENERIC]="dollar",OrderPaymentStatus_a[Order.Re.INVALID]="",OrderPaymentStatus_a[Order.Re.PAID]="dollar",OrderPaymentStatus_a[Order.Re.PARTIALLY_FULFILLED]="dollar",OrderPaymentStatus_a[Order.Re.REFUNDED]="reply",OrderPaymentStatus_a[Order.Re.SHIPPED]="dollar",OrderPaymentStatus_a[Order.Re.UNKNOWN]="",OrderPaymentStatus_a[Order.Re.VALID]="",OrderPaymentStatus_a);const cells_OrderPaymentStatus=(0,utils_translate.Tl)("orders")((function(props){var paymentStatusIcon=paymentStatusIcons[props.order.orderStatus]||"";return paymentStatusIcon?(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderIcon_OrderIcon,{className:"fa fa-".concat(paymentStatusIcon),ok:(0,Order.tR)(props.order),tooltipText:props.t("orders:status:payment:".concat(props.order.orderStatus))}):null}));var ShippingMethodText=(0,emotion_styled_browser_esm.A)("div")(ShippingMethod_templateObject_1||(ShippingMethod_templateObject_1=(0,tslib_es6.ue)(["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"],["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"])));const cells_ShippingMethod=(0,utils_translate.Tl)()((function(props){var order=props.data,maxShipTime=(0,Order.CW)(order),maxShipTimeContent=maxShipTime?(0,emotion_react_jsx_runtime_browser_esm.FD)("span",{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{className:"fa fa-arrow-circle-right"})," ",props.t("orders:all:shipBy"),maxShipTime.format("MM/DD/YY hA")]}):null,maxDeliveryTime=(0,Order.k4)(order),maxDeliveryTimeContent=maxDeliveryTime?(0,emotion_react_jsx_runtime_browser_esm.FD)("span",{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{className:"fa fa-truck"})," ",props.t("orders:all:deliverBy"),maxDeliveryTime.format("MM/DD/YY hA")]}):null;return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[order.shippingMethod&&(0,Order.PF)(order)?(0,emotion_react_jsx_runtime_browser_esm.FD)(ShippingMethodText,{children:[props.t("currency",{value:{currency_iso:order.shippingCostCurrency,value:order.shippingCost}})," ","- ",order.shippingMethod]}):null,(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({inverted:!0,position:"top center",size:"mini",trigger:maxShipTimeContent||maxDeliveryTimeContent},{children:props.t("orders:all:timeGuarantees")}))]})}));var ShippingMethod_templateObject_1;const components_withAddressBook=__webpack_require__("./app/components/withAddressBook/withAddressBook.tsx").A;const SelectAllOrders_container=function(props){var checked,dispatch=(0,es.wA)(),selectedOrders=(0,es.d4)(orders_selectors.Li),areAllOrdersSelected=(0,es.d4)(orders_selectors.MO),hasSelectedOrders=!!Object.keys(selectedOrders).length,allOrders=(0,es.d4)(batch_entry_composite_selectors.Vd);checked=hasSelectedOrders&&!areAllOrdersSelected?"partial":!!(areAllOrdersSelected&&Object.keys(allOrders).length>0);var handleChange=react.useCallback((function(){dispatch(areAllOrdersSelected?(0,orders_actions.uF)(!0):(0,orders_actions.B_)(allOrders,!0))}),[allOrders,areAllOrdersSelected]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(Checkbox.Ay,(0,tslib_es6.Cl)({},props,{checked,onChange:handleChange}))};var ManualErrorBoundary=__webpack_require__("./app/pages/Manual/ManualErrorBoundary/index.ts"),routing_actions=__webpack_require__("./app/actions/routing.actions.ts"),Dropdown_Dropdown=__webpack_require__("./app/components/Dropdown/Dropdown.tsx"),StyledDropdown=(0,emotion_styled_browser_esm.A)(Dropdown_Dropdown.A)(LabelHeader_templateObject_1||(LabelHeader_templateObject_1=(0,tslib_es6.ue)(["\n  top: 12px;\n  width: 225px;\n  left: -60px;\n"],["\n  top: 12px;\n  width: 225px;\n  left: -60px;\n"]))),LabelHeader_Container=(0,emotion_styled_browser_esm.A)("div")(LabelHeader_templateObject_2||(LabelHeader_templateObject_2=(0,tslib_es6.ue)(["\n  position: relative;\n"],["\n  position: relative;\n"]))),InnerContainer=(0,emotion_styled_browser_esm.A)("div")(LabelHeader_templateObject_3||(LabelHeader_templateObject_3=(0,tslib_es6.ue)(["\n  display: flex;\n"],["\n  display: flex;\n"]))),TextContainer=(0,emotion_styled_browser_esm.A)("div")(LabelHeader_templateObject_4||(LabelHeader_templateObject_4=(0,tslib_es6.ue)(["\n  flex-grow: 1;\n"],["\n  flex-grow: 1;\n"]))),DropdownButton=(0,emotion_styled_browser_esm.A)("button")(LabelHeader_templateObject_5||(LabelHeader_templateObject_5=(0,tslib_es6.ue)(["\n  border: none;\n  background: transparent;\n  color: ",";\n  cursor: pointer;\n  display: flex;\n"],["\n  border: none;\n  background: transparent;\n  color: ",";\n  cursor: pointer;\n  display: flex;\n"])),styles_constants.Tj.secondary),SmallIcon=(0,emotion_styled_browser_esm.A)("i")(LabelHeader_templateObject_6||(LabelHeader_templateObject_6=(0,tslib_es6.ue)(["\n  font-size: 10px;\n  margin-left: 4px;\n  vertical-align: middle;\n"],["\n  font-size: 10px;\n  margin-left: 4px;\n  vertical-align: middle;\n"]))),DropdownContainer=(0,emotion_styled_browser_esm.A)("div")(LabelHeader_templateObject_7||(LabelHeader_templateObject_7=(0,tslib_es6.ue)(["\n  width: 230px;\n  box-sizing: border-box;\n  padding: 20px;\n"],["\n  width: 230px;\n  box-sizing: border-box;\n  padding: 20px;\n"]))),CheckboxContainer=(0,emotion_styled_browser_esm.A)("div")(LabelHeader_templateObject_8||(LabelHeader_templateObject_8=(0,tslib_es6.ue)(["\n  margin-top: 16px;\n"],["\n  margin-top: 16px;\n"]))),LabelHeader=function(_super){function LabelHeader(props){var _this=_super.call(this,props)||this;return _this.changeFetchCount=function(selected){if("string"==typeof selected.value)return _this.props.changeFetchCount(selected.value)},_this.toggleDropdown=function(){_this.setState((function(state){return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},state),{isOpen:!state.isOpen})}))},_this.toggleHidden=function(value){return _this.props.toggleHidden(value||void 0)},_this.state={isOpen:!1},_this}return(0,tslib_es6.C6)(LabelHeader,_super),LabelHeader.prototype.render=function(){var _this=this,options=[{label:"25",value:"25"},{label:"50",value:"50"},{label:"100",value:"100"}],_a=this.props,label=_a.label,t=_a.t,selectedOption=options.find((function(option){return option.value===_this.props.results}));return(0,emotion_react_jsx_runtime_browser_esm.FD)(LabelHeader_Container,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(InnerContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(TextContainer,{children:label}),(0,emotion_react_jsx_runtime_browser_esm.FD)(DropdownButton,(0,tslib_es6.Cl)({"data-pendo":"orders-layout-options",onClick:this.toggleDropdown},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{className:"fa fa-bars"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SmallIcon,{className:"fa fa-chevron-down"})]}))]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledDropdown,(0,tslib_es6.Cl)({allowOverflow:!0,isOpen:this.state.isOpen,onClose:this.toggleDropdown},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(DropdownContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Select,{dataPendo:"orders-filters-results",label:t("orders:table:ordersPerPage"),onChange:this.changeFetchCount,options,size:constants_form.YI.xs,value:selectedOption}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CheckboxContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Checkbox.Ay,{checked:this.props.hidden,dataPendo:"orders-layout-show-hidden",label:t("orders:table:showHidden"),onChange:this.toggleHidden})})]})}))]})},LabelHeader}(react.PureComponent);const All_LabelHeader=(0,redux.Zz)((0,es.Ng)((function(state){return{hidden:getQSHidden(state),results:getQSResults(state)||"25"}}),(function(dispatch){return{changeFetchCount:function(fetchCount){return dispatch((0,routing_actions.bJ)("results",fetchCount))},toggleHidden:function(value){return dispatch((0,routing_actions.bJ)("hidden",value))}}})),(0,utils_translate.Tl)("orders"))(LabelHeader);var LabelHeader_templateObject_1,LabelHeader_templateObject_2,LabelHeader_templateObject_3,LabelHeader_templateObject_4,LabelHeader_templateObject_5,LabelHeader_templateObject_6,LabelHeader_templateObject_7,LabelHeader_templateObject_8,showDialog=function(props,dialogType){return{payload:{dialogType,props},type:constants.t.DIALOG_SHOW}},sendGTMEvent=function(payload){return{payload,type:constants.t.SEND_GTM_EVENT}},sendGTMEventSuccess=function(eventName){return{eventName,type:constants.t.SEND_GTM_EVENT_SUCCESS}},sendGTMEventError=function(eventName,error){return{error,eventName,type:constants.t.SEND_GTM_EVENT_ERROR}},pushToGTMDataLayer=function(payload){return{payload,type:constants.t.PUSH_TO_GTM_DATA_LAYER}},dropdownPrimaryActionStyles=(0,emotion_react_browser_esm.AH)(DotTrigger_templateObject_1||(DotTrigger_templateObject_1=(0,tslib_es6.ue)(["\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n  align-self: flex-end;\n  border: none;\n"],["\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n  align-self: flex-end;\n  border: none;\n"]))),DotTrigger_SmallIcon=(0,emotion_styled_browser_esm.A)("i")(DotTrigger_templateObject_2||(DotTrigger_templateObject_2=(0,tslib_es6.ue)(["\n  display: flex;\n  font-size: 1.25rem;\n  vertical-align: middle;\n  margin-bottom: 2px;\n"],["\n  display: flex;\n  font-size: 1.25rem;\n  vertical-align: middle;\n  margin-bottom: 2px;\n"])));const DropdownList_DotTrigger=function(props){var buttonType=props.buttonType,buttonProps=(0,tslib_es6.Tt)(props,["buttonType"]),Button=components_Button.Uo[buttonType],icon=props.reversed?"v":"h";return(0,emotion_react_jsx_runtime_browser_esm.Y)(Button,(0,tslib_es6.Cl)({},buttonProps,{css:dropdownPrimaryActionStyles,ref:props.buttonRef},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(DotTrigger_SmallIcon,{className:"fa fa-ellipsis-".concat(icon)})}))};var DotTrigger_templateObject_1,DotTrigger_templateObject_2,Trigger_dropdownPrimaryActionStyles=(0,emotion_react_browser_esm.AH)(Trigger_templateObject_1||(Trigger_templateObject_1=(0,tslib_es6.ue)(["\n  border-bottom-left-radius: 0;\n  border-top-left-radius: 0;\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n"],["\n  border-bottom-left-radius: 0;\n  border-top-left-radius: 0;\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n"]))),Trigger_SmallIcon=(0,emotion_styled_browser_esm.A)("i")(Trigger_templateObject_2||(Trigger_templateObject_2=(0,tslib_es6.ue)(["\n  display: flex;\n  font-size: 0.625rem;\n  vertical-align: middle;\n  margin-bottom: 2px;\n"],["\n  display: flex;\n  font-size: 0.625rem;\n  vertical-align: middle;\n  margin-bottom: 2px;\n"])));const DropdownList_Trigger=function(props){var buttonType=props.buttonType,buttonProps=(0,tslib_es6.Tt)(props,["buttonType"]),Button=components_Button.Uo[buttonType],icon=props.reversed?"up":"down";return(0,emotion_react_jsx_runtime_browser_esm.Y)(Button,(0,tslib_es6.Cl)({},buttonProps,{css:Trigger_dropdownPrimaryActionStyles,ref:props.buttonRef},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Trigger_SmallIcon,{className:"fa fa-chevron-".concat(icon)})}))};var Trigger_templateObject_1,Trigger_templateObject_2,DropdownList_Container=(0,emotion_styled_browser_esm.A)("div")(DropdownList_templateObject_1||(DropdownList_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  position: relative;\n  min-width: ",";\n  ",";\n"],["\n  display: flex;\n  position: relative;\n  min-width: ",";\n  ",";\n"])),(function(_a){return _a.minWidth||"180px"}),(function(props){return props.hamburger?"justify-content: flex-end;":""})),DropdownList_List=(0,emotion_styled_browser_esm.A)("ul")(DropdownList_templateObject_2||(DropdownList_templateObject_2=(0,tslib_es6.ue)(["\n  padding: 0;\n  margin: 0;\n\n  li:hover {\n    background-color: ",";\n  }\n"],["\n  padding: 0;\n  margin: 0;\n\n  li:hover {\n    background-color: ",";\n  }\n"])),(function(props){return props.hoverColor}));const DropdownList_DropdownList=function(_super){function DropdownList(props){var _this=_super.call(this,props)||this;return _this.handleClick=function(evt){evt.stopPropagation(),_this.setState({isOpen:!_this.state.isOpen})},_this.onClickOutside=function(evt){-1===evt.propagationPath().indexOf(react_dom.findDOMNode(_this.trigger))&&_this.setState({isOpen:!1})},_this.setTriggerRef=function(node){return _this.trigger=node},_this.trigger=null,_this.state={isOpen:!1},_this}return(0,tslib_es6.C6)(DropdownList,_super),DropdownList.prototype.render=function(){var _this=this;return(0,emotion_react_jsx_runtime_browser_esm.FD)(DropdownList_Container,(0,tslib_es6.Cl)({hamburger:this.props.hamburger||!1,minWidth:this.props.minWidth},{children:[this.props.primaryActionComponent?this.props.primaryActionComponent():void 0,(0,emotion_react_jsx_runtime_browser_esm.Y)(Dropdown.A,(0,tslib_es6.Cl)({disabled:this.props.disabled,isOpen:this.state.isOpen,onClickOutside:this.onClickOutside,relativeToParent:!0,reversed:this.props.reversed,triggerComponent:function(){return _this.props.hamburger?(0,emotion_react_jsx_runtime_browser_esm.Y)(DropdownList_DotTrigger,{buttonRef:_this.setTriggerRef,buttonType:_this.props.triggerButtonType,dataE2E:_this.props.triggerDataE2E,disabled:_this.props.disabled,onClick:_this.handleClick,reversed:_this.props.reversed}):(0,emotion_react_jsx_runtime_browser_esm.Y)(DropdownList_Trigger,{buttonRef:_this.setTriggerRef,buttonType:_this.props.triggerButtonType,dataE2E:_this.props.triggerDataE2E,disabled:_this.props.disabled,onClick:_this.handleClick,reversed:_this.props.reversed})}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(DropdownList_List,(0,tslib_es6.Cl)({hoverColor:this.props.hoverColor||styles_constants.Tj.gray25},{children:this.props.children}))}))]}))},DropdownList}(react.Component);var DropdownList_templateObject_1,DropdownList_templateObject_2,Li=(0,emotion_styled_browser_esm.A)("li")(DropdownOption_templateObject_1||(DropdownOption_templateObject_1=(0,tslib_es6.ue)(["\n  padding: ",";\n  line-height: 14px;\n  color: ",";\n  position: relative;\n  cursor: pointer;\n\n  :first-of-type {\n    margin-top: 8px;\n  }\n\n  :last-of-type {\n    margin-bottom: 8px;\n  }\n"],["\n  padding: ",";\n  line-height: 14px;\n  color: ",";\n  position: relative;\n  cursor: pointer;\n\n  :first-of-type {\n    margin-top: 8px;\n  }\n\n  :last-of-type {\n    margin-bottom: 8px;\n  }\n"])),(function(props){return props.noPadding?"0":"8px 0 8px 20px"}),styles_constants.Tj.fontColor),A=(0,emotion_styled_browser_esm.A)("a")(DropdownOption_templateObject_2||(DropdownOption_templateObject_2=(0,tslib_es6.ue)(["\n  display: block;\n  padding: 8px 0 8px 20px;\n  text-decoration: none;\n  color: inherit;\n"],["\n  display: block;\n  padding: 8px 0 8px 20px;\n  text-decoration: none;\n  color: inherit;\n"]))),handleClick=function(evt){return evt.stopPropagation()};const DropdownList_DropdownOption=function(props){var liProps=props.onClick?{onClick:props.onClick}:{},child=props.href?(0,emotion_react_jsx_runtime_browser_esm.Y)(A,(0,tslib_es6.Cl)({href:props.href,onClick:handleClick},{children:props.children})):props.children;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Li,(0,tslib_es6.Cl)({},liProps,{className:props.className,"data-analytics":props.dataAnalytics,"data-pendo":props.dataPendo,noPadding:!!props.href},{children:child}))};var DropdownOption_templateObject_1,DropdownOption_templateObject_2,PrimaryAction_dropdownPrimaryActionStyles=(0,emotion_react_browser_esm.AH)(PrimaryAction_templateObject_1||(PrimaryAction_templateObject_1=(0,tslib_es6.ue)(["\n  border-bottom-right-radius: 0;\n  border-top-right-radius: 0;\n  text-align: center;\n"],["\n  border-bottom-right-radius: 0;\n  border-top-right-radius: 0;\n  text-align: center;\n"]))),PrimaryAction_handleClick=function(e){return e.stopPropagation()};const DropdownList_PrimaryAction=function(props){var buttonType=props.buttonType,children=props.children,dataAnalytics=props.dataAnalytics,dataPendo=props.dataPendo,buttonProps=(0,tslib_es6.Tt)(props,["buttonType","children","dataAnalytics","dataPendo"]),Button=components_Button.Uo[buttonType],isButtonSolid=[components_Button.EY.Primary,components_Button.EY.PrimaryBlue,components_Button.EY.SmallPrimary,components_Button.EY.SmallPrimaryExternalLink].includes(buttonType),propClass=(0,emotion_react_browser_esm.AH)(PrimaryAction_templateObject_2||(PrimaryAction_templateObject_2=(0,tslib_es6.ue)(["\n    width: ",";\n    ",";\n    border-right: "," !important;\n\n    &:hover,\n    &:focus {\n      border-right: "," !important;\n    }\n  "],["\n    width: ",";\n    ",";\n    border-right: "," !important;\n\n    &:hover,\n    &:focus {\n      border-right: "," !important;\n    }\n  "])),props.width?props.width:"125px",props.minWidth?"min-width: ".concat(props.minWidth):"",isButtonSolid?"1px solid #00000025":"none",isButtonSolid?"1px solid #00000025":"none"),primaryActionStyles=(0,emotion_react_browser_esm.AH)(PrimaryAction_templateObject_3||(PrimaryAction_templateObject_3=(0,tslib_es6.ue)(["\n    "," ",";\n  "],["\n    "," ",";\n  "])),PrimaryAction_dropdownPrimaryActionStyles,propClass),finalProps=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},buttonProps),buttonProps.onClick?{onClick:function(evt){if(evt.stopPropagation(),buttonProps.onClick)return buttonProps.onClick(evt)}}:{onClick:PrimaryAction_handleClick});return(0,emotion_react_jsx_runtime_browser_esm.Y)(Button,(0,tslib_es6.Cl)({},finalProps,{css:primaryActionStyles,dataAnalytics,dataPendo},{children}))};var PrimaryAction_templateObject_1,PrimaryAction_templateObject_2,PrimaryAction_templateObject_3,svgSpinner='\n\x3c!-- By Sam Herbert (@sherb), for everyone. More @ http://goo.gl/7AJzbL --\x3e\n<svg width="64" height="64" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a">\n      <stop stop-color="'.concat(styles_constants.Tj.primary,'" stop-opacity="0" offset="0%"/>\n      <stop stop-color="').concat(styles_constants.Tj.primary,'" stop-opacity=".631" offset="63.146%"/>\n      <stop stop-color="').concat(styles_constants.Tj.primary,'" offset="100%"/>\n    </linearGradient>\n  </defs>\n  <g fill="none" fill-rule="evenodd">\n    <g transform="translate(1 1)">\n      <path d="M36 18c0-9.94-8.06-18-18-18" id="Oval-2" stroke="url(#a)" stroke-width="2">\n        <animateTransform\n          attributeName="transform"\n          type="rotate"\n          from="0 18 18"\n          to="360 18 18"\n          dur="0.9s"\n          repeatCount="indefinite" />\n      </path>\n      <circle fill="').concat(styles_constants.Tj.primary,'" cx="36" cy="18" r="1">\n        <animateTransform\n          attributeName="transform"\n          type="rotate"\n          from="0 18 18"\n          to="360 18 18"\n          dur="0.9s"\n          repeatCount="indefinite" />\n      </circle>\n    </g>\n  </g>\n</svg>\n'),contentSyle="\n  width: 100%;\n  margin-top: 8rem;\n  font-family: Roboto,pragmatica-web,'Helvetica Neue',Helvetica,Arial,sans-serif;\n  font-weight: ".concat(styles_constants.Wy.normal,";\n  font-size: 1rem;\n  line-height: 1.5rem;\n  display: flex;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  flex-direction: column;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n    -ms-flex-direction: column;\n      flex-direction: column;\n  align-items: center;\n  display: flex;\n  -webkit-box-align: center;\n    -ms-flex-align: center;\n      align-items: center;\n");const components_HTMLLoadingState='\n  <div style="'.concat(contentSyle,'">\n    ').concat(svgSpinner,'\n    <p style="').concat("\n  margin-top: 1.5rem;\n",'">Loading...</p>\n  </div>\n');var GlobalComponentsProvider=__webpack_require__("./app/contexts/GlobalComponentsProvider.tsx"),Transaction=__webpack_require__("./app/types/Transaction.ts"),ActionButton=(0,emotion_styled_browser_esm.A)(components_Button.AL)(TransactionActionButton_templateObject_1||(TransactionActionButton_templateObject_1=(0,tslib_es6.ue)(["\n  display: block;\n\n  & i {\n    margin-right: 5px;\n  }\n"],["\n  display: block;\n\n  & i {\n    margin-right: 5px;\n  }\n"]))),ComposedTransactionActionButton=(0,redux.Zz)((0,es.Ng)(null,(function(dispatch){return{sendEmailNotification:function(objectId){return dispatch({payload:{transactionId:objectId},type:constants.t.SEND_EMAIL_NOTIFICATION})}}})),(0,utils_translate.Tl)("orders"))((function(_a){var action=_a.action,orderId=_a.orderId,sendEmailNotification=_a.sendEmailNotification,setTransaction=_a.setTransaction,t=_a.t,transaction=_a.transaction,snackbar=(0,GlobalComponentsProvider.s)().snackbar,_b=(0,tslib_es6.zs)((0,react.useState)(!1),2),actionSent=_b[0],setActionSent=_b[1],returnLink="".concat("https://dev-qa.shippodev.com","/user/orders/fulfill/").concat(orderId,"/return_of/").concat(transaction.objectId),handleSendNotification=function(){sendEmailNotification(transaction.objectId),setActionSent(!0)};if(action===ModalAction.EMAIL)return actionSent?(0,emotion_react_jsx_runtime_browser_esm.FD)(ActionButton,(0,tslib_es6.Cl)({disabled:!0,onClick:handleSendNotification},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{className:"fa fa-check"})," ",t("orders:shipments:emailSent")]})):(0,emotion_react_jsx_runtime_browser_esm.Y)(ActionButton,(0,tslib_es6.Cl)({onClick:handleSendNotification},{children:t("orders:shipments:sendEmail")}));if(action===ModalAction.RETURN)return(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.ic,(0,tslib_es6.Cl)({href:returnLink,target:"_blank"},{children:t("orders:all:createReturn")}));if(action===ModalAction.REFUND){switch(transaction.objectStatus){case Transaction.x8.ERROR:return(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Button.vM,(0,tslib_es6.Cl)({disabled:!0},{children:t("orders:all:nonRefundable")}));case Transaction.x8.REFUNDED:return(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Button.vM,(0,tslib_es6.Cl)({disabled:!0},{children:t("orders:all:refunded")}));case Transaction.x8.REFUNDPENDING:return(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Button.vM,(0,tslib_es6.Cl)({disabled:!0},{children:t("orders:all:refundPending")}));case Transaction.x8.REFUNDREJECTED:return(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Button.vM,(0,tslib_es6.Cl)({disabled:!0},{children:t("orders:all:refundRejected")}))}return actionSent?(0,emotion_react_jsx_runtime_browser_esm.FD)(ActionButton,(0,tslib_es6.Cl)({disabled:!0},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{className:"fa fa-check"}),t("orders:shipments:refundRequested")]})):(0,Transaction.PJ)(transaction)?(0,emotion_react_jsx_runtime_browser_esm.Y)(ActionButton,(0,tslib_es6.Cl)({onClick:function(){return snackbar.addSnackbarAlert(t("orders:refund:result:canadaPostIneligible"),"error")}},{children:t("orders:shipments:requestRefund")})):(0,emotion_react_jsx_runtime_browser_esm.Y)(ActionButton,(0,tslib_es6.Cl)({onClick:function(){return setTransaction(transaction)}},{children:t("orders:shipments:requestRefund")}))}}));const TransactionModal_TransactionActionButton=ComposedTransactionActionButton;var TransactionActionButton_templateObject_1;const components_Table=Table_Table;var CircularProgress=__webpack_require__("./node_modules/@goshippo/components/esm/CircularProgress/CircularProgress.js"),FormControlLabel=__webpack_require__("./node_modules/@goshippo/components/esm/FormControlLabel/FormControlLabel.js"),Checkbox_Checkbox=__webpack_require__("./node_modules/@goshippo/components/esm/Checkbox/Checkbox.js"),Dialog_Dialog=__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/Dialog/Dialog.js"),carrier_accounts_service_getCarrierAccounts=function(payload){return services_api.Ay.request({method:"GET",params:(0,tslib_es6.Cl)({results:999},payload),url:"/carrier_accounts"})},getCarrierProviders=function(carriers){return services_api.YZ.request({method:"GET",params:{carriers},url:"/setting/carriers"})},connectCarrierAccount=function(carrierAccount){return services_api.Ay.request({data:(0,tslib_es6.Cl)({},carrierAccount),method:"POST",url:"/carrier_accounts"})},uploadCompanyLogo=function(accountObjectId,companyLogo){var formData=new FormData;return formData.append("file",companyLogo),formData.append("document_type","LETTERHEAD"),services_api.Ay.request({data:formData,method:"POST",url:"/carrier_accounts/".concat(accountObjectId,"/documents")})},uploadDigitalSignature=function(accountObjectId,digitalSignature){var formData=new FormData;return formData.append("file",digitalSignature),formData.append("document_type","SIGNATURE"),services_api.Ay.request({data:formData,method:"POST",url:"/carrier_accounts/".concat(accountObjectId,"/documents")})},editCarrierAccount=function(carrierAccount,id){return services_api.Ay.request({data:(0,tslib_es6.Cl)({},carrierAccount),method:"PUT",url:"/carrier_accounts/".concat(id)})},editCarrierAccountServiceLevels=function(carrierServiceLevels,account_object_id){return services_api.Ay.request({data:carrierServiceLevels,method:"PATCH",url:"/carrier_accounts/".concat(account_object_id,"/service_levels")})},carrier_accounts_service_createCarrierAccount=function(requestBody){return services_api.Ay.request({data:(0,tslib_es6.Cl)({},requestBody),method:"POST",url:"/carrier_accounts/register/new"})},carrier_accounts_service_fetchCarrierAccountRegStatuses=function(){return services_api.YZ.request({method:"GET",url:"/carrier-accounts/reg-status/"})},CarrierAccount=__webpack_require__("./app/types/CarrierAccount.ts");var moment_moment=__webpack_require__("./node_modules/moment/moment.js"),APIMessage=__webpack_require__("./app/types/APIMessage.ts"),Carrier=__webpack_require__("./app/types/Carrier.ts"),Rate=__webpack_require__("./app/types/Rate.ts"),Track=__webpack_require__("./app/types/Track.ts"),ShipmentsTable_util=__webpack_require__("./app/pages/Shipments/ShipmentsPage/ShipmentsTable/util.ts"),getTransactionCreatedBy=function(createdBy){return(null==createdBy?void 0:createdBy.first_name)||(null==createdBy?void 0:createdBy.last_name)?[createdBy.first_name,createdBy.last_name].filter(Boolean).join(" "):null},types_shipmentTableRow=function(transactionSearch,isLastRows){var _a,_b,_c,_d,_e,_f,_g,_h,_j;return{action:{downloadLink:transactionSearch.trackingUrlProvider,hasInsurance:!!transactionSearch.insuranceAmount,isDownloadable:transactionSearch.isDownloadable,isRefundable:transactionSearch.isRefundable,refundRequestDate:transactionSearch.refundRequestDate,trackStatus:null===(_a=transactionSearch.trackingStatus)||void 0===_a?void 0:_a.status,transactionStatus:transactionSearch.objectStatus},carrierService:{isMobile:!1,name:transactionSearch.rate.provider,providerImage:transactionSearch.rate.provider&&(null===(_b=carriers.Ps[(0,Carrier.Z)(transactionSearch.rate.provider)])||void 0===_b?void 0:_b.icon),serviceLevel:transactionSearch.rate.servicelevelName,trackingNumber:transactionSearch.trackingNumber,trackingUrlProvider:transactionSearch.trackingUrlProvider},createdBy:transactionSearch.createdBy,customer:{address:transactionSearch.addressTo,isLastRows:!!isLastRows,name:null===(_c=transactionSearch.addressTo)||void 0===_c?void 0:_c.name},id:transactionSearch.objectId,insurance:{bookingId:transactionSearch.insuranceClaimId,insuranceAmount:transactionSearch.insuranceAmount,insuranceCurrency:transactionSearch.insuranceCurrency,insuranceProvider:transactionSearch.insuranceProvider},menu:{addressReturn:transactionSearch.addressReturn,addressTo:transactionSearch.addressTo,commercialInvoiceUrl:transactionSearch.commercialInvoiceUrl,hasInsurance:!!transactionSearch.insuranceAmount,isDownloadable:transactionSearch.isDownloadable,isRefundable:transactionSearch.isRefundable,isReturn:transactionSearch.isReturn,orderId:transactionSearch.order.id,trackStatus:null===(_d=transactionSearch.trackingStatus)||void 0===_d?void 0:_d.status,transactionStatus:transactionSearch.objectStatus},order:{createdAt:transactionSearch.objectCreated,isReturn:transactionSearch.isReturn,objectId:transactionSearch.order.object_id,orderNumber:transactionSearch.order.orderNumber,status:transactionSearch.order.status},rate:{amount:Number(transactionSearch.rate.amount),amountInsuranceFee:Number(transactionSearch.rate.amountInsuranceFee),currency:constants_currency.q[transactionSearch.rate.currency],isReturn:transactionSearch.isReturn,wasTest:transactionSearch.wasTest},shipDate:{date:null===(_e=transactionSearch.trackingStatus)||void 0===_e?void 0:_e.statusDate,location:"".concat(null===(_f=transactionSearch.addressTo)||void 0===_f?void 0:_f.city," ").concat(null===(_g=transactionSearch.addressTo)||void 0===_g?void 0:_g.zip),submissionDate:transactionSearch.submissionDate},status:{isLastRows:!!isLastRows,isMobile:!1,messages:transactionSearch.messages,status:null===(_h=transactionSearch.trackingStatus)||void 0===_h?void 0:_h.status,statusDetails:(0,ShipmentsTable_util.i)(null===(_j=transactionSearch.trackingStatus)||void 0===_j?void 0:_j.statusDetails,transactionSearch.isReturn),transactionStatus:transactionSearch.objectStatus}}};var orders_service=__webpack_require__("./app/services/orders.service.ts");var transactions_service_get=function(transactionObjectId){return services_api.Ay.request({method:"GET",url:"/transactions/".concat(transactionObjectId)})},transactions_service_emailNotify=function(transactionObjectIds){return services_api.YZ.request({data:{transactions:transactionObjectIds},method:"POST",url:"/email"})},refund=function(transactionObjectId){return services_api.Ay.request({data:{transaction:transactionObjectId},method:"POST",url:"refunds/"})};const hooks_useRefundTransaction=function(_a){var onRefundSuccess=_a.onRefundSuccess,_b=(0,tslib_es6.zs)((0,react.useState)([]),2),transactionsToRefund=_b[0],setTransactionsToRefund=_b[1],_c=(0,hooks_useRequest.A)(),data=_c.data,request=_c.request,onRefundTransaction=function(id){return new Promise((function(resolve,reject){request((function(){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var response,updatedRow,transactionSearch,e_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,4]),[4,refund(id)];case 1:return 201!==(response=_a.sent()).status?(reject(new Error(response.statusText)),[2,null]):[4,(transactionObjectID=id,services_api.YZ.get("transactions_search",{params:{transactionObjectID}}))];case 2:return updatedRow=_a.sent().data,transactionSearch=function(jsonTransaction){var _a,_b,_c,_d;return{addressReturn:Address.rS(jsonTransaction.address_return),addressTo:Address.rS(jsonTransaction.address_to),commercialInvoiceUrl:jsonTransaction.commercial_invoice_url,createdBy:getTransactionCreatedBy(jsonTransaction.created_by),customsNote:jsonTransaction.customs_note,eta:jsonTransaction.eta,insuranceAmount:jsonTransaction.insurance_amount,insuranceClaimId:jsonTransaction.insurance_claim_id,insuranceCurrency:jsonTransaction.insurance_currency,insuranceProvider:jsonTransaction.insurance_provider,isDownloadable:jsonTransaction.is_downloadable,isRefundable:jsonTransaction.is_refundable,isReturn:jsonTransaction.is_return,messages:(jsonTransaction.messages||[]).map(APIMessage.rS),metadata:jsonTransaction.metadata,notificationEmailFrom:jsonTransaction.notification_email_from,notificationEmailOther:jsonTransaction.notification_email_other,notificationEmailTo:jsonTransaction.notification_email_to,objectCreated:moment_moment(jsonTransaction.object_created),objectId:jsonTransaction.object_id,objectState:jsonTransaction.object_state,objectStatus:jsonTransaction.object_status,objectUpdated:moment_moment(jsonTransaction.object_updated),order:{id:null===(_a=jsonTransaction.order)||void 0===_a?void 0:_a.id,object_id:null===(_b=jsonTransaction.order)||void 0===_b?void 0:_b.object_id,orderNumber:null===(_c=jsonTransaction.order)||void 0===_c?void 0:_c.order_number,status:null===(_d=jsonTransaction.order)||void 0===_d?void 0:_d.status},parcel:jsonTransaction.parcel,pickupDate:jsonTransaction.pickup_date?moment_moment(jsonTransaction.pickup_date):void 0,rate:Rate.Nf(jsonTransaction.rate),refundRequestDate:jsonTransaction.refund_request_date?moment_moment(jsonTransaction.refund_request_date):void 0,submissionDate:jsonTransaction.submission_date,submissionNote:jsonTransaction.submission_note,trackingNumber:jsonTransaction.tracking_number,trackingStatus:jsonTransaction.tracking_status?(0,Track.O)(jsonTransaction.tracking_status):void 0,trackingUrlProvider:jsonTransaction.tracking_url_provider,wasTest:jsonTransaction.was_test}}(updatedRow),resolve(transactionSearch),[2,transactionSearch];case 3:return e_1=_a.sent(),reject(e_1),[2,null];case 4:return[2]}var transactionObjectID}))}))}))}))};return(0,react.useEffect)((function(){data&&(null==onRefundSuccess||onRefundSuccess(data),setTransactionsToRefund([]))}),[data,onRefundSuccess]),{onCancelRefund:(0,react.useCallback)((function(){setTransactionsToRefund([])}),[]),onRefundTransactions:function(ids){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var promises;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return promises=ids.map((function(id){return onRefundTransaction(id)})),[4,Promise.allSettled(promises)];case 1:return[2,_a.sent().reduce((function(acc,result){var _a,_b;if("fulfilled"===result.status)return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},acc),{fulfilled:(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(acc.fulfilled),!1),[result.value],!1)});var cause=result.reason.isAxiosError?null===(_b=null===(_a=result.reason.response)||void 0===_a?void 0:_a.data)||void 0===_b?void 0:_b.detail:result.reason.message;return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},acc),{rejected:(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(acc.rejected),!1),[{errorCause:cause}],!1)})}),{fulfilled:[],rejected:[]})]}}))}))},setTransactionsToRefund,transactionsToRefund}};var node_modules_axios=__webpack_require__("./node_modules/axios/index.js"),axios_default=__webpack_require__.n(node_modules_axios);var util_a,_b,_c;__webpack_require__("./app/utils/tableFiltersTracking.ts"),(util_a={})[Transaction.x8.ERROR]=!0,util_a[Transaction.x8.REFUNDED]=!0,(_b={})[Track.S.PRE_TRANSIT]=!0,_b[Track.S.UNKNOWN]=!0,(_c={})[Track.S.RETURNED]=!0;var RefundModal_styles_templateObject_1,RefundModal_styles_templateObject_2,RefundModal_styles_templateObject_3,RefundModal_styles_templateObject_4,styled=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),Content=(0,styled.Ay)("div")(RefundModal_styles_templateObject_1||(RefundModal_styles_templateObject_1=(0,tslib_es6.ue)(["\n  font-size: 1rem;\n\n  & > label {\n    padding-left: ",";\n  }\n"],["\n  font-size: 1rem;\n\n  & > label {\n    padding-left: ",";\n  }\n"])),shippoTheme.A.spacing(3)),RefundModal_styles_List=(0,styled.Ay)("ul")(RefundModal_styles_templateObject_2||(RefundModal_styles_templateObject_2=(0,tslib_es6.ue)(["\n  list-style: initial;\n  margin-top: 0;\n  padding-left: ",";\n"],["\n  list-style: initial;\n  margin-top: 0;\n  padding-left: ",";\n"])),shippoTheme.A.spacing(3)),RefundModal_styles_ListItem=(0,styled.Ay)("li")(RefundModal_styles_templateObject_3||(RefundModal_styles_templateObject_3=(0,tslib_es6.ue)(["\n  font-weight: ",";\n  line-height: ",";\n\n  &::marker {\n    font-size: 0.7rem;\n  }\n"],["\n  font-weight: ",";\n  line-height: ",";\n\n  &::marker {\n    font-size: 0.7rem;\n  }\n"])),styles_constants.Wy.normal,shippoTheme.A.spacing(3)),RefundModal_styles_Link=(0,styled.Ay)("a")(RefundModal_styles_templateObject_4||(RefundModal_styles_templateObject_4=(0,tslib_es6.ue)(["\n  color: ",";\n"],["\n  color: ",";\n"])),styles_colors.T.accent.foreground.success),providers_selectors=(__webpack_require__("./app/pages/Orders/Blackbeard/types/types.ts"),__webpack_require__("./app/selectors/providers.selectors.ts")),rates_selectors=__webpack_require__("./app/selectors/rates.selectors.ts"),shipments_selectors=__webpack_require__("./app/selectors/shipments.selectors.ts"),mergeNewTransactionIntoOrder=function(orderRowToUpdate,transaction){return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},orderRowToUpdate),{orderData:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},orderRowToUpdate.orderData),{order:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},orderRowToUpdate.orderData.order),{transactions:orderRowToUpdate.orderData.order.transactions.map((function(orderTransaction){return orderTransaction.objectId!==transaction.objectId?orderTransaction:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},orderTransaction),{isDownloadable:transaction.isDownloadable,isRefundable:transaction.isRefundable,objectState:transaction.objectState,objectStatus:transaction.objectStatus})}))})})})},ComposedRefundModal=(0,utils_translate.Tl)("orders")((function(_a){var isOpen=_a.isOpen,onCancel=_a.onCancel,onClose=_a.onClose,onSuccess=_a.onSuccess,ordersGridApiRef=_a.ordersGridApiRef,shipmentsGridApiRef=_a.shipmentsGridApiRef,t=_a.t,transactions=_a.transactions,snackbar=(0,GlobalComponentsProvider.s)().snackbar,onRefundSuccess=(0,react.useCallback)((function(transaction){(null==ordersGridApiRef?void 0:ordersGridApiRef.current)&&function(transaction,ordersGridApi){var orderRowToUpdate=function(orderId,transactionId,ordersGridApi){var splitChildren=ordersGridApi.getRowGroupChildren({groupId:"".concat("auto-generated-row","-null/").concat(orderId)});if(0===splitChildren.length)return ordersGridApi.getRow(orderId);var orderIdToUpdate=splitChildren.find((function(splitId){return ordersGridApi.getRow(splitId).orderData.batchEntry.transactionObjectId===transactionId}));return orderIdToUpdate?ordersGridApi.getRow(orderIdToUpdate):void 0}(transaction.order.object_id,transaction.objectId,ordersGridApi);orderRowToUpdate&&ordersGridApi.updateRows([mergeNewTransactionIntoOrder(orderRowToUpdate,transaction)])}(transaction,ordersGridApiRef.current),(null==shipmentsGridApiRef?void 0:shipmentsGridApiRef.current)&&function(transaction,shipmentsGridApi){shipmentsGridApi.updateRows([types_shipmentTableRow(transaction)])}(transaction,shipmentsGridApiRef.current),null==onSuccess||onSuccess(transaction)}),[ordersGridApiRef,shipmentsGridApiRef,onSuccess]),onRefundTransactions=hooks_useRefundTransaction({onRefundSuccess}).onRefundTransactions,_b=(0,tslib_es6.zs)((0,react.useState)(!1),2),isInsuranceAcknowledged=_b[0],setIsInsuranceAcknowledged=_b[1],_c=(0,tslib_es6.zs)((0,react.useState)(!1),2),isSubmitting=_c[0],setIsSubmitting=_c[1],someHasInsurance=null==transactions?void 0:transactions.some((function(t){return t.hasInsurance})),unrefundableTransactions=null==transactions?void 0:transactions.filter((function(t){return!t.isRefundable})),refundableTransactions=transactions.filter((function(t){return t.isRefundable})),areAllNotRefundable=unrefundableTransactions.length===transactions.length,refundableCount=refundableTransactions.length,isRefundButtonDisabled=(0,react.useMemo)((function(){return!!isSubmitting||(!!areAllNotRefundable||!(!someHasInsurance||isInsuranceAcknowledged))}),[areAllNotRefundable,isInsuranceAcknowledged,isSubmitting,someHasInsurance]),handleClose=onClose,handleCancel=function(){onCancel?onCancel():onClose()};return(0,emotion_react_jsx_runtime_browser_esm.Y)(Dialog_Dialog.l,{actions:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({color:"secondary",onClick:handleCancel,variant:"text"},{children:t("refund.cancel")}),0),(0,emotion_react_jsx_runtime_browser_esm.FD)(Button.A,(0,tslib_es6.Cl)({color:"error",disabled:isRefundButtonDisabled,onClick:function(){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var _a,fulfilled,rejected,errorMessage,error_1,_b,_c;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:if(_d.trys.push([0,2,3,4]),utils_observability.O.startEvent("REFUND_REQUEST"),!transactions.length)throw new Error("Transaction ID is missing");return setIsSubmitting(!0),[4,onRefundTransactions(refundableTransactions.map((function(t){return t.transactionId})))];case 1:if(_a=_d.sent(),fulfilled=_a.fulfilled,null==(rejected=_a.rejected)?void 0:rejected.length)throw errorMessage=t("refund.result.error",{count:rejected.length||0}),utils_observability.O.errorEvent("REFUND_REQUEST",{errorCause:rejected.map((function(_a){return _a.errorCause})).join(", "),errorMessage,transactionCount:fulfilled.length}),new Error(errorMessage);return snackbar.addSnackbarAlert(t("refund.result.success",{count:(null==fulfilled?void 0:fulfilled.length)||0}),"success"),handleCancel(),setIsInsuranceAcknowledged(!1),utils_observability.O.successEvent("REFUND_REQUEST",{transactionCount:(null==fulfilled?void 0:fulfilled.length)||0}),[3,4];case 2:return error_1=_d.sent(),snackbar.addSnackbarAlert(error_1.message,"error"),[3,4];case 3:return null===(_c=null===(_b=null==shipmentsGridApiRef?void 0:shipmentsGridApiRef.current)||void 0===_b?void 0:_b.setSelectionModel)||void 0===_c||_c.call(_b,[]),setIsSubmitting(!1),[7];case 4:return[2]}}))}))},sx:{gap:shippoTheme.A.spacing(2)}},{children:[isSubmitting&&(0,emotion_react_jsx_runtime_browser_esm.Y)(CircularProgress.A,{size:"small",sx:{color:"inherit"}}),(0,emotion_react_jsx_runtime_browser_esm.Y)("span",{children:t("refund.request",{count:refundableCount})})]}),1)],content:(0,emotion_react_jsx_runtime_browser_esm.FD)(Content,{children:[unrefundableTransactions.length>0?(0,emotion_react_jsx_runtime_browser_esm.FD)(Alert.A,(0,tslib_es6.Cl)({severity:"warning",sx:{marginBottom:"1rem"}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("strong",{children:t("refund.nonRefundable.itemsSelected",{count:unrefundableTransactions.length})})," ",t("refund.nonRefundable.message",{count:unrefundableTransactions.length})]})):null,(0,emotion_react_jsx_runtime_browser_esm.FD)(RefundModal_styles_List,(0,tslib_es6.Cl)({style:{marginBottom:someHasInsurance?shippoTheme.A.spacing(3):0}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(RefundModal_styles_ListItem,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(utils_translate.x6,{components:[(0,emotion_react_jsx_runtime_browser_esm.Y)(RefundModal_styles_Link,(0,tslib_es6.Cl)({href:"https://support.goshippo.com/hc/en-us/articles/201772785",rel:"noreferrer noopener",target:"_blank"},{children:"0"}),0)],i18nKey:"refund.bullets.0"})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(RefundModal_styles_ListItem,{children:t("refund.bullets.1")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(RefundModal_styles_ListItem,{children:t("refund.bullets.2")})]})),someHasInsurance&&(0,emotion_react_jsx_runtime_browser_esm.Y)(FormControlLabel.A,{control:(0,emotion_react_jsx_runtime_browser_esm.Y)(Checkbox_Checkbox.A,{checked:isInsuranceAcknowledged,onChange:function(){return setIsInsuranceAcknowledged((function(v){return!v}))}}),label:t("refund.insuranceAcknowledge")})]}),onClose:handleClose,open:!!isOpen,title:t("refund.title")})}));const All_RefundModal=ComposedRefundModal;var ModalAction;!function(ModalAction){ModalAction.EMAIL="EMAIL",ModalAction.REFUND="REFUND",ModalAction.RETURN="RETURN"}(ModalAction||(ModalAction={}));var ModalContainer=(0,emotion_styled_browser_esm.A)(Modal.A.Container)(TransactionModal_templateObject_1||(TransactionModal_templateObject_1=(0,tslib_es6.ue)(["\n  border-radius: 4px;\n"],["\n  border-radius: 4px;\n"]))),ModalHeader=(0,emotion_styled_browser_esm.A)("header")(TransactionModal_templateObject_2||(TransactionModal_templateObject_2=(0,tslib_es6.ue)(["\n  font-size: 24px;\n  border-bottom: 1px solid ",";\n  padding: 15px 20px;\n"],["\n  font-size: 24px;\n  border-bottom: 1px solid ",";\n  padding: 15px 20px;\n"])),styles_colors.T.gray50),ModalBody=(0,emotion_styled_browser_esm.A)(Modal.A.Body)(TransactionModal_templateObject_3||(TransactionModal_templateObject_3=(0,tslib_es6.ue)(["\n  padding: 20px 25px;\n"],["\n  padding: 20px 25px;\n"]))),ModalFooter=(0,emotion_styled_browser_esm.A)(Modal.A.Footer)(TransactionModal_templateObject_4||(TransactionModal_templateObject_4=(0,tslib_es6.ue)(["\n  display: flex;\n  justify-content: flex-end;\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  overflow: hidden;\n"],["\n  display: flex;\n  justify-content: flex-end;\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  overflow: hidden;\n"]))),TransactionProperty=(0,emotion_styled_browser_esm.A)("span")(TransactionModal_templateObject_5||(TransactionModal_templateObject_5=(0,tslib_es6.ue)(["\n  margin-right: 5px;\n  font-size: 12px;\n  width: auto;\n"],["\n  margin-right: 5px;\n  font-size: 12px;\n  width: auto;\n"]))),ServiceLevel=(0,emotion_styled_browser_esm.A)(TransactionProperty)(TransactionModal_templateObject_6||(TransactionModal_templateObject_6=(0,tslib_es6.ue)(["\n  font-weight: ",";\n"],["\n  font-weight: ",";\n"])),styles_constants.Wy.medium),TransactionTable=(0,emotion_styled_browser_esm.A)(components_Table)(TransactionModal_templateObject_7||(TransactionModal_templateObject_7=(0,tslib_es6.ue)(["\n  table-layout: auto;\n"],["\n  table-layout: auto;\n"]))),TransactionModal_TransactionModal=function(_super){function TransactionModal(props){var _this=_super.call(this,props)||this;return _this.renderRows=function(){var tableMessage=0===_this.props.transactions.length?_this.props.t("orders:shipments:noneFound"):void 0;return(0,emotion_react_jsx_runtime_browser_esm.Y)(TransactionTable,{columns:_this.transactionTableColumns,data:_this.props.transactions,message:tableMessage})},_this.setTransaction=function(transaction){_this.setState({selectedTransaction:transaction})},_this.transactionTableColumns=[{cell:function(_a){var data=_a.data;return(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:data.rate.provider,src:data.rate.providerImage75})},header:""},{cell:function(_a){var data=_a.data;return(0,emotion_react_jsx_runtime_browser_esm.Y)(ServiceLevel,{children:data.rate.servicelevelName})},header:""},{cell:function(_a){var data=_a.data;return(0,emotion_react_jsx_runtime_browser_esm.FD)(TransactionProperty,{children:["$",data.rate.amount]})},header:""},{cell:function(_a){var data=_a.data;return data.addressTo?(0,emotion_react_jsx_runtime_browser_esm.FD)(TransactionProperty,{children:[data.addressTo.name,", ",data.addressTo.city]}):null},header:""},{cell:function(_a){var data=_a.data;return(0,emotion_react_jsx_runtime_browser_esm.Y)(TransactionProperty,{children:data.objectCreated.format("L")})},header:""},{cell:function(_a){var data=_a.data;return(0,emotion_react_jsx_runtime_browser_esm.Y)(TransactionProperty,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.ic,(0,tslib_es6.Cl)({href:data.trackingUrlProvider,target:"_blank"},{children:data.trackingNumber}))})},header:""},{cell:function(_a){var data=_a.data;return(0,emotion_react_jsx_runtime_browser_esm.Y)(TransactionModal_TransactionActionButton,{action:_this.props.action,orderId:_this.props.orderId,setTransaction:_this.setTransaction,transaction:data})},header:""}],_this.state={selectedTransaction:null},_this}return(0,tslib_es6.C6)(TransactionModal,_super),TransactionModal.prototype.render=function(){var _this=this,_a=this.props,closeTransactionModal=_a.closeTransactionModal,isOpen=_a.isOpen,ordersGridApiRef=_a.ordersGridApiRef,t=_a.t,selectedTransaction=this.state.selectedTransaction;return selectedTransaction?(0,emotion_react_jsx_runtime_browser_esm.Y)(All_RefundModal,{isOpen:!0,onCancel:closeTransactionModal,onClose:function(){return _this.setTransaction(null)},ordersGridApiRef,transactions:[{hasInsurance:selectedTransaction.rate.insurance,isRefundable:!0,transactionId:selectedTransaction.objectId}]}):(0,emotion_react_jsx_runtime_browser_esm.FD)(ModalContainer,(0,tslib_es6.Cl)({closeOnClickOutside:!0,isOpen,onClose:closeTransactionModal,scrollContent:!0,size:"xl"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ModalHeader,{children:t("orders:shipments:title")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ModalBody,{children:this.renderRows()}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ModalFooter,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Button.vM,(0,tslib_es6.Cl)({onClick:closeTransactionModal},{children:t("orders:phrases:cancel")}))})]}))},TransactionModal}(react.PureComponent);(0,utils_translate.Tl)("orders")(TransactionModal_TransactionModal);var TransactionModal_templateObject_1,TransactionModal_templateObject_2,TransactionModal_templateObject_3,TransactionModal_templateObject_4,TransactionModal_templateObject_5,TransactionModal_templateObject_6,TransactionModal_templateObject_7;var eelPfc_util=__webpack_require__("./app/modules/eelPfc/utils/eelPfc.util.ts"),openLinkInNewTab=function(link){var win=window.open(link,"_blank");win&&win.focus()},navigation_createWindowRef=function(loadingState){try{var windowRef=window.open("","_blank");if(!windowRef)return null;var metaTag=windowRef.document.createElement("meta");return metaTag.name="viewport",metaTag.content="width=device-width, initial-scale=1",windowRef.document.getElementsByTagName("head")[0].appendChild(metaTag),windowRef.document.body.innerHTML=loadingState,windowRef}catch(_){return null}},DropdownListCell=(0,emotion_styled_browser_esm.A)(DropdownList_DropdownList)(OrderActionMenu_templateObject_1||(OrderActionMenu_templateObject_1=(0,tslib_es6.ue)(["\n  justify-content: flex-end;\n"],["\n  justify-content: flex-end;\n"]))),OrderActionMenuComponent=function(_super){function OrderActionMenuComponent(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.addNote=function(){var orderSelection=_this.getSelection();_this.props.openOrderNoteModal(orderSelection)},_this.createAnotherLabel=function(){var _a=_this.props,createAnotherLabel=_a.createAnotherLabel,ordersRenderData=_a.ordersRenderData;_this.getOrderState(ordersRenderData)!==Order.cH.FULFILLED_OUTSIDE_SHIPPO?createAnotherLabel(_this.getSelection()):_this.openOrderScreen()},_this.createLabel=function(){var _a=_this.props,isReadyToCheckout=_a.isReadyToCheckout,isSenderAddressValid=_a.isSenderAddressValid,_b=_a.ordersRenderData,batchEntry=_b.batchEntry,order=_b.order;return isSenderAddressValid?isReadyToCheckout?_this.props.startCheckout(order.objectId,batchEntry.id):_this.openOrderScreen():_this.props.toggleInvalidAddressModal()},_this.createReturnLabel=function(){var _a=_this.props.ordersRenderData,batchEntry=_a.batchEntry,order=_a.order;if(order.transactions.length>0){var transactionId=(null==batchEntry?void 0:batchEntry.transactionObjectId)||order.transactions[order.transactions.length-1].objectId;return"".concat("https://dev-qa.shippodev.com","/user/orders/fulfill/").concat(order.objectId,"/return_of/").concat(transactionId)}return"".concat("https://dev-qa.shippodev.com","/user/orders/fulfill/").concat(order.objectId,"/return/")},_this.downloadCommercialInvoice=function(){var commercialInvoiceUrl=_this.findCommercialInvoiceUrl();commercialInvoiceUrl&&openLinkInNewTab(commercialInvoiceUrl)},_this.downloadPackingSlip=function(){var orderSelection=_this.getSelection(),windowRef=navigation_createWindowRef(components_HTMLLoadingState);_this.props.getOrderPackingSlip(orderSelection,windowRef),(0,utils.MH)("order_table","packing_slip",orderSelection)},_this.fetchOrderTxns=function(modalAction){modalAction===ModalAction.REFUND&&_this.props.sendGTMEvent("SET_REFUND_STARTED_EVENT");var orderObjectId=_this.props.ordersRenderData.order.objectId;_this.props.openTransactionModal(modalAction,orderObjectId),_this.props.fetchOrderTxns(orderObjectId)},_this.findCommercialInvoiceUrl=function(){var _a,txns=_this.props.ordersRenderData.order.transactions,txnId=null===(_a=_this.props.ordersRenderData.batchEntry)||void 0===_a?void 0:_a.transactionObjectId,thisTransaction=txns.find((function(txn){return txn.objectId===txnId}));return null==thisTransaction?void 0:thisTransaction.commercialInvoiceUrl},_this.getAllLabels=function(){var orderSelection=_this.getSelection();_this.props.getAllLabels(orderSelection)},_this.getOrderActions=function(){var actions=[],_a=_this.props,isReadyToCheckout=_a.isReadyToCheckout,ordersRenderData=_a.ordersRenderData,t=_a.t,orderState=_this.getOrderState(ordersRenderData),kind=ordersRenderData.kind,order=ordersRenderData.order,isEligibleForPartialFulfillment=(0,Order.FC)(order),isPartialChildKind="partial-child"===kind,returnAction=_this.props.isSenderAddressValid?{href:_this.createReturnLabel()}:{onClick:_this.stopPropagationAction(_this.props.toggleInvalidAddressModal)},createLabel={onClick:_this.stopPropagationAction(_this.createLabel),tagName:"orders-create-label",text:t(isReadyToCheckout?"orders:actions:single:buy":"orders:actions:single:createLabel")},printLabel={onClick:_this.stopPropagationAction(_this.printLabel),tagName:"orders-download-label",text:t("orders:actions:single:download")},printLabels={onClick:_this.stopPropagationAction(_this.getAllLabels),tagName:"orders-download-label",text:t("orders:actions:single:download")},addPackingSlipNote={onClick:_this.stopPropagationAction(_this.addNote),tagName:"orders-add-note",text:t("orders:actions:single:addNote")},createAnotherLabel={onClick:_this.stopPropagationAction(_this.createAnotherLabel),tagName:"orders-create-another-label",text:t("orders:actions:single:createAnother")},createReturnLabel=(0,tslib_es6.Cl)({tagName:"orders-create-standalone-return",text:t("orders:actions:single:createReturn")},returnAction),downloadPackingSlip={onClick:_this.stopPropagationAction(_this.downloadPackingSlip),tagName:"",text:t("orders:actions:single:downloadSlip")},downloadCommercialInvoice={onClick:_this.stopPropagationAction(_this.downloadCommercialInvoice),tagName:"orders-download-commercial-invoice",text:t("orders:actions:single:downloadCommercialInvoice")},sendNotificationEmail={onClick:_this.stopPropagationAction(_this.fetchOrderTxns.bind(_this,ModalAction.EMAIL)),tagName:"orders-send-notification",text:t("orders:actions:single:sendEmail")},refundLabel={onClick:_this.stopPropagationAction(_this.fetchOrderTxns.bind(_this,ModalAction.REFUND)),tagName:"orders-refund-label",text:t("orders:actions:single:refundLabel")},refundLabels={onClick:_this.stopPropagationAction(_this.fetchOrderTxns.bind(_this,ModalAction.REFUND)),tagName:"orders-refund-label",text:t("orders:actions:single:refundLabels")},returnLabels={onClick:_this.stopPropagationAction(_this.fetchOrderTxns.bind(_this,ModalAction.RETURN)),tagName:"orders-create-standalone-return",text:t("orders:actions:single:createReturn")},hideOrderOption={onClick:_this.stopPropagationAction(_this.hideOrder),tagName:order.hidden?"orders-unhide-order":"orders-hide-order",text:order.hidden?t("orders:actions:single:unhide"):t("orders:actions:single:hide")},splitOrder={onClick:_this.stopPropagationAction(_this.splitOrder),tagName:"order-split",text:t("orders:actions:single:splitOrder")},shouldShowDownloadCommercialInvoice=_this.findCommercialInvoiceUrl();switch(orderState){case Order.cH.REFUNDED:actions=(0,tslib_es6.fX)([createAnotherLabel],(0,tslib_es6.zs)(isPartialChildKind?[]:[hideOrderOption]),!1);break;case Order.cH.REFUND_REJECTED:case Order.cH.REFUND_PENDING:actions=(0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)([sendNotificationEmail],(0,tslib_es6.zs)(isPartialChildKind?[]:[createReturnLabel]),!1),[createAnotherLabel],!1),(0,tslib_es6.zs)(shouldShowDownloadCommercialInvoice?[downloadCommercialInvoice]:[]),!1),(0,tslib_es6.zs)(isPartialChildKind?[]:[hideOrderOption]),!1);break;case Order.cH.FULFILLED_OUTSIDE_SHIPPO:actions=(0,tslib_es6.fX)((0,tslib_es6.fX)([createAnotherLabel],(0,tslib_es6.zs)(isPartialChildKind?[]:[createReturnLabel]),!1),(0,tslib_es6.zs)(isPartialChildKind?[]:[hideOrderOption]),!1);break;case Order.cH.FULFILLED_SINGLE_LABEL:actions=(0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)([sendNotificationEmail,refundLabel,downloadPackingSlip,addPackingSlipNote],(0,tslib_es6.zs)(isPartialChildKind?[]:[createReturnLabel]),!1),[createAnotherLabel],!1),(0,tslib_es6.zs)(shouldShowDownloadCommercialInvoice?[downloadCommercialInvoice]:[]),!1),(0,tslib_es6.zs)(isPartialChildKind?[]:[hideOrderOption]),!1);break;case Order.cH.FULFILLED_MULTIPLE_LABELS:actions=(0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)([sendNotificationEmail,refundLabels,downloadPackingSlip,addPackingSlipNote],(0,tslib_es6.zs)(isPartialChildKind?[]:[returnLabels]),!1),[createAnotherLabel],!1),(0,tslib_es6.zs)(shouldShowDownloadCommercialInvoice?[downloadCommercialInvoice]:[]),!1),(0,tslib_es6.zs)(isPartialChildKind?[]:[hideOrderOption]),!1);break;case Order.cH.PARTIALLY_FULFILLED_SINGLE_LABEL:actions=(0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)([createLabel,printLabel,sendNotificationEmail,refundLabel,downloadPackingSlip,addPackingSlipNote],(0,tslib_es6.zs)(isPartialChildKind?[]:[createReturnLabel]),!1),[createAnotherLabel],!1),(0,tslib_es6.zs)(shouldShowDownloadCommercialInvoice?[downloadCommercialInvoice]:[]),!1),(0,tslib_es6.zs)(isPartialChildKind?[]:[hideOrderOption]),!1);break;case Order.cH.PARTIALLY_FULFILLED_SINGLE_REFUND:actions=(0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)([createLabel,printLabel,sendNotificationEmail,downloadPackingSlip,addPackingSlipNote],(0,tslib_es6.zs)(isPartialChildKind?[]:[createReturnLabel]),!1),[createAnotherLabel],!1),(0,tslib_es6.zs)(shouldShowDownloadCommercialInvoice?[downloadCommercialInvoice]:[]),!1),(0,tslib_es6.zs)(isPartialChildKind?[]:[hideOrderOption]),!1);break;case Order.cH.PARTIALLY_FULFILLED_MULTIPLE_LABELS:actions=(0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)((0,tslib_es6.fX)([createLabel,printLabels,sendNotificationEmail,refundLabels,downloadPackingSlip,addPackingSlipNote],(0,tslib_es6.zs)(isPartialChildKind?[]:[returnLabels]),!1),[createAnotherLabel],!1),(0,tslib_es6.zs)(shouldShowDownloadCommercialInvoice?[downloadCommercialInvoice]:[]),!1),(0,tslib_es6.zs)(isPartialChildKind?[]:[hideOrderOption]),!1);break;case Order.cH.CANCELLED:actions=(0,tslib_es6.fX)([],(0,tslib_es6.zs)(isPartialChildKind?[]:[hideOrderOption]),!1);break;case Order.cH.NOT_FULFILLED:actions=(0,tslib_es6.fX)((0,tslib_es6.fX)([downloadPackingSlip,addPackingSlipNote],(0,tslib_es6.zs)(isPartialChildKind?[]:[hideOrderOption]),!1),(0,tslib_es6.zs)(isEligibleForPartialFulfillment?[splitOrder]:[]),!1)}return actions},_this.getOrderState=function(ordersRenderData){var order=ordersRenderData.order;if("partial-child"===ordersRenderData.kind){var batchEntry_1=ordersRenderData.batchEntry;if(!batchEntry_1.transactionObjectId)return Order.cH.NOT_FULFILLED;var transaction=order.transactions.find((function(t){return t.objectId===batchEntry_1.transactionObjectId}));return(null==transaction?void 0:transaction.status)===Transaction.x8.REFUNDPENDING?Order.cH.REFUND_PENDING:transaction&&(null==transaction?void 0:transaction.status)===Transaction.x8.SUCCESS?Order.cH.FULFILLED_SINGLE_LABEL:Order.cH.NOT_FULFILLED}return(0,Order.AU)(order)},_this.getPrimaryActionMetadata=function(){var onPrimaryActionClick,primaryActionText,primaryActionPendoTag,_a=_this.props,isReadyToCheckout=_a.isReadyToCheckout,isSenderAddressValid=_a.isSenderAddressValid,needNewRates=_a.needNewRates,order=_a.ordersRenderData.order,t=_a.t;return onPrimaryActionClick=needNewRates?_this.stopPropagationAction(_this.openOrderScreen):isSenderAddressValid||(0,Order.Dd)(order)?_this.stopPropagationAction(_this.createLabel):_this.stopPropagationAction(_this.openOrderScreen),needNewRates?(primaryActionText=t("orders:actions:single:viewOrder"),primaryActionPendoTag="orders-edit-label"):isReadyToCheckout?(primaryActionText=t("orders:actions:single:buy"),primaryActionPendoTag="orders-buy-label"):(primaryActionText=t("orders:actions:single:viewOrder"),primaryActionPendoTag="orders-edit-label"),[onPrimaryActionClick,primaryActionText,primaryActionPendoTag]},_this.getPrimaryButtonType=function(){switch(_this.getOrderState(_this.props.ordersRenderData)){case Order.cH.REFUNDED:case Order.cH.REFUND_REJECTED:case Order.cH.REFUND_PENDING:case Order.cH.FULFILLED_OUTSIDE_SHIPPO:case Order.cH.CANCELLED:case Order.cH.FULFILLED_SINGLE_LABEL:case Order.cH.FULFILLED_MULTIPLE_LABELS:return components_Button.EY.GreyPrimaryAlternative;case Order.cH.NOT_FULFILLED:case Order.cH.PARTIALLY_FULFILLED_SINGLE_LABEL:case Order.cH.PARTIALLY_FULFILLED_SINGLE_REFUND:case Order.cH.PARTIALLY_FULFILLED_MULTIPLE_LABELS:return components_Button.EY.Primary}},_this.getSecondaryButtonType=function(){switch(_this.getOrderState(_this.props.ordersRenderData)){case Order.cH.REFUNDED:case Order.cH.REFUND_REJECTED:case Order.cH.REFUND_PENDING:case Order.cH.FULFILLED_OUTSIDE_SHIPPO:case Order.cH.CANCELLED:case Order.cH.FULFILLED_SINGLE_LABEL:case Order.cH.FULFILLED_MULTIPLE_LABELS:return components_Button.EY.GreyPrimaryAlternative;case Order.cH.NOT_FULFILLED:case Order.cH.PARTIALLY_FULFILLED_SINGLE_LABEL:case Order.cH.PARTIALLY_FULFILLED_SINGLE_REFUND:case Order.cH.PARTIALLY_FULFILLED_MULTIPLE_LABELS:return components_Button.EY.Primary}},_this.getSelection=function(){var _a,batchEntry=_this.props.ordersRenderData.batchEntry;return(_a={})[_this.props.ordersRenderData.order.objectId]=batchEntry?[batchEntry.id]:[],_a},_this.hideOrder=function(){_this.props.hideOrder(_this.props.ordersRenderData.order.objectId)},_this.openLabelDownloadBlockedErrorDialog=function(){return _this.props.showErrorDialog({closeButtonText:"Close",messages:[_this.props.t("orders:downloadLabel:error:fraud")]})},_this.openOrderScreen=function(){var _a=_this.props.ordersRenderData,batchEntry=_a.batchEntry,order=_a.order,url="/orders/".concat(order.objectId);batchEntry&&(url="".concat(url,"/shipments/").concat(batchEntry.id)),_this.props.history.push(url)},_this.printLabel=function(){var _a=_this.props,defaultLabelFormat=_a.defaultLabelFormat,getLabel=_a.getLabel,_b=_a.ordersRenderData,batchEntry=_b.batchEntry,order=_b.order,orderSelection=_this.getSelection();if((0,Order.cs)(order))return getLabel([order.transactions[order.transactions.length-1].objectId],defaultLabelFormat,navigation_createWindowRef(components_HTMLLoadingState)),void(0,utils.MH)("order_table","shipping_label",orderSelection);if(batchEntry&&(0,OrderBatchEntry.xW)(batchEntry)){var partialFulfillmentTransaction=order.transactions.find((function(transaction){return transaction.objectId===batchEntry.transactionObjectId}));if(partialFulfillmentTransaction)return openLinkInNewTab(partialFulfillmentTransaction.labelUrl),void(0,utils.MH)("order_table","shipping_label",orderSelection)}openLinkInNewTab(order.transactions[order.transactions.length-1].labelUrl),(0,utils.MH)("order_table","shipping_label",orderSelection)},_this.renderPrimaryActionComponent=function(){var _a,onPrimaryActionClick,primaryActionText,primaryActionPendoTag,_b=_this.props,batchMode=_b.batchMode,ordersRenderData=_b.ordersRenderData,primaryButtonType=_this.getPrimaryButtonType(),orderState=_this.getOrderState(ordersRenderData),active=[Order.cH.FULFILLED_MULTIPLE_LABELS,Order.cH.FULFILLED_SINGLE_LABEL,Order.cH.NOT_FULFILLED].includes(orderState);switch(orderState){case Order.cH.CANCELLED:primaryActionText=_this.props.t("orders:actions:single:cancelled");break;case Order.cH.REFUNDED:primaryActionText=_this.props.t("orders:actions:single:refunded");break;case Order.cH.REFUND_REJECTED:primaryActionText=_this.props.t("orders:actions:single:refundRejected");break;case Order.cH.REFUND_PENDING:primaryActionText=_this.props.t("orders:actions:single:refundPending");break;case Order.cH.FULFILLED_OUTSIDE_SHIPPO:primaryActionText=_this.props.t("orders:actions:single:fulfilled");break;case Order.cH.FULFILLED_SINGLE_LABEL:_this.props.isUserLabelDownloadBlocked?(onPrimaryActionClick=_this.stopPropagationAction(_this.openLabelDownloadBlockedErrorDialog),primaryActionText="Error",primaryActionPendoTag="orders-download-label-blocked"):(onPrimaryActionClick=_this.stopPropagationAction(_this.printLabel),primaryActionText=_this.props.t("orders:actions:single:download"),primaryActionPendoTag="orders-download-label");break;case Order.cH.FULFILLED_MULTIPLE_LABELS:_this.props.isUserLabelDownloadBlocked?(onPrimaryActionClick=_this.stopPropagationAction(_this.openLabelDownloadBlockedErrorDialog),primaryActionText="Error",primaryActionPendoTag="orders-download-label-blocked"):(onPrimaryActionClick=_this.stopPropagationAction(_this.getAllLabels),primaryActionText=_this.props.t("orders:actions:single:download"),primaryActionPendoTag="orders-download-label");break;case Order.cH.NOT_FULFILLED:case Order.cH.PARTIALLY_FULFILLED_SINGLE_LABEL:case Order.cH.PARTIALLY_FULFILLED_SINGLE_REFUND:case Order.cH.PARTIALLY_FULFILLED_MULTIPLE_LABELS:onPrimaryActionClick=(_a=(0,tslib_es6.zs)(_this.getPrimaryActionMetadata(),3))[0],primaryActionText=_a[1],primaryActionPendoTag=_a[2]}return(0,emotion_react_jsx_runtime_browser_esm.Y)(DropdownList_PrimaryAction,(0,tslib_es6.Cl)({buttonType:primaryButtonType,dataPendo:primaryActionPendoTag,disabled:batchMode||!active,onClick:onPrimaryActionClick},{children:primaryActionText}))},_this.retryShipment=function(){var orderSelection=_this.getSelection();_this.props.retryShipment(orderSelection)},_this.splitOrder=function(){_this.props.openOrderSplitModal(_this.props.ordersRenderData.order.objectId)},_this.stopPropagationAction=function(func){return function(evt){evt.stopPropagation(),func()}},_this}return(0,tslib_es6.C6)(OrderActionMenuComponent,_super),OrderActionMenuComponent.prototype.render=function(){var actions=this.getOrderActions();return(0,emotion_react_jsx_runtime_browser_esm.Y)(DropdownListCell,(0,tslib_es6.Cl)({disabled:this.props.batchMode,primaryActionComponent:this.renderPrimaryActionComponent,triggerButtonType:this.getSecondaryButtonType(),triggerDataE2E:"open-order-action-dropdown"},{children:actions.map((function(option){var tagName=option.tagName,text=option.text,props=(0,tslib_es6.Tt)(option,["tagName","text"]);return(0,emotion_react_browser_esm.n)(DropdownList_DropdownOption,(0,tslib_es6.Cl)({},props,{dataPendo:tagName||void 0,key:text}),text)}))}))},OrderActionMenuComponent}(react.Component),ComposedOrderActionMenu=(0,redux.Zz)((function(WrappedComponent){return function(props){var eelPfcEnabled=(0,useEELPFCRollout.y)();return(0,emotion_react_jsx_runtime_browser_esm.Y)(WrappedComponent,(0,tslib_es6.Cl)({},props,{aesItnFlag:eelPfcEnabled}))}}),(0,es.Ng)((function(){var getDoesBatchEntryNeedNewRates=(0,batch_entry_selectors.Vw)();return function(state,ownProps){var _a,aesItnFlag=ownProps.aesItnFlag,batchEntry=ownProps.ordersRenderData.batchEntry;return{batchMode:!!(0,orders_selectors.Li)(state).length,defaultLabelFormat:(0,user_selectors.Hz)(state),isReadyToCheckout:batchEntry&&(0,batch_entry_composite_selectors.P5)(state,{batchEntryId:batchEntry.id})&&!(0,eelPfc_util.Nn)(batchEntry,null===(_a=(0,batch_entry_composite_selectors.aq)(state,{batchEntryId:batchEntry.id}))||void 0===_a?void 0:_a.provider,aesItnFlag),isSenderAddressValid:(0,user_selectors.Oz)(state),isUserLabelDownloadBlocked:(0,user_selectors.ch)(state),needNewRates:batchEntry&&getDoesBatchEntryNeedNewRates(state,{batchEntryId:batchEntry.id}),packingSlipUrl:(0,orders_selectors.Bq)(state)}}}),(function(dispatch){return{createAnotherLabel:function(orderSelection){return dispatch((0,orders_actions.GT)(orderSelection))},fetchOrderTxns:function(objectId){return dispatch((0,orders_actions.cn)(objectId))},getAllLabels:function(orderSelection){return dispatch((0,orders_actions.fn)(orderSelection))},getLabel:function(transactionIds,labelFormat,windowRef){return dispatch((0,orders_actions.p9)(transactionIds,labelFormat,windowRef))},getOrderPackingSlip:function(orderSelection,windowRef){return dispatch((0,orders_actions.JO)(orderSelection,windowRef,"other"))},openOrderSplitModal:function(orderObjectId){return dispatch((0,orders_actions.gW)(orderObjectId))},retryShipment:function(orderSelection){return dispatch((0,orders_actions.lN)(orderSelection))},sendGTMEvent:function(gtmEventString){return dispatch(sendGTMEvent({eventName:gtmEventString}))},showErrorDialog:function(errorDialogProps){return dispatch(showDialog(errorDialogProps,"error"))},startCheckout:function(orderObjectId,batchEntryId){var _a;return dispatch((0,orders_actions.dT)(((_a={})[orderObjectId]=[batchEntryId],_a)))}}})),(0,utils_translate.Tl)(),react_router.y)(OrderActionMenuComponent);var OrderActionMenu_templateObject_1;const All_OrderActionMenu=ComposedOrderActionMenu;var ParentOrderActionMenu_DropdownListCell=(0,emotion_styled_browser_esm.A)(DropdownList_DropdownList)(ParentOrderActionMenu_templateObject_1||(ParentOrderActionMenu_templateObject_1=(0,tslib_es6.ue)(["\n  justify-content: flex-end;\n"],["\n  justify-content: flex-end;\n"]))),ParentOrderActionMenu=function(_super){function ParentOrderActionMenu(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.createReturnLabel=function(){var order=_this.props.order;return order.transactions.length>0?"".concat("https://dev-qa.shippodev.com","/user/orders/fulfill/").concat(order.objectId,"/return_of/").concat(order.transactions[order.transactions.length-1].objectId):"".concat("https://dev-qa.shippodev.com","/user/orders/fulfill/").concat(order.objectId,"/return/")},_this.fetchOrderTxns=function(modalAction){var orderObjectId=_this.props.order.objectId;_this.props.openTransactionModal(modalAction,orderObjectId),_this.props.fetchOrderTxns(orderObjectId)},_this.hideOrder=function(){_this.props.hideOrder(_this.props.order.objectId)},_this.openOrderScreen=function(){var _a=_this.props,push=_a.history.push,order=_a.order,batchEntry=order.partialFulfillmentRequests[0];push("/orders/".concat(order.objectId,"/shipments/").concat(batchEntry.id))},_this.renderDropdownOption=function(option){var tagName=option.tagName,text=option.text,props=(0,tslib_es6.Tt)(option,["tagName","text"]);return(0,emotion_react_browser_esm.n)(DropdownList_DropdownOption,(0,tslib_es6.Cl)({},props,{dataPendo:tagName,key:text}),text)},_this.renderOrderActionMenu=function(){var _a=_this.props,order=_a.order,t=_a.t,orderState=(0,Order.AU)(order),returnAction=_this.props.isSenderAddressValid?{href:_this.createReturnLabel()}:{onClick:_this.stopPropagationAction(_this.props.toggleInvalidAddressModal)},createReturnLabel=(0,tslib_es6.Cl)({tagName:"orders-create-standalone-return",text:t("orders:actions:single:createReturn")},returnAction),returnLabels={onClick:_this.stopPropagationAction(_this.fetchOrderTxns.bind(_this,ModalAction.RETURN)),tagName:"orders-create-standalone-return",text:t("orders:actions:single:createReturn")},actions=[{onClick:_this.stopPropagationAction(_this.hideOrder),tagName:_this.props.order.hidden?"orders-unhide-order":"orders-hide-order",text:order.hidden?t("orders:actions:single:unhide"):t("orders:actions:single:hide")}];switch(orderState){case Order.cH.REFUND_REJECTED:case Order.cH.REFUND_PENDING:case Order.cH.FULFILLED_SINGLE_LABEL:case Order.cH.FULFILLED_OUTSIDE_SHIPPO:case Order.cH.PARTIALLY_FULFILLED_SINGLE_LABEL:case Order.cH.PARTIALLY_FULFILLED_SINGLE_REFUND:actions.push(createReturnLabel);break;case Order.cH.FULFILLED_MULTIPLE_LABELS:case Order.cH.PARTIALLY_FULFILLED_MULTIPLE_LABELS:actions.push(returnLabels)}return actions.map(_this.renderDropdownOption)},_this.renderPrimaryActionComponent=function(){var t=_this.props.t;return(0,emotion_react_jsx_runtime_browser_esm.Y)(DropdownList_PrimaryAction,(0,tslib_es6.Cl)({buttonType:components_Button.EY.GreyPrimaryAlternative,onClick:_this.stopPropagationAction(_this.openOrderScreen)},{children:t("orders:actions:single:viewOrder")}))},_this.stopPropagationAction=function(func){return function(evt){evt.stopPropagation(),func()}},_this}return(0,tslib_es6.C6)(ParentOrderActionMenu,_super),ParentOrderActionMenu.prototype.render=function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(ParentOrderActionMenu_DropdownListCell,(0,tslib_es6.Cl)({disabled:this.props.batchMode,primaryActionComponent:this.renderPrimaryActionComponent,triggerButtonType:components_Button.EY.GreyPrimaryAlternative},{children:this.renderOrderActionMenu()}))},ParentOrderActionMenu}(react.Component);var ParentOrderActionMenu_templateObject_1;const All_ParentOrderActionMenu=(0,redux.Zz)((0,es.Ng)((function(state){return{batchMode:!!(0,orders_selectors.Li)(state).length,isSenderAddressValid:(0,user_selectors.Oz)(state)}}),(function(dispatch){return{fetchOrderTxns:function(objectId){return dispatch((0,orders_actions.cn)(objectId))}}})),(0,utils_translate.Tl)(),react_router.y)(ParentOrderActionMenu);var SingleOrderActions=function(_super){function SingleOrderActions(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.createLabelLink=function(){var orderObjectId=_this.props.order.objectId;return"".concat("#","/fulfillment/interstitial/").concat(orderObjectId)},_this.createReturnLabel=function(){return _this.props.order.transactions.length>0?"".concat("https://dev-qa.shippodev.com","/user/orders/fulfill/").concat(_this.props.order.objectId,"/return_of/").concat(_this.props.order.transactions[0].objectId):"".concat("https://dev-qa.shippodev.com","/user/orders/fulfill/").concat(_this.props.order.objectId,"/return/")},_this.downloadPackingSlip=function(){var windowRef=navigation_createWindowRef(components_HTMLLoadingState);_this.props.getOrderPackingSlip(_this.props.order.objectId,windowRef)},_this.fetchOrderTxns=function(modalAction){var orderObjectId=_this.props.order.objectId;_this.props.openTransactionModal(modalAction,orderObjectId),_this.props.fetchOrderTxns(orderObjectId)},_this.getAllLabels=function(){_this.props.getAllLabels(_this.props.order.objectId)},_this.getPrimaryButtonType=function(){switch((0,Order.AU)(_this.props.order)){case Order.cH.REFUNDED:case Order.cH.REFUND_REJECTED:case Order.cH.REFUND_PENDING:case Order.cH.FULFILLED_OUTSIDE_SHIPPO:case Order.cH.FULFILLED_SINGLE_LABEL:case Order.cH.FULFILLED_MULTIPLE_LABELS:case Order.cH.CANCELLED:return components_Button.EY.GreyPrimaryAlternative;case Order.cH.NOT_FULFILLED:case Order.cH.PARTIALLY_FULFILLED_SINGLE_LABEL:case Order.cH.PARTIALLY_FULFILLED_SINGLE_REFUND:case Order.cH.PARTIALLY_FULFILLED_MULTIPLE_LABELS:return components_Button.EY.SmallPrimaryExternalLink}},_this.getSecondaryButtonType=function(){switch((0,Order.AU)(_this.props.order)){case Order.cH.REFUNDED:case Order.cH.REFUND_REJECTED:case Order.cH.REFUND_PENDING:case Order.cH.FULFILLED_OUTSIDE_SHIPPO:case Order.cH.FULFILLED_SINGLE_LABEL:case Order.cH.FULFILLED_MULTIPLE_LABELS:case Order.cH.CANCELLED:return components_Button.EY.GreyPrimaryAlternative;case Order.cH.NOT_FULFILLED:case Order.cH.PARTIALLY_FULFILLED_SINGLE_LABEL:case Order.cH.PARTIALLY_FULFILLED_SINGLE_REFUND:case Order.cH.PARTIALLY_FULFILLED_MULTIPLE_LABELS:return components_Button.EY.SmallPrimary}},_this.hideOrder=function(){_this.props.hideOrder(_this.props.order.objectId)},_this.printLabel=function(){var _a,_b,_c=_this.props,defaultLabelFormat=_c.defaultLabelFormat,getLabel=_c.getLabel,order=_c.order;if((0,Order.cs)(order))return getLabel([order.transactions[0].objectId],defaultLabelFormat,navigation_createWindowRef(components_HTMLLoadingState)),void(0,utils.MH)("order_table","shipping_label",(_a={},_a[order.objectId]=[],_a));openLinkInNewTab(order.transactions[0].labelUrl),(0,utils.MH)("order_table","shipping_label",((_b={})[order.objectId]=[],_b))},_this.renderDropdownOption=function(option){var tagName=option.tagName,text=option.text,props=(0,tslib_es6.Tt)(option,["tagName","text"]);return(0,emotion_react_browser_esm.n)(DropdownList_DropdownOption,(0,tslib_es6.Cl)({},props,{dataPendo:tagName,key:text}),text)},_this.renderPrimaryActionComponent=function(){var onPrimaryActionClick,primaryActionText,order=_this.props.order,primaryButtonType=_this.getPrimaryButtonType(),orderState=(0,Order.AU)(order),active=orderState===Order.cH.NOT_FULFILLED;switch(orderState){case Order.cH.CANCELLED:primaryActionText=_this.props.t("orders:actions:single:cancelled");break;case Order.cH.REFUNDED:primaryActionText=_this.props.t("orders:actions:single:refunded");break;case Order.cH.REFUND_REJECTED:primaryActionText=_this.props.t("orders:actions:single:refundRejected");break;case Order.cH.REFUND_PENDING:primaryActionText=_this.props.t("orders:actions:single:refundPending");break;case Order.cH.FULFILLED_OUTSIDE_SHIPPO:case Order.cH.FULFILLED_SINGLE_LABEL:case Order.cH.FULFILLED_MULTIPLE_LABELS:primaryActionText=_this.props.t("orders:actions:single:fulfilled");break;case Order.cH.NOT_FULFILLED:case Order.cH.PARTIALLY_FULFILLED_SINGLE_LABEL:case Order.cH.PARTIALLY_FULFILLED_SINGLE_REFUND:case Order.cH.PARTIALLY_FULFILLED_MULTIPLE_LABELS:onPrimaryActionClick=_this.props.isSenderAddressValid||(0,Order.Dd)(order)?_this.createLabelLink():_this.stopPropagationAction(_this.props.toggleInvalidAddressModal),primaryActionText=_this.props.t("orders:actions:single:createLabel")}var props="string"==typeof onPrimaryActionClick?{href:onPrimaryActionClick}:{onClick:onPrimaryActionClick};return(0,emotion_react_jsx_runtime_browser_esm.Y)(DropdownList_PrimaryAction,(0,tslib_es6.Cl)({buttonType:primaryButtonType},props,{dataPendo:active?"orders-create-label":"",disabled:!active},{children:primaryActionText}))},_this.renderSingleOrderActionsList=function(){var actions=[],_a=_this.props,order=_a.order,t=_a.t,orderState=(0,Order.AU)(order),conditionalProps=_this.props.isSenderAddressValid?{createAnother:{href:_this.createLabelLink()},createReturn:{href:_this.createReturnLabel()}}:{createAnother:{onClick:_this.stopPropagationAction(_this.props.toggleInvalidAddressModal)},createReturn:{onClick:_this.stopPropagationAction(_this.props.toggleInvalidAddressModal)}},printLabel={onClick:_this.stopPropagationAction(_this.printLabel),tagName:"orders-download-label",text:t("orders:actions:single:printLabel")},printLabels={onClick:_this.stopPropagationAction(_this.getAllLabels),tagName:"orders-download-label",text:t("orders:actions:single:printLabels")},createAnotherLabel=(0,tslib_es6.Cl)({tagName:"orders-create-another-label",text:t("orders:actions:single:createAnother")},conditionalProps.createAnother),createReturnLabel=(0,tslib_es6.Cl)({tagName:"orders-create-standalone-return",text:t("orders:actions:single:createReturn")},conditionalProps.createReturn),downloadPackingSlip={onClick:_this.stopPropagationAction(_this.downloadPackingSlip),tagName:"orders-download-packing-slip",text:t("orders:actions:single:downloadSlip")},sendNotificationEmail={onClick:_this.stopPropagationAction(_this.fetchOrderTxns.bind(_this,ModalAction.EMAIL)),tagName:"orders-send-notification",text:t("orders:actions:single:sendEmail")},refundLabel={onClick:_this.stopPropagationAction(_this.fetchOrderTxns.bind(_this,ModalAction.REFUND)),tagName:"orders-refund-label",text:t("orders:actions:single:refundLabel")},refundLabels={onClick:_this.stopPropagationAction(_this.fetchOrderTxns.bind(_this,ModalAction.REFUND)),tagName:"orders-refund-label",text:t("orders:actions:single:refundLabels")},returnLabels={onClick:_this.stopPropagationAction(_this.fetchOrderTxns.bind(_this,ModalAction.RETURN)),tagName:"orders-create-standalone-return",text:t("orders:actions:single:createReturn")},hideOrderOption={onClick:_this.stopPropagationAction(_this.hideOrder),tagName:_this.props.order.hidden?"orders-unhide-order":"orders-hide-order",text:order.hidden?t("orders:actions:single:unhide"):t("orders:actions:single:hide")};switch(orderState){case Order.cH.REFUNDED:actions=[createAnotherLabel,hideOrderOption];break;case Order.cH.REFUND_REJECTED:case Order.cH.REFUND_PENDING:actions=[sendNotificationEmail,downloadPackingSlip,createReturnLabel,createAnotherLabel,hideOrderOption];break;case Order.cH.FULFILLED_OUTSIDE_SHIPPO:actions=[downloadPackingSlip,createAnotherLabel,createReturnLabel,hideOrderOption];break;case Order.cH.FULFILLED_SINGLE_LABEL:actions=[printLabel,sendNotificationEmail,refundLabel,downloadPackingSlip,createReturnLabel,createAnotherLabel,hideOrderOption];break;case Order.cH.FULFILLED_MULTIPLE_LABELS:actions=[printLabels,sendNotificationEmail,refundLabels,downloadPackingSlip,returnLabels,createAnotherLabel,hideOrderOption];break;case Order.cH.PARTIALLY_FULFILLED_SINGLE_LABEL:actions=[printLabel,sendNotificationEmail,refundLabel,downloadPackingSlip,createReturnLabel,createAnotherLabel,hideOrderOption];break;case Order.cH.PARTIALLY_FULFILLED_SINGLE_REFUND:actions=[printLabel,sendNotificationEmail,downloadPackingSlip,createReturnLabel,createAnotherLabel,hideOrderOption];break;case Order.cH.PARTIALLY_FULFILLED_MULTIPLE_LABELS:actions=[printLabels,sendNotificationEmail,refundLabels,downloadPackingSlip,returnLabels,createAnotherLabel,hideOrderOption];break;case Order.cH.CANCELLED:case Order.cH.NOT_FULFILLED:actions=[downloadPackingSlip,hideOrderOption]}return actions.map(_this.renderDropdownOption)},_this.stopPropagationAction=function(func){return function(evt){evt.stopPropagation(),func()}},_this}return(0,tslib_es6.C6)(SingleOrderActions,_super),SingleOrderActions.prototype.render=function(){var triggerButtonType=this.getSecondaryButtonType();return(0,emotion_react_jsx_runtime_browser_esm.Y)(DropdownList_DropdownList,(0,tslib_es6.Cl)({primaryActionComponent:this.renderPrimaryActionComponent,triggerButtonType},{children:this.renderSingleOrderActionsList()}))},SingleOrderActions}(react.Component),ComposedSingleOrderActions=(0,redux.Zz)((0,es.Ng)((function(state){return{defaultLabelFormat:(0,user_selectors.Hz)(state),isSenderAddressValid:(0,user_selectors.Oz)(state),packingSlipUrl:(0,orders_selectors.Bq)(state)}}),(function(dispatch){return{fetchOrderTxns:function(objectId){return dispatch((0,orders_actions.cn)(objectId))},getAllLabels:function(objectId){var _a;return dispatch((0,orders_actions.fn)(((_a={})[objectId]=[],_a)))},getLabel:function(transactionIds,labelFormat,windowRef){return dispatch((0,orders_actions.p9)(transactionIds,labelFormat,windowRef))},getOrderPackingSlip:function(objectId,windowRef){var _a;return dispatch((0,orders_actions.JO)(((_a={})[objectId]=[],_a),windowRef,"other"))}}})),(0,utils_translate.Tl)())(SingleOrderActions);const All_SingleOrderActions=ComposedSingleOrderActions;var batchEntryRendering=__webpack_require__("./app/utils/batchEntryRendering.ts"),icon_check_gray=__webpack_require__("./app/assets/icons/icon_check_gray.svg"),CustomerShippingMethod=__webpack_require__("./app/pages/Orders/All/CustomerShippingMethod/index.ts"),CustomsDeclaration=__webpack_require__("./app/types/CustomsDeclaration.ts"),types_ServiceLevel=__webpack_require__("./app/types/ServiceLevel.ts"),orderValidation=__webpack_require__("./app/utils/orderValidation.ts"),refresh_gray=__webpack_require__("./app/assets/icons/refresh/refresh_gray.svg"),refresh_green=__webpack_require__("./app/assets/icons/refresh/refresh_green.svg");const components_RefreshButton=function(props){var children=props.children,dataAnalytics=props.dataAnalytics,disabled=props.disabled,isRefreshing=props.isRefreshing,onClick=props.onClick,disabledOrRefreshing=disabled||isRefreshing,imgSource=disabledOrRefreshing?refresh_gray:refresh_green,iconStyling="h-5 mr-1".concat(isRefreshing?" animate-spin":""),containerStyling="flex items-center border-none bg-transparent p-0 focus:outline-none h-full ".concat(disabledOrRefreshing?"cursor-not-allowed":"cursor-pointer");return(0,emotion_react_jsx_runtime_browser_esm.FD)("button",(0,tslib_es6.Cl)({className:containerStyling,"data-analytics":dataAnalytics,disabled,onClick},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"",className:iconStyling,src:imgSource}),children]}))};var hooks_useRefreshRates=__webpack_require__("./app/pages/Orders/Blackbeard/hooks/hooks/useRefreshRates.ts"),ComposedRefreshRatesButton=(0,utils_translate.Tl)("orders")((function(_a){var children=_a.children,dataAnalytics=_a.dataAnalytics,orderSelection=_a.orderSelection,t=_a.t,_b=(0,hooks_useRefreshRates.A)(orderSelection),batchEntries=_b.batchEntries,handleRefresh=_b.handleRefresh,isRefreshing=_b.isRefreshing;return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:batchEntries.length>0?(0,emotion_react_jsx_runtime_browser_esm.Y)(components_RefreshButton,(0,tslib_es6.Cl)({dataAnalytics,disabled:isRefreshing,isRefreshing,onClick:handleRefresh},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex flex-col items-start"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({disabled:isRefreshing},{children:t(isRefreshing?"orders:calculateRates:rates:refreshing":"orders:calculateRates:rates:refresh")})),children]}))})):null})}));const Addons_RefreshRatesButton=ComposedRefreshRatesButton;var question_circle_gray=__webpack_require__("./app/assets/icons/question_circle_gray.svg"),question_circle_yellow=__webpack_require__("./app/assets/icons/question_circle_yellow.svg"),FlexContainer=__webpack_require__("./app/components/Layout/FlexContainer.tsx"),Message=__webpack_require__("./app/components/MessageBox/Message.tsx"),fetchShipment=function(shipmentId,trackingReference){return{shipmentId,trackingReference,type:constants.t.SHIPMENT_FETCH}},fetchShipmentRatesSuccess=function(shipmentId,payload,trackingReference){return{payload,shipmentId,trackingReference,type:constants.t.SHIPMENT_FETCH_SUCCESS}},retryAutoSelectRates=function(){return{type:constants.t.RETRY_AUTO_SELECT_RATES}},selectRate=function(shipmentObjectId,rateObjectId,userTriggered,trackingReference,orderSelection,serviceLevelToken,accountObjectId){return void 0===userTriggered&&(userTriggered=!0),{payload:{accountObjectId,orderSelection,rateObjectId,serviceLevelToken,shipmentObjectId,trackingReference,userTriggered},type:constants.t.RATE_SELECT}},clearRates=function(shipmentIds){return{payload:{shipmentIds},type:constants.t.RATE_CLEAR}},useObserver=function(){var _a=(0,tslib_es6.zs)((0,react.useState)(!1),2),isIntersecting=_a[0],setIsIntersecting=_a[1],_b=(0,tslib_es6.zs)((0,react.useState)(null),2),currentElement=_b[0],setCurrentElement=_b[1],handleRef=(0,react.useCallback)((function(instance){return setCurrentElement(instance)}),[setCurrentElement]);return(0,react.useEffect)((function(){if(currentElement){var observer=new IntersectionObserver((function(entry){setIsIntersecting(entry[0]&&entry[0].isIntersecting)}));return observer.observe(currentElement),function(){observer.disconnect()}}}),[currentElement]),[isIntersecting,handleRef]},Gradient=(0,emotion_styled_browser_esm.A)("div")(GradientWrapper_templateObject_1||(GradientWrapper_templateObject_1=(0,tslib_es6.ue)(["\n  position: absolute;\n  height: 50px;\n  width: 100%;\n  pointer-events: none;\n  left: 0;\n  background: linear-gradient(180deg, "," 0%, rgba(255, 255, 255, 0) 100%);\n  border-radius: 6px;\n\n  ","\n"],["\n  position: absolute;\n  height: 50px;\n  width: 100%;\n  pointer-events: none;\n  left: 0;\n  background: linear-gradient(180deg, "," 0%, rgba(255, 255, 255, 0) 100%);\n  border-radius: 6px;\n\n  ","\n"])),styles_constants.Tj.white,(function(props){return props.bottom?"\n        bottom: 0;\n        transform: matrix(1, 0, 0, -1, 0, 0);\n      ":props.top?"\n        top: 0;\n        transform: matrix(-1, 0, 0, 1, 0, 0);\n      ":void 0}));const GradientWrapper_GradientWrapper=function(_a){var children=_a.children,_b=(0,tslib_es6.zs)(useObserver(),2),isAtTop=_b[0],topObservableRef=_b[1],_c=(0,tslib_es6.zs)(useObserver(),2),isAtBottom=_c[0],bottomObservableRef=_c[1];return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{ref:topObservableRef}),!isAtTop&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Gradient,{top:!0}),children,(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{ref:bottomObservableRef}),!isAtBottom&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Gradient,{bottom:!0})]})};var GradientWrapper_templateObject_1;const components_GradientWrapper=GradientWrapper_GradientWrapper;var components_Icon=__webpack_require__("./app/components/Icon/index.ts"),SelectableCard=(0,emotion_styled_browser_esm.A)("div")(SelectableCard_templateObject_1||(SelectableCard_templateObject_1=(0,tslib_es6.ue)(["\n  cursor: pointer;\n  background-color: ",";\n  /* the 1px right/left margin is a bit of a hack to\n     prevent the outset box-shadow from being cut off if\n     our designs change to have selected and unselected\n     borders have the same thickness we should revert this change */\n  margin: 8px ",";\n  ",";\n  min-width: 20.25rem;\n  ","\n  border-radius: 4px;\n\n  @media screen and (min-width: ","px) {\n    :hover {\n      box-shadow:\n        0px 2px 4px rgba(0, 0, 0, 0.16),\n        0px 4px 6px rgba(0, 0, 0, 0.16);\n      ","\n    }\n  }\n"],["\n  cursor: pointer;\n  background-color: ",";\n  /* the 1px right/left margin is a bit of a hack to\n     prevent the outset box-shadow from being cut off if\n     our designs change to have selected and unselected\n     borders have the same thickness we should revert this change */\n  margin: 8px ",";\n  ",";\n  min-width: 20.25rem;\n  ","\n  border-radius: 4px;\n\n  @media screen and (min-width: ","px) {\n    :hover {\n      box-shadow:\n        0px 2px 4px rgba(0, 0, 0, 0.16),\n        0px 4px 6px rgba(0, 0, 0, 0.16);\n      ","\n    }\n  }\n"])),(function(_a){return _a.isSelected?styles_constants.zC.accent.background.success:styles_constants.Tj.white}),(function(_a){return _a.isSelected?"0px":"1px"}),(function(_a){return _a.responsiveWidth?"width: 100%":"width: auto"}),(function(_a){var isSelected=_a.isSelected,light=_a.light;return isSelected?"border: 2px solid ".concat(light?styles_constants.Tj.forest600:styles_constants.zC.accent.foreground.success,";"):"box-shadow: 0 0 0 1px ".concat(styles_constants.zC.borders,"; border: 1px solid transparent;")}),responsive.P.Mobile,(function(_a){return _a.isSelected?"":"border-color: ".concat(styles_constants.zC.borders,";")}));const ServiceLevel_SelectableCard=SelectableCard;var SelectableCard_templateObject_1,ServiceLevelNameContainer=(0,emotion_styled_browser_esm.A)("div")(ServiceLevelName_templateObject_1||(ServiceLevelName_templateObject_1=(0,tslib_es6.ue)(["\n  font-size: 1rem;\n  line-height: 1.5rem;\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n\n  > :not(:last-child) {\n    margin-right: 8px;\n  }\n"],["\n  font-size: 1rem;\n  line-height: 1.5rem;\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n\n  > :not(:last-child) {\n    margin-right: 8px;\n  }\n"]))),ServiceLevelText=(0,emotion_styled_browser_esm.A)("span")(ServiceLevelName_templateObject_2||(ServiceLevelName_templateObject_2=(0,tslib_es6.ue)(["\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n  display: -webkit-inline-box;\n  -webkit-box-orient: vertical;\n"],["\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n  display: -webkit-inline-box;\n  -webkit-box-orient: vertical;\n"])));const ServiceLevel_ServiceLevelName=function(_a){var isSelected=_a.isSelected,name=_a.name;return(0,emotion_react_jsx_runtime_browser_esm.Y)(ServiceLevelText,(0,tslib_es6.Cl)({className:"align-middle leading-5 ".concat(isSelected?"font-bold":""),title:name},{children:name}))};var ServiceLevelName_templateObject_1,ServiceLevelName_templateObject_2,ServiceLevelRateWrapper_Wrapper=emotion_styled_browser_esm.A.div(ServiceLevelRateWrapper_templateObject_1||(ServiceLevelRateWrapper_templateObject_1=(0,tslib_es6.ue)(["\n  min-height: 72px;\n  color: ",";\n  font-size: 14px;\n  font-weight: ",";\n  cursor: pointer;\n  padding: 0 16px;\n"],["\n  min-height: 72px;\n  color: ",";\n  font-size: 14px;\n  font-weight: ",";\n  cursor: pointer;\n  padding: 0 16px;\n"])),styles_constants.Tj.fontColor,styles_constants.Wy.normal);const ServiceLevel_ServiceLevelRateWrapper=function(_a){var children=_a.children,className=_a.className,dataAnalytics=_a.dataAnalytics,dataCarrier=_a.dataCarrier,dataE2E=_a.dataE2E,isTest=_a.isTest,onClick=_a.onClick;return(0,emotion_react_jsx_runtime_browser_esm.Y)(ServiceLevelRateWrapper_Wrapper,(0,tslib_es6.Cl)({className,"data-analytics":dataAnalytics,"data-carrier":dataCarrier,"data-e2e":dataE2E,"data-type":isTest?"test-rate":"live-rate",onClick,role:"button"},{children}))};var ServiceLevelRateWrapper_templateObject_1,TagContainer=(0,emotion_styled_browser_esm.A)("span")(AccountNicknameTag_templateObject_1||(AccountNicknameTag_templateObject_1=(0,tslib_es6.ue)(["\n  display: inline-flex;\n  color: ",";\n  background-color: ",";\n  padding: 3px 4px;\n  border-radius: 4px;\n  font-size: 10px;\n  line-height: 10px;\n"],["\n  display: inline-flex;\n  color: ",";\n  background-color: ",";\n  padding: 3px 4px;\n  border-radius: 4px;\n  font-size: 10px;\n  line-height: 10px;\n"])),styles_constants.Tj.white,styles_constants.Tj.gray400),AccountNicknameTag_TextContainer=(0,emotion_styled_browser_esm.A)("span")(AccountNicknameTag_templateObject_2||(AccountNicknameTag_templateObject_2=(0,tslib_es6.ue)(["\n  max-width: 56px;\n  display: inline-block;\n  vertical-align: middle;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"],["\n  max-width: 56px;\n  display: inline-block;\n  vertical-align: middle;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"]))),AccountNicknameTag=function(props){var nickname=props.nickname,t=props.t,_a=(0,tslib_es6.zs)(react.useState(null),2),element=_a[0],setElement=_a[1],_b=(0,tslib_es6.zs)(react.useState(!1),2),isTruncated=_b[0],setIsTruncated=_b[1];react.useEffect((function(){element&&element.offsetWidth<element.scrollWidth&&setIsTruncated(!0)}));var tag=(0,emotion_react_jsx_runtime_browser_esm.Y)(AccountNicknameTag_TextContainer,(0,tslib_es6.Cl)({ref:function(el){setElement(el)}},{children:nickname||t("orders:calculateRates:rates:serviceLevels:accountType.personal")}));return isTruncated?(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({inverted:!0,on:"hover",position:"top center",style:{fontSize:".8125rem"},trigger:tag},{children:nickname||t("orders:calculateRates:rates:serviceLevels:accountType.personal")})):tag};const AccountNicknameTag_AccountNicknameTag=(0,utils_translate.Tl)("orders")((function(props){return(0,emotion_react_jsx_runtime_browser_esm.Y)(TagContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(AccountNicknameTag,(0,tslib_es6.Cl)({},props))})}));var AccountNicknameTag_templateObject_1,AccountNicknameTag_templateObject_2,TestTag=__webpack_require__("./app/components/Tag/TestTag/TestTag.tsx"),ServiceLevelContainer=(0,emotion_styled_browser_esm.A)("div")(NoRateCard_templateObject_1||(NoRateCard_templateObject_1=(0,tslib_es6.ue)(["\n  display: grid;\n  grid-template-columns: 2.5rem 1fr 2rem;\n  grid-gap: 0.5rem;\n  align-items: center;\n  width: 100%;\n"],["\n  display: grid;\n  grid-template-columns: 2.5rem 1fr 2rem;\n  grid-gap: 0.5rem;\n  align-items: center;\n  width: 100%;\n"]))),NoRateCard_IconContainer=(0,emotion_styled_browser_esm.A)("img")(NoRateCard_templateObject_2||(NoRateCard_templateObject_2=(0,tslib_es6.ue)(["\n  width: 1.5rem;\n  height: 1rem;\n"],["\n  width: 1.5rem;\n  height: 1rem;\n"])));const ServiceLevel_NoRateCard=(0,redux.Zz)(react.memo,(0,utils_translate.Tl)("orders"))((function(props){var isSelected=props.isSelected,onServiceLevelSelect=props.onServiceLevelSelect,providerDataset=props.providerDataset,responsiveWidth=props.responsiveWidth,accountObjectId=providerDataset.accountObjectId,isShippoAccount=providerDataset.isShippoAccount,provider=providerDataset.provider,_a=providerDataset.servicelevel,name=_a.name,token=_a.token,handleRateSelect=react.useCallback((function(){onServiceLevelSelect({accountObjectId,token})}),[providerDataset,onServiceLevelSelect]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(ServiceLevel_SelectableCard,(0,tslib_es6.Cl)({isSelected,onClick:function(){return handleRateSelect()},responsiveWidth},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(ServiceLevel_ServiceLevelRateWrapper,(0,tslib_es6.Cl)({className:"flex flex-1 items-center","data-e2e":"no-rate"},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(ServiceLevelContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Icon.kC,{provider}),(0,emotion_react_jsx_runtime_browser_esm.FD)(ServiceLevelNameContainer,(0,tslib_es6.Cl)({className:"w-2/3 p-2"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ServiceLevel_ServiceLevelName,{name}),!isShippoAccount&&(0,emotion_react_jsx_runtime_browser_esm.Y)("span",(0,tslib_es6.Cl)({className:"leading-4"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(AccountNicknameTag_AccountNicknameTag,{nickname:""})}))]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(NoRateCard_IconContainer,{alt:"error",src:question_circle_gray})]})}))}))}));var NoRateCard_templateObject_1,NoRateCard_templateObject_2,fetchable=__webpack_require__("./app/utils/fetchable.ts"),AttributeHeader=(0,emotion_styled_browser_esm.A)("span")(ServiceLevelNoRate_templateObject_1||(ServiceLevelNoRate_templateObject_1=(0,tslib_es6.ue)(["\n  font-size: 0.75rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n  color: ",";\n  margin: 8px 0;\n"],["\n  font-size: 0.75rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n  color: ",";\n  margin: 8px 0;\n"])),styles_constants.Wy.normal,styles_constants.Tj.secondary),getSelectedProviderDataset=function(_a){var accountObject=_a.accountObject,serviceLevel=_a.serviceLevel;if(serviceLevel&&accountObject)return{accountObjectId:accountObject.objectId,isShippoAccount:accountObject.isShippoAccount,provider:accountObject.providerName,providerImage75:accountObject.providerImage75,providerImage200:accountObject.providerImage200,servicelevel:{name:serviceLevel.name,terms:"",token:serviceLevel.token}}};const ServiceLevel_ServiceLevelNoRate=(0,redux.Zz)((0,utils_translate.Tl)("orders"),react_router.y)((function(props){var dispatch=(0,es.wA)(),batchEntry=props.batchEntry,closePopover=props.closePopover,order=props.order,responsiveWidth=props.responsiveWidth,t=props.t,serviceLevelsByAccountRequest=(0,es.d4)(providers_selectors.eA),isServiceLevelsRequestComplete=(0,es.d4)(providers_selectors.X7),activeServiceLevelsMapByAccount=(0,es.d4)(providers_selectors.ig),userDefaultServiceLevel=(0,es.d4)(user_selectors.Fh),handleServiceLevelSelect=react.useCallback((function(_a){var _b,accountObjectId=_a.accountObjectId,token=_a.token,objectID=null==order?void 0:order.objectId,trackingReference=TrackingHelper.U.getTrackingReference(types.Fd.name,"order_details",{rateIds:void 0});if(batchEntry){var orderSelection=((_b={})[null==batchEntry?void 0:batchEntry.orderObjectId]=[null==batchEntry?void 0:batchEntry.id],_b);closePopover&&closePopover(),dispatch(selectRate(objectID,"",!0,trackingReference,orderSelection,token,accountObjectId))}else dispatch((0,orders_actions.YT)(token,objectID,accountObjectId,closePopover))}),[order,batchEntry,closePopover]),getFirstMatchedAccountIdFromToken=function(token){if("success"===(null==serviceLevelsByAccountRequest?void 0:serviceLevelsByAccountRequest.kind)){var accountObject=null==serviceLevelsByAccountRequest?void 0:serviceLevelsByAccountRequest.data.find((function(carrier){return carrier.visibleServiceLevels.find((function(el){return(0,types_ServiceLevel.M7)(el,token)}))}));return null==accountObject?void 0:accountObject.objectId}},getSelectedServiceLevel=function(){var preferredServiceLevelToken=null==batchEntry?void 0:batchEntry.preferredServiceLevelToken;return preferredServiceLevelToken?{accountObjectID:(null==batchEntry?void 0:batchEntry.preferredAccountObjectID)||getFirstMatchedAccountIdFromToken(preferredServiceLevelToken)||"",token:preferredServiceLevelToken||""}:{accountObjectID:(null==userDefaultServiceLevel?void 0:userDefaultServiceLevel.accountId)||getFirstMatchedAccountIdFromToken((null==userDefaultServiceLevel?void 0:userDefaultServiceLevel.token)||"")||"",token:(null==userDefaultServiceLevel?void 0:userDefaultServiceLevel.token)||""}};return(0,emotion_react_jsx_runtime_browser_esm.Y)(react.Fragment,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(components_GradientWrapper,{children:[function(){var _a=getSelectedServiceLevel(),accountObjectID=_a.accountObjectID,token=_a.token;if(accountObjectID&&token&&activeServiceLevelsMapByAccount){var accountObject=activeServiceLevelsMapByAccount[accountObjectID],serviceLevel=null==accountObject?void 0:accountObject.serviceLevels.find((function(service){return token===service.token})),providerDataset=getSelectedProviderDataset({accountObject,serviceLevel});return providerDataset?(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(AttributeHeader,{children:t("orders:calculateRates:rates:serviceLevels:selected")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ServiceLevel_NoRateCard,{isSelected:!0,onServiceLevelSelect:handleServiceLevelSelect,providerDataset,responsiveWidth})]}):""}}(),function(){var _a;if(isServiceLevelsRequestComplete){var serviceLevelsByAccount=null!==(_a=(0,fetchable.Vn)(serviceLevelsByAccountRequest))&&void 0!==_a?_a:[],_b=getSelectedServiceLevel(),accountObjectID_1=_b.accountObjectID,token_1=_b.token;return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(AttributeHeader,{children:t("orders:calculateRates:rates:serviceLevels:allServices")}),serviceLevelsByAccount.map((function(account){return account.visibleServiceLevels.map((function(serviceLevel){var providerDataset=getSelectedProviderDataset({accountObject:account,serviceLevel}),isSelected=accountObjectID_1===account.objectId&&token_1===serviceLevel.token;return providerDataset?(0,emotion_react_jsx_runtime_browser_esm.Y)(ServiceLevel_NoRateCard,{isSelected,onServiceLevelSelect:handleServiceLevelSelect,providerDataset,responsiveWidth},serviceLevel.token):""}))}))]})}}()]})})}));var ServiceLevelNoRate_templateObject_1,Card=(0,emotion_styled_browser_esm.A)("section")(Card_templateObject_1||(Card_templateObject_1=(0,tslib_es6.ue)(["\n  border: 1px solid ",";\n  border-radius: ",";\n  @media screen and (min-width: ","px) {\n    border-radius: 6px;\n  }\n  padding: 24px;\n\n  ","\n"],["\n  border: 1px solid ",";\n  border-radius: ",";\n  @media screen and (min-width: ","px) {\n    border-radius: 6px;\n  }\n  padding: 24px;\n\n  ","\n"])),styles_constants.Tj.greyBorder,(function(props){return props.isAlwaysRounded?"6px":"0px"}),responsive.P.Tablet,(function(props){return props.hasShadow?"box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.15);":""}));const Card_Card=Card;var Card_templateObject_1,Card_templateObject_2,Card_templateObject_3,Card_templateObject_4,Card_templateObject_5,InfoCard=(0,emotion_styled_browser_esm.A)(Card)(Card_templateObject_2||(Card_templateObject_2=(0,tslib_es6.ue)(["\n  margin-bottom: 17px;\n  padding: 18px 21px;\n  font-size: 13px;\n  color: ",";\n  border: 1px solid #e8e395;\n  background-color: #fffced;\n  line-height: 18px;\n"],["\n  margin-bottom: 17px;\n  padding: 18px 21px;\n  font-size: 13px;\n  color: ",";\n  border: 1px solid #e8e395;\n  background-color: #fffced;\n  line-height: 18px;\n"])),styles_constants.Tj.fontColor),InfoCardTitle=(0,emotion_styled_browser_esm.A)("h2")(Card_templateObject_3||(Card_templateObject_3=(0,tslib_es6.ue)(["\n  color: #e8d576;\n  font-size: 13px;\n  font-weight: ",";\n  margin: 0 0 5px 0;\n"],["\n  color: #e8d576;\n  font-size: 13px;\n  font-weight: ",";\n  margin: 0 0 5px 0;\n"])),styles_constants.Wy.medium),GrayInfoCard=((0,emotion_styled_browser_esm.A)(Card)(Card_templateObject_4||(Card_templateObject_4=(0,tslib_es6.ue)(["\n  margin-top: 0px !important;\n  margin-bottom: 2rem;\n  background-color: ",";\n  font-size: 0.875rem;\n  line-height: 1.5rem;\n  font-weight: ",";\n  color: ",";\n  padding: 0.75rem 0.5rem;\n"],["\n  margin-top: 0px !important;\n  margin-bottom: 2rem;\n  background-color: ",";\n  font-size: 0.875rem;\n  line-height: 1.5rem;\n  font-weight: ",";\n  color: ",";\n  padding: 0.75rem 0.5rem;\n"])),styles_constants.Tj.sea25,styles_constants.Wy.normal,styles_constants.Tj.black),(0,emotion_styled_browser_esm.A)(Card)(Card_templateObject_5||(Card_templateObject_5=(0,tslib_es6.ue)(["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 3px;\n  color: ",";\n  padding: 1rem;\n"],["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 3px;\n  color: ",";\n  padding: 1rem;\n"])),styles_constants.Tj.gray25,styles_constants.Tj.gray400,styles_constants.Tj.gray900));const components_Card=Card_Card;var CardSection=(0,emotion_styled_browser_esm.A)("div")(OrderDetails_templateObject_1||(OrderDetails_templateObject_1=(0,tslib_es6.ue)(["\n  color: ",";\n  padding: 0.75rem;\n  margin-bottom: 0.75rem;\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  font-size: 0.8125rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n"],["\n  color: ",";\n  padding: 0.75rem;\n  margin-bottom: 0.75rem;\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  font-size: 0.8125rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n"])),styles_constants.Tj.gray1000,styles_constants.Tj.gray25,styles_constants.Tj.containerBorderColor,styles_constants.Wy.medium),ShippingMethodTitle=(0,emotion_styled_browser_esm.A)("div")(OrderDetails_templateObject_2||(OrderDetails_templateObject_2=(0,tslib_es6.ue)(["\n  font-size: 0.75rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n  margin-bottom: 0.675rem;\n"],["\n  font-size: 0.75rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n  margin-bottom: 0.675rem;\n"])),styles_constants.Wy.normal),ShippingMethodIcon=(0,emotion_styled_browser_esm.A)("img")(OrderDetails_templateObject_3||(OrderDetails_templateObject_3=(0,tslib_es6.ue)(["\n  width: 0.875rem;\n"],["\n  width: 0.875rem;\n"])));const Tabs_OrderDetails=(0,redux.Zz)((0,es.Ng)((function(){var getOrderById=(0,orders_selectors.H4)();return function(state,ownProps){return{order:getOrderById(state,{orderId:ownProps.orderId})}}})),(0,utils_translate.Tl)("orders"))((function(props){var order=props.order,showOrderNotes=props.showOrderNotes,t=props.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[function(){var shippingCost=order.shippingCost,shippingCostCurrency=order.shippingCostCurrency,shippingMethod=order.shippingMethod;if(!shippingCostCurrency||!shippingCost)return null;var isCostValid=!!shippingCost&&"0"!==shippingCost,amountTextWithCurrency=t("translations:currency",{value:{currency_iso:shippingCostCurrency,value:shippingCost}});return(shippingMethod||isCostValid)&&(0,emotion_react_jsx_runtime_browser_esm.FD)(CardSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(ShippingMethodTitle,(0,tslib_es6.Cl)({className:"flex items-center"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ShippingMethodIcon,{alt:"info icon",className:"mr-3",src:icons.G}),t("orders:calculateRates:tabs:shipmentInfo:shippingMethodUppercase")]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"div",variant:"bodyEmphasized"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomerShippingMethod.x,{amountTextWithCurrency,isCostValid,shippingMethod})}))]})}(),!!showOrderNotes&&order.notes&&(0,emotion_react_jsx_runtime_browser_esm.FD)(InfoCard,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(InfoCardTitle,{children:t("orders:all:orderNotes")}),order.notes]})]})}));var OrderDetails_templateObject_1,OrderDetails_templateObject_2,OrderDetails_templateObject_3;const Tabs_Context=react.createContext({});const Tabs_Container=function(props){var value={activeBorderBottom:props.activeBorderBottom,onTabClick:props.onTabClick,selectedTab:props.selectedTab||props.defaultTab};return(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_Context.Provider,(0,tslib_es6.Cl)({value},{children:props.children}))};const Tabs_Content=function(props){return(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_Context.Consumer,{children:function(consumerProps){return react.Children.toArray(props.children).filter((function(child){return child.props.for===consumerProps.selectedTab}))}})};var arrow_left=__webpack_require__("./app/assets/icons/arrow-left.svg"),arrow_right=__webpack_require__("./app/assets/icons/arrow-right.svg"),TabsList_List=(0,emotion_styled_browser_esm.A)("div")(TabsList_templateObject_1||(TabsList_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  padding: 0;\n  margin: 0;\n  ",";\n  ","\n"],["\n  display: flex;\n  padding: 0;\n  margin: 0;\n  ",";\n  ","\n"])),(function(props){return props.hideBorder?"":"border-".concat(props.activeBorderBottom?"bottom":"top",": 1px solid ").concat(styles_constants.Tj.gray50)}),(function(_a){return _a.fullWidth?"width: 100%;":""})),AddOnContainer=emotion_styled_browser_esm.A.div(TabsList_templateObject_2||(TabsList_templateObject_2=(0,tslib_es6.ue)(["\n  padding-top: 0.875rem;\n  padding-bottom: 1rem;\n  margin-left: auto;\n"],["\n  padding-top: 0.875rem;\n  padding-bottom: 1rem;\n  margin-left: auto;\n"])));var TabsList_templateObject_1,TabsList_templateObject_2;const Tabs_TabsList=function(props){var addOn=props.addOn;return(0,emotion_react_jsx_runtime_browser_esm.FD)(TabsList_List,(0,tslib_es6.Cl)({ref:props.tabsListRef},props,{children:[props.children,addOn&&(0,emotion_react_jsx_runtime_browser_esm.Y)(AddOnContainer,{children:addOn})]}))};var ScrollableListContainer=(0,emotion_styled_browser_esm.A)("section")(ScrollableTabsList_templateObject_1||(ScrollableTabsList_templateObject_1=(0,tslib_es6.ue)(["\n  position: relative;\n"],["\n  position: relative;\n"]))),ScrollableList=(0,emotion_styled_browser_esm.A)(Tabs_TabsList)(ScrollableTabsList_templateObject_2||(ScrollableTabsList_templateObject_2=(0,tslib_es6.ue)(["\n  width: 100%;\n  overflow-x: auto;\n  /* hide scrollbar for different browsers */\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"],["\n  width: 100%;\n  overflow-x: auto;\n  /* hide scrollbar for different browsers */\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"]))),TabButton=(0,emotion_styled_browser_esm.A)("button")(ScrollableTabsList_templateObject_3||(ScrollableTabsList_templateObject_3=(0,tslib_es6.ue)(["\n  position: absolute;\n  top: 0;\n  height: 100%;\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  width: 24px;\n"],["\n  position: absolute;\n  top: 0;\n  height: 100%;\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  width: 24px;\n"]))),LeftTabButton=(0,emotion_styled_browser_esm.A)(TabButton)(ScrollableTabsList_templateObject_4||(ScrollableTabsList_templateObject_4=(0,tslib_es6.ue)(["\n  left: 0;\n"],["\n  left: 0;\n"]))),RightTabButton=(0,emotion_styled_browser_esm.A)(TabButton)(ScrollableTabsList_templateObject_5||(ScrollableTabsList_templateObject_5=(0,tslib_es6.ue)(["\n  right: 0;\n"],["\n  right: 0;\n"]))),ScrollableTabsList_Gradient=(0,emotion_styled_browser_esm.A)("div")(ScrollableTabsList_templateObject_6||(ScrollableTabsList_templateObject_6=(0,tslib_es6.ue)(["\n  position: absolute;\n  height: 100%;\n  width: 56px;\n  top: 0;\n  pointer-events: none;\n"],["\n  position: absolute;\n  height: 100%;\n  width: 56px;\n  top: 0;\n  pointer-events: none;\n"]))),RightGradient=(0,emotion_styled_browser_esm.A)(ScrollableTabsList_Gradient)(ScrollableTabsList_templateObject_7||(ScrollableTabsList_templateObject_7=(0,tslib_es6.ue)(["\n  right: 0;\n  background: linear-gradient(\n    90deg,\n    rgba(255, 255, 255, 0.0001) 0%,\n    "," 100%\n  );\n"],["\n  right: 0;\n  background: linear-gradient(\n    90deg,\n    rgba(255, 255, 255, 0.0001) 0%,\n    "," 100%\n  );\n"])),(function(_a){return _a.gradientColor||styles_constants.Tj.white})),LeftGradient=(0,emotion_styled_browser_esm.A)(ScrollableTabsList_Gradient)(ScrollableTabsList_templateObject_8||(ScrollableTabsList_templateObject_8=(0,tslib_es6.ue)(["\n  left: 0;\n  background: linear-gradient(\n    90deg,\n    rgba(255, 255, 255, 0.0001) 0%,\n    "," 100%\n  );\n  transform: matrix(-1, 0, 0, 1, 0, 0);\n"],["\n  left: 0;\n  background: linear-gradient(\n    90deg,\n    rgba(255, 255, 255, 0.0001) 0%,\n    "," 100%\n  );\n  transform: matrix(-1, 0, 0, 1, 0, 0);\n"])),(function(_a){return _a.gradientColor||styles_constants.Tj.white})),ObserverRight=(0,emotion_styled_browser_esm.A)("div")(ScrollableTabsList_templateObject_9||(ScrollableTabsList_templateObject_9=(0,tslib_es6.ue)(["\n  /* \n    the right observer needs a border\n    in order for iOS safari to see the\n    element being observed, width does\n    not seem to work for some reason\n  */\n  border: 1px solid transparent;\n"],["\n  /* \n    the right observer needs a border\n    in order for iOS safari to see the\n    element being observed, width does\n    not seem to work for some reason\n  */\n  border: 1px solid transparent;\n"])));const ScrollableTabsList_ScrollableTabsList=function(props){var children=props.children,gradientColor=props.gradientColor,scrollingContainerRef=react.useRef(null),_a=(0,tslib_es6.zs)(useObserver(),2),isAtBeginning=_a[0],leftObservableRef=_a[1],_b=(0,tslib_es6.zs)(useObserver(),2),isAtEnd=_b[0],rightObservableRef=_b[1];react.useEffect((function(){if(null!==scrollingContainerRef.current){var activeElement=scrollingContainerRef.current.querySelector(".active");null==activeElement||activeElement.scrollIntoView({inline:"center"})}}),[]);var handleClick=react.useCallback((function(direction){return function(){if(scrollingContainerRef.current){var current=scrollingContainerRef.current;current.scrollLeft+=direction*current.clientWidth}}}),[]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(ScrollableListContainer,{children:[!isAtBeginning&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(LeftGradient,{gradientColor}),(0,emotion_react_jsx_runtime_browser_esm.Y)(LeftTabButton,(0,tslib_es6.Cl)({onClick:handleClick(-1)},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"Scroll left",src:arrow_left})}))]}),(0,emotion_react_jsx_runtime_browser_esm.FD)(ScrollableList,(0,tslib_es6.Cl)({tabsListRef:scrollingContainerRef},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{ref:leftObservableRef}),children,(0,emotion_react_jsx_runtime_browser_esm.Y)(ObserverRight,{ref:rightObservableRef})]})),!isAtEnd&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(RightGradient,{gradientColor}),(0,emotion_react_jsx_runtime_browser_esm.Y)(RightTabButton,(0,tslib_es6.Cl)({onClick:handleClick(1)},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"Scroll right",src:arrow_right})}))]})]})};var ScrollableTabsList_templateObject_1,ScrollableTabsList_templateObject_2,ScrollableTabsList_templateObject_3,ScrollableTabsList_templateObject_4,ScrollableTabsList_templateObject_5,ScrollableTabsList_templateObject_6,ScrollableTabsList_templateObject_7,ScrollableTabsList_templateObject_8,ScrollableTabsList_templateObject_9,baseTabStyle=(0,emotion_react_browser_esm.AH)(Tab_templateObject_1||(Tab_templateObject_1=(0,tslib_es6.ue)(["\n  min-width: 36px;\n  text-align: center;\n\n  padding-top: 0.875rem;\n  padding-bottom: 1rem;\n  display: inline-block;\n  font-size: 0.875rem;\n  line-height: 1.5rem;\n  cursor: pointer;\n  transition: border 0.2s;\n  font-weight: ",";\n\n  :hover {\n    border-color: ",";\n    color: ",";\n  }\n\n  :focus {\n    border-color: ",";\n    color: ",";\n    outline: 0;\n  }\n"],["\n  min-width: 36px;\n  text-align: center;\n\n  padding-top: 0.875rem;\n  padding-bottom: 1rem;\n  display: inline-block;\n  font-size: 0.875rem;\n  line-height: 1.5rem;\n  cursor: pointer;\n  transition: border 0.2s;\n  font-weight: ",";\n\n  :hover {\n    border-color: ",";\n    color: ",";\n  }\n\n  :focus {\n    border-color: ",";\n    color: ",";\n    outline: 0;\n  }\n"])),styles_constants.Wy.normal,styles_constants.Tj.fontColor,styles_constants.Tj.fontColor,styles_constants.Tj.fontColor,styles_constants.Tj.fontColor),Tab=(0,emotion_styled_browser_esm.A)("div")(Tab_templateObject_2||(Tab_templateObject_2=(0,tslib_es6.ue)(["\n  ",";\n  ",";\n  ",";\n  color: ",";\n  border-color: ",";\n"],["\n  ",";\n  ",";\n  ",";\n  color: ",";\n  border-color: ",";\n"])),baseTabStyle,(function(_a){return _a.stretch?"flex: 1":"margin-right: 28px"}),(function(props){return props.activeBorderBottom?"border-bottom: 2px solid":"border-top: 2px solid"}),(function(props){return props.isActive?styles_constants.Tj.fontColor:styles_constants.Tj.secondary}),(function(props){return props.isActive?styles_constants.Tj.fontColor:"transparent"}));const Tab_Tab=function(props){var createOnKeyDown=function(consumerProps){return function(event){event.key===keys.D.Enter&&consumerProps.onTabClick(props.tabKey)}};return(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_Context.Consumer,{children:function(consumerProps){var handleClick=consumerProps.onTabClick?consumerProps.onTabClick.bind(null,props.tabKey):void 0;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Tab,(0,tslib_es6.Cl)({tabIndex:0},props,{activeBorderBottom:consumerProps.activeBorderBottom||props.activeBorderBottom,"data-pendo":props.dataPendo,isActive:props.tabKey===consumerProps.selectedTab,onClick:handleClick,onKeyDown:createOnKeyDown(consumerProps),ref:props.tabRef}))}})};var Tab_templateObject_1,Tab_templateObject_2;const Tabs_Tab=Tab_Tab;const Tabs_TabContent=function(props){return(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({},props.containerProps,{children:props.children}))};var react_router_dom=__webpack_require__("./node_modules/react-router-dom/esm/react-router-dom.js"),StyledNavLink=(0,emotion_styled_browser_esm.A)(react_router_dom.k2)(TabLink_templateObject_1||(TabLink_templateObject_1=(0,tslib_es6.ue)(["\n  ",";\n\n  color: ",";\n  ",";\n  ",";\n  border-color: transparent;\n\n  /* baseTabStyle overrides */\n  min-width: initial;\n  white-space: nowrap;\n  text-decoration: none;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  padding: 16px 12px;\n  ",";\n\n  &.active {\n    ",";\n    color: ",";\n    font-weight: ",";\n  }\n"],["\n  ",";\n\n  color: ",";\n  ",";\n  ",";\n  border-color: transparent;\n\n  /* baseTabStyle overrides */\n  min-width: initial;\n  white-space: nowrap;\n  text-decoration: none;\n  margin: 0;\n  display: flex;\n  align-items: center;\n  padding: 16px 12px;\n  ",";\n\n  &.active {\n    ",";\n    color: ",";\n    font-weight: ",";\n  }\n"])),baseTabStyle,styles_constants.Tj.secondary,(function(props){return props.activeBorderBottom?"border-bottom: 2px solid":"border-top: 2px solid"}),(function(_a){return _a.isActive&&"border-top: 2px solid"}),(function(_a){return _a.hasAddons&&"padding: 16px 8px 16px 16px;"}),(function(props){return props.activeBorderBottom?"border-bottom: 2px solid":"border-top: 2px solid"}),styles_constants.Tj.gray1000,styles_constants.Wy.semiBold);var TabLink_templateObject_1;const components_Tabs={Container:Tabs_Container,Content:Tabs_Content,ScrollableTabsList:ScrollableTabsList_ScrollableTabsList,Tab:Tabs_Tab,TabContent:Tabs_TabContent,TabLink:function(props){var addons=props.addons,children=props.children,AddonComponents=addons,hasAddons=Boolean(addons);return(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledNavLink,(0,tslib_es6.Cl)({},props,{hasAddons},{children:[children,AddonComponents&&(0,emotion_react_jsx_runtime_browser_esm.Y)(AddonComponents,{})]}))},TabsList:Tabs_TabsList};var Recommendations_templateObject_1,signatureConfirmation=__webpack_require__("./app/constants/signatureConfirmation.ts"),OrderTagsProvider=__webpack_require__("./app/contexts/OrderTagsProvider.tsx"),useRecommendations=__webpack_require__("./app/modules/recommendations/hooks/useRecommendations.tsx"),smallerAlertText=(0,emotion_react_browser_esm.AH)(Recommendations_templateObject_1||(Recommendations_templateObject_1=(0,tslib_es6.ue)(["\n  &.MuiAlert-root .MuiAlert-message .MuiAlertTitle-root {\n    font-size: 0.75rem;\n    font-style: normal;\n    font-weight: 700;\n  }\n"],["\n  &.MuiAlert-root .MuiAlert-message .MuiAlertTitle-root {\n    font-size: 0.75rem;\n    font-style: normal;\n    font-weight: 700;\n  }\n"]))),Recommendations=function(_a){var _b=_a.inlineAlert,inlineAlert=void 0!==_b&&_b,onOrderUpdate=_a.onOrderUpdate,orderId=_a.orderId,parcel=_a.parcel,show=_a.show,t=_a.t,_c=(0,useRecommendations.GI)(show?orderId:void 0),applyRecommendation=_c.applyRecommendation,dismissRecommendation=_c.dismissRecommendation,hasRecommendations=_c.hasRecommendations,ordersToUpdateCount=_c.ordersToUpdateCount,parcelName=function(parcel){if(parcel)return parcel.carrierParcelTemplate?parcel.carrierParcelTemplate.name:parcel.userParcelTemplate?parcel.userParcelTemplate.name:void 0}(parcel),addSnackbarActionAlert=(0,GlobalComponentsProvider.s)().snackbar.addSnackbarActionAlert,applyRecs=(0,react.useCallback)((function(){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var recApplyRes,orderUpdateCount;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:if(!parcel)return[2];_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,applyRecommendation(parcel)];case 2:return recApplyRes=_a.sent(),orderUpdateCount=recApplyRes.data.length,addSnackbarActionAlert({autoHideDuration:6e3,message:t("orders:recommendations:successSnackbarMessage",{orderUpdateCount}),severity:"success"}),onOrderUpdate&&onOrderUpdate(recApplyRes.data),[3,4];case 3:return _a.sent(),addSnackbarActionAlert({autoHideDuration:6e3,message:t("orders:recommendations:failureSnackbarMessage"),severity:"error"}),[3,4];case 4:return[2]}}))}))}),[parcel,applyRecommendation,addSnackbarActionAlert,onOrderUpdate]);return show&&parcelName&&orderId&&hasRecommendations?(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Alert.A,{action:(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({direction:"row",spacing:2,sx:{alignItems:"center",justifyContent:"space-between",width:"100%"}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({onClick:dismissRecommendation,size:inlineAlert?"small":"medium",sx:{flex:1},variant:"text"},{children:t("orders:recommendations:dismiss")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({color:"secondary",onClick:applyRecs,size:inlineAlert?"small":"medium",sx:{flex:1},variant:"outlined"},{children:t("orders:recommendations:updateOrders")}))]})),css:inlineAlert?smallerAlertText:void 0,severity:"info",title:t("orders:recommendations:alertCopy",{count:ordersToUpdateCount,parcelName}),variant:inlineAlert?"inline":"standard"})}):null},businessRules=__webpack_require__("./app/utils/businessRules.ts"),orders_batch_actions=__webpack_require__("./app/actions/orders-batch.actions.ts"),AddressValidationContext=__webpack_require__("./app/components/AddressValidation/context/AddressValidationContext.tsx"),AddressValidation_utils=__webpack_require__("./app/components/AddressValidation/utils.ts");const Anchor_Anchor=(0,emotion_styled_browser_esm.A)("div")(Anchor_templateObject_1||(Anchor_templateObject_1=(0,tslib_es6.ue)(["\n  display: block;\n  position: relative;\n  top: -75px;\n  visibility: hidden;\n"],["\n  display: block;\n  position: relative;\n  top: -75px;\n  visibility: hidden;\n"])));var Anchor_templateObject_1,ShipmentInfoCard_CardSection=(0,emotion_styled_browser_esm.A)(components_Card)(ShipmentInfoCard_templateObject_1||(ShipmentInfoCard_templateObject_1=(0,tslib_es6.ue)(["\n  margin: 16px 0;\n  padding: 12px 16px;\n  background-color: ",";\n\n  @media screen and (min-width: ","px) {\n    border-radius: 6px;\n  }\n\n  @media (max-width: ","px) {\n    border-left: none;\n    border-right: none;\n  }\n"],["\n  margin: 16px 0;\n  padding: 12px 16px;\n  background-color: ",";\n\n  @media screen and (min-width: ","px) {\n    border-radius: 6px;\n  }\n\n  @media (max-width: ","px) {\n    border-left: none;\n    border-right: none;\n  }\n"])),styles_constants.Tj.white,responsive.P.Mobile,responsive.P.Tablet),BodyContainer=(0,emotion_styled_browser_esm.A)("div")(ShipmentInfoCard_templateObject_2||(ShipmentInfoCard_templateObject_2=(0,tslib_es6.ue)([""],[""]))),ShipmentInfoCard=function(props){return(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInfoCard_CardSection,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(BodyContainer,{children:props.children})})};const Tabs_ShipmentInfoCard=ShipmentInfoCard;var ShipmentInfoCard_templateObject_1,ShipmentInfoCard_templateObject_2,ShipmentInfoCardTitle_Title=(0,emotion_styled_browser_esm.A)("div")(ShipmentInfoCardTitle_templateObject_1||(ShipmentInfoCardTitle_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  line-height: 1.5rem;\n  font-size: ",";\n  font-weight: ",";\n  margin-bottom: 0.5rem;\n  color: ",";\n  flex-grow: 1;\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  line-height: 1.5rem;\n  font-size: ",";\n  font-weight: ",";\n  margin-bottom: 0.5rem;\n  color: ",";\n  flex-grow: 1;\n"])),(function(_a){return _a.insideTable?"1rem":"0.875rem"}),styles_constants.Wy.medium,(function(_a){return _a.invalid?styles_constants.Tj.dangerRed:styles_constants.Tj.black}));const Tabs_ShipmentInfoCardTitle=function(props){return(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"w-full"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInfoCardTitle_Title,(0,tslib_es6.Cl)({insideTable:props.insideTable,invalid:props.invalid},{children:props.children}))}))};var ShipmentInfoCardTitle_templateObject_1,NameText=(0,emotion_styled_browser_esm.A)("div")(AddressText_templateObject_1||(AddressText_templateObject_1=(0,tslib_es6.ue)(["\n  color: ",";\n  font-size: 0.875rem;\n  line-height: 1.5;\n"],["\n  color: ",";\n  font-size: 0.875rem;\n  line-height: 1.5;\n"])),styles_constants.Tj.black),Text=(0,emotion_styled_browser_esm.A)("div")(AddressText_templateObject_2||(AddressText_templateObject_2=(0,tslib_es6.ue)(["\n  color: ",";\n  font-size: 0.75rem;\n  line-height: 1.25;\n"],["\n  color: ",";\n  font-size: 0.75rem;\n  line-height: 1.25;\n"])),styles_constants.Tj.gray700),ContactContainer=(0,emotion_styled_browser_esm.A)("div")(AddressText_templateObject_3||(AddressText_templateObject_3=(0,tslib_es6.ue)(["\n  display: flex;\n  flex-direction: row;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  font-size: 0.75rem;\n  line-height: 1.25rem;\n  color: ",";\n"],["\n  display: flex;\n  flex-direction: row;\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  font-size: 0.75rem;\n  line-height: 1.25rem;\n  color: ",";\n"])),styles_constants.Tj.rollingStone),ContactLink=(0,emotion_styled_browser_esm.A)(Link.Ot)(AddressText_templateObject_4||(AddressText_templateObject_4=(0,tslib_es6.ue)(["\n  text-decoration: none;\n  font-size: inherit;\n\n  :hover {\n    text-decoration: underline;\n  }\n"],["\n  text-decoration: none;\n  font-size: inherit;\n\n  :hover {\n    text-decoration: underline;\n  }\n"]))),ComposedAddressText=react.memo((function(props){var _a=props.address,city=_a.city,company=_a.company,country=_a.country,email=_a.email,name=_a.name,phone=_a.phone,state=_a.state,zip=_a.zip,stateText=state?"".concat(state," "):"",zipText=country&&"US"===country.iso2?(0,Address.dY)(zip):zip;return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(NameText,(0,tslib_es6.Cl)({"data-e2e":"order-details-".concat(props.addressType,"-address-name"),"data-testid":"order-details-".concat(props.addressType,"-address-name")},{children:company||name})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Text,(0,tslib_es6.Cl)({"data-testid":"order-details-".concat(props.addressType,"-address-text")},{children:[(0,Address.mp)(props.address),props.address&&props.address.street2&&", ".concat(props.address.street2),city?", ".concat(city):"",city&&(stateText||zipText)?", ":"",stateText,stateText&&zipText?" ":"",zipText,(city||stateText||zipText)&&", ",country&&"".concat(country.name)]})),(email||phone)&&(0,emotion_react_jsx_runtime_browser_esm.FD)(ContactContainer,{children:[email&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ContactLink,(0,tslib_es6.Cl)({className:"mr-2",href:"mailto:".concat(email)},{children:email})),phone&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ContactLink,(0,tslib_es6.Cl)({href:"tel:".concat(phone)},{children:phone}))]})]})}));const AddressCard_AddressText=ComposedAddressText;var AddressText_templateObject_1,AddressText_templateObject_2,AddressText_templateObject_3,AddressText_templateObject_4,SecondaryActionLink=(0,emotion_styled_browser_esm.A)(Link.Ay)(AddressCell_templateObject_1||(AddressCell_templateObject_1=(0,tslib_es6.ue)(["\n  color: ",";\n  font-size: 0.875rem;\n  font-weight: ",";\n\n  &:hover {\n    text-decoration: underline;\n  }\n"],["\n  color: ",";\n  font-size: 0.875rem;\n  font-weight: ",";\n\n  &:hover {\n    text-decoration: underline;\n  }\n"])),styles_constants.Tj.gray700,styles_constants.Wy.normal),MultipleAddressesText=emotion_styled_browser_esm.A.div(AddressCell_templateObject_2||(AddressCell_templateObject_2=(0,tslib_es6.ue)(["\n  color: ",";\n  font-size: 0.8125rem;\n  font-weight: ",";\n  margin: 1rem 0 0.5rem;\n"],["\n  color: ",";\n  font-size: 0.8125rem;\n  font-weight: ",";\n  margin: 1rem 0 0.5rem;\n"])),styles_constants.Tj.gray700,styles_constants.Wy.normal),ComposedAddressCell=react.memo((0,utils_translate.Tl)()((function(_a){var _b=_a.canEditAddress,canEditAddress=void 0===_b||_b,_c=_a.dataAnalyticsBase,dataAnalyticsBase=void 0===_c?"":_c,hideUseAsReturnCheckbox=_a.hideUseAsReturnCheckbox,isMultipleAddresses=_a.isMultipleAddresses,kind=_a.kind,orderSelection=_a.orderSelection,t=_a.t,addressBookContext=react.useContext(context.o),address=addressBookContext.selectedAddresses[kind],dispatch=(0,es.wA)(),addressBookName=addressBookContext.addressBookName,combineSenderReturnAddresses=addressBookContext.combineSenderReturnAddresses,openAddressBook=addressBookContext.openAddressBook,openCreateAddress=addressBookContext.openCreateAddress,openEditAddress=addressBookContext.openEditAddress,toggleCombineSenderReturnAddresses=addressBookContext.toggleCombineSenderReturnAddresses,translation=kind===addressBook.y9?"shippingAddress":kind===addressBook.lj?"returnAddress":"recipientAddress",isAddressValid=!!address&&!(0,Address.X2)(address),handleOpenEditAddress=react.useCallback((function(){openEditAddress(kind,orderSelection,isMultipleAddresses)}),[kind,orderSelection,isMultipleAddresses]),handleOpenCreateAddress=react.useCallback((function(){openCreateAddress(kind,orderSelection)}),[kind,orderSelection]),handleOpenAddressBook=react.useCallback((function(){openAddressBook(kind,orderSelection)}),[kind]),addOns=(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex items-center"},{children:[kind!==addressBook.i1&&(0,emotion_react_jsx_runtime_browser_esm.Y)(SecondaryActionLink,(0,tslib_es6.Cl)({className:"mr-4",dataAnalytics:dataAnalyticsBase+(kind===addressBook.y9?"address-sender-select":"address-return-select"),dataPendo:dataAnalyticsBase+(kind===addressBook.y9?"address-sender-select":"address-return-select"),onClick:handleOpenAddressBook},{children:t("orders:address:openAddressBook")})),(address||isMultipleAddresses)&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({dataAnalytics:"".concat(dataAnalyticsBase,"address-").concat(kind,"-edit"),dataPendo:"".concat(dataAnalyticsBase,"address-").concat(kind,"-edit"),disabled:!canEditAddress,onClick:canEditAddress?handleOpenEditAddress:void 0},{children:t("orders:calculateRates:tabs:shipmentInfo:".concat(translation,"Edit"))}))]})),addAddressActionContent="+ ".concat(t("orders:calculateRates:tabs:shipmentInfo:addAddress",{type:t("orders:all:addressType:".concat(kind))}));return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"pb-2 ".concat(kind!==addressBook.i1?"pt-1":"")},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Tabs_ShipmentInfoCardTitle,(0,tslib_es6.Cl)({invalid:!isAddressValid&&!isMultipleAddresses},{children:[t("orders:calculateRates:tabs:shipmentInfo:".concat(translation)),addOns]})),isMultipleAddresses?(0,emotion_react_jsx_runtime_browser_esm.Y)(MultipleAddressesText,{children:t("orders:actions:multi:multipleAddressesSelected")}):(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[address?(0,emotion_react_jsx_runtime_browser_esm.Y)(AddressCard_AddressText,{address,addressType:kind}):(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"flex flex-col items-center my-4"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({dataAnalytics:"".concat(dataAnalyticsBase,"address-").concat(kind,"-add"),onClick:handleOpenCreateAddress},{children:addAddressActionContent}))})),kind===addressBook.y9&&!hideUseAsReturnCheckbox&&(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"mt-2"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Checkbox.Ay,{checked:combineSenderReturnAddresses,dataAnalytics:"".concat(dataAnalyticsBase,"address-sender-as-return"),dataPendo:"address-sender-as-return",disabled:!address,id:"address-sender-as-return",label:t("orders:calculateRates:tabs:shipmentInfo:useAsReturnAddress"),onChange:function(){toggleCombineSenderReturnAddresses();var newCombineValue=!combineSenderReturnAddresses;if(address){address.id&&delete address.id;var trackingReference=TrackingHelper.U.amendTrackingReferenceOrders(TrackingHelper.U.getTrackingReference(types.eJ.name,"order_details",{addressId:void 0,addressType:kind}),Object.keys(orderSelection));(0,utils.Rk)(trackingReference,types.eJ.operations.SAVE_ATTEMPTED,{}),dispatch((0,orders_actions.kR)({address,addressType:addressBook.lj,combineSenderReturnAddresses:newCombineValue,createUserAddress:!1,orderSelection,source:addressBookName,trackingReference}))}}})}))]})]}))})));const AddressCard_AddressCell=ComposedAddressCell;var AddressCell_templateObject_1,AddressCell_templateObject_2,ComposedAddressCard=(0,react.memo)((function(_a){var combineSenderReturnAddresses=_a.combineSenderReturnAddresses,hasInvalidRecipientAddress=_a.hasInvalidRecipientAddress,onHandleInvalidRecipient=_a.onHandleInvalidRecipient,orderSelection=_a.orderSelection,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(ShipmentInfoCard,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Anchor_Anchor,{id:"addressCard"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(AddressCard_AddressCell,{canEditAddress:!hasInvalidRecipientAddress,kind:"to",orderSelection}),hasInvalidRecipientAddress&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Alert.A,(0,tslib_es6.Cl)({action:(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({color:"secondary",onClick:onHandleInvalidRecipient,size:"small",variant:"text"},{children:t("orders:address.updateAddress")})),"aria-label":t("orders:table.errors.invalidRecipientAddress"),severity:"warning",sx:{margin:shippoTheme.A.spacing(1,0,2)}},{children:t("orders:table.errors.invalidRecipientAddress")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(BorderLine,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(AddressCard_AddressCell,{kind:"sender",orderSelection}),!combineSenderReturnAddresses&&(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(BorderLine,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(AddressCard_AddressCell,{kind:"return",orderSelection})]})]})}));const AddressCard_AddressCard=ComposedAddressCard;var getAddressBookAddress=function(addresses,lookUpAddress,fallbackAddress){if(!lookUpAddress)return(null==fallbackAddress?void 0:fallbackAddress.id)||null;var addressBookAddress=Object.values(addresses).find((function(address){return(0,Address.fq)(address,lookUpAddress)}));return(null==addressBookAddress?void 0:addressBookAddress.id)||lookUpAddress},ComposedAddressCardContainer=(0,redux.Zz)(components_withAddressBook({appLocation:"order_details",name:"order-screen"}),(0,AddressValidationContext.TM)(),(0,utils_translate.Tl)(["orders"]))((function(_a){var _b,batchEntry=_a.batchEntry,order=_a.order,t=_a.t,_c=(0,react.useContext)(context.o),addresses=_c.addresses,combineSenderReturnAddresses=_c.combineSenderReturnAddresses,initSelectedAddresses=_c.initSelectedAddresses,openEditAddress=_c.openEditAddress,selectAddress=_c.selectAddress,userSenderAddress=(0,es.d4)(user_selectors.GA),userReturnAddress=(0,es.d4)(user_selectors.kQ),dispatch=(0,es.wA)(),displayInvalidImportedAddressModal=(0,AddressValidationContext.iZ)().displayInvalidImportedAddressModal,displayInvalidAddressesFlag=(0,featureflags.u)(featureflags.gH.DISPLAY_INVALID_IMPORTED_ADDRESSES),toAddress=(null==batchEntry?void 0:batchEntry.addressTo)||order.toAddress,addressFrom=(null==batchEntry?void 0:batchEntry.addressFrom)||order.addressFrom,addressReturn=(null==batchEntry?void 0:batchEntry.addressReturn)||order.addressReturn,isAddressValidationEnabled=!!(null==displayInvalidAddressesFlag?void 0:displayInvalidAddressesFlag.enabled),hasInvalidRecipientAddress=!(0,AddressValidation_utils.RH)(toAddress,isAddressValidationEnabled);(0,react.useEffect)((function(){initSelectedAddresses({return:getAddressBookAddress(addresses,addressReturn,userReturnAddress),sender:getAddressBookAddress(addresses,addressFrom,userSenderAddress),to:toAddress})}),[]),(0,react.useEffect)((function(){addressFrom&&selectAddress("sender",addressFrom)}),[addressFrom]),(0,react.useEffect)((function(){addressReturn&&selectAddress("return",addressReturn)}),[addressReturn]),(0,react.useEffect)((function(){toAddress&&selectAddress("to",toAddress)}),[toAddress]);var orderSelection=((_b={})[order.objectId]=batchEntry?[batchEntry.id]:[],_b);return(0,emotion_react_jsx_runtime_browser_esm.Y)(AddressCard_AddressCard,{combineSenderReturnAddresses,hasInvalidRecipientAddress,onHandleInvalidRecipient:function(){var batchEntryId=null==batchEntry?void 0:batchEntry.id;batchEntryId&&displayInvalidImportedAddressModal({address:toAddress,callback:function(address){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){return(0,tslib_es6.YH)(this,(function(_a){return address?(dispatch((0,orders_batch_actions._d)(batchEntryId)),[2]):(openEditAddress("to",orderSelection,!1),[2])}))}))}})},orderSelection,t})}));const AddressCard_container=ComposedAddressCardContainer;var Collapse=__webpack_require__("./node_modules/@goshippo/components/esm/Collapse/Collapse.js"),constants_customsDeclaration=__webpack_require__("./app/constants/customsDeclaration.ts"),ListItemText=("".concat("https://dev-qa.shippodev.com","/pricing"),"".concat("https://dev-qa.shippodev.com","/contact/sales"),__webpack_require__("./node_modules/@goshippo/components/esm/ListItemText/ListItemText.js")),ListItemIcon=__webpack_require__("./node_modules/@goshippo/components/esm/ListItemIcon/ListItemIcon.js"),Check=__webpack_require__("./node_modules/@mui/icons-material/esm/Check.js"),zod=__webpack_require__("./node_modules/@hookform/resolvers/zod/dist/zod.mjs"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.js"),eelPfc_const=__webpack_require__("./app/modules/eelPfc/constants/eelPfc.const.ts"),zod_lib=__webpack_require__("./node_modules/zod/lib/index.mjs"),EEL_PFC_FIELD_SCHEMA=zod_lib.z.enum(["",eelPfc_const.D.AESITN,eelPfc_const.D.NOEEI3037A,eelPfc_const.D.NOEEI3037F,eelPfc_const.D.NOEEI3037H,eelPfc_const.D.NOEEI3036]),EEL_PFC_SCHEMA=zod_lib.z.object({aesItn:zod_lib.z.string().max(100),eelPfc:EEL_PFC_FIELD_SCHEMA}).refine((function(data){var _a;return data.eelPfc!==eelPfc_const.D.AESITN||!!data.aesItn&&!!(null===(_a=data.aesItn)||void 0===_a?void 0:_a.length)}),{message:"This field is required",path:["aesItn"]}).refine((function(data){return!data.eelPfc||data.eelPfc!==eelPfc_const.D.AESITN||!!data.aesItn&&!!data.aesItn.match(/(x|X)\d{14}/)}),{message:"Expected format: X12345678901234",path:["aesItn"]}),aesItnPrefix="orders:eelPfcSection:aesItnTooltip:",AESITNTooltip=function(_a){var t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Tooltip.A,(0,tslib_es6.Cl)({arrow:!1,enterTouchDelay:0,placement:"top",title:(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"p",variant:"captionEmphasized"},{children:t("".concat(aesItnPrefix,"title"))})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"p",variant:"caption"},{children:t("".concat(aesItnPrefix,"description"))})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"p",marginTop:"1rem",variant:"captionEmphasized"},{children:t("orders:eelPfcSection:howShippoHelps")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"p",variant:"caption"},{children:t("".concat(aesItnPrefix,"howDescription"))}))]}),variant:"secondary"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(InfoOutlined.A,{color:"secondary",fontSize:"small",sx:{alignSelf:"center",marginLeft:"0.25rem",marginRight:"-0.25rem"}})}))},List_List=__webpack_require__("./node_modules/@goshippo/components/esm/List/List.js"),esm_ListItem_ListItem=__webpack_require__("./node_modules/@goshippo/components/esm/ListItem/ListItem.js"),exemptionPrefix="orders:eelPfcSection:exemptionTooltip:",ExemptionsTooltip=function(_a){var t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Tooltip.A,(0,tslib_es6.Cl)({arrow:!1,enterTouchDelay:0,placement:"top",title:(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"p",variant:"captionEmphasized"},{children:t("".concat(exemptionPrefix,"title"))})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"p",variant:"caption"},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(List_List.A,(0,tslib_es6.Cl)({sx:{listStyleType:"disc",pl:2}},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(esm_ListItem_ListItem.A,(0,tslib_es6.Cl)({disableGutters:!0,sx:{"&:hover":{backgroundColor:"unset"},display:"list-item",pt:0}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"span",variant:"captionEmphasized"},{children:"NOEEI § 30.37a"})),t("".concat(exemptionPrefix,"noeei3037a"))]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(esm_ListItem_ListItem.A,(0,tslib_es6.Cl)({disableGutters:!0,sx:{"&:hover":{backgroundColor:"unset"},display:"list-item"}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"span",variant:"captionEmphasized"},{children:"NOEEI § 30.36"})),t("".concat(exemptionPrefix,"noeei3036"))]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(esm_ListItem_ListItem.A,(0,tslib_es6.Cl)({disableGutters:!0,sx:{"&:hover":{backgroundColor:"unset"},display:"list-item"}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"span",variant:"captionEmphasized"},{children:"NOEEI § 30.37h"})),t("".concat(exemptionPrefix,"noeei3037h"))]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(esm_ListItem_ListItem.A,(0,tslib_es6.Cl)({disableGutters:!0,sx:{"&:hover":{backgroundColor:"unset"},display:"list-item"}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"span",variant:"captionEmphasized"},{children:"NOEEI 30.37(f)"})),t("".concat(exemptionPrefix,"noeei3037f"))]}))]}))})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"p",marginTop:"0.5rem",variant:"captionEmphasized"},{children:t("orders:eelPfcSection:howShippoHelps")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"white",component:"p",variant:"caption"},{children:t("".concat(exemptionPrefix,"howDescription"))}))]}),variant:"secondary"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(InfoOutlined.A,{color:"secondary",fontSize:"small",sx:{alignSelf:"center",marginLeft:"0.25rem"}})}))},EELPFCSection=function(_a){var defaultValues=_a.defaultValues,eelPfcDecision=_a.eelPfcDecision,handleSubmitForm=_a.handleSubmitForm,isLoading=_a.isLoading,t=_a.t,_b=(0,index_esm.mN)({defaultValues:(0,eelPfc_util._H)(defaultValues,eelPfcDecision),mode:"onBlur",resolver:(0,zod.u)(EEL_PFC_SCHEMA)}),control=_b.control,formState=_b.formState,handleSubmit=_b.handleSubmit,reset=_b.reset,setValue=_b.setValue,watch=_b.watch;(0,react.useEffect)((function(){reset((0,eelPfc_util._H)(defaultValues,eelPfcDecision))}),[defaultValues]);var needsToSaveSuggestion=!(!eelPfcDecision||(null==defaultValues?void 0:defaultValues.eelPfc)||formState.dirtyFields.eelPfc||formState.dirtyFields.aesItn),shouldCertifyExemption=needsToSaveSuggestion&&eelPfcDecision.eelPfc!==eelPfc_const.D.AESITN,shouldShowAESITNHelper=needsToSaveSuggestion&&eelPfcDecision.eelPfc===eelPfc_const.D.AESITN&&eelPfcDecision.aesItn,_c=(0,tslib_es6.zs)((0,react.useState)(!1),2),didCertify=_c[0],setDidCertify=_c[1],eelPfcVal=watch("eelPfc"),aesItnVal=watch("aesItn");return(0,emotion_react_jsx_runtime_browser_esm.Y)("form",(0,tslib_es6.Cl)({onSubmit:handleSubmit((function(data){handleSubmitForm({aesItn:data.eelPfc===eelPfc_const.D.AESITN?data.aesItn:"",eelPfc:data.eelPfc})}))},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({gap:3,mt:3},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({gap:1},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"h2",fontSize:"1rem",variant:"h2"},{children:t("orders:eelPfcSection:title")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"caption"},{children:t("orders:eelPfcSection:description")}))]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({direction:"row",gap:4},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({flexGrow:1,gap:2},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({color:styles_colors.T.text.primary.black,component:"p",display:"flex",flexDirection:"row"},{children:[t("orders:eelPfcSection:aesItnHelper")," ",(0,emotion_react_jsx_runtime_browser_esm.Y)(AESITNTooltip,{t})]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(index_esm.xI,{control,defaultValue:"",name:"aesItn",render:function(_a){var _b,_c,_d,_e,_f,_g=_a.field,onChange=_g.onChange,ref=_g.ref,value=_g.value,rest=(0,tslib_es6.Tt)(_g,["onChange","ref","value"]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(TextField.A,(0,tslib_es6.Cl)({error:Boolean(null===(_b=formState.errors)||void 0===_b?void 0:_b.aesItn),fullWidth:!0,helperText:(null===(_d=null===(_c=formState.errors)||void 0===_c?void 0:_c.aesItn)||void 0===_d?void 0:_d.message)?t(null===(_f=null===(_e=formState.errors)||void 0===_e?void 0:_e.aesItn)||void 0===_f?void 0:_f.message):void 0,inputRef:ref,label:t("orders:eelPfcSection:aesItnLabel"),onChange:function(e){onChange(e),setValue("eelPfc",eelPfc_const.D.AESITN)},required:eelPfcVal===eelPfc_const.D.AESITN,value:value||""},rest))}})]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({flexGrow:1,gap:2},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({color:styles_colors.T.text.primary.black,component:"p",display:"flex",flexDirection:"row"},{children:[t("orders:eelPfcSection:eelPfcHelper")," ",(0,emotion_react_jsx_runtime_browser_esm.Y)(ExemptionsTooltip,{t})]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(index_esm.xI,{control,defaultValue:"",name:"eelPfc",render:function(_a){var _b=_a.field,onChange=_b.onChange,ref=_b.ref,value=_b.value,rest=(0,tslib_es6.Tt)(_b,["onChange","ref","value"]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(TextField.A,(0,tslib_es6.Cl)({SelectProps:{renderValue:function(value){return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:value?(0,eelPfc_util.Vf)(value):""})}},fullWidth:!0,inputProps:{"data-testid":"custom-options-eel-pfc"},inputRef:ref,label:t("orders:eelPfcSection:eelPfcLabel"),onChange:function(e){return e.target?onChange(e.target.value):void 0},required:!aesItnVal,select:!0,value:value?value===eelPfc_const.D.AESITN?"":value:""},rest,{children:eelPfc_const.l.map((function(opt){var isSelected=opt.value===value;if(opt.value!==eelPfc_const.D.AESITN)return(0,emotion_react_jsx_runtime_browser_esm.FD)(MenuItem.A,(0,tslib_es6.Cl)({onClick:function(){return isSelected?setValue("eelPfc",eelPfc_const.D.AESITN,{shouldDirty:!0}):void 0},sx:{justifyContent:"space-between"},value:opt.value},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ListItemText.A,{children:opt.label}),isSelected&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ListItemIcon.A,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Check.A,{color:"secondary"})})]}),opt.value)}))}))}})]}))]})),shouldCertifyExemption&&eelPfcVal&&(0,emotion_react_jsx_runtime_browser_esm.Y)(FormControlLabel.A,{control:(0,emotion_react_jsx_runtime_browser_esm.Y)(Checkbox_Checkbox.A,{checked:didCertify,onChange:function(e){return setDidCertify(e.target.checked)}}),label:t("orders:eelPfcSection:certifyLabel",{exemption:(0,eelPfc_util.Vf)(eelPfcVal)}),sx:{ml:shippoTheme.A.spacing(1)}}),(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({direction:"row",gap:4,sx:{justifyContent:needsToSaveSuggestion?"space-between":"flex-end"}},{children:[needsToSaveSuggestion&&(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({color:styles_colors.T.text.secondary,component:"p",variant:"caption"},{children:[shouldCertifyExemption&&t("orders:eelPfcSection:certifyInfo"),shouldShowAESITNHelper&&t("orders:eelPfcSection:saveAesItn")]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Button.A,(0,tslib_es6.Cl)({disabled:isLoading||!formState.isDirty&&!needsToSaveSuggestion||!formState.isValid||shouldCertifyExemption&&!didCertify,type:"submit"},{children:[isLoading&&(0,emotion_react_jsx_runtime_browser_esm.Y)(CircularProgress.A,{color:"inherit",sx:{marginRight:shippoTheme.A.spacing(1)}}),t("orders:phrases:save")]}))]}))]}))}))},useQuery=__webpack_require__("./node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),putInternationalDefaults=function(data){return services_api.YZ.put("/setting/international",data)},useInternationalDefaults=function(){var _a=(0,useQuery.I)({queryFn:function(){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,services_api.YZ.get("/setting/international")];case 1:return[2,_a.sent().data]}}))}))},queryKey:["internationalDefaults"]});return{data:_a.data,error:_a.error,refetch:_a.refetch,status:_a.status}},CustomsOptionsCard_utils=__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/LabelPurchaseModules/CustomsOptionsCard/utils.js"),deleteCustomsItem=function(orderSelection,initialValues){return{payload:{initialValues,orderSelection},type:constants.t.CUSTOMS_ITEM_DELETE}},editCustomsDeclaration=function(appLocation,orderSelection,customsDeclarationPayload,initialValues,trackingData){return{payload:{appLocation,customsDeclarationPayload,initialValues,orderSelection,trackingData},type:constants.t.CUSTOMS_DECLARATION_UPDATE}},QueryClientProvider=__webpack_require__("./node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),useMutation=__webpack_require__("./node_modules/@tanstack/react-query/build/lib/useMutation.mjs"),useSubmitEELPFC=(__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/LabelPurchaseModules/CustomsOptionsCard/TaxIDTypeOptions.js"),function(order,batchEntry,t){var dispatch=(0,es.wA)(),history=(0,react_router.W6)(),snackbar=(0,GlobalComponentsProvider.s)().snackbar,batchEntryIsLoadingState=(0,es.d4)(batch_entry_selectors.zm),internationalDefaultsData=useInternationalDefaults().data,updateInternationalDefaults=function(){var queryClient=(0,QueryClientProvider.jE)(),_a=(0,useMutation.n)({mutationFn:function(payload){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var data,trackingReference,trackedData;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,putInternationalDefaults(payload)];case 1:return data=_a.sent().data,trackingReference=TrackingHelper.U.getTrackingReference(types.nt.name,"settings",{}),trackedData=(defaults=payload)?{incotermDefault:defaults.settings.incoterm,shipmentPurposeDefault:defaults.settings.purpose,taxIdDefault:!!defaults.settings.tax_id_type||!!defaults.settings.tax_id_number}:{},(0,utils.Id)(trackingReference,types.nt.operations.INTERNATIONAL,trackedData),[2,data]}var defaults}))}))},onSuccess:function(data){return queryClient.setQueryData(["internationalDefaults"],data)}});return{mutateAsync:_a.mutateAsync,status:_a.status}}().mutateAsync,saveDefaultAesItn=(0,react.useCallback)((function(data){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return internationalDefaultsData?internationalDefaultsData.settings.aes_itn?[2]:data.aesItn?[4,updateInternationalDefaults({settings:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},internationalDefaultsData.settings),{aes_itn:data.aesItn})})]:[2]:[2];case 1:return _a.sent(),snackbar.addSnackbarActionAlert({actionFunction:function(){return history.push("/settings/international-defaults")},actionMessage:t("orders:customsOptionsCard:aesItnUpdate:view"),message:t("orders:customsOptionsCard:aesItnUpdate:success"),severity:"success"}),[2]}}))}))}),[internationalDefaultsData,updateInternationalDefaults,snackbar,t,history]),handleSubmitEELPFC=(0,react.useCallback)((function(data){var _a,_b,_c,_d,_e;if(order&&(null==batchEntry?void 0:batchEntry.customsDeclaration)){saveDefaultAesItn(data);var orderSelection=((_a={})[order.objectId]=(null==batchEntry?void 0:batchEntry.id)?[batchEntry.id]:[],_a),newValue=(0,CustomsOptionsCard_utils.U)((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},batchEntry.customsDeclaration),data)),initialValue=(0,CustomsOptionsCard_utils.U)((0,tslib_es6.Cl)({},batchEntry.customsDeclaration));dispatch(editCustomsDeclaration("order_details",orderSelection,newValue,initialValue,{location:schema.ID,recipientCountry:null===(_c=null===(_b=null==batchEntry?void 0:batchEntry.addressTo)||void 0===_b?void 0:_b.country)||void 0===_c?void 0:_c.iso2,senderCountry:null===(_e=null===(_d=null==batchEntry?void 0:batchEntry.addressFrom)||void 0===_d?void 0:_d.country)||void 0===_e?void 0:_e.iso2,transactionId:batchEntry.transactionObjectId||""}))}}),[order,batchEntry,dispatch,saveDefaultAesItn]);return{handleSubmitEELPFC,isLoading:!!order&&batchEntryIsLoadingState[order.objectId]}}),utils_utils=__webpack_require__("./app/utils/utils.ts"),getFormInitialValues=__webpack_require__("./node_modules/redux-form/es/getFormInitialValues.js"),StyledComponents=__webpack_require__("./app/components/Modal/shared/StyledComponents.tsx"),formValueSelector=__webpack_require__("./node_modules/redux-form/es/formValueSelector.js"),Grid=__webpack_require__("./app/components/Layout/Grid.tsx"),TextArea=__webpack_require__("./app/components/TextArea/index.ts");const CustomsDeclarationModal_validate=function(values){var errors={aesItn:"",b13aFilingOption:"",b13aNumber:"",certificate:"",certifySigner:"",contentsExplanation:"",contentsType:"",eelPfc:"",eoriNumber:"",exporterReference:"",id:"",importerReference:"",incoterm:"",invoice:"",isCertify:"",license:"",nonDeliveryOption:"",notes:"",taxIdNumber:"",taxIdType:""};if(values.contentsType||(errors.contentsType=constants_customsDeclaration.Kk.contentsType.required),values.contentsType&&values.contentsType.value===constants_customsDeclaration.fI.OTHER&&(values.contentsExplanation?(0,validations.JT)(1,20,values.contentsExplanation)||(errors.contentsExplanation=constants_customsDeclaration.Kk.contentsExplanation.tooLong):errors.contentsExplanation=constants_customsDeclaration.Kk.contentsExplanation.required),values.exporterReference&&!(0,validations.JT)(0,50,values.exporterReference)&&(errors.exporterReference=constants_customsDeclaration.Kk.exporterReference.tooLong),values.importerReference&&!(0,validations.JT)(0,50,values.importerReference)&&(errors.importerReference=constants_customsDeclaration.Kk.importerReference.tooLong),values.license&&!(0,validations.JT)(0,15,values.license)&&(errors.license=constants_customsDeclaration.Kk.license.tooLong),values.certificate&&!(0,validations.JT)(0,12,values.certificate)&&(errors.certificate=constants_customsDeclaration.Kk.certificate.tooLong),values.certifySigner?(0,validations.JT)(1,100,values.certifySigner)||(errors.certifySigner=constants_customsDeclaration.Kk.certifySigner.tooLong):errors.certifySigner=constants_customsDeclaration.Kk.certifySigner.required,values.eelPfc&&values.eelPfc.value===constants_customsDeclaration.aU.AESITN&&(values.aesItn?(0,validations.JT)(0,15,values.aesItn)?15===values.aesItn.length&&/(x|X)\d{14}/.test(values.aesItn)||(errors.aesItn=constants_customsDeclaration.Kk.aesItn.invalid):errors.aesItn=constants_customsDeclaration.Kk.aesItn.tooLong:errors.aesItn=constants_customsDeclaration.Kk.aesItn.required),values.b13aFilingOption&&values.b13aFilingOption.value!==constants_customsDeclaration.i2.NONE_SELECTED)if(String(values.b13aFilingOption.value)in constants_customsDeclaration.Zq){var _a=constants_customsDeclaration.Zq[String(values.b13aFilingOption.value)],label=_a.label,regex=_a.regex,regexDisplay=_a.regexDisplay;values.b13aNumber?regex.test(values.b13aNumber)||(errors.b13aNumber=constants_customsDeclaration.Kk.b13aNumber.invalid(regexDisplay)):errors.b13aNumber=constants_customsDeclaration.Kk.b13aNumber.required(label)}else errors.b13aFilingOption=constants_customsDeclaration.Kk.b13aFilingOption.invalid;(values.notes&&!(0,validations.JT)(0,200,values.notes)&&(errors.notes=constants_customsDeclaration.Kk.notes.tooLong),values.isCertify||(errors.isCertify=constants_customsDeclaration.Kk.isCertify.required),values.eoriNumber)&&((0,validations.JT)(0,19,values.eoriNumber)||(errors.eoriNumber=constants_customsDeclaration.Kk.eoriNumber.tooLong),new RegExp("^[A-Za-z]{2}[A-Za-z0-9]{6,17}","i").test(values.eoriNumber)||"GBUNREG"===values.eoriNumber||(errors.eoriNumber=constants_customsDeclaration.Kk.eoriNumber.invalid));if(values.taxIdType&&""!==values.taxIdType.value)if(values.taxIdNumber)switch(values.taxIdType.value){case constants_customsDeclaration.Gs.VAT:case constants_customsDeclaration.Gs.IOSS:if((0,validations.JT)(0,constants_customsDeclaration.K4,values.taxIdNumber))new RegExp("^[A-Za-z]{2}[A-Za-z0-9]{2,13}$","i").test(values.taxIdNumber)||(errors.taxIdNumber=constants_customsDeclaration.Kk.taxIdNumber.invalid(values.taxIdType.value));else errors.taxIdNumber=constants_customsDeclaration.Kk.taxIdNumber.tooLong(constants_customsDeclaration.K4);break;case constants_customsDeclaration.Gs.EIN:if((0,validations.JT)(0,constants_customsDeclaration.l_,values.taxIdNumber))new RegExp("^([0-9]{9})$","i").test(values.taxIdNumber)||(errors.taxIdNumber=constants_customsDeclaration.Kk.taxIdNumber.invalid(values.taxIdType.value));else errors.taxIdNumber=constants_customsDeclaration.Kk.taxIdNumber.tooLong(constants_customsDeclaration.l_)}else errors.taxIdNumber=constants_customsDeclaration.Kk.taxIdNumber.required(values.taxIdType.value);return errors};var CustomsDeclarationForm_Row=(0,emotion_styled_browser_esm.A)(Grid.f)(CustomsDeclarationForm_templateObject_1||(CustomsDeclarationForm_templateObject_1=(0,tslib_es6.ue)(["\n  :last-of-type {\n    padding-bottom: 16px;\n  }\n"],["\n  :last-of-type {\n    padding-bottom: 16px;\n  }\n"]))),FormContainer=(0,emotion_styled_browser_esm.A)("div")(CustomsDeclarationForm_templateObject_2||(CustomsDeclarationForm_templateObject_2=(0,tslib_es6.ue)(["\n  overflow: auto;\n  padding: 16px 30px 66px 30px;\n  a {\n    color: ",";\n  }\n\n  @media screen and (min-width: ","px) {\n    padding: 16px 30px 0 30px;\n  }\n"],["\n  overflow: auto;\n  padding: 16px 30px 66px 30px;\n  a {\n    color: ",";\n  }\n\n  @media screen and (min-width: ","px) {\n    padding: 16px 30px 0 30px;\n  }\n"])),styles_constants.Tj.sea700,responsive.P.Mobile),requiredLabelProps={required:!0};const CustomsDeclarationModal_CustomsDeclarationForm=(0,redux.Zz)((0,es.Ng)((function(state,ownProps){var valuesSelector=(0,formValueSelector.A)(constants_form.ZP),customsDeclaration=ownProps.customsDeclaration,initialValues=customsDeclaration?(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},customsDeclaration),{b13aFilingOption:customsDeclaration.b13aFilingOption?options.Ay.customsDeclaration.b13aFilingOptionsMap[customsDeclaration.b13aFilingOption]:null,certifySigner:customsDeclaration.certifySigner?customsDeclaration.certifySigner:ownProps.senderAddressName,contentsType:customsDeclaration.contentsType?options.Ay.customsDeclaration.contentsTypeOptionsMap[customsDeclaration.contentsType]:options.Ay.customsDeclaration.contentsTypeOptionsMap[constants_customsDeclaration.fI.MERCHANDISE],eelPfc:customsDeclaration.eelPfc?options.Ay.customsDeclaration.eelPfcOptionsMap[customsDeclaration.eelPfc]:null,incoterm:customsDeclaration.incoterm?options.Ay.customsDeclaration.incotermOptionsMap[customsDeclaration.incoterm]:options.Ay.customsDeclaration.incotermOptionsMap[constants_customsDeclaration.uF.DDU],nonDeliveryOption:customsDeclaration.nonDeliveryOption?options.Ay.customsDeclaration.nonDeliveryOptionsMap[customsDeclaration.nonDeliveryOption]:options.Ay.customsDeclaration.nonDeliveryOptionsMap[constants_customsDeclaration.kV.RETURN],taxIdType:customsDeclaration.taxIdType?options.Ay.customsDeclaration.taxIdTypeOptionsMap[customsDeclaration.taxIdType]:options.Ay.customsDeclaration.taxIdTypeOptionsMap[""]}):{b13aFilingOption:null,certifySigner:ownProps.senderAddressName,contentsType:options.Ay.customsDeclaration.contentsTypeOptionsMap[constants_customsDeclaration.fI.MERCHANDISE],eelPfc:null,incoterm:options.Ay.customsDeclaration.incotermOptionsMap[constants_customsDeclaration.uF.DDU],nonDeliveryOption:options.Ay.customsDeclaration.nonDeliveryOptionsMap[constants_customsDeclaration.kV.RETURN],taxIdType:options.Ay.customsDeclaration.taxIdTypeOptionsMap[""]};return{formValues:{b13aFilingOption:valuesSelector(state,"b13aFilingOption")||options.Ay.customsDeclaration.b13aFilingOptionsMap[constants_customsDeclaration.i2.NONE_SELECTED],contentsType:valuesSelector(state,"contentsType"),eelPfc:valuesSelector(state,"eelPfc"),incotermSelected:valuesSelector(state,"incoterm"),taxIDTypeSelected:valuesSelector(state,"taxIdType")},initialValues}})),(0,reduxForm.A)({form:constants_form.ZP,submitAsSideEffect:!0,validate:CustomsDeclarationModal_validate}))((function(props){var _a=props.formValues,b13aFilingOption=_a.b13aFilingOption,eelPfc=_a.eelPfc,taxIDTypeSelected=_a.taxIDTypeSelected,showB13A=props.showB13A,showEELPFC=props.showEELPFC,isAesItnSelected=(null==eelPfc?void 0:eelPfc.value)===constants_customsDeclaration.aU.AESITN,isTaxIdSelected=""!==(null==taxIDTypeSelected?void 0:taxIDTypeSelected.value),isB13ANumberInputVisible=(null==b13aFilingOption?void 0:b13aFilingOption.value)!==constants_customsDeclaration.i2.NONE_SELECTED;(0,react.useEffect)((function(){props.submitSucceeded&&props.onClose()}),[props.submitSucceeded,props.onClose]);var taxIdNumberFieldToolTip=(0,react.useMemo)((function(){var _a;switch(null===(_a=props.formValues.taxIDTypeSelected)||void 0===_a?void 0:_a.value){case constants_customsDeclaration.Gs.VAT:return["A VAT (Value-Added Tax) number is a registered tax identification number in tax systems that have a Value-Added Tax."];case constants_customsDeclaration.Gs.IOSS:return["An IOSS VAT (Import One Stop Shop Value-Added Tax) number is a registered tax identification number in EU tax systems that have a Value-Added Tax for imports in EU countries."];case constants_customsDeclaration.Gs.EIN:return["An EIN is a unique nine-digit number that identifies your business for tax purposes in the United States. The EIN will be printed on the Commercial Invoice. Please",(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[" ",(0,emotion_react_jsx_runtime_browser_esm.Y)("strong",{children:"do not"})," "]}),"submit a Social Security Number."];default:return[""]}}),[props.formValues.taxIDTypeSelected]);return(0,emotion_react_jsx_runtime_browser_esm.Y)("form",(0,tslib_es6.Cl)({onSubmit:props.handleSubmit(props.onSubmit)},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(FormContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(CustomsDeclarationForm_Row,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,label:"Purpose of shipment",labelProps:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},requiredLabelProps),{tooltipPosition:"right",tooltipText:"What is the reason for export? For example, is the shipment a sale, a gift, an item for repair, etc."}),name:"contentsType",options:options.Ay.customsDeclaration.contentsTypeOptions,required:!0,responsive:!0,type:"text"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,label:"Incoterm",labelProps:{tooltipPosition:"bottom",tooltipText:"Selection indicates who pays for customs charges (duties & taxes). Default is DDU (Receiver)"},name:"incoterm",options:options.Ay.customsDeclaration.incotermOptions,responsive:!0,type:"text"})}))]}),props.formValues.contentsType&&props.formValues.contentsType.value===constants_customsDeclaration.fI.OTHER&&(0,emotion_react_jsx_runtime_browser_esm.FD)(CustomsDeclarationForm_Row,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:"Content Explanation",labelProps:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},requiredLabelProps),{tooltipPosition:"right",tooltipText:"Describe the type of content"}),name:"contentsExplanation",required:!0,responsive:!0,type:"text"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,{width:"50%"})]}),(0,emotion_react_jsx_runtime_browser_esm.FD)(CustomsDeclarationForm_Row,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:"Exporter reference",labelProps:{tooltipPosition:"right",tooltipText:"Your reference if you are a certified exporter (optional)"},name:"exporterReference",responsive:!0,type:"text"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:"Importer reference",labelProps:{tooltipText:"Your reference if you are a certified importer (optional)"},name:"importerReference",responsive:!0,type:"text"})}))]}),(0,emotion_react_jsx_runtime_browser_esm.FD)(CustomsDeclarationForm_Row,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:"Invoice number",labelProps:{tooltipPosition:"right",tooltipText:"Your invoice number which will be printed on the declaration"},name:"invoice",responsive:!0,type:"text"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,label:"Non-delivery handling",labelProps:{tooltipText:"What should be done when the delivery is not possible? Selecting return might cause additional charges later"},name:"nonDeliveryOption",options:options.Ay.customsDeclaration.nonDeliveryOptions,responsive:!0,type:"text"})}))]}),(0,emotion_react_jsx_runtime_browser_esm.FD)(CustomsDeclarationForm_Row,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:"License",labelProps:{tooltipPosition:"right",tooltipText:"The license identifier you need for some types of shipments. (optional)"},name:"license",responsive:!0,type:"text"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:"Certificate",labelProps:{tooltipText:"The certificate identifier you need for some types of shipments. (optional)"},name:"certificate",responsive:!0,type:"text"})}))]}),(0,emotion_react_jsx_runtime_browser_esm.FD)(CustomsDeclarationForm_Row,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:"EORI Number",labelProps:{tooltipText:"An EORI (Economic Operators Registration Number) is required to move goods into or out of the European Union."},name:"eoriNumber",required:!0,responsive:!0,type:"text"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:"Name of authorized person",labelProps:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},requiredLabelProps),{tooltipText:"The responsible person signing this customs declaration. Must be the one filling it out (required). For USPS this field cannot be changed, it will automatically be set to the sender address' name"}),name:"certifySigner",required:!0,responsive:!0,type:"text"})}))]}),(0,emotion_react_jsx_runtime_browser_esm.FD)("p",(0,tslib_es6.Cl)({className:"m-0"},{children:["Provide IOSS VAT ID if you are shipping to EU through FedEx, UPS, DHL Express, or USPS via PMI or PMEI."," ",(0,emotion_react_jsx_runtime_browser_esm.Y)("a",(0,tslib_es6.Cl)({href:"https://support.goshippo.com/hc/en-us/articles/1260805823509-EORI-TaxID-VAT-IOSS",rel:"noreferrer",target:"_blank"},{children:"Learn more"}))]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(CustomsDeclarationForm_Row,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:isTaxIdSelected?"50%":"100%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,label:"Tax ID Type",labelProps:{tooltipText:"Tax IDs are unique identifiers assigned to a business entity for tax purposes. Examples include EIN (Employer Identification Number), IOSS (Import One Stop Shop) and VAT (Value Added Tax) numbers. Shippo does not accept personally identifying Tax IDs, such as Social Security Numbers."},name:"taxIdType",options:options.Ay.customsDeclaration.taxIdTypeOptions,responsive:!0,type:"text"})})),isTaxIdSelected&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:null==taxIDTypeSelected?void 0:taxIDTypeSelected.value,labelProps:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},requiredLabelProps),{isAutoWidth:!0,tooltipText:taxIdNumberFieldToolTip}),name:"taxIdNumber",required:!0,responsive:!0,type:"text"})}))]}),showEELPFC&&(0,emotion_react_jsx_runtime_browser_esm.FD)(CustomsDeclarationForm_Row,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:isAesItnSelected?"50%":"100%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,label:"EEL / PFC",labelProps:{tooltipPosition:"right",tooltipText:"Exemption or Exclusion Legend (EEL) or a Proof of Filing Citation (PFC). Only required in specific cases (optional). For most merchants, choose NOEEI 30 36 for shipments from the US or CA or NOEEI 30 37(a) for any other shipments from the US"},name:"eelPfc",options:options.Ay.customsDeclaration.eelPfcOptions,responsive:!0,type:"text"})})),isAesItnSelected&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:"AES / ITN",labelProps:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},requiredLabelProps),{tooltipPosition:"right",tooltipText:"The applicable Automated Export System or Internal Transaction Number."}),name:"aesItn",required:!0,responsive:!0,type:"text"})}))]}),showB13A&&(0,emotion_react_jsx_runtime_browser_esm.FD)(CustomsDeclarationForm_Row,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:isB13ANumberInputVisible?"50%":"100%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,label:"B13A Option",labelProps:{tooltipPosition:"right",tooltipText:["B13A Option details are obtained by filing a B13A Canada Export Declaration via the Canadian Export Reporting System (CERS). Optional. ",(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.zN,(0,tslib_es6.Cl)({href:"https://www.cbsa-asfc.gc.ca/export/reporting-declaration-eng.html",rel:"noreferrer noopener",target:"_blank"},{children:"More information on reporting commercial exports from Canada."}),"link")]},name:"b13aFilingOption",options:options.Ay.customsDeclaration.b13aFilingOptions,responsive:!0,type:"text",value:props.formValues.b13aFilingOption})})),isB13ANumberInputVisible&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"50%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:constants_customsDeclaration.Zq[String(b13aFilingOption.value)].label,labelProps:requiredLabelProps,name:"b13aNumber",required:!0,responsive:!0,type:"text"})}))]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomsDeclarationForm_Row,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"100%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:TextArea.l2,label:"Notes",labelProps:{tooltipPosition:"right",tooltipText:"Any notes that might be relevant for customs processing (optional)."},name:"notes",responsive:!0,rows:4,type:"textarea"})}))}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomsDeclarationForm_Row,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"100%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:components_Checkbox.Y,label:"I certify the validity of the information provided",labelProps:requiredLabelProps,name:"isCertify",required:!0,responsive:!0})}))})]})}))}));var CustomsDeclarationForm_templateObject_1,CustomsDeclarationForm_templateObject_2;const CustomsDeclarationModal_CustomsDeclarationModal=function(props){var dispatch=(0,es.wA)(),submitting=(0,es.d4)((0,isSubmitting.A)(constants_form.ZP)),initialValues=(0,es.d4)((0,getFormInitialValues.A)(constants_form.ZP)),handleSubmit=react.useCallback((function(){dispatch((0,redux_form_es.tA)(constants_form.ZP))}),[dispatch,redux_form_es.tA]),handleEditCustomsDeclaration=react.useCallback((function(formValues){var _a,_b,orderSelection=((_a={})[props.orderObjectId]=props.batchEntryId?[props.batchEntryId]:[],_a),b13aFilingOption=formValues.b13aFilingOption&&formValues.b13aFilingOption.value!==constants_customsDeclaration.i2.NONE_SELECTED?formValues.b13aFilingOption:"",contentsExplanation=formValues.contentsType&&formValues.contentsType.value===constants_customsDeclaration.fI.OTHER?formValues.contentsExplanation:"",taxIdType=(null===(_b=null==formValues?void 0:formValues.taxIdType)||void 0===_b?void 0:_b.value)?formValues.taxIdType.value:"",valuesPayload=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},formValues),{b13aFilingOption,b13aNumber:b13aFilingOption?formValues.b13aNumber:"",contentsExplanation,taxIdNumber:taxIdType?formValues.taxIdNumber:""});dispatch(editCustomsDeclaration(props.appLocation,orderSelection,valuesPayload,initialValues,{location:schema.ID,transactionId:null==props?void 0:props.transactionId}))}),[dispatch,editCustomsDeclaration]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(Modal.A.Container,(0,tslib_es6.Cl)({hasNoPaddingHeader:!0,isOpen:!0,onClose:props.onClose,showCloseIcon:!0,size:"sm"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Modal.A.Header,(0,tslib_es6.Cl)({hideBorder:!0,hidePadding:!0},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.a1,{children:"Commercial invoice"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.hb,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomsDeclarationModal_CustomsDeclarationForm,{customsDeclaration:props.customsDeclaration,onClose:props.onClose,onSubmit:handleEditCustomsDeclaration,orderObjectId:props.orderObjectId,senderAddressName:props.senderAddressName,showB13A:props.conditionalFieldsFlags.showB13A,showEELPFC:props.conditionalFieldsFlags.showEELPFC})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.al,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"w-full"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.Zb,(0,tslib_es6.Cl)({dataPendo:"customs-declaration-edit-cancel",id:"customs-declaration-edit-cancel",onClick:props.onClose},{children:"Cancel"})),(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.Tk,(0,tslib_es6.Cl)({dataPendo:"customs-declaration-edit-submit",disabled:submitting,fullWidth:!0,id:"customs-declaration-edit-submit",isLoading:submitting,onClick:handleSubmit},{children:"Save"}))]}))})]}))},Tabs_CustomsDeclarationModal=CustomsDeclarationModal_CustomsDeclarationModal;var Footer=(0,emotion_styled_browser_esm.A)("div")(CustomsOptOutForm_templateObject_1||(CustomsOptOutForm_templateObject_1=(0,tslib_es6.ue)(["\n  text-align: right;\n"],["\n  text-align: right;\n"]))),CancelButton=(0,emotion_styled_browser_esm.A)(components_Button.vM)(CustomsOptOutForm_templateObject_2||(CustomsOptOutForm_templateObject_2=(0,tslib_es6.ue)(["\n  margin-right: 10px;\n"],["\n  margin-right: 10px;\n"]))),WarningText=(0,emotion_styled_browser_esm.A)("div")(CustomsOptOutForm_templateObject_3||(CustomsOptOutForm_templateObject_3=(0,tslib_es6.ue)(["\n  line-height: 18px;\n  font-size: 13px;\n"],["\n  line-height: 18px;\n  font-size: 13px;\n"])));const CustomsDeclarationCard_CustomsOptOutForm=(0,redux.Zz)((0,utils_translate.Tl)("orders"),(0,es.Ng)((function(state,ownProps){var _a,valuesSelector=(0,formValueSelector.A)(constants_form.HB),defaultMassUnit=null!==(_a=(0,user_selectors.cm)(state))&&void 0!==_a?_a:weight.VV.LB;return{initialValues:getInitialShipmentExtrasFormValues(ownProps.batchEntry,defaultMassUnit,!1),isBypassCustomsValue:valuesSelector(state,"isBypassCustoms")}})),(0,reduxForm.A)({enableReinitialize:!0,form:constants_form.HB}))((function(props){var batchEntry=props.batchEntry,isBypassCustomsValue=props.isBypassCustomsValue,order=props.order,pristine=props.pristine,reset=props.reset,submitFailed=props.submitFailed,submitting=props.submitting,t=props.t,dispatch=(0,es.wA)(),_a=(0,tslib_es6.zs)(react.useState(pristine),2),hideControls=_a[0],updateHideControls=_a[1];react.useEffect((function(){pristine||updateHideControls(!1),submitFailed&&updateHideControls(!0)}),[pristine,submitFailed]);var onSubmit=react.useCallback((function(data){var _a;utils_observability.O.startEvent("RATE_REFRESH_ORDER_DETAILS"),dispatch((0,orders_actions.xl)(((_a={})[order.objectId]=batchEntry?[batchEntry.id]:[],_a),(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},data),{alcohol:(null==data?void 0:data.alcohol.containsAlcohol)?{containsAlcohol:data.alcohol.containsAlcohol,recipientType:data.alcohol.recipientType.value}:null,dryIce:data.dryIce.containsDryIce?{containsDryIce:data.dryIce.containsDryIce,weight:data.dryIce.weight,weightUnitId:data.dryIce.weightUnitId}:null,hazmat:null,insurance:(null==data?void 0:data.insurance)&&data.insurance.purchaseInsurance?(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},data.insurance),{currency:constants_currency.q[data.insurance.currency.value.toString()]}):null,isBypassCustoms:data.isBypassCustoms,packingSlipText:data.packingSlipText,signatureConfirmation:data.signatureConfirmation.hasSignatureConfirmation?{hasSignatureConfirmation:data.signatureConfirmation.hasSignatureConfirmation,signatureConfirmationType:data.signatureConfirmation.signatureConfirmationType.value}:null}),constants_form.HB))}),[isBypassCustomsValue]),handleCancel=react.useCallback((function(){reset(),updateHideControls((function(prevState){return!prevState}))}),[reset]),renderWarning=react.useCallback((function(){var i18nKey="customsDeclarationOptOutWarning";return function(batchEntry){var _a,_b,_c,_d,countryTo=null===(_b=null===(_a=null==batchEntry?void 0:batchEntry.addressTo)||void 0===_a?void 0:_a.country)||void 0===_b?void 0:_b.iso2,countryFrom=null===(_d=null===(_c=null==batchEntry?void 0:batchEntry.addressFrom)||void 0===_c?void 0:_c.country)||void 0===_d?void 0:_d.iso2;return countryTo&&countryFrom&&countryTo!==countryFrom&&constants_countries.R$.includes(countryTo)&&constants_countries.R$.includes(countryFrom)}(batchEntry)&&(i18nKey=i18nKey.concat("Ics2")),(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex items-start py-2"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"flex items-start text-lg mr-2 -ml-px"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Icon,{className:"fa fa-exclamation-circle",warning:!0})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(WarningText,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(utils_translate.x6,(0,tslib_es6.Cl)({i18nKey:"calculateRates.tabs.shipmentInfo.".concat(i18nKey)},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.tp,(0,tslib_es6.Cl)({href:"https://support.goshippo.com/hc/en-us/articles/203004889-Customs-Declarations-in-Shippo",target:"_blank"},{children:t("calculateRates.tabs.shipmentInfo.customsDeclarationOptOutWarningLink")}))}))})]}))}),[batchEntry]);return(0,emotion_react_jsx_runtime_browser_esm.FD)("form",(0,tslib_es6.Cl)({onSubmit:props.handleSubmit(onSubmit)},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:components_Checkbox.Y,label:t("orders:calculateRates:tabs:shipmentInfo:customsDeclarationOptOut"),labelProps:{tooltipText:t("orders:calculateRates:tabs:shipmentInfo:customsDeclarationOptOutTooltip")},name:"isBypassCustoms"}),isBypassCustomsValue&&renderWarning(),!hideControls&&(0,emotion_react_jsx_runtime_browser_esm.FD)(Footer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CancelButton,(0,tslib_es6.Cl)({disabled:submitting,onClick:handleCancel},{children:t("orders:phrases:cancel")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Button.jn,(0,tslib_es6.Cl)({dataPendo:"service-apply",disabled:submitting||pristine,isLoading:submitting,type:"submit"},{children:t("orders:phrases:save")}))]})]}))}));var CustomsOptOutForm_templateObject_1,CustomsOptOutForm_templateObject_2,CustomsOptOutForm_templateObject_3,styles_templateObject_1,styles_templateObject_2,styles_templateObject_3,styles_templateObject_4,styles_templateObject_5,styles_templateObject_6,InfoContainer=(0,emotion_styled_browser_esm.A)("div")(styles_templateObject_1||(styles_templateObject_1=(0,tslib_es6.ue)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  padding-top: 1rem;\n"],["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  padding-top: 1rem;\n"]))),InfoField=(0,emotion_styled_browser_esm.A)("div")(styles_templateObject_2||(styles_templateObject_2=(0,tslib_es6.ue)(["\n  ",";\n  padding-bottom: 1rem;\n"],["\n  ",";\n  padding-bottom: 1rem;\n"])),(function(props){return props.isSpan?"grid-column: auto / span 2":""})),styles_Title=(0,emotion_styled_browser_esm.A)("div")(styles_templateObject_3||(styles_templateObject_3=(0,tslib_es6.ue)(["\n  font-size: 0.75rem;\n  font-weight: ",";\n  line-height: 1.25rem;\n  height: 1.25rem;\n  color: ",";\n"],["\n  font-size: 0.75rem;\n  font-weight: ",";\n  line-height: 1.25rem;\n  height: 1.25rem;\n  color: ",";\n"])),styles_constants.Wy.normal,styles_constants.Tj.gray700),Subtitle=(0,emotion_styled_browser_esm.A)("div")(styles_templateObject_4||(styles_templateObject_4=(0,tslib_es6.ue)(["\n  font-size: 0.875rem;\n  font-weight: ",";\n  height: 1.5rem;\n  line-height: 1.5rem;\n  color: ",";\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"],["\n  font-size: 0.875rem;\n  font-weight: ",";\n  height: 1.5rem;\n  line-height: 1.5rem;\n  color: ",";\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n"])),styles_constants.Wy.normal,(function(props){return props.isNone?styles_constants.Tj.gray400:styles_constants.Tj.gray1000})),NotesCell=(0,emotion_styled_browser_esm.A)(InfoField)(styles_templateObject_5||(styles_templateObject_5=(0,tslib_es6.ue)(["\n  max-width: 466px;\n"],["\n  max-width: 466px;\n"]))),NotesValue=(0,emotion_styled_browser_esm.A)(Subtitle)(styles_templateObject_6||(styles_templateObject_6=(0,tslib_es6.ue)(["\n  white-space: inherit;\n  height: auto;\n"],["\n  white-space: inherit;\n  height: auto;\n"]))),CustomsDeclarationCard_a=options.Ay.customsDeclaration,contentsTypeOptionsMap=CustomsDeclarationCard_a.contentsTypeOptionsMap,nonDeliveryOptionsMap=CustomsDeclarationCard_a.nonDeliveryOptionsMap,ComposedCustomsDeclarationCard=(0,utils_translate.Tl)()((function(props){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,batchEntry=props.batchEntry,customsDeclaration=props.customsDeclaration,customsItems=props.customsItems,order=props.order,senderAddress=props.senderAddress,t=props.t,requireEELPFC=function(batchEntryId){var selectedRate=(0,es.d4)((function(state){return batchEntryId?(0,batch_entry_composite_selectors.aq)(state,{batchEntryId}):null})),eelPfcEnabled=(0,useEELPFCRollout.y)(),_a=(0,tslib_es6.zs)((0,react.useState)((null==selectedRate?void 0:selectedRate.provider)===carriers.We.name),2),wasRequireEELPFC=_a[0],setWasRequireEELPFC=_a[1];return(0,react.useEffect)((function(){selectedRate&&((null==selectedRate?void 0:selectedRate.provider)===carriers.We.name?setWasRequireEELPFC(!0):setWasRequireEELPFC(!1))}),[selectedRate]),eelPfcEnabled&&((null==selectedRate?void 0:selectedRate.provider)===carriers.We.name||wasRequireEELPFC)}(null==batchEntry?void 0:batchEntry.id),eelPfcDecision=function(recipientCountry,customsItems,purposeOfShipment){var data=useInternationalDefaults().data,savedAesItn=null==data?void 0:data.settings.aes_itn;return recipientCountry===constants_countries.Xr.CA.iso2?{aesItn:"",eelPfc:eelPfc_const.D.NOEEI3036}:(null==customsItems?void 0:customsItems.every((function(item){return item.valueCurrency===constants_currency.q.USD&&Number(item.unitValue)<=2500})))?{aesItn:"",eelPfc:eelPfc_const.D.NOEEI3037A}:purposeOfShipment!==constants_customsDeclaration.fI.GIFT&&purposeOfShipment!==constants_customsDeclaration.fI.HUMANITARIAN_DONATION||recipientCountry!==constants_countries.Xr.CU.iso2?savedAesItn?{aesItn:savedAesItn,eelPfc:eelPfc_const.D.AESITN}:void 0:{aesItn:"",eelPfc:eelPfc_const.D.NOEEI3037H}}(null===(_b=null===(_a=null==batchEntry?void 0:batchEntry.addressTo)||void 0===_a?void 0:_a.country)||void 0===_b?void 0:_b.iso2,customsItems,null==customsDeclaration?void 0:customsDeclaration.contentsType),_r=useSubmitEELPFC(order,batchEntry,t),handleSubmitEELPFC=_r.handleSubmitEELPFC,isLoading=_r.isLoading,conditionalFieldsFlags=useConditionalFieldsFlags({recipient:{batchEntryAddress:batchEntry&&batchEntry.addressTo?{country:(null===(_d=null===(_c=batchEntry.addressTo)||void 0===_c?void 0:_c.country)||void 0===_d?void 0:_d.iso2)||"",state:batchEntry.addressTo.state}:void 0,orderAddress:order&&order.toAddress?{country:(null===(_f=null===(_e=order.toAddress)||void 0===_e?void 0:_e.country)||void 0===_f?void 0:_f.iso2)||"",state:order.toAddress.state}:void 0},sender:{batchEntryAddress:batchEntry&&batchEntry.addressFrom?{country:(null===(_h=null===(_g=batchEntry.addressFrom)||void 0===_g?void 0:_g.country)||void 0===_h?void 0:_h.iso2)||"",state:batchEntry.addressFrom.state}:void 0,orderAddress:order&&order.addressFrom?{country:(null===(_k=null===(_j=order.addressFrom)||void 0===_j?void 0:_j.country)||void 0===_k?void 0:_k.iso2)||"",state:order.addressFrom.state}:void 0}}),_s=(0,tslib_es6.zs)(react.useState(!1),2),showDetails=_s[0],updateShowDetails=_s[1],_t=(0,tslib_es6.zs)(react.useState(!1),2),showModal=_t[0],updateShowModal=_t[1],handleEditClick=react.useCallback((function(){updateShowModal((function(prevState){return!prevState}))}),[]),handleShowDetailsClick=react.useCallback((function(){updateShowDetails((function(prevState){return!prevState}))}),[]),cdInfo=customsDeclaration||{aesItn:"",b13aFilingOption:"",b13aNumber:"",certificate:"",certifySigner:senderAddress&&senderAddress.name||"",contentsExplanation:"",contentsType:"MERCHANDISE",eelPfc:"",eoriNumber:"",exporterReference:"",importerReference:"",incoterm:"DDU",invoice:"",license:"",nonDeliveryOption:"RETURN",notes:"",taxIdNumber:"",taxIdType:""},senderAddressName=react.useMemo((function(){return(null==batchEntry?void 0:batchEntry.addressFrom)?batchEntry.addressFrom.name:order.addressFrom?order.addressFrom.name:senderAddress?senderAddress.name:void 0}),[batchEntry,order,senderAddress]),renderEditButton=react.useCallback((function(){var _a;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({dataAnalytics:"customs-declaration-edit",dataPendo:"customs-declaration-edit",disabled:!!(null===(_a=null==batchEntry?void 0:batchEntry.extras)||void 0===_a?void 0:_a.isBypassCustoms),id:"customs-declaration-edit",onClick:handleEditClick},{children:t("orders:calculateRates:tabs:shipmentInfo:customsDeclarationEdit")}))}),[batchEntry,handleEditClick]),renderDetailsAccordion=react.useCallback((function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)("button",(0,tslib_es6.Cl)({className:"cursor-pointer flex items-center justify-center bg-transparent border-none m-0 p-0 w-full","data-testid":"order-details-customs-accordion-show-details",onClick:handleShowDetailsClick,style:{color:"inherit",fontSize:"inherit",lineHeight:"inherit"}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("span",{children:showDetails?(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[t("orders:calculateRates:tabs:shipmentInfo:customsDeclarationHideDetails"),(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{className:"fa fa-caret-up ml-2"})]}):(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[t("orders:calculateRates:tabs:shipmentInfo:customsDeclarationShowDetails"),(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{className:"fa fa-caret-down ml-2"})]})})}))}),[handleShowDetailsClick,showDetails]),renderInfoField=react.useCallback((function(_a,span){var label=_a.label,value=_a.value;void 0===span&&(span=!1);var testId=(0,utils_utils.a2)(label);return(0,emotion_react_jsx_runtime_browser_esm.FD)(InfoField,(0,tslib_es6.Cl)({"data-testid":testId,isSpan:span},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(styles_Title,{children:label}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Subtitle,(0,tslib_es6.Cl)({isNone:"None"===value},{children:value}))]}),(0,index_browser.Ak)())}),[]),renderNotes=react.useCallback((function(value){return(0,emotion_react_jsx_runtime_browser_esm.FD)(NotesCell,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(styles_Title,{children:"Notes"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(NotesValue,(0,tslib_es6.Cl)({isNone:"None"===value},{children:value}))]})}),[]),isValid=react.useMemo((function(){var _a;return(null==batchEntry?void 0:batchEntry.customsDeclaration)||!!(null===(_a=null==batchEntry?void 0:batchEntry.extras)||void 0===_a?void 0:_a.isBypassCustoms)}),[batchEntry]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Tabs_ShipmentInfoCardTitle,(0,tslib_es6.Cl)({invalid:!isValid},{children:[t("orders:calculateRates:tabs:shipmentInfo:customsDeclaration"),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"flex items-baseline"},{children:renderEditButton()}))]})),(null===(_m=null===(_l=null==batchEntry?void 0:batchEntry.addressTo)||void 0===_l?void 0:_l.country)||void 0===_m?void 0:_m.iso2)===constants_countries.Xr.MX.iso2&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Alert.A,(0,tslib_es6.Cl)({severity:"info",sx:{my:shippoTheme.A.spacing(2)}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(utils_translate.x6,{components:[(0,emotion_react_jsx_runtime_browser_esm.Y)("b",{children:"0"},0),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link_Link.A,(0,tslib_es6.Cl)({color:"secondary",href:"https://support.goshippo.com/hc/en-us/articles/31695322817179-New-Customs-Rules-for-Shipments-to-Mexico",target:"_blank"},{children:"0"}),1)],i18nKey:"orders:calculateRates.tabs.shipmentInfo.customsDeclarationWarningMexico"})})),(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomsDeclarationCard_CustomsOptOutForm,{batchEntry:props.batchEntry,order:props.order}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Collapse.A,(0,tslib_es6.Cl)({in:requireEELPFC},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(EELPFCSection,{defaultValues:customsDeclaration,eelPfcDecision,handleSubmitForm:handleSubmitEELPFC,isLoading,t})})),!(null===(_o=null==batchEntry?void 0:batchEntry.extras)||void 0===_o?void 0:_o.isBypassCustoms)&&(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(InfoContainer,(0,tslib_es6.Cl)({"data-testid":"customs-declaration-info"},{children:[renderInfoField({label:"Type of Content",value:contentsTypeOptionsMap[cdInfo.contentsType].label}),renderInfoField({label:"Incoterm",value:cdInfo.incoterm}),cdInfo.contentsType===constants_customsDeclaration.Vv.OTHER?renderInfoField({label:"Content Explanation",value:cdInfo.contentsExplanation||"None"},!0):null,showDetails&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[renderInfoField({label:"Exporter Reference",value:cdInfo.exporterReference||"None"}),renderInfoField({label:"Importer Reference",value:cdInfo.importerReference||"None"}),renderInfoField({label:"Invoice",value:cdInfo.invoice||"None"}),renderInfoField({label:"Non-delivery handling",value:nonDeliveryOptionsMap[cdInfo.nonDeliveryOption].label}),renderInfoField({label:"License",value:cdInfo.license||"None"}),renderInfoField({label:"Certificate",value:cdInfo.certificate||"None"}),renderInfoField({label:"EORI Number",value:cdInfo.eoriNumber||"None"}),renderInfoField({label:"Signing Person",value:cdInfo.certifySigner}),renderInfoField({label:"Tax ID Type",value:cdInfo.taxIdType||"None"},!cdInfo.taxIdType),cdInfo.taxIdNumber&&cdInfo.taxIdType&&renderInfoField({label:cdInfo.taxIdType,value:cdInfo.taxIdNumber}),conditionalFieldsFlags.showEELPFC&&renderInfoField({label:"EEL / PFC",value:cdInfo.eelPfc||"None"},!0),conditionalFieldsFlags.showEELPFC&&cdInfo.eelPfc&&cdInfo.eelPfc===constants_customsDeclaration.aU.AESITN?renderInfoField({label:"AES / ITN",value:cdInfo.aesItn||"None"},!0):null,conditionalFieldsFlags.showB13A&&renderInfoField({label:"B13A Option",value:cdInfo.b13aFilingOption||"None"},!cdInfo.b13aFilingOption),conditionalFieldsFlags.showB13A&&cdInfo.b13aFilingOption&&cdInfo.b13aFilingOption!==constants_customsDeclaration.i2.NONE_SELECTED&&renderInfoField({label:constants_customsDeclaration.Zq[cdInfo.b13aFilingOption].label,value:cdInfo.b13aNumber||"None"})]})]})),showDetails&&renderNotes(cdInfo.notes||"None"),renderDetailsAccordion()]})]}),showModal&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_CustomsDeclarationModal,{appLocation:"order_details",batchEntryId:null===(_p=props.batchEntry)||void 0===_p?void 0:_p.id,conditionalFieldsFlags,customsDeclaration:props.customsDeclaration,onClose:handleEditClick,orderObjectId:order.objectId,senderAddressName,transactionId:(null===(_q=props.batchEntry)||void 0===_q?void 0:_q.transactionObjectId)||""})]})}));const Tabs_CustomsDeclarationCard=ComposedCustomsDeclarationCard;var icon_customs_declaration=__webpack_require__("./app/assets/icons/icon_customs_declaration.svg"),Layout=__webpack_require__("./app/components/Layout/index.ts"),ErrorDialog=(__webpack_require__("./app/components/Dialog/Dialog.tsx"),__webpack_require__("./app/components/Dialog/ErrorDialog/ErrorDialog.tsx"));const Dialog_ErrorDialog=ErrorDialog.A;var getLineItemsStore=function(state){return state.lineItem},getIsDeletingLineItem=(0,reselect_es.Mz)(getLineItemsStore,(function(lineItemsStore){return lineItemsStore.isDeletingLineItem})),getIsDeletingCustomsItem=(0,reselect_es.Mz)(getLineItemsStore,(function(lineItemsStore){return lineItemsStore.isDeletingCustomsItem})),SmartSelect=__webpack_require__("./app/components/SmartSelect/index.ts"),user_address_selectors=__webpack_require__("./app/selectors/user-address.selectors.ts"),field_formaters=__webpack_require__("./app/utils/field-formaters.ts"),field_normalizers=__webpack_require__("./app/utils/field-normalizers.ts"),numbers=__webpack_require__("./app/utils/numbers.ts"),EccnEar99ValidationRegex=/^(\d[A-Z]\d{3}[\da-z.]{0,15}|EAR99)$/,ValidationMessagesMap_description={invalid:"This field cannot be longer than 150 characters",required:"Please enter the item title"},ValidationMessagesMap_eccnEar99={invalid:"Please enter a valid ECCN/EAR99 code"},ValidationMessagesMap_massUnit={required:"Please select a mass unit"},ValidationMessagesMap_originCountry={required:"Please select a country of origin"},ValidationMessagesMap_quantity={invalid:"Please enter a valid quantity",required:"Please enter the item quantity"},ValidationMessagesMap_tariffNumber={invalid:"This field cannot be longer than 12 characters"},ValidationMessagesMap_unitValue={invalid:"Please enter a valid unit value",required:"Please enter unit value"},ValidationMessagesMap_unitWeight={invalid:"Please enter a valid unit weight",required:"Please enter unit weight"},ValidationMessagesMap_valueCurrency={required:"Please select a currency"};const CustomsItemForm_validate=function(values){var _a,errors={description:"",eccnEar99:"",massUnit:"",originCountry:"",originalMassUnit:"",originalNetWeight:"",originalUnitWeight:"",quantity:"",skuCode:"",tariffNumber:"",unitValue:"",unitWeight:"",valueCurrency:""};if(values.description?(0,validations.JT)(0,150,values.description)||(errors.description=ValidationMessagesMap_description.invalid):errors.description=ValidationMessagesMap_description.required,values.quantity){var trimmedQuantity=values.quantity.toString().trim();(0,validations.M3)(trimmedQuantity,0)&&0!==trimmedQuantity.length||(errors.quantity=ValidationMessagesMap_quantity.invalid)}else errors.quantity=ValidationMessagesMap_quantity.required;if(values.unitWeight){var trimmedUnitWeight=values.unitWeight.toString().trim();(0,validations.aM)(trimmedUnitWeight)&&0!==trimmedUnitWeight.length||(errors.unitWeight=ValidationMessagesMap_unitWeight.invalid)}else errors.unitWeight=ValidationMessagesMap_unitWeight.required;if(values.massUnit||(errors.massUnit=ValidationMessagesMap_massUnit.required),values.unitValue){var trimmedUnitValue=values.unitValue.toString().trim();(0,validations.aM)(trimmedUnitValue)&&0!==trimmedUnitValue.length||(errors.unitValue=ValidationMessagesMap_unitValue.invalid)}else errors.unitValue=ValidationMessagesMap_unitValue.required;return values.valueCurrency||(errors.valueCurrency=ValidationMessagesMap_valueCurrency.required),values.originCountry||(errors.originCountry=ValidationMessagesMap_originCountry.required),values.tariffNumber&&!(0,validations.JT)(1,12,values.tariffNumber)&&(errors.tariffNumber=ValidationMessagesMap_tariffNumber.invalid),(null===(_a=values.eccnEar99)||void 0===_a?void 0:_a.length)&&!EccnEar99ValidationRegex.test(values.eccnEar99)&&(errors.eccnEar99=ValidationMessagesMap_eccnEar99.invalid),errors};var labelProps={required:!0},CustomsItemForm=function(_super){function CustomsItemForm(props){var _this=_super.call(this,props)||this;return _this.displayCalculatedAmount=function(){var _a=_this.props,formValues=_a.formValues,t=_a.t,quantity=formValues.quantity,unitValue=formValues.unitValue,valueCurrency=formValues.valueCurrency,total=(0,numbers.T1)(unitValue,quantity);if(total&&valueCurrency)return"Total: ".concat(t("currency",{value:{currency_iso:valueCurrency.value,value:total}}))},_this.displayCalculatedWeight=function(){var _a=_this.props.formValues,originalMassUnit=_a.originalMassUnit,originalUnitWeight=_a.originalUnitWeight,quantity=_a.quantity,total=(0,numbers.T1)(originalUnitWeight,quantity);if(total&&originalMassUnit)return"Total: ".concat(total.toFixed(2)," ").concat(originalMassUnit.value)},_this.getSuggestedCountryOptions=function(suggestedCountryCode){return(0,Address.b8)(suggestedCountryCode)},_this}return(0,tslib_es6.C6)(CustomsItemForm,_super),CustomsItemForm.prototype.componentDidUpdate=function(prevProps){this.props.submitSucceeded&&this.props.onClose(),prevProps.submitting&&!this.props.submitting&&this.props.submitFailed&&this.props.onClose()},CustomsItemForm.prototype.render=function(){var _a=this.props,onSubmit=_a.onSubmit,suggestedCountry=_a.suggestedCountry,t=_a.t,countryOptions=this.getSuggestedCountryOptions(null==suggestedCountry?void 0:suggestedCountry.iso2);return(0,emotion_react_jsx_runtime_browser_esm.Y)("form",(0,tslib_es6.Cl)({onSubmit:this.props.handleSubmit(onSubmit)},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"grid grid-cols-4 gap-4 items-top"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"col-span-3"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:t("orders:calculateRates:tabs:shipmentInfo:modals:common:description"),labelProps,name:"description",required:!0,responsive:!0,type:"text"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,inputMode:"decimal",label:t("orders:calculateRates:tabs:shipmentInfo:modals:common:quantity"),labelProps,name:"quantity",required:!0,responsive:!0,type:"text"}),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"col-span-2 md:col-span-1"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,inputMode:"decimal",label:t("orders:calculateRates:tabs:shipmentInfo:modals:common:unitWeight"),labelProps,name:"originalUnitWeight",required:!0,responsive:!0,type:"string"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,label:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"invisible"},{children:t("orders:calculateRates:tabs:shipmentInfo:modals:common:unitWeight")})),name:"originalMassUnit",options:options.Ay.weightOptions,required:!0,responsive:!0,size:constants_form.YI.xs}),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"md:col-span-2 text-left pt-8"},{children:this.displayCalculatedWeight()})),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"col-span-2 md:col-span-1"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,inputMode:"decimal",label:t("orders:calculateRates:tabs:shipmentInfo:modals:common:unitValue"),labelProps,name:"unitValue",required:!0,responsive:!0,type:"string"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,label:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"invisible"},{children:t("orders:calculateRates:tabs:shipmentInfo:modals:common:unitValue")})),name:"valueCurrency",options:options.Ay.currencyOptions,required:!0,responsive:!0,size:constants_form.YI.xs}),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"md:col-span-2 text-left pt-8"},{children:this.displayCalculatedAmount()})),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"col-span-4 md:col-span-3"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SmartSelect.s,format:field_formaters._m,label:t("orders:calculateRates:tabs:shipmentInfo:modals:common:originCountry"),labelProps,name:"originCountry",normalize:field_normalizers.p3,options:countryOptions,required:!0,responsive:!0})})),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"col-span-4 md:col-span-3"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:t("orders:calculateRates:tabs:shipmentInfo:modals:common:sku"),name:"skuCode",responsive:!0})})),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"col-span-4 md:col-span-2"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:t("orders:calculateRates:tabs:shipmentInfo:modals:customsItemModal:harmonizationCode"),labelProps:{tooltipPosition:"top",tooltipText:"The Harmonized System (HS) code, sometimes called Tariff code, is a 6-digit code managed by the World Customs Organization. Many governments add additional digits to the HS number to further distinguish products in certain categories according to their Harmonized Tariff Schedule (HTS). The HTS code is comprised of the 6-digit HS code + 1 to 4 digits determined by the country of import."},name:"tariffNumber",responsive:!0})})),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"col-span-4 md:col-span-2"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:"ECCN/EAR99",name:"eccnEar99",responsive:!0})}))]}))}))},CustomsItemForm}(react.Component);const CustomsItemModal_CustomsItemForm=(0,redux.Zz)((0,utils_translate.Tl)(),(0,es.Ng)((function(state,ownProps){var valuesSelector=(0,formValueSelector.A)(constants_form.Y0),customsItem=ownProps.customsItem,lineItem=ownProps.lineItem,userConfigDefaults=(0,user_selectors.Og)(state),fallbackMassUnit=userConfigDefaults.defaultMassUnit||weight.VV.LB,currency=userConfigDefaults.defaultCurrency||constants_currency.q.USD,initialValues=null;return customsItem?initialValues=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},customsItem),{originalMassUnit:customsItem.originalMassUnit?options.Ay.commonWeightOptions[customsItem.originalMassUnit]:null,originalUnitWeight:customsItem.originalUnitWeight,unitValue:customsItem.unitValue,valueCurrency:customsItem.valueCurrency?{label:customsItem.valueCurrency.iso,value:customsItem.valueCurrency.iso}:null}):lineItem&&(initialValues={description:lineItem.title,lineItemId:lineItem.id,originCountry:lineItem.countryOfOrigin,originalMassUnit:lineItem.weightUnit?options.Ay.commonWeightOptions[lineItem.weightUnit]:null,originalUnitWeight:lineItem.unitWeight,quantity:lineItem.quantity,skuCode:lineItem.sku,unitValue:lineItem.unitAmount,valueCurrency:lineItem.currency?{label:lineItem.currency.iso,value:lineItem.currency.iso}:null}),{formValues:{originalMassUnit:valuesSelector(state,"originalMassUnit"),originalUnitWeight:valuesSelector(state,"originalUnitWeight"),quantity:valuesSelector(state,"quantity"),unitValue:valuesSelector(state,"unitValue"),valueCurrency:valuesSelector(state,"valueCurrency")},initialValues:lineItem||customsItem?initialValues:{originalMassUnit:options.Ay.commonWeightOptions[fallbackMassUnit],valueCurrency:{label:currency.iso,value:currency.iso}},isUpdatingBatchEntry:(0,orders_selectors.$m)(state),suggestedCountry:(0,user_address_selectors.o)(state)}})),(0,reduxForm.A)({destroyOnUnmount:!1,enableReinitialize:!0,form:constants_form.Y0,validate:CustomsItemForm_validate}))(CustomsItemForm);var DeleteConfirmationDialog=function(_a){var isLoading=_a.isLoading,onClose=_a.onClose,onConfirm=_a.onConfirm,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Dialog_ErrorDialog,{closeButtonText:t("orders:calculateRates:tabs:shipmentInfo:modals:common:cancel"),confirmButtonText:t("orders:calculateRates:tabs:shipmentInfo:modals:customsItemModal:deleteConfirm"),isLoading,isOpen:!0,message:t("orders:calculateRates:tabs:shipmentInfo:modals:customsItemModal:deleteConfirmationMessage"),onClose,onConfirm})},DeleteLink=function(_a){var handleDelete=_a.handleDelete,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"flex justify-center flex-col text-left w-full"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.k0,(0,tslib_es6.Cl)({"data-pendo":"customs-item-delete",id:"customs-item-delete",onClick:handleDelete},{children:t("orders:calculateRates:tabs:shipmentInfo:modals:customsItemModal:deleteConfirm")}))})}))},ComposedCustomsItemModal=(0,utils_translate.Tl)()((function(props){var batchEntry=props.batchEntry,customsItem=props.customsItem,lineItem=props.lineItem,onClose=props.onClose,order=props.order,t=props.t,dispatch=(0,es.wA)(),_a=(0,tslib_es6.zs)(react.useState(null),2),dataForDelete=_a[0],setDataForDelete=_a[1],cachedIsDeleting=(0,react.useRef)(!1),initialValues=(0,es.d4)((0,getFormInitialValues.A)(constants_form.Y0)),submitting=(0,es.d4)((0,isSubmitting.A)(constants_form.Y0)),isUpdatingBatchEntry=(0,es.d4)(orders_selectors.$m),isDeletingCustomsItem=(0,es.d4)(getIsDeletingCustomsItem),showDeleteConfirm=!!dataForDelete,editMode=!!customsItem||!!lineItem,modalHeaderText=t("orders:calculateRates:tabs:shipmentInfo:modals:customsItemModal:".concat(editMode?"editTitle":"newTitle"));react.useEffect((function(){!cachedIsDeleting.current&&isDeletingCustomsItem&&onClose(),cachedIsDeleting.current=isDeletingCustomsItem}),[isDeletingCustomsItem,onClose]);var addOrEditCustomsItem=react.useCallback((function(formValues){var _a,_b,_c,_d,_e,orderSelection=((_a={})[order.objectId]=batchEntry?[batchEntry.id]:[],_a);dispatch(customsItem?function(appLocation,orderSelection,customsItemPayload,initialValues,trackingData){return{payload:{appLocation,customsItemPayload,initialValues,orderSelection,trackingData},type:constants.t.CUSTOMS_ITEM_UPDATE}}(props.appLocation,orderSelection,formValues,initialValues,{location:schema.ID,recipientCountry:null===(_c=null===(_b=null==batchEntry?void 0:batchEntry.addressTo)||void 0===_b?void 0:_b.country)||void 0===_c?void 0:_c.iso2,senderCountry:null===(_e=null===(_d=null==batchEntry?void 0:batchEntry.addressFrom)||void 0===_d?void 0:_d.country)||void 0===_e?void 0:_e.iso2,transactionId:(null==batchEntry?void 0:batchEntry.transactionObjectId)||""}):function(orderSelection,customsItemPayload){return{payload:{customsItemPayload,orderSelection},type:constants.t.CUSTOMS_ITEM_CREATE}}(orderSelection,formValues))}),[order,batchEntry,customsItem,initialValues]),handleSubmit=react.useCallback((function(){dispatch((0,redux_form_es.tA)(constants_form.Y0))}),[dispatch,redux_form_es.tA]),handleDelete=react.useCallback((function(){setDataForDelete(initialValues)}),[setDataForDelete,initialValues]),handleDeleteClose=react.useCallback((function(){setDataForDelete(null)}),[setDataForDelete]),handleDeleteConfirm=react.useCallback((function(){var _a;dataForDelete&&dispatch(deleteCustomsItem(((_a={})[order.objectId]=batchEntry?[batchEntry.id]:[],_a),[dataForDelete]))}),[dataForDelete,order,batchEntry,deleteCustomsItem,dispatch]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(Modal.A.Container,(0,tslib_es6.Cl)({hasNoPaddingHeader:!0,isOpen:!0,onClose,size:"sm"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Modal.A.Header,(0,tslib_es6.Cl)({hideBorder:!0,hidePadding:!0},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.a1,{children:modalHeaderText})})),(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledComponents.hb,{children:[showDeleteConfirm&&(0,emotion_react_jsx_runtime_browser_esm.Y)(DeleteConfirmationDialog,{isLoading:isDeletingCustomsItem,onClose:handleDeleteClose,onConfirm:handleDeleteConfirm,t}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomsItemModal_CustomsItemForm,{batchEntry,customsItem,lineItem,onClose,onDelete:handleDelete,onSubmit:addOrEditCustomsItem,order})]}),(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledComponents.al,{children:[editMode&&(0,emotion_react_jsx_runtime_browser_esm.Y)(DeleteLink,{handleDelete,t}),(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"w-full"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.Zb,(0,tslib_es6.Cl)({dataPendo:"customs-item-".concat(editMode?"edit":"add","-cancel"),id:"button-customs-item-".concat(editMode?"edit":"add","-cancel"),onClick:onClose},{children:"Cancel"})),(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.Tk,(0,tslib_es6.Cl)({dataPendo:"customs-item-".concat(editMode?"edit":"add","-submit"),disabled:submitting||isUpdatingBatchEntry,fullWidth:!0,id:"button-customs-item-".concat(editMode?"edit":"add","-submit"),isLoading:submitting,onClick:handleSubmit},{children:t("orders:calculateRates:tabs:shipmentInfo:modals:common:".concat(editMode?"save":"add"))}))]}))]})]}))}));const OrderItemsCard_CustomsItemModal=ComposedCustomsItemModal;var createLineItem=function(orderObjectId,lineItemPayload,trackingReference){return{payload:{lineItemPayload,orderObjectId,trackingReference},type:constants.t.LINE_ITEM_CREATE}},deleteLineItem=function(id,orderObjectId,trackingReference){return{payload:{id,orderObjectId,trackingReference},type:constants.t.LINE_ITEMS_DELETE}},editLineItem=function(lineItemObjectId,orderObjectId,lineItemPayload,trackingReference){return{payload:{lineItemObjectId,lineItemPayload,orderObjectId,trackingReference},type:constants.t.LINE_ITEM_EDIT}},locale=__webpack_require__("./app/utils/locale.ts");const LineItemForm_validate=function(values){var errors={countryOfOrigin:"",currency:"",quantity:"",sku:"",title:"",unitAmount:"",unitWeight:"",weightUnit:""};return values.title?(0,validations.JT)(0,400,values.title)||(errors.title="This field cannot be longer than 400 characters"):errors.title="Please enter the item title",values.quantity?(0,validations.M3)(values.quantity,0)||(errors.quantity="Please enter a valid quantity"):errors.quantity="Please enter the item quantity",values.unitWeight?(0,validations.aM)(values.unitWeight)||(errors.unitWeight="Please enter a valid unit weight"):errors.unitWeight="Please enter unit weight",values.weightUnit||(errors.weightUnit="Please select a weight unit"),values.unitAmount?(0,validations.aM)(values.unitAmount)||(errors.unitAmount="Please enter a valid unit value"):errors.unitAmount="Please enter unit value",values.currency||(errors.currency="Please select a currency"),values.countryOfOrigin||(errors.countryOfOrigin="Please select a country of origin"),errors};var LineItemForm=function(_super){function LineItemForm(props){var _this=_super.call(this,props)||this;return _this.displayCalculatedAmount=function(){var _a=_this.props,formValues=_a.formValues,t=_a.t,currency=formValues.currency,quantity=formValues.quantity,unitAmount=formValues.unitAmount,total=(0,numbers.T1)(unitAmount,quantity);if(total&&currency)return"Total: ".concat(t("currency",{value:{currency_iso:currency.value,value:total}}))},_this.displayCalculatedWeight=function(){var _a=_this.props.formValues,quantity=_a.quantity,unitWeight=_a.unitWeight,weightUnit=_a.weightUnit,total=(0,numbers.T1)(unitWeight,quantity);if(total&&weightUnit)return"Total: ".concat(total.toFixed(2)," ").concat(weightUnit.value)},_this.getSuggestedCountryOptions=function(suggestedCountryCode){return(0,Address.b8)(suggestedCountryCode)},_this.getSuggestedCountryOptions=_this.getSuggestedCountryOptions.bind(_this),_this}return(0,tslib_es6.C6)(LineItemForm,_super),LineItemForm.prototype.componentDidUpdate=function(prevProps){this.props.submitSucceeded&&this.props.onClose(),prevProps.submitting&&!this.props.submitting&&this.props.submitFailed&&this.props.onClose()},LineItemForm.prototype.render=function(){var _a=this.props,onSubmit=_a.onSubmit,suggestedCountryCode=_a.suggestedCountryCode,t=_a.t,labelProps={required:!0},countryOptions=this.getSuggestedCountryOptions(suggestedCountryCode),disabled=!(0,Order.Dd)(this.props.order);return(0,emotion_react_jsx_runtime_browser_esm.Y)("form",(0,tslib_es6.Cl)({onSubmit:this.props.handleSubmit(onSubmit)},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"grid grid-cols-4 gap-4 items-top"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"col-span-3"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,disabled,label:t("orders:calculateRates:tabs:shipmentInfo:modals:common:description"),labelProps,name:"title",required:!0,responsive:!0,tooltipOnDisabled:!0,type:"text"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,disabled,inputMode:"decimal",label:t("orders:calculateRates:tabs:shipmentInfo:modals:common:quantity"),labelProps,name:"quantity",required:!0,responsive:!0,type:"text"}),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"col-span-2 md:col-span-1"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,disabled,inputMode:"decimal",label:t("orders:calculateRates:tabs:shipmentInfo:modals:common:unitWeight"),labelProps,name:"unitWeight",required:!0,responsive:!0,type:"string"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,disabled,label:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"invisible"},{children:t("orders:calculateRates:tabs:shipmentInfo:modals:common:unitWeight")})),name:"weightUnit",options:options.Ay.weightOptions,required:!0,responsive:!0}),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"md:col-span-2 text-left pt-8"},{children:this.displayCalculatedWeight()})),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"col-span-2 md:col-span-1"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,disabled,inputMode:"decimal",label:t("orders:calculateRates:tabs:shipmentInfo:modals:common:unitValue"),labelProps,name:"unitAmount",required:!0,responsive:!0,type:"string"})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,disabled,label:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"invisible"},{children:t("orders:calculateRates:tabs:shipmentInfo:modals:common:unitValue")})),name:"currency",options:options.Ay.currencyOptions,required:!0,responsive:!0}),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"md:col-span-2 text-left pt-8"},{children:this.displayCalculatedAmount()})),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"col-span-4 md:col-span-3"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SmartSelect.s,disabled,format:field_formaters._m,label:t("orders:calculateRates:tabs:shipmentInfo:modals:common:originCountry"),labelProps,name:"countryOfOrigin",normalize:field_normalizers.p3,options:countryOptions,required:!0,responsive:!0})})),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"col-span-4 md:col-span-3"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:t("orders:calculateRates:tabs:shipmentInfo:modals:common:sku"),name:"sku",responsive:!0})}))]}))}))},LineItemForm}(react.Component);const ItemModal_LineItemForm=(0,redux.Zz)((0,utils_translate.Tl)(),(0,es.Ng)((function(state,ownProps){var valuesSelector=(0,formValueSelector.A)(constants_form.aF),lineItem=ownProps.lineItem,userConfigDefaults=(0,user_selectors.Og)(state),fallbackMassUnit=userConfigDefaults.defaultMassUnit||weight.VV.LB,currency=userConfigDefaults.defaultCurrency||constants_currency.q.USD,unitWeight=(null==lineItem?void 0:lineItem.unitWeight)||"",lineItemInitialValues=lineItem?{countryOfOrigin:lineItem.countryOfOrigin,currency:lineItem.currency?{label:lineItem.currency.iso,value:lineItem.currency.iso}:null,quantity:lineItem.quantity,sku:lineItem.sku,title:lineItem.title,unitAmount:lineItem.unitAmount,unitWeight,weightUnit:lineItem.weightUnit?options.Ay.commonWeightOptions[lineItem.weightUnit]:null}:null;return{formValues:{currency:valuesSelector(state,"currency"),quantity:valuesSelector(state,"quantity"),unitAmount:valuesSelector(state,"unitAmount"),unitWeight:valuesSelector(state,"unitWeight"),weightUnit:valuesSelector(state,"weightUnit")},initialValues:lineItem?lineItemInitialValues:{currency:{label:currency.iso,value:currency.iso},weightUnit:options.Ay.commonWeightOptions[fallbackMassUnit]},isDeletingLineItem:getIsDeletingLineItem(state)}})),(0,reduxForm.A)({destroyOnUnmount:!1,enableReinitialize:!0,form:constants_form.aF,validate:LineItemForm_validate}))(LineItemForm);var ItemModal_DeleteConfirmationDialog=function(_a){var isLoading=_a.isLoading,onClose=_a.onClose,onConfirm=_a.onConfirm,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Dialog_ErrorDialog,{closeButtonText:t("orders:calculateRates:tabs:shipmentInfo:modals:common:cancel"),confirmButtonText:t("orders:calculateRates:tabs:shipmentInfo:modals:lineItemModal:deleteConfirm"),isLoading,isOpen:!0,message:t("orders:calculateRates:tabs:shipmentInfo:modals:lineItemModal:deleteConfirmationMessage"),onClose,onConfirm})},ItemModal_DeleteLink=function(_a){var handleDelete=_a.handleDelete,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"flex justify-center flex-col text-left w-full"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.k0,(0,tslib_es6.Cl)({"data-pendo":"line-item-delete",id:"line-item-delete",onClick:handleDelete},{children:t("orders:calculateRates:tabs:shipmentInfo:modals:lineItemModal:deleteConfirm")}))})}))},ComposedItemModal=(0,utils_translate.Tl)()((function(props){var lineItem=props.lineItem,onClose=props.onClose,order=props.order,t=props.t,dispatch=(0,es.wA)(),editMode=!!lineItem,actionButtonText=editMode?"Save":"Add",disabled=!(0,Order.Dd)(order),modalHeaderText=t("orders:calculateRates:tabs:shipmentInfo:modals:lineItemModal:".concat(editMode?"editTitle":"newTitle")),submitting=(0,es.d4)((0,isSubmitting.A)(constants_form.aF)),isUpdatingBatchEntry=(0,es.d4)(orders_selectors.$m),isDeletingLineItem=(0,es.d4)(getIsDeletingLineItem),defaultAddress=(0,es.d4)(address_selectors.dR),suggestedCountryCode=(0,locale.Ml)(defaultAddress),_a=(0,tslib_es6.zs)(react.useState(!1),2),showDeleteConfirm=_a[0],setShowDeleteConfirm=_a[1],showDeleteLink=(0,react.useMemo)((function(){return!!lineItem&&(0,Order.Dd)(order)}),[lineItem,Order.Dd,order]);(0,react.useEffect)((function(){var trackingReference=TrackingHelper.U.getTrackingReference(types.jv.name,props.appLocation,{});(0,utils.aX)(trackingReference,types.jv.operations.VIWED,{itemId:null==lineItem?void 0:lineItem.objectId})}),[]);var addOrEditItem=react.useCallback((function(formValues){var trackingReference=TrackingHelper.U.getTrackingReference(types.jv.name,props.appLocation,{});(0,utils.aX)(trackingReference,types.jv.operations.SAVED,{count_item:+formValues.quantity,currency:formValues.currency.value,item_name:formValues.title,item_value:+formValues.unitAmount,item_weight:+formValues.unitWeight,item_weight_units:formValues.weightUnit.value,orders_selected:1,sku:formValues.sku,total_item_weight:+formValues.quantity*+formValues.unitWeight,total_item_weight_units:formValues.weightUnit.value}),lineItem?((0,utils.aX)(trackingReference,types.jv.operations.EDITED,{itemId:lineItem.objectId}),dispatch(editLineItem(lineItem.objectId,order.objectId,formValues,trackingReference))):((0,utils.aX)(trackingReference,types.jv.operations.ADDED,{}),dispatch(createLineItem(order.objectId,formValues,trackingReference)))}),[lineItem,order,dispatch,createLineItem,editLineItem]),handleSubmit=react.useCallback((function(){dispatch((0,redux_form_es.tA)(constants_form.aF))}),[dispatch,redux_form_es.tA]),handleDelete=react.useCallback((function(){setShowDeleteConfirm(!0)}),[setShowDeleteConfirm]),handleDeleteClose=react.useCallback((function(){setShowDeleteConfirm(!1)}),[setShowDeleteConfirm]),handleDeleteConfirm=react.useCallback((function(){if(lineItem){var trackingReference=TrackingHelper.U.getTrackingReference(types.jv.name,props.appLocation,{});(0,utils.aX)(trackingReference,types.jv.operations.DELETED,{itemId:lineItem.objectId}),dispatch(deleteLineItem(lineItem.objectId,order.objectId,trackingReference))}}),[lineItem,order,dispatch,deleteLineItem]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(Modal.A.Container,(0,tslib_es6.Cl)({hasNoPaddingHeader:!0,isOpen:!0,onClose,size:"sm"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Modal.A.Header,(0,tslib_es6.Cl)({hideBorder:!0,hidePadding:!0},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.a1,{children:modalHeaderText})})),(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledComponents.hb,{children:[showDeleteConfirm&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ItemModal_DeleteConfirmationDialog,{isLoading:isDeletingLineItem,onClose:handleDeleteClose,onConfirm:handleDeleteConfirm,t}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ItemModal_LineItemForm,{lineItem,onClose,onSubmit:addOrEditItem,order,suggestedCountryCode})]}),(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledComponents.al,{children:[showDeleteLink&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ItemModal_DeleteLink,{handleDelete,t}),(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"w-full"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.Zb,(0,tslib_es6.Cl)({className:"hidden md:inline-block",dataPendo:"line-item-".concat(lineItem?"edit":"add","-cancel"),id:"button-line-item-".concat(lineItem?"edit":"add","-cancel"),onClick:onClose},{children:"Cancel"})),(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.Tk,(0,tslib_es6.Cl)({dataPendo:"line-item-".concat(lineItem?"edit":"add","-submit"),disabled:submitting||disabled||isUpdatingBatchEntry,fullWidth:!0,id:"button-line-item-".concat(lineItem?"edit":"add","-submit"),isLoading:submitting,onClick:handleSubmit},{children:actionButtonText}))]}))]})]}))}));const OrderItemsCard_ItemModal=ComposedItemModal;var common_templateObject_1,common_templateObject_2,icon_info=__webpack_require__("./app/assets/icons/icon_info.svg"),HalfSection=(0,emotion_styled_browser_esm.A)("div")(common_templateObject_1||(common_templateObject_1=(0,tslib_es6.ue)(["\n  width: 50%;\n  display: flex;\n"],["\n  width: 50%;\n  display: flex;\n"]))),common_Icon=(0,emotion_styled_browser_esm.A)("i")(common_templateObject_2||(common_templateObject_2=(0,tslib_es6.ue)(["\n  height: 8px;\n  color: ",";\n  font-size: inherit;\n  line-height: inherit;\n"],["\n  height: 8px;\n  color: ",";\n  font-size: inherit;\n  line-height: inherit;\n"])),styles_constants.Tj.ruby600),ErrorIcon=function(props){return(0,emotion_react_jsx_runtime_browser_esm.Y)(common_Icon,{className:"".concat(props.className," fa fa-exclamation-circle")})},ItemTitleInfo_Container=emotion_styled_browser_esm.A.div(ItemTitleInfo_templateObject_1||(ItemTitleInfo_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  border-bottom: 1px solid ",";\n  padding: 10px 0;\n  min-width: 96px;\n  min-height: 40px;\n"],["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  border-bottom: 1px solid ",";\n  padding: 10px 0;\n  min-width: 96px;\n  min-height: 40px;\n"])),styles_constants.Tj.geyser),RowTitle=emotion_styled_browser_esm.A.div(ItemTitleInfo_templateObject_2||(ItemTitleInfo_templateObject_2=(0,tslib_es6.ue)(["\n  color: ",";\n  line-height: 1.25rem;\n  font-size: 0.875rem;\n  font-weight: 400;\n"],["\n  color: ",";\n  line-height: 1.25rem;\n  font-size: 0.875rem;\n  font-weight: 400;\n"])),styles_constants.Tj.gray1000),ItemTitleInfo_Subtitle=emotion_styled_browser_esm.A.div(ItemTitleInfo_templateObject_3||(ItemTitleInfo_templateObject_3=(0,tslib_es6.ue)(["\n  color: ",";\n  line-height: 1.25rem;\n  font-size: 0.75rem;\n  font-weight: ",";\n  margin-top: 2px;\n  margin-right: 8px;\n"],["\n  color: ",";\n  line-height: 1.25rem;\n  font-size: 0.75rem;\n  font-weight: ",";\n  margin-top: 2px;\n  margin-right: 8px;\n"])),styles_constants.Tj.gray700,styles_constants.Wy.normal);const OrderItemsCard_ItemTitleInfo=function(_a){var hasError=_a.hasError,id=_a.id,onEditClick=_a.onEditClick,subtitle=_a.subtitle,title=_a.title,variant=_a.variant;return(0,emotion_react_jsx_runtime_browser_esm.FD)(ItemTitleInfo_Container,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(RowTitle,{children:[onEditClick?(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({onClick:function(){if(onEditClick)return onEditClick(id)}},{children:title})):title," "]}),(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex flex-col"},{children:[variant&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ItemTitleInfo_Subtitle,{children:variant}),(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex"},{children:[hasError&&(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"mr-1"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorIcon,{})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(ItemTitleInfo_Subtitle,{children:subtitle})]}))]}))]})};var ItemTitleInfo_templateObject_1,ItemTitleInfo_templateObject_2,ItemTitleInfo_templateObject_3,HeaderRow=(0,emotion_styled_browser_esm.A)("div")(ItemsList_templateObject_1||(ItemsList_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  height: 18px;\n  line-height: 18px;\n  color: ",";\n  font-size: 12px;\n"],["\n  display: flex;\n  height: 18px;\n  line-height: 18px;\n  color: ",";\n  font-size: 12px;\n"])),styles_constants.Tj.rollingStone),HeaderRowSubtitle=(0,emotion_styled_browser_esm.A)("div")(ItemsList_templateObject_2||(ItemsList_templateObject_2=(0,tslib_es6.ue)(["\n  width: 100%;\n  display: flex;\n\n  &:last-of-type {\n    justify-content: flex-end;\n  }\n"],["\n  width: 100%;\n  display: flex;\n\n  &:last-of-type {\n    justify-content: flex-end;\n  }\n"]))),NoItems=emotion_styled_browser_esm.A.div(ItemsList_templateObject_3||(ItemsList_templateObject_3=(0,tslib_es6.ue)(["\n  text-align: center;\n  color: ",";\n  padding: 30px 0 5px 0;\n"],["\n  text-align: center;\n  color: ",";\n  padding: 30px 0 5px 0;\n"])),styles_constants.Tj.secondary),ItemsList_LineItemTextContainer=(0,emotion_styled_browser_esm.A)("div")(ItemsList_templateObject_4||(ItemsList_templateObject_4=(0,tslib_es6.ue)(["\n  font-size: 0.875rem;\n  font-weight: ",";\n  line-height: 1.25rem;\n  word-break: break-word;\n  width: 100%;\n  flex-direction: column;\n  display: flex;\n  justify-content: center;\n  color: ",";\n"],["\n  font-size: 0.875rem;\n  font-weight: ",";\n  line-height: 1.25rem;\n  word-break: break-word;\n  width: 100%;\n  flex-direction: column;\n  display: flex;\n  justify-content: center;\n  color: ",";\n"])),styles_constants.Wy.medium,styles_constants.Tj.fontColor),Amount=(0,emotion_styled_browser_esm.A)("div")(ItemsList_templateObject_5||(ItemsList_templateObject_5=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  line-height: 1.5rem;\n  border-bottom: 1px solid ",";\n  color: ",";\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n\n  &:last-of-type {\n    justify-content: flex-end;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  line-height: 1.5rem;\n  border-bottom: 1px solid ",";\n  color: ",";\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n\n  &:last-of-type {\n    justify-content: flex-end;\n  }\n"])),styles_constants.Tj.geyser,styles_constants.Tj.gray1000),ComposedItemsList=(0,utils_translate.Tl)()((function(props){var items=props.items,onEditClick=props.onEditClick,t=props.t,AddLink=props.addLink;return 0===items.length?(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex justify-center flex-col"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(NoItems,{children:t("orders:calculateRates:tabs:orderContents:noItems")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(AddLink,{})]})):(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(HeaderRow,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(HalfSection,{children:"Item"}),(0,emotion_react_jsx_runtime_browser_esm.FD)(HalfSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(HeaderRowSubtitle,{children:"Quantity"}),(0,emotion_react_jsx_runtime_browser_esm.FD)(HeaderRowSubtitle,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)("span",(0,tslib_es6.Cl)({className:"mr-1"},{children:"Weight"})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({hoverable:!0,inverted:!0,position:"top center",size:"mini",trigger:(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"info",className:"align-middle",src:icon_info})},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"w-48"},{children:t("orders:calculateRates:tabs:tooltip:info:weightApprox")}))}))]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(HeaderRowSubtitle,{children:"Value"})]})]}),items.map((function(item){var _a,formattedPrice=t("currency",{value:{currency_iso:(null===(_a=item.currency)||void 0===_a?void 0:_a.iso)||constants_currency.q.USD.iso,value:item.value||"0"}});return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(HalfSection,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(ItemsList_LineItemTextContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderItemsCard_ItemTitleInfo,{hasError:item.hasError,id:item.id,onEditClick,subtitle:item.subtitle,title:item.title,variant:item.variant})})}),(0,emotion_react_jsx_runtime_browser_esm.FD)(HalfSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Amount,{children:item.quantity}),(0,emotion_react_jsx_runtime_browser_esm.FD)(Amount,{children:[item.weight," ",item.weightUnit]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Amount,{children:formattedPrice})]})]}),(0,index_browser.Ak)())})),(0,emotion_react_jsx_runtime_browser_esm.Y)(AddLink,{})]})}));const OrderItemsCard_ItemsList=ComposedItemsList;var ItemsList_templateObject_1,ItemsList_templateObject_2,ItemsList_templateObject_3,ItemsList_templateObject_4,ItemsList_templateObject_5,ComposedOrderNoteForm=(0,utils_translate.Tl)("orders")((function(props){var orderNoteFormMethods=props.orderNoteFormMethods,rows=props.rows,t=props.t,control=orderNoteFormMethods.control,errors=orderNoteFormMethods.formState.errors,renderTextField=react.useCallback((function(_a){var _b,field=_a.field,ref=field.ref,props=(0,tslib_es6.Tt)(field,["ref"]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(TextArea.ol,(0,tslib_es6.Cl)({},props,{errorMessage:null===(_b=errors.noteText)||void 0===_b?void 0:_b.message,responsive:!0,rows:void 0!==rows?rows:10,textAreaRef:ref}))}),[errors]);return(0,emotion_react_jsx_runtime_browser_esm.Y)("form",{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(index_esm.xI,{control,name:"noteText",render:renderTextField,rules:{maxLength:{message:t("orderNoteForm.tooLongError"),value:1e3}}})})}));const OrderNoteForm_OrderNoteForm=ComposedOrderNoteForm;var prod_analytics_actions=__webpack_require__("./app/actions/prod-analytics.actions.ts");const OrderNoteForm_useOrderNoteForm=function(orderSelection,autoFocus){var selectedBatchEntryIds=(0,lodash.flatten)(Object.values(orderSelection)),selectedBatchEntries=(0,es.d4)((function(state){return(0,batch_entry_selectors.uq)(state,{batchEntryIds:selectedBatchEntryIds})})),dispatch=(0,es.wA)(),_a=(0,tslib_es6.zs)(react.useMemo((function(){var firstNote=function(selectedBatchEntries){var _a,_b;return(null===(_b=null===(_a=selectedBatchEntries.find((function(batchEntry){var _a;return!!(null===(_a=batchEntry.extras)||void 0===_a?void 0:_a.packingSlipText)})))||void 0===_a?void 0:_a.extras)||void 0===_b?void 0:_b.packingSlipText)||""}(selectedBatchEntries),isAllNotesSameResult=function(selectedBatchEntries,firstNote){return selectedBatchEntries.every((function(batchEntry){var _a,currBatchEntryText=null===(_a=batchEntry.extras)||void 0===_a?void 0:_a.packingSlipText;return currBatchEntryText===firstNote||!currBatchEntryText&&!firstNote}))}(selectedBatchEntries,firstNote);return[isAllNotesSameResult?firstNote:"",isAllNotesSameResult]}),[selectedBatchEntries]),2),defaultNote=_a[0],isAllNotesSame=_a[1],defaultValues=(0,react.useMemo)((function(){return{noteText:defaultNote}}),[defaultNote]),formToReturn=(0,index_esm.mN)({defaultValues,mode:"onBlur",reValidateMode:"onBlur"}),getValues=formToReturn.getValues,reset=formToReturn.reset,setFocus=formToReturn.setFocus;return react.useEffect((function(){autoFocus&&setFocus("noteText")}),[setFocus]),react.useEffect((function(){reset({noteText:defaultNote})}),[reset,defaultNote]),[formToReturn,react.useCallback((function(){var formValues=getValues();dispatch((0,orders_actions.is)(orderSelection,formValues.noteText,selectedBatchEntryIds)),dispatch((0,prod_analytics_actions.o)("orders-add-note-submit",{numOrders:Object.keys(orderSelection).length}))}),[orderSelection]),isAllNotesSame]},OrderNoteModal_OrderNoteForm=OrderNoteForm_OrderNoteForm;var TitleSubtext=(0,emotion_styled_browser_esm.A)("span")(OrderNoteModal_templateObject_1||(OrderNoteModal_templateObject_1=(0,tslib_es6.ue)(["\n  font-size: 1.125rem;\n  color: ",";\n  font-weight: ",";\n"],["\n  font-size: 1.125rem;\n  color: ",";\n  font-weight: ",";\n"])),styles_constants.Tj.gray400,styles_constants.Wy.normal),ComposedOrderNoteModal=(0,utils_translate.Tl)("orders")((function(props){var isOpen=props.isOpen,onClose=props.onClose,onSuccessfulSubmit=props.onSuccessfulSubmit,orderSelection=props.orderSelection,t=props.t,_a=(0,tslib_es6.zs)(OrderNoteForm_useOrderNoteForm(orderSelection,!0),3),orderNoteFormMethods=_a[0],handleOrderNoteFormSubmit=_a[1],isAllNotesSame=_a[2],_b=orderNoteFormMethods.formState,isDirty=_b.isDirty,isValid=_b.isValid,handleSubmit=orderNoteFormMethods.handleSubmit,dispatch=(0,es.wA)(),patchBatchEntriesExtrasRequest=(0,es.d4)(orders_selectors.bL),numOrders=Object.keys(orderSelection).length;react.useEffect((function(){return function(){dispatch((0,orders_actions.Gp)())}}),[]);var isActionButtonDisabled=react.useMemo((function(){return!(!isDirty&&!isAllNotesSame)&&(!isValid||!isDirty)}),[isValid,isDirty,isAllNotesSame]),handleActionButtonNotRequesting=react.useCallback((function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.Tk,(0,tslib_es6.Cl)({disabled:isActionButtonDisabled,fullWidth:!0,onClick:handleSubmit(handleOrderNoteFormSubmit)},{children:t("phrases.save")}))}),[isActionButtonDisabled]),handleActionButtonRequesting=react.useCallback((function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.Tk,(0,tslib_es6.Cl)({disabled:!0,fullWidth:!0,isLoading:!0,onClick:handleSubmit(handleOrderNoteFormSubmit)},{children:t("phrases.save")}))}),[]),handleActionButtonSuccess=react.useCallback((function(){onSuccessfulSubmit&&onSuccessfulSubmit(),onClose(),dispatch((0,orders_actions.Gp)())}),[onSuccessfulSubmit,onClose]),renderActionButton=react.useCallback((function(){return(0,fetchable.A7)(handleActionButtonNotRequesting,handleActionButtonRequesting,handleActionButtonSuccess,handleActionButtonNotRequesting)(patchBatchEntriesExtrasRequest)}),[patchBatchEntriesExtrasRequest,handleActionButtonNotRequesting]),handleError=react.useCallback((function(errorMessage){return(0,emotion_react_jsx_runtime_browser_esm.Y)(Message.Kw,{children:errorMessage})}),[]),renderErrorMessage=react.useCallback((function(){return(0,fetchable.A7)(lodash.noop,lodash.noop,lodash.noop,handleError)(patchBatchEntriesExtrasRequest)}),[patchBatchEntriesExtrasRequest]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(Modal.A.Container,(0,tslib_es6.Cl)({hasNoPaddingHeader:!0,isOpen,onClose,size:"mdl",zIndex:1200},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Modal.A.Header,(0,tslib_es6.Cl)({hideBorder:!0,hidePadding:!0},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledComponents.a1,{children:[t("orderNoteModal.title",{count:numOrders||1})," ",numOrders>1&&(0,emotion_react_jsx_runtime_browser_esm.FD)(TitleSubtext,{children:[" ",t("orders:actions:multi:ordersCount",{count:numOrders})]})]})})),(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledComponents.hb,{children:[renderErrorMessage(),(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderNoteModal_OrderNoteForm,{orderNoteFormMethods})]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.al,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"w-full"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledComponents.Zb,(0,tslib_es6.Cl)({dataPendo:"orders-add-note-cancel",onClick:onClose},{children:t("phrases.cancel")})),renderActionButton()]}))})]}))}));var OrderNoteModal_templateObject_1;const All_OrderNoteModal=ComposedOrderNoteModal;var PackingSlipTitle=emotion_styled_browser_esm.A.div(OrderNoteSection_templateObject_1||(OrderNoteSection_templateObject_1=(0,tslib_es6.ue)(["\n  font-size: 0.875rem;\n  color: ",";\n"],["\n  font-size: 0.875rem;\n  color: ",";\n"])),styles_constants.Tj.black),PackingSlipText=emotion_styled_browser_esm.A.div(OrderNoteSection_templateObject_2||(OrderNoteSection_templateObject_2=(0,tslib_es6.ue)(["\n  font-size: 0.75rem;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  margin-top: 1rem;\n"],["\n  font-size: 0.75rem;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  margin-top: 1rem;\n"]))),ComposedOrderNoteSection=(0,utils_translate.Tl)("orders")((function(props){var _a,_b,batchEntry=props.batchEntry,order=props.order,showActionLinkOnEmpty=props.showActionLinkOnEmpty,t=props.t,_c=(0,tslib_es6.zs)(react.useState(!1),2),isOrderNoteModalOpen=_c[0],setIsOrderNoteModalOpen=_c[1],handleOpenOrderNoteModal=react.useCallback((function(){return setIsOrderNoteModalOpen(!0)}),[]),handleCloseOrderNoteModal=react.useCallback((function(){return setIsOrderNoteModalOpen(!1)}),[]),orderSelection=((_a={})[order.objectId]=batchEntry?[batchEntry.id]:[],_a),packingSlipText=null===(_b=null==batchEntry?void 0:batchEntry.extras)||void 0===_b?void 0:_b.packingSlipText;return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[packingSlipText?(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"h-24 my-3"},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(GrayInfoCard,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex justify-between leading-6"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(PackingSlipTitle,{children:t("orderNoteCard.title")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({onClick:handleOpenOrderNoteModal},{children:t("orders:actions:single:edit")}))]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(PackingSlipText,{children:packingSlipText})]})})):showActionLinkOnEmpty?(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({onClick:handleOpenOrderNoteModal},{children:t("orders:actions:single:addNote")})):null,isOrderNoteModalOpen&&(0,emotion_react_jsx_runtime_browser_esm.Y)(All_OrderNoteModal,{isOpen:!0,onClose:handleCloseOrderNoteModal,orderSelection})]})}));const OrderItemsCard_OrderNoteSection=ComposedOrderNoteSection;var OrderNoteSection_templateObject_1,OrderNoteSection_templateObject_2,CustomsItem=__webpack_require__("./app/types/CustomsItem.ts"),SummaryRow=(0,emotion_styled_browser_esm.A)("div")(OrderTotals_templateObject_1||(OrderTotals_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 4px 0;\n  ","\n\n  /* This is weird, but it acts as a border collapse. Due to component structure */\n  /* it gets difficult to avoid double borders in one case (Store order with items). */\n  margin-top: -1px;\n\n  ","\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 4px 0;\n  ","\n\n  /* This is weird, but it acts as a border collapse. Due to component structure */\n  /* it gets difficult to avoid double borders in one case (Store order with items). */\n  margin-top: -1px;\n\n  ","\n"])),(function(props){return props.withBorder?"border-top: 1px solid ".concat(styles_constants.Tj.geyser,";"):""}),(function(props){return"color: ".concat(props.total?styles_constants.Tj.gray1000:styles_constants.Tj.gray400)})),SummaryCell=(0,emotion_styled_browser_esm.A)("div")(OrderTotals_templateObject_2||(OrderTotals_templateObject_2=(0,tslib_es6.ue)(["\n  width: 100%;\n  display: flex;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n\n  &:last-of-type {\n    justify-content: flex-end;\n  }\n"],["\n  width: 100%;\n  display: flex;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n\n  &:last-of-type {\n    justify-content: flex-end;\n  }\n"]))),ComposedOrderTotals=(0,utils_translate.Tl)()((function(props){var batchEntry=props.batchEntry,isCustoms=props.isCustoms,items=props.items,order=props.order,showOrderTotal=props.showOrderTotal,t=props.t,_a=(0,tslib_es6.zs)(react.useState(!1),2),showDeleteConfirm=_a[0],setShowDeleteConfirm=_a[1],_b=(0,tslib_es6.zs)(react.useState(!1),2),cachedIsDeleting=_b[0],setCachedIsDeleting=_b[1],isDeletingCustomsItem=(0,es.d4)(getIsDeletingCustomsItem),dispatch=(0,es.wA)();if(react.useEffect((function(){cachedIsDeleting&&!isDeletingCustomsItem&&setShowDeleteConfirm(!1),setCachedIsDeleting(isDeletingCustomsItem)}),[isDeletingCustomsItem]),0===items.length)return null;var totals=items.reduce((function(totals,item){var _a,itemTotalWeight=Number(item.weight||"0"),itemTotalAmount=Number(item.value||"0");return{count:totals.count+item.quantity,currencyIso:(null===(_a=item.currency)||void 0===_a?void 0:_a.iso)||totals.currencyIso,totalValue:totals.totalValue+itemTotalAmount,totalWeight:totals.totalWeight+itemTotalWeight,weightUnit:item.weightUnit||totals.weightUnit}}),{count:0,currencyIso:"",totalValue:0,totalWeight:0,weightUnit:null}),formattedPrice=t("currency",{value:{currency_iso:totals.currencyIso||constants_currency.q.USD.iso,value:totals.totalValue||"0.00"}}),formattedShippingCost=t("currency",{value:{currency_iso:order.shippingCostCurrency,value:order.shippingCost||"0.00"}}),formattedTotalTax=t("currency",{value:{currency_iso:order.shippingCostCurrency,value:order.totalTax||"0.00"}}),orderTotal=order.totalPrice?t("currency",{value:{currency_iso:order.currency||constants_currency.q.USD.iso,value:order.totalPrice}}):formattedPrice,closeDeleteConfirmation=function(){setShowDeleteConfirm(!1)},deleteAllCustomsItemsConfirm=function(){var _a,_b;dispatch(deleteCustomsItem(((_a={})[order.objectId]=batchEntry?[batchEntry.id]:[],_a),(null===(_b=null==batchEntry?void 0:batchEntry.customsItems)||void 0===_b?void 0:_b.map(CustomsItem.rx))||[]))};return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[isCustoms&&showDeleteConfirm&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Dialog_ErrorDialog,{closeButtonText:t("orders:calculateRates:tabs:shipmentInfo:modals:common:cancel"),confirmButtonText:t("orders:calculateRates:tabs:shipmentInfo:modals:customsItemModal:deleteAllConfirm"),isLoading:isDeletingCustomsItem,isOpen:!0,message:t("orders:calculateRates:tabs:shipmentInfo:modals:customsItemModal:deleteAllConfirmationMessage"),onClose:closeDeleteConfirmation,onConfirm:deleteAllCustomsItemsConfirm}),(0,emotion_react_jsx_runtime_browser_esm.FD)(SummaryRow,(0,tslib_es6.Cl)({withBorder:!0},{children:[isCustoms?(0,emotion_react_jsx_runtime_browser_esm.Y)(HalfSection,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.k0,(0,tslib_es6.Cl)({onClick:function(){setShowDeleteConfirm(!0)}},{children:t("orders:calculateRates:tabs:orderContents:deleteAllCustomsItems")}))}):(0,emotion_react_jsx_runtime_browser_esm.Y)(HalfSection,{children:t("orders:calculateRates:tabs:orderContents:inThisShipment")}),(0,emotion_react_jsx_runtime_browser_esm.FD)(HalfSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(SummaryCell,{children:t("orders:calculateRates:tabs:orderContents:itemCount",{count:totals.count})}),(0,emotion_react_jsx_runtime_browser_esm.FD)(SummaryCell,{children:[totals.totalWeight.toFixed(2)," ",totals.weightUnit]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SummaryCell,{children:formattedPrice})]})]})),showOrderTotal&&!!order.shippingCost&&Number(order.shippingCost)>0&&(0,emotion_react_jsx_runtime_browser_esm.FD)(SummaryRow,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(HalfSection,{children:t("orders:calculateRates:tabs:orderContents:orderShippingCost")}),(0,emotion_react_jsx_runtime_browser_esm.FD)(HalfSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(SummaryCell,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SummaryCell,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SummaryCell,{children:formattedShippingCost})]})]}),showOrderTotal&&!!order.totalTax&&Number(order.totalTax)>0&&(0,emotion_react_jsx_runtime_browser_esm.FD)(SummaryRow,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(HalfSection,{children:t("orders:calculateRates:tabs:orderContents:orderTaxesTotal")}),(0,emotion_react_jsx_runtime_browser_esm.FD)(HalfSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(SummaryCell,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SummaryCell,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SummaryCell,{children:formattedTotalTax})]})]}),showOrderTotal&&(0,emotion_react_jsx_runtime_browser_esm.FD)(SummaryRow,(0,tslib_es6.Cl)({total:!0},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(HalfSection,{children:t("orders:calculateRates:tabs:orderContents:orderTotal")}),(0,emotion_react_jsx_runtime_browser_esm.FD)(HalfSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(SummaryCell,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SummaryCell,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SummaryCell,{children:orderTotal})]})]}))]})}));const OrderItemsCard_OrderTotals=ComposedOrderTotals;var OrderTotals_templateObject_1,OrderTotals_templateObject_2,OrderItemsCard_LineItemContainer=(0,emotion_styled_browser_esm.A)("div")(OrderItemsCard_templateObject_1||(OrderItemsCard_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  ",";\n"],["\n  display: flex;\n  ",";\n"])),(function(props){return props.empty?"\n  justify-content: center;\n  font-weight: ".concat(styles_constants.Wy.normal,";\n  flex-direction: column;"):""})),AddLinkContainer=(0,emotion_styled_browser_esm.A)("div")(OrderItemsCard_templateObject_2||(OrderItemsCard_templateObject_2=(0,tslib_es6.ue)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px 0;\n\n  & > a:hover {\n    text-decoration: underline;\n  }\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 16px 0;\n\n  & > a:hover {\n    text-decoration: underline;\n  }\n"]))),MessageIconContainer=emotion_styled_browser_esm.A.div(OrderItemsCard_templateObject_3||(OrderItemsCard_templateObject_3=(0,tslib_es6.ue)(["\n  box-sizing: border-box;\n  height: 33px;\n  min-width: 33px;\n  border: 1px solid ",";\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  border-radius: 50%;\n  margin-right: 20px;\n  background-color: ",";\n"],["\n  box-sizing: border-box;\n  height: 33px;\n  min-width: 33px;\n  border: 1px solid ",";\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  border-radius: 50%;\n  margin-right: 20px;\n  background-color: ",";\n"])),styles_constants.Tj.gray50,styles_constants.Tj.white),OrderItemsCard_InfoContainer=(0,emotion_styled_browser_esm.A)(Layout.n5)(OrderItemsCard_templateObject_4||(OrderItemsCard_templateObject_4=(0,tslib_es6.ue)(["\n  align-items: center;\n  background-color: ",";\n  padding: 20px 16px;\n  border-radius: 3px;\n  box-shadow: 0 2px 5px 0 rgba(233, 233, 233, 0.5);\n"],["\n  align-items: center;\n  background-color: ",";\n  padding: 20px 16px;\n  border-radius: 3px;\n  box-shadow: 0 2px 5px 0 rgba(233, 233, 233, 0.5);\n"])),styles_constants.Tj.gray25),ListContainer=(0,emotion_styled_browser_esm.A)("div")(OrderItemsCard_templateObject_5||(OrderItemsCard_templateObject_5=(0,tslib_es6.ue)(["\n  margin-top: 16px;\n"],["\n  margin-top: 16px;\n"]))),ComposedOrderItemsCard=(0,utils_translate.Tl)()((function(props){var _a,_b,batchEntry=props.batchEntry,order=props.order,t=props.t,isLineItemMutable=(0,Order.Dd)(order),hasLineItems=!!order.lineItems.length,isBypassCustoms=!!(null===(_a=null==batchEntry?void 0:batchEntry.extras)||void 0===_a?void 0:_a.isBypassCustoms),defaultUserAddress=(0,es.d4)(user_selectors.GA),requiresCustoms=batchEntry?(0,OrderBatchEntry.p2)(batchEntry)&&!isBypassCustoms:(0,Order.p2)(order,defaultUserAddress),canEditCustomsItems=requiresCustoms&&!isBypassCustoms,dispatch=(0,es.wA)(),_c=(0,tslib_es6.zs)(react.useState({kind:"none"}),2),action=_c[0],setAction=_c[1],_d=(0,tslib_es6.zs)(react.useState(canEditCustomsItems?"customsItems":"lineItems"),2),selectedTab=_d[0],setSelectedTab=_d[1];react.useEffect((function(){setSelectedTab(requiresCustoms?"customsItems":"lineItems")}),[requiresCustoms]);var lineItems=(0,batchEntryRendering.nr)(order,batchEntry||void 0),customsItems=(null===(_b=null==batchEntry?void 0:batchEntry.customsItems)||void 0===_b?void 0:_b.length)?batchEntry.customsItems:[],hasCustomsError=requiresCustoms&&!(0,Order.sf)(order)&&!customsItems.length,orderHasValidLineItemsOrCustomsItems=!batchEntry&&(0,Order.xf)(order)||batchEntry&&!!customsItems.length,hasAtLeastOneItemInvalid=hasLineItems&&!orderHasValidLineItemsOrCustomsItems,orderCustomsErrors=order.errors.find((function(error){return["customs_item_invalid","order_item_incomplete","order_weight_exceeded"].includes(error.code||"")})),handleClose=function(){return setAction({kind:"none"})},handleSplitClick=function(){return dispatch((0,orders_actions.gW)(order.objectId))},handleAddLineItem=react.useCallback((function(){return setAction({kind:"add"})}),[]),handleAddCustomsItem=react.useCallback((function(){return setAction({kind:"add-customs"})}),[]),modal=react.useMemo((function(){switch(action.kind){case"none":return null;case"add":return(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderItemsCard_ItemModal,{appLocation:"order_details",lineItem:null,onClose:handleClose,order});case"edit":return(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderItemsCard_ItemModal,{appLocation:"order_details",lineItem:lineItems.find((function(lineItem){return lineItem.id===action.lineItemId}))||null,onClose:handleClose,order});case"add-customs":return(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderItemsCard_CustomsItemModal,{appLocation:"order_details",batchEntry,customsItem:null,lineItem:null,onClose:handleClose,order});case"edit-customs":var id_1=action.id,customsItem=null,lineItem=null;switch(id_1.kind){case"customsItem":customsItem=customsItems.find((function(ci){return ci.id===id_1.value}))||null;break;case"lineItem":lineItem=lineItems.find((function(lineItem){return lineItem.id===id_1.value}))||null}return(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderItemsCard_CustomsItemModal,{appLocation:"order_details",batchEntry,customsItem,lineItem,onClose:handleClose,order})}}),[action]),addCustomsItemAddOnComponent=react.useMemo((function(){return canEditCustomsItems?(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({onClick:handleAddCustomsItem},{children:t("orders:calculateRates:tabs:orderContents:addCustomsItemAddOnLink")})):null}),[isBypassCustoms,requiresCustoms,handleAddCustomsItem]),addLineItemAddOnComponent=react.useMemo((function(){return!isLineItemMutable||(0,Order.sf)(order)?null:(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({onClick:handleAddLineItem},{children:t("orders:calculateRates:tabs:orderContents:addLineItemAddOnLink")}))}),[isLineItemMutable,order,handleAddLineItem]),addons=react.useMemo((function(){var isEligibleForPartialFulfillment=(0,Order.FC)(order),canEditLineItems=isBypassCustoms||!requiresCustoms;return isEligibleForPartialFulfillment||canEditLineItems?isEligibleForPartialFulfillment?(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({direction:"row",gap:2},{children:[canEditLineItems&&addLineItemAddOnComponent,isEligibleForPartialFulfillment&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({dataHeap:"split-order",id:"button-split-order",onClick:handleSplitClick},{children:t("orders:calculateRates:tabs:orderItems:splitOrder")}))]})):isBypassCustoms||!requiresCustoms?addLineItemAddOnComponent:null:null}),[addLineItemAddOnComponent,isBypassCustoms,requiresCustoms,order]),items=lineItems.map((function(li){return{currency:li.currency,hasError:!1,id:{kind:"lineItem",value:li.id},quantity:li.quantity,subtitle:li.sku?t("orders:calculateRates:tabs:orderContents:sku",{sku:li.sku}):"",title:li.title,value:li.totalAmount,variant:li.variantTitle,weight:li.totalWeight,weightUnit:li.weightUnit}})),customsItemsItems=[];customsItemsItems=batchEntry?customsItems.map((function(ci){var _a;return{currency:ci.valueCurrency,hasError:!1,id:{kind:"customsItem",value:ci.id},quantity:ci.quantity,subtitle:t("orders:calculateRates:tabs:orderContents:origin",{country:(null===(_a=ci.originCountry)||void 0===_a?void 0:_a.name)||"Unknown"}),title:ci.description,value:ci.valueAmount.toString(),weight:ci.convertedNetWeight,weightUnit:ci.convertedMassUnit}})):lineItems.map((function(li){var _a,hasError=!(0,LineItem.wY)(li);return{currency:li.currency,hasError,id:{kind:"lineItem",value:li.id},quantity:li.quantity,subtitle:t("orders:calculateRates:tabs:orderContents:origin",{country:(null===(_a=li.countryOfOrigin)||void 0===_a?void 0:_a.name)||"Unknown"}),title:li.title,value:li.totalAmount,weight:li.totalWeight,weightUnit:li.weightUnit}}));var showCantEditMessage,hasCustomsItemError=customsItemsItems.some((function(ci){return ci.hasError}))||0===customsItemsItems.length;return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Tabs_ShipmentInfoCardTitle,(0,tslib_es6.Cl)({invalid:hasCustomsError},{children:[t("orders:calculateRates:tabs:orderContents:lineItemsTitle"),addons]})),modal,(showCantEditMessage=(0,Order.sf)(order)&&"lineItems"===selectedTab,requiresCustoms&&(!orderHasValidLineItemsOrCustomsItems||"order_weight_exceeded"===(null==orderCustomsErrors?void 0:orderCustomsErrors.code))||showCantEditMessage?(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderItemsCard_LineItemContainer,(0,tslib_es6.Cl)({empty:!0},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(OrderItemsCard_InfoContainer,(0,tslib_es6.Cl)({flexDirection:Layout.bo.Row},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(MessageIconContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"",src:icon_customs_declaration})}),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:showCantEditMessage?t("orders:calculateRates:tabs:orderContents:cantEditLineItems"):hasAtLeastOneItemInvalid||orderCustomsErrors&&"order_item_incomplete"===orderCustomsErrors.code?t("orders:calculateRates:rates:errors:order_item_incomplete"):!orderHasValidLineItemsOrCustomsItems||orderCustomsErrors&&"customs_item_invalid"===orderCustomsErrors.code?t("orders:calculateRates:rates:errors:customs_item_invalid"):t("orders:calculateRates:tabs:shipmentInfo:customsDeclarationEmpty")})]}))})):null),(0,emotion_react_jsx_runtime_browser_esm.FD)(components_Tabs.Container,(0,tslib_es6.Cl)({activeBorderBottom:!0,onTabClick:setSelectedTab,selectedTab},{children:[canEditCustomsItems&&(0,emotion_react_jsx_runtime_browser_esm.FD)(components_Tabs.TabsList,(0,tslib_es6.Cl)({activeBorderBottom:!0,addOn:"customsItems"===selectedTab?addCustomsItemAddOnComponent:addLineItemAddOnComponent},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Tabs.Tab,(0,tslib_es6.Cl)({tabKey:"lineItems"},{children:"Order"})),(0,emotion_react_jsx_runtime_browser_esm.FD)(components_Tabs.Tab,(0,tslib_es6.Cl)({tabKey:"customsItems"},{children:[hasCustomsItemError&&(0,emotion_react_jsx_runtime_browser_esm.Y)("span",(0,tslib_es6.Cl)({className:"text-base mr-1"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorIcon,{})}))," ","Customs"]}))]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(ListContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(components_Tabs.Content,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(components_Tabs.TabContent,(0,tslib_es6.Cl)({for:"lineItems"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderItemsCard_ItemsList,{addLink:function(){return!isLineItemMutable||(0,Order.sf)(order)||hasLineItems?null:(0,emotion_react_jsx_runtime_browser_esm.Y)(AddLinkContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({dataE2E:"order-details-add-line-item-link",onClick:handleAddLineItem},{children:t("orders:calculateRates:tabs:orderContents:addLineItem")}))})},items,onEditClick:(0,Order.c0)(order)?function(id){"lineItem"===id.kind&&setAction({kind:"edit",lineItemId:id.value})}:void 0}),(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderItemsCard_OrderTotals,{items,order,showOrderTotal:!0}),(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderItemsCard_OrderNoteSection,{batchEntry,order,showActionLinkOnEmpty:hasLineItems})]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(components_Tabs.TabContent,(0,tslib_es6.Cl)({for:"customsItems"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderItemsCard_ItemsList,{addLink:function(){return isBypassCustoms||!requiresCustoms||customsItemsItems.length>0?null:(0,emotion_react_jsx_runtime_browser_esm.Y)(AddLinkContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({dataE2E:"order-details-add-customs-item-link",onClick:handleAddCustomsItem},{children:t("orders:calculateRates:tabs:orderContents:addCustomsItem")}))})},items:customsItemsItems,onEditClick:function(id){setAction({id,kind:"edit-customs"})}}),(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderItemsCard_OrderTotals,{batchEntry,isCustoms:!0,items:customsItemsItems,order,showOrderTotal:!1}),(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderItemsCard_OrderNoteSection,{batchEntry,order,showActionLinkOnEmpty:hasLineItems})]}))]})})]}))]})}));var OrderItemsCard_templateObject_1,OrderItemsCard_templateObject_2,OrderItemsCard_templateObject_3,OrderItemsCard_templateObject_4,OrderItemsCard_templateObject_5;const Tabs_OrderItemsCard=ComposedOrderItemsCard;const Tabs_CustomsDeclarationItemsCard=react.memo((function(props){var batchEntry=props.batchEntry,hideCustoms=props.hideCustoms,order=props.order,senderAddress=props.senderAddress;return(0,emotion_react_jsx_runtime_browser_esm.FD)(Tabs_ShipmentInfoCard,{children:[!hideCustoms&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_CustomsDeclarationCard,{batchEntry,customsDeclaration:null==batchEntry?void 0:batchEntry.customsDeclaration,customsItems:null==batchEntry?void 0:batchEntry.customsItems,order,senderAddress:(null==batchEntry?void 0:batchEntry.addressFrom)||order.addressFrom||senderAddress}),(0,emotion_react_jsx_runtime_browser_esm.Y)(BorderLine,{})]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_OrderItemsCard,{batchEntry,order})]})}));var BusinessRule=__webpack_require__("./app/types/BusinessRule.ts"),HeaderContainer=(0,emotion_styled_browser_esm.A)("div")(OrderRuleInfoCard_templateObject_1||(OrderRuleInfoCard_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  flex-direction: row;\n"],["\n  display: flex;\n  flex-direction: row;\n"]))),RuleCardHeader=(0,emotion_styled_browser_esm.A)("header")(OrderRuleInfoCard_templateObject_2||(OrderRuleInfoCard_templateObject_2=(0,tslib_es6.ue)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: auto;\n  font-size: 0.875rem;\n  color: ",";\n"],["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: auto;\n  font-size: 0.875rem;\n  color: ",";\n"])),styles_constants.Tj.gray1000),TitleIconGroup=(0,emotion_styled_browser_esm.A)("div")(OrderRuleInfoCard_templateObject_3||(OrderRuleInfoCard_templateObject_3=(0,tslib_es6.ue)(["\n  display: flex;\n"],["\n  display: flex;\n"]))),OrderRuleInfoCard_Icon=(0,emotion_styled_browser_esm.A)("img")(OrderRuleInfoCard_templateObject_4||(OrderRuleInfoCard_templateObject_4=(0,tslib_es6.ue)(["\n  margin-right: 0.625rem;\n"],["\n  margin-right: 0.625rem;\n"]))),OrderRuleInfoCard_CardSection=(0,emotion_styled_browser_esm.A)(components_Card)(OrderRuleInfoCard_templateObject_5||(OrderRuleInfoCard_templateObject_5=(0,tslib_es6.ue)(["\n  margin: 1rem 0;\n  padding: 1.25rem 1.375rem;\n  background-color: ",";\n  border-color: ",";\n"],["\n  margin: 1rem 0;\n  padding: 1.25rem 1.375rem;\n  background-color: ",";\n  border-color: ",";\n"])),styles_constants.Tj.sea50,styles_constants.Tj.sea300),FullWidth=(0,emotion_styled_browser_esm.A)("div")(OrderRuleInfoCard_templateObject_6||(OrderRuleInfoCard_templateObject_6=(0,tslib_es6.ue)(["\n  width: 100%;\n"],["\n  width: 100%;\n"]))),OrderRuleInfoCard_BodyContainer=(0,emotion_styled_browser_esm.A)("div")(OrderRuleInfoCard_templateObject_7||(OrderRuleInfoCard_templateObject_7=(0,tslib_es6.ue)(["\n  margin: 0.5rem 0.5rem 0.5rem 2rem;\n"],["\n  margin: 0.5rem 0.5rem 0.5rem 2rem;\n"]))),RuleCardSection=(0,emotion_styled_browser_esm.A)("div")(OrderRuleInfoCard_templateObject_8||(OrderRuleInfoCard_templateObject_8=(0,tslib_es6.ue)(["\n  margin: 0.5rem 0;\n"],["\n  margin: 0.5rem 0;\n"]))),OrderRuleInfoCard_SectionTitle=(0,emotion_styled_browser_esm.A)("div")(OrderRuleInfoCard_templateObject_9||(OrderRuleInfoCard_templateObject_9=(0,tslib_es6.ue)(["\n  font-weight: ",";\n  font-size: 0.75rem;\n  line-height: 1.125rem;\n  color: ",";\n"],["\n  font-weight: ",";\n  font-size: 0.75rem;\n  line-height: 1.125rem;\n  color: ",";\n"])),styles_constants.Wy.medium,styles_constants.Tj.gray1000),SectionText=(0,emotion_styled_browser_esm.A)("div")(OrderRuleInfoCard_templateObject_10||(OrderRuleInfoCard_templateObject_10=(0,tslib_es6.ue)(["\n  font-size: 0.75rem;\n  color: ",";\n"],["\n  font-size: 0.75rem;\n  color: ",";\n"])),styles_constants.Tj.gray1000);const Tabs_OrderRuleInfoCard=function(props){var _a=(0,tslib_es6.zs)((0,react.useState)(!1),2),isExpanded=_a[0],updateExpandedState=_a[1],dispatch=(0,es.wA)(),isServiceLevelsRequestInitiated=(0,es.d4)(providers_selectors.Hk),handleExpandLink=react.useCallback((function(event){event.stopPropagation(),event.preventDefault(),updateExpandedState(!isExpanded)}),[isExpanded]),expandLink=(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.Oc,(0,tslib_es6.Cl)({hideUnderline:!0,href:"#",onClick:handleExpandLink},{children:isExpanded?"Hide details":"Show details"}));(0,react.useEffect)((function(){isServiceLevelsRequestInitiated||dispatch(fetchServiceLevelsByAccount())}),[]);var rules=props.rules,getConditionString=function(filterOrClause){if((0,BusinessRule.v)(filterOrClause)){var filter=filterOrClause,description=(0,businessRules.re)(filter);return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[null==description?void 0:description.prefix,(0,emotion_react_jsx_runtime_browser_esm.FD)("span",(0,tslib_es6.Cl)({className:"italic"},{children:[" ",null==description?void 0:description.value]}))]})}var filterClause_1=filterOrClause,conditions=filterClause_1.filters.map(getConditionString);return 1===conditions.length?conditions[0]:(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:conditions.map((function(condition,index){return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[!!index&&(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:" ".concat(filterClause_1.operator," ")}),"(",condition,")"]})}))})},conditionString=function(rule){if(rule.filterGroup){var fg=rule.filterGroup;return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:fg.filters.map((function(filter,index){return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[!!index&&" AND ",getConditionString(filter)]})}))})}},renderAction=function(rule){return(0,emotion_react_jsx_runtime_browser_esm.FD)(RuleCardSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderRuleInfoCard_SectionTitle,{children:"Actions:"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SectionText,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(RuleDescription.A,{rules:new Array(rule)})})]})},ruleHeaderSummary=1===rules.length?(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:["Automation ",(0,emotion_react_jsx_runtime_browser_esm.Y)("span",(0,tslib_es6.Cl)({className:"italic"},{children:rules[0].name}))," applied"]}):(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:"".concat(rules.length," automations applied")});return(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderRuleInfoCard_CardSection,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(HeaderContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(FullWidth,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(RuleCardHeader,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(TitleIconGroup,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderRuleInfoCard_Icon,{src:icons.l2}),ruleHeaderSummary]}),expandLink]})})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderRuleInfoCard_BodyContainer,(0,tslib_es6.Cl)({hidden:!isExpanded},{children:rules.map((function(rule){return function(rule){return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(RuleCardSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderRuleInfoCard_SectionTitle,{children:"Conditions:"}),(0,emotion_react_jsx_runtime_browser_esm.FD)(SectionText,{children:["• ",conditionString(rule)]})]}),renderAction(rule)]})}(rule)}))}))]})})};var OrderRuleInfoCard_templateObject_1,OrderRuleInfoCard_templateObject_2,OrderRuleInfoCard_templateObject_3,OrderRuleInfoCard_templateObject_4,OrderRuleInfoCard_templateObject_5,OrderRuleInfoCard_templateObject_6,OrderRuleInfoCard_templateObject_7,OrderRuleInfoCard_templateObject_8,OrderRuleInfoCard_templateObject_9,OrderRuleInfoCard_templateObject_10,isDirty=__webpack_require__("./node_modules/redux-form/es/isDirty.js");const components_Anchor=Anchor_Anchor,components_FormError=FormError_FormError.A;var PackageInformation_Icon=(0,emotion_styled_browser_esm.A)("i")(PackageInformation_templateObject_1||(PackageInformation_templateObject_1=(0,tslib_es6.ue)(["\n  margin-right: 0.3125rem;\n  font-size: 1rem;\n"],["\n  margin-right: 0.3125rem;\n  font-size: 1rem;\n"]))),ApplyButton=(0,emotion_styled_browser_esm.A)(components_Button.jn)(PackageInformation_templateObject_2||(PackageInformation_templateObject_2=(0,tslib_es6.ue)(["\n  width: auto;\n"],["\n  width: auto;\n"]))),FormActions=(0,emotion_styled_browser_esm.A)(Modal.A.Footer)(PackageInformation_templateObject_3||(PackageInformation_templateObject_3=(0,tslib_es6.ue)(["\n  border-top: none;\n  padding: 0.5rem 0 0 0;\n"],["\n  border-top: none;\n  padding: 0.5rem 0 0 0;\n"]))),PackageInformation_WeightDimensionsWarningWrapper=(0,emotion_styled_browser_esm.A)("div")(PackageInformation_templateObject_4||(PackageInformation_templateObject_4=(0,tslib_es6.ue)(["\n  margin: 1rem 0;\n"],["\n  margin: 1rem 0;\n"])));const Tabs_PackageInformation=(0,utils_translate.Tl)("orders")((function(_a){var batchEntry=_a.batchEntry,initialExtrasValues=_a.initialExtrasValues,onSubmitParcel=_a.onSubmitParcel,order=_a.order,orderSelection=_a.orderSelection,t=_a.t,dispatch=(0,es.wA)(),defaultMassUnit=(0,es.d4)(user_selectors.cm),isParcelFormDirty=(0,es.d4)((function(state){return(0,isDirty.A)(constants_form.n6)(state)})),isSubmittingParcelForm=(0,es.d4)((function(state){return(0,isSubmitting.A)(constants_form.n6)(state)})),isInvalidParcelForm=(0,es.d4)((function(state){return(0,isInvalid.A)(constants_form.n6)(state)})),isExtrasDirty=(0,es.d4)((function(state){return(0,isDirty.A)(constants_form.n6)(state,"alcohol","dryIce","isReturnRequested","hazmat")})),batchEntryData=(0,es.d4)(batch_entry_selectors.zo),hasExceededPackageWeightError=(0,react.useMemo)((function(){return!!(null==batchEntry?void 0:batchEntry.errors.find((function(error){return"order_weight_exceeded"===error.code})))}),[null==batchEntry?void 0:batchEntry.errors]),importedWeightOption=(0,react.useMemo)((function(){return order.weightUnit?options.Ay.commonWeightOptions[order.weightUnit]:options.Ay.commonWeightOptions[defaultMassUnit]}),[order.weightUnit,defaultMassUnit]),batchEntryLineItems=(0,react.useMemo)((function(){return(null==batchEntry?void 0:batchEntry.lineItems)||[]}),[null==batchEntry?void 0:batchEntry.lineItems]),parcel=(0,react.useMemo)((function(){return(null==batchEntry?void 0:batchEntry.parcel)||null}),[null==batchEntry?void 0:batchEntry.parcel]),partialFulfillmentRequestImportedWeight=(0,react.useMemo)((function(){return batchEntry?(0,OrderBatchEntry.f2)(batchEntryLineItems,order.lineItems).toString():""}),[batchEntry,order.lineItems,batchEntryLineItems]),totalCustomsItemsWeight=(0,react.useMemo)((function(){return(0,OrderBatchEntry.Ag)(batchEntry)}),[batchEntry]),importedWeight=(0,react.useMemo)((function(){var _a;return batchEntry&&(0,OrderBatchEntry.p2)(batchEntry)&&totalCustomsItemsWeight?totalCustomsItemsWeight.toString():batchEntry&&batchEntry.partialFulfillmentRank>0?partialFulfillmentRequestImportedWeight:(null===(_a=(0,Order.J_)(order))||void 0===_a?void 0:_a.toString())||""}),[batchEntry,order,totalCustomsItemsWeight,partialFulfillmentRequestImportedWeight]),useImportedWeight=(0,react.useMemo)((function(){return!(!batchEntry||!batchEntry.parcel)&&batchEntry.useImportedWeight}),[batchEntry]),shouldRenderFooter=!parcel||isParcelFormDirty||hasExceededPackageWeightError,shouldRenderExceededPackageWeightError=hasExceededPackageWeightError&&!isSubmittingParcelForm,isValidPackage=!!parcel&&!hasExceededPackageWeightError;(0,react.useEffect)((function(){dispatch((0,orders_actions._W)(orderSelection))}),[dispatch,orderSelection]);var previousIsParcelFormDirty=(0,hooks_usePrevious.A)(isParcelFormDirty);(0,react.useEffect)((function(){isParcelFormDirty||previousIsParcelFormDirty===isParcelFormDirty||dispatch((0,orders_actions.m6)())}),[dispatch,isParcelFormDirty,previousIsParcelFormDirty]);var handleSubmit=(0,react.useCallback)((function(data){var _a,_b;trackPackageUpdateEvent(data,orderSelection,schema.ID,"order_details");var newParcel=shouldRenderFooter?(0,Parcel.On)(data):void 0,newExtras=isExtrasDirty?(0,Parcel.OS)(data):void 0,trackingReference=TrackingHelper.U.getTrackingReference(types.wK.name,"order_details",{isAutoSave:!1,isQuickSelect:!1,parcelId:null===(_a=null==newParcel?void 0:newParcel.userParcelTemplate)||void 0===_a?void 0:_a.objectId});utils_handleTrackPackageUpdatedOrAdded(trackingReference,orderSelection,batchEntryData,{isAutoSave:!1,isQuickSelect:!1,parcelId:null===(_b=null==newParcel?void 0:newParcel.userParcelTemplate)||void 0===_b?void 0:_b.objectId}),dispatch((0,orders_actions.xC)(orderSelection,newParcel,newExtras,trackingReference)),onSubmitParcel&&newParcel&&onSubmitParcel(newParcel)}),[shouldRenderFooter,isExtrasDirty,dispatch,orderSelection,batchEntryData]),resetParcelForm=(0,react.useCallback)((function(){dispatch((0,redux_form_es.cL)(constants_form.n6))}),[]),onSubmitParcelForm=(0,react.useCallback)((function(event){event.preventDefault(),utils_observability.O.startEvent("RATE_REFRESH_ORDER_DETAILS"),dispatch((0,redux_form_es.tA)(constants_form.n6))}),[dispatch]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Anchor,{id:"packageCard"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_ShipmentInfoCardTitle,(0,tslib_es6.Cl)({invalid:!isValidPackage},{children:t("orders:calculateRates:tabs:shipmentInfo:packageInfo")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(PackageInformation_WeightDimensionsWarningWrapper,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_PackageWeightDimensionsWarning,{})}),(0,emotion_react_jsx_runtime_browser_esm.FD)("form",(0,tslib_es6.Cl)({onSubmit:onSubmitParcelForm},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(All_ParcelForm,{appLocation:"order_details",batchEntryId:null==batchEntry?void 0:batchEntry.id,dataAnalyticsContext:"order_details",enableReinitialize:!0,existingParcel:parcel,importedWeight,importedWeightOption,initialExtrasValues,insideCard:!0,onSubmit:handleSubmit,orderSelection,shouldShowParcelExtras:!0,showZeroState:!0,someOrderHasImportedWeight:(0,Order.vz)(order),useDefault:!!parcel,useImportedWeight}),shouldRenderExceededPackageWeightError&&(0,emotion_react_jsx_runtime_browser_esm.FD)(components_FormError,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(PackageInformation_Icon,{className:"fa fa-exclamation-circle"}),t("orders:calculateRates:tabs:shipmentInfo:errors:orderWeightExceeded",{weight:totalCustomsItemsWeight,weightUnit:null==parcel?void 0:parcel.weightUnit})]}),shouldRenderFooter&&(0,emotion_react_jsx_runtime_browser_esm.Y)(FormActions,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"w-full"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Button.vM,(0,tslib_es6.Cl)({dataAnalytics:"".concat("order_details","PackageInfo-click-cancelButton"),dataPendo:"package-cancel",onClick:resetParcelForm},{children:t("phrases.cancel")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(ApplyButton,(0,tslib_es6.Cl)({dataAnalytics:"".concat("order_details","PackageInfo-click-saveButton"),dataE2E:"order-details-parcel-form-submit-btn",dataPendo:"package-save",disabled:isSubmittingParcelForm||isInvalidParcelForm,fullWidth:!0,onClick:onSubmitParcelForm,type:"submit"},{children:t("phrases.save")}))]}))})]}))]})}));var PackageInformation_templateObject_1,PackageInformation_templateObject_2,PackageInformation_templateObject_3,PackageInformation_templateObject_4,ComposedPackageAdditionalServicesCard=react.memo((function(props){var batchEntry=props.batchEntry,initialExtrasValues=props.initialExtrasValues,order=props.order,orderSelection=(0,react.useMemo)((function(){var _a;return(_a={})[order.objectId]=batchEntry?[batchEntry.id]:[],_a}),[order.objectId,null==batchEntry?void 0:batchEntry.id]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_ShipmentInfoCard,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_PackageInformation,{batchEntry,initialExtrasValues,onSubmitParcel:props.onSubmitParcel,order,orderSelection})})}));const Tabs_PackageAdditionalServicesCard=ComposedPackageAdditionalServicesCard;var BorderLine=(0,emotion_styled_browser_esm.A)("div")(ShipmentInfo_templateObject_1||(ShipmentInfo_templateObject_1=(0,tslib_es6.ue)(["\n  /* set to outer card container's (ShipmentInfoCard) side padding */\n  margin: 0.5rem -1rem;\n  border-top: 1px solid ",";\n"],["\n  /* set to outer card container's (ShipmentInfoCard) side padding */\n  margin: 0.5rem -1rem;\n  border-top: 1px solid ",";\n"])),styles_constants.Tj.containerBorderColor),ShipmentInfoComponent=function(_super){function ShipmentInfoComponent(props){var _this=_super.call(this,props)||this;return _this.getOrderSelection=function(){var _a,_b=_this.props,batchEntry=_b.batchEntry,order=_b.order,batchEntryIds=batchEntry?[batchEntry.id]:[];return(_a={})[order.objectId]=batchEntryIds,_a},_this.handleParcelUpdate=function(parcel){(parcel.userParcelTemplate||parcel.carrierParcelTemplate)&&_this.setState({hasChangedParcelTemplate:!0})},_this.renderShipmentStatusMessage=function(){if(!(0,Order.sf)(_this.props.order))return(0,emotion_react_jsx_runtime_browser_esm.Y)(Message.QB,(0,tslib_es6.Cl)({withIcon:!0},{children:"This shipment has not yet been fulfilled."}))},_this.state={hasChangedParcelTemplate:!1,shipmentDate:moment_moment()},_this}return(0,tslib_es6.C6)(ShipmentInfoComponent,_super),ShipmentInfoComponent.prototype.componentDidMount=function(){var batchEntry=this.props.batchEntry;batchEntry&&this.props.fetchBatchEntryRules(batchEntry.id)},ShipmentInfoComponent.prototype.componentDidUpdate=function(prevProps){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,hasChangedParcel=(null===(_c=null===(_b=null===(_a=null==prevProps?void 0:prevProps.batchEntry)||void 0===_a?void 0:_a.parcel)||void 0===_b?void 0:_b.userParcelTemplate)||void 0===_c?void 0:_c.objectId)!==(null===(_g=null===(_f=null===(_e=null===(_d=this.props)||void 0===_d?void 0:_d.batchEntry)||void 0===_e?void 0:_e.parcel)||void 0===_f?void 0:_f.userParcelTemplate)||void 0===_g?void 0:_g.objectId),hasChangedServiceLevel=(null===(_h=null==prevProps?void 0:prevProps.batchEntry)||void 0===_h?void 0:_h.preferredServiceLevelToken)!==(null===(_k=null===(_j=this.props)||void 0===_j?void 0:_j.batchEntry)||void 0===_k?void 0:_k.preferredServiceLevelToken);this.props.batchEntry&&(!prevProps.batchEntry||hasChangedParcel||hasChangedServiceLevel)&&this.props.fetchBatchEntryRules(this.props.batchEntry.id)},ShipmentInfoComponent.prototype.render=function(){var _a=this.props,alwaysCreateReturns=_a.alwaysCreateReturns,appliedRules=_a.appliedRules,automationRecommendations=_a.automationRecommendations,batchEntry=_a.batchEntry,defaultMassUnit=_a.defaultMassUnit,isBatchEntryTransactionSuccess=_a.isBatchEntryTransactionSuccess,order=_a.order,orderBatchEntries=_a.orderBatchEntries,t=_a.t,userSenderAddress=_a.userSenderAddress,hasTabs=orderBatchEntries.length>1,initialExtrasValues=getInitialShipmentExtrasFormValues(batchEntry,defaultMassUnit,!!alwaysCreateReturns),batchEntryCustomsExempt=batchEntry&&!(0,OrderBatchEntry.p2)(batchEntry),displayedRules=appliedRules?(0,businessRules.aJ)(appliedRules):[];return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[displayedRules&&displayedRules.length>0&&(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderTagsProvider.U5,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_OrderRuleInfoCard,{rules:displayedRules})}),hasTabs&&!isBatchEntryTransactionSuccess&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Message.QB,(0,tslib_es6.Cl)({withIcon:!0},{children:t("calculateRates.tabs.notifications.notFulfilled")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_CustomsDeclarationItemsCard,{batchEntry,hideCustoms:!!batchEntryCustomsExempt,order,senderAddress:(null==batchEntry?void 0:batchEntry.addressFrom)||order.addressFrom||userSenderAddress}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Recommendations,{inlineAlert:!0,orderId:order.objectId,parcel:null==batchEntry?void 0:batchEntry.parcel,show:this.state.hasChangedParcelTemplate&&0===order.partialFulfillmentRequests.length&&(null==automationRecommendations?void 0:automationRecommendations.enabled),t}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_PackageAdditionalServicesCard,{batchEntry,initialExtrasValues,onSubmitParcel:this.handleParcelUpdate,order}),(0,emotion_react_jsx_runtime_browser_esm.Y)(AddressCard_container,{batchEntry,order})]})},ShipmentInfoComponent}(react.PureComponent),getInitialShipmentExtrasFormValues=function(batchEntry,defaultMassUnit,alwaysCreateReturns){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r,defaultInsurance={amount:"",content:"",currency:options.Ay.commonCurrencyOptions.USD,purchaseInsurance:!1,useImportedAmount:!1},initialExtrasValues=batchEntry&&batchEntry.extras?{alcohol:{containsAlcohol:!!(null===(_a=batchEntry.extras.alcohol)||void 0===_a?void 0:_a.containsAlcohol),recipientType:recipientTypeOptions.find((function(o){var _a,_b,_c;return!!batchEntry&&o.value.toString().toUpperCase()===(null===(_c=null===(_b=null===(_a=batchEntry.extras)||void 0===_a?void 0:_a.alcohol)||void 0===_b?void 0:_b.recipientType)||void 0===_c?void 0:_c.toUpperCase())}))||recipientTypeOptions[0]},dryIce:{containsDryIce:null!==(_c=null===(_b=batchEntry.extras.dryIce)||void 0===_b?void 0:_b.containsDryIce)&&void 0!==_c&&_c,inBatchMode:!1,packageWeight:null===(_d=batchEntry.parcel)||void 0===_d?void 0:_d.weight,packageWeightUnit:(null===(_e=batchEntry.parcel)||void 0===_e?void 0:_e.weightUnit)||weight.VV.LB,weight:(null===(_f=batchEntry.extras.dryIce)||void 0===_f?void 0:_f.weight)?"".concat(null===(_g=batchEntry.extras.dryIce)||void 0===_g?void 0:_g.weight):"",weightUnitId:null!==(_k=null!==(_j=null===(_h=batchEntry.extras.dryIce)||void 0===_h?void 0:_h.weightUnitId)&&void 0!==_j?_j:weight.FU[defaultMassUnit])&&void 0!==_k?_k:weight.Rg.Pound},hazmat:{containsBiologicalMaterial:!!(null===(_l=batchEntry.extras.hazmat)||void 0===_l?void 0:_l.isBiologicalMaterial),containsHazmat:!!(null===(_m=batchEntry.extras.hazmat)||void 0===_m?void 0:_m.isHazmat),containsLithiumBatteries:!!(null===(_o=batchEntry.extras.hazmat)||void 0===_o?void 0:_o.isLithiumBatteries)},insurance:batchEntry.extras.insurance?{amount:batchEntry.extras.insurance.amount,content:"",currency:{label:batchEntry.extras.insurance.currency.iso,value:batchEntry.extras.insurance.currency.iso},purchaseInsurance:!0,useImportedAmount:batchEntry.extras.insurance.useImportedAmount}:defaultInsurance,isBypassAddressValidation:!!batchEntry.extras.isBypassAddressValidation,isBypassCustoms:!!batchEntry.extras.isBypassCustoms,isReturnRequested:null!==(_p=batchEntry.extras.isReturnRequested)&&void 0!==_p?_p:alwaysCreateReturns,packingSlipText:batchEntry.extras.packingSlipText||"",signatureConfirmation:{hasSignatureConfirmation:!!(null===(_q=batchEntry.extras.signatureConfirmation)||void 0===_q?void 0:_q.hasSignatureConfirmation),signatureConfirmationType:(0,signatureConfirmation.mS)(null===(_r=batchEntry.extras.signatureConfirmation)||void 0===_r?void 0:_r.signatureConfirmationType)}}:void 0;return initialExtrasValues},ComposedShipmentInfo=(0,redux.Zz)((0,es.Ng)((function(){var getOrderById=(0,orders_selectors.H4)(),getBatchEntryById=(0,batch_entry_selectors.Xv)();return function(state,ownProps){var _a,orderId=ownProps.match.params.orderId,batchEntryIdString=ownProps.match.params.batchEntryId,order=getOrderById(state,{orderId}),batchEntry=(0,batch_entry_selectors.Dz)(state,{orderObjectId:orderId});batchEntryIdString&&!isNaN(Number(batchEntryIdString))&&(batchEntry=getBatchEntryById(state,{batchEntryId:Number(batchEntryIdString)}));var defaultMassUnit=null!==(_a=(0,user_selectors.cm)(state))&&void 0!==_a?_a:weight.VV.LB;return{alwaysCreateReturns:(0,user_selectors.pi)(state),appliedRules:batchEntry?(0,batch_entry_selectors.gR)(state,{batchEntryId:batchEntry.id}):null,batchEntry,defaultMassUnit,isBatchEntryTransactionSuccess:!!batchEntry&&(0,batch_entry_composite_selectors.oV)(state,{batchEntryId:batchEntry.id}),order,orderBatchEntries:(0,batch_entry_selectors.rk)(state,{orderObjectId:orderId}),userSenderAddress:(0,user_selectors.GA)(state)}}}),(function(dispatch){return{fetchBatchEntryRules:function(batchEntryId){return dispatch((0,orders_actions.SJ)(batchEntryId))}}})),(0,utils_translate.Tl)("orders"),(function(Component){return function(props){var automationRecommendations=(0,featureflags.u)(featureflags.gH.AUTOMATION_RECOMMENDATIONS);return(0,emotion_react_jsx_runtime_browser_esm.Y)(Component,(0,tslib_es6.Cl)({},props,{automationRecommendations}))}}),react_router.y)(ShipmentInfoComponent);const ShipmentInfo=ComposedShipmentInfo;var ShipmentInfo_templateObject_1,icon_success_green_bg=__webpack_require__("./app/assets/icons/icon_success_green_bg.svg"),NotificationImage=(0,emotion_styled_browser_esm.A)("img")(ShipmentTab_templateObject_1||(ShipmentTab_templateObject_1=(0,tslib_es6.ue)(["\n  margin-left: 8px;\n"],["\n  margin-left: 8px;\n"]))),ShipmentTab=function(_super){function ShipmentTab(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.renderAddons=function(){var isBatchEntryTransactionSuccess=_this.props.isBatchEntryTransactionSuccess;return(0,emotion_react_jsx_runtime_browser_esm.Y)(NotificationImage,{src:isBatchEntryTransactionSuccess?icon_success_green_bg:exclamation_circle_yellow})},_this}return(0,tslib_es6.C6)(ShipmentTab,_super),ShipmentTab.prototype.render=function(){var _a=this.props,batchEntryId=_a.batchEntryId,location=_a.history.location,orderId=_a.orderId,t=_a.t,tabIndex=_a.tabIndex,tabsCount=_a.tabsCount;return(0,emotion_react_jsx_runtime_browser_esm.FD)(components_Tabs.TabLink,(0,tslib_es6.Cl)({addons:this.renderAddons,to:"/orders/".concat(orderId,"/shipments/").concat(batchEntryId).concat(location.search)},{children:[t("calculateRates.tabs.navigation.shipmentTitle")," ",tabIndex+1," ",t("calculateRates.tabs.navigation.shipmentTitleSeparator")," ",tabsCount]}))},ShipmentTab}(react.Component);const Tabs_ShipmentTab=(0,redux.Zz)((0,utils_translate.Tl)("orders"),react_router.y,(0,es.Ng)((function(state,ownProps){var batchEntryId=ownProps.batchEntryId;return{isBatchEntryTransactionSuccess:(0,batch_entry_composite_selectors.oV)(state,{batchEntryId})}})))(ShipmentTab);var ShipmentTab_templateObject_1,TabsContainer=(0,emotion_styled_browser_esm.A)("div")(Tabs_templateObject_1||(Tabs_templateObject_1=(0,tslib_es6.ue)(["\n  background: ",";\n  width: 100%;\n  margin: auto;\n  margin-top: 0px;\n  padding: 0;\n  @media screen and (min-width: ","px) {\n    margin: 0;\n  }\n"],["\n  background: ",";\n  width: 100%;\n  margin: auto;\n  margin-top: 0px;\n  padding: 0;\n  @media screen and (min-width: ","px) {\n    margin: 0;\n  }\n"])),styles_constants.Tj.gray25,responsive.P.Tablet),Tabs_ListContainer=(0,emotion_styled_browser_esm.A)("nav")(Tabs_templateObject_2||(Tabs_templateObject_2=(0,tslib_es6.ue)(["\n  width: 100%;\n  ",";\n"],["\n  width: 100%;\n  ",";\n"])),(function(_a){return!_a.hasTabs&&"margin-bottom: 16px;"})),ShipmentTabs=function(_super){function ShipmentTabs(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.C6)(ShipmentTabs,_super),ShipmentTabs.prototype.render=function(){var _a=this.props,match=_a.match,partialFulfillmentRequests=_a.partialFulfillmentRequests,orderId=match.params.orderId,tabsCount=partialFulfillmentRequests.length,hasTabs=tabsCount>1;return(0,emotion_react_jsx_runtime_browser_esm.FD)(TabsContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_ListContainer,(0,tslib_es6.Cl)({hasTabs},{children:hasTabs?(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Tabs.ScrollableTabsList,(0,tslib_es6.Cl)({gradientColor:styles_constants.Tj.gray25},{children:partialFulfillmentRequests.map((function(batchEntryId,i){return(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_ShipmentTab,{batchEntryId,orderId,tabIndex:i,tabsCount},"tab".concat(batchEntryId))}))})):null})),(0,emotion_react_jsx_runtime_browser_esm.Y)(react_router.dO,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(react_router.qh,{component:ShipmentInfo,exact:!0,path:"".concat(match.path)})})]})},ShipmentTabs}(react.Component);(0,redux.Zz)((0,utils_translate.Tl)("orders"),(0,es.Ng)((function(state,ownProps){var props={orderObjectId:ownProps.orderId};return{partialFulfillmentRequests:(0,batch_entry_selectors.rk)(state,props)}})),react_router.y)(ShipmentTabs);var Tabs_templateObject_1,Tabs_templateObject_2;var ShipmentErrors_styled_templateObject_1,ShipmentErrors_styled_templateObject_2,AccordionSummary=__webpack_require__("./node_modules/@goshippo/components/esm/Accordion/AccordionSummary/AccordionSummary.js"),AccordionDetails=__webpack_require__("./node_modules/@goshippo/components/esm/Accordion/AccordionDetails/AccordionDetails.js"),Accordion=__webpack_require__("./node_modules/@goshippo/components/esm/Accordion/Accordion.js"),StyledAccordion=(0,styled.Ay)(Accordion.A)(ShipmentErrors_styled_templateObject_1||(ShipmentErrors_styled_templateObject_1=(0,tslib_es6.ue)(["\n  border: none;\n  margin-top: ",";\n\n  &.Mui-expanded {\n    margin-top: ",";\n  }\n\n  .MuiAccordionSummary-content,\n  .MuiAccordionSummary-content.Mui-expanded {\n    margin: 0;\n  }\n\n  .MuiAccordionSummary-root,\n  .MuiAccordionSummary-root.Mui-expanded {\n    min-height: auto;\n  }\n\n  .MuiAccordionDetails-root {\n    padding: 0;\n  }\n"],["\n  border: none;\n  margin-top: ",";\n\n  &.Mui-expanded {\n    margin-top: ",";\n  }\n\n  .MuiAccordionSummary-content,\n  .MuiAccordionSummary-content.Mui-expanded {\n    margin: 0;\n  }\n\n  .MuiAccordionSummary-root,\n  .MuiAccordionSummary-root.Mui-expanded {\n    min-height: auto;\n  }\n\n  .MuiAccordionDetails-root {\n    padding: 0;\n  }\n"])),shippoTheme.A.spacing(1),shippoTheme.A.spacing(1)),StyledList=(0,styled.Ay)("ul")(ShipmentErrors_styled_templateObject_2||(ShipmentErrors_styled_templateObject_2=(0,tslib_es6.ue)(["\n  list-style: none;\n  padding: ",";\n\n  li {\n    color: ",";\n  }\n\n  li:not(:last-child) {\n    margin-bottom: ",";\n  }\n"],["\n  list-style: none;\n  padding: ",";\n\n  li {\n    color: ",";\n  }\n\n  li:not(:last-child) {\n    margin-bottom: ",";\n  }\n"])),shippoTheme.A.spacing(0,1),styles_colors.T.secondary,shippoTheme.A.spacing(1)),CardSummaryButton=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/Card/CardSummaryButton.tsx"),ShipmentErrors=function(_a){var messages=_a.messages,t=_a.t,_b=(0,tslib_es6.zs)((0,react.useState)(!1),2),showMessages=_b[0],setShowMessages=_b[1];return messages.length?(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledAccordion,(0,tslib_es6.Cl)({"data-testid":"shipment-errors",onChange:function(_,isExpanded){return setShowMessages(isExpanded)}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(AccordionSummary.A,(0,tslib_es6.Cl)({"aria-controls":"shipment-errors-content",id:"shipment-errors-header",role:void 0},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CardSummaryButton.A,{isError:!1,isOpen:showMessages,text:t("calculateRates.rates.carrierMessages")})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(AccordionDetails.A,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledList,{children:messages.map((function(_a){var source=_a.source,text=_a.text;return(0,emotion_react_jsx_runtime_browser_esm.FD)("li",{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"inherit",component:"span",variant:"bodyEmphasized"},{children:"".concat(source,": ")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"inherit",component:"span",variant:"body"},{children:text}))]},text)}))})})]})):null};const hooks_useSendTrackEvent=function(){var dispatch=(0,es.wA)();return function(event,properties){dispatch((0,prod_analytics_actions.o)(event,properties))}};const hooks_useTrackRateSelect=function(selectedRate,hasErrors,dataAnalytics){var sendTrackEvent=hooks_useSendTrackEvent();(0,react.useEffect)((function(){selectedRate&&(hasErrors||sendTrackEvent("App - Rate Selected",{areSavingsShown:!1,carrier:null==selectedRate?void 0:selectedRate.provider,rateRequestLocation:dataAnalytics||"",retailPrice:"",serviceLevel:null==selectedRate?void 0:selectedRate.servicelevel.name,shippoPrice:null==selectedRate?void 0:selectedRate.amount}))}),[selectedRate])};var insurance_a,DateTimePicker_styled_templateObject_1,INSURANCE_AVAILABLE_IN_COUNTRIES=((insurance_a={})[constants_countries.Xr.AS.iso2]=!0,insurance_a[constants_countries.Xr.CA.iso2]=!0,insurance_a[constants_countries.Xr.DE.iso2]=!0,insurance_a[constants_countries.Xr.ES.iso2]=!0,insurance_a[constants_countries.Xr.FR.iso2]=!0,insurance_a[constants_countries.Xr.GB.iso2]=!0,insurance_a[constants_countries.Xr.GU.iso2]=!0,insurance_a[constants_countries.Xr.IT.iso2]=!0,insurance_a[constants_countries.Xr.MP.iso2]=!0,insurance_a[constants_countries.Xr.NL.iso2]=!0,insurance_a[constants_countries.Xr.PR.iso2]=!0,insurance_a[constants_countries.Xr.US.iso2]=!0,insurance_a[constants_countries.Xr.VI.iso2]=!0,insurance_a),fetchCarrierAccountsSuccess=function(payload){return{payload,type:constants.t.FETCH_CARRIER_ACCOUNTS_SUCCESS}},fetchCarrierAccountsError=function(payload){return{payload,type:constants.t.FETCH_CARRIER_ACCOUNTS_ERROR}},fetchCarrierAccountRegStatusesError=function(payload){return{payload,type:constants.t.FETCH_CARRIER_ACCOUNT_REG_STATUSES_ERROR}},connectCarrierAccountSuccess=function(payload){return{payload,type:constants.t.CONNECT_CARRIER_ACCOUNT_SUCCESS}},carrier_accounts_actions_editCarrierAccount=function(payload){return{payload,type:constants.t.EDIT_CARRIER_ACCOUNT}},editCarrierAccountSuccess=function(payload){return{payload,type:constants.t.EDIT_CARRIER_ACCOUNT_SUCCESS}},editCarrierAccountServiceLevelsError=function(payload){return{payload,type:constants.t.EDIT_CARRIER_ACCOUNT_SERVICE_LEVELS_ERROR}},carrier_accounts_actions_createCarrierAccount=function(payload){return{payload,type:constants.t.CREATE_CARRIER_ACCOUNT}},createCarrierAccountError=function(payload){return{payload,type:constants.t.CREATE_CARRIER_ACCOUNT_ERROR}},carrier_accounts_selectors=(__webpack_require__("./app/components/SnackbarAlert/SnackbarAlert.tsx"),__webpack_require__("./app/components/SnackbarAlert/hooks.ts"),__webpack_require__("./app/selectors/carrier-accounts.selectors.ts")),plans_selectors=__webpack_require__("./app/selectors/plans.selectors.ts"),user_actions=__webpack_require__("./app/actions/user.actions.ts"),carrierFormFieldsClearState=function(){return{type:constants.t.CARRIER_FORM_FIELDS_CLEAR_STATE}},fetchCarrierFormFields=function(payload){return{payload,type:constants.t.FETCH_CARRIER_FORM_FIELDS}},fetchCarrierFormFieldsError=function(payload){return{payload,type:constants.t.FETCH_CARRIER_FORM_FIELDS_ERROR}},arrow_sea600=__webpack_require__("./app/assets/icons/arrow-sea600.svg"),ic_checked=__webpack_require__("./app/assets/icons/checkboxes/ic_checked.svg"),ic_indeterminate=__webpack_require__("./app/assets/icons/checkboxes/ic_indeterminate.svg"),ic_unchecked=__webpack_require__("./app/assets/icons/checkboxes/ic_unchecked.svg"),exclamation_circle=__webpack_require__("./app/assets/icons/exclamation-circle.svg"),icon_alert_info_filled=__webpack_require__("./app/assets/icons/icon_alert_info_filled.svg"),react_datepicker_min=__webpack_require__("./node_modules/react-datepicker/dist/react-datepicker.min.js"),react_datepicker_min_default=__webpack_require__.n(react_datepicker_min),DateTimePicker_styled_dateRangePopperStyle=(0,emotion_react_browser_esm.AH)(DateTimePicker_styled_templateObject_1||(DateTimePicker_styled_templateObject_1=(0,tslib_es6.ue)(["\n  .react-datepicker {\n    font-size: 14px;\n    border-radius: 0;\n    border: 1px solid ",";\n  }\n\n  .react-datepicker__header {\n    background: none;\n    border-bottom: none;\n  }\n\n  .react-datepicker__navigation {\n    top: 0.6rem;\n  }\n\n  .react-datepicker__month-container {\n    padding: 0.3rem 0.3rem 1rem;\n  }\n\n  .react-datepicker__month {\n    margin: 0;\n  }\n\n  .react-datepicker__current-month {\n    margin-bottom: 0.8rem;\n  }\n\n  .react-datepicker__day-name {\n    color: #3d5560;\n    font-weight: ",";\n    font-size: 12px;\n  }\n\n  .react-datepicker__day--selected,\n  .react-datepicker__day--in-selecting-range,\n  .react-datepicker__day--in-range,\n  .react-datepicker__month-text--selected,\n  .react-datepicker__month-text--in-selecting-range,\n  .react-datepicker__month-text--in-range,\n  .react-datepicker__quarter-text--selected,\n  .react-datepicker__quarter-text--in-selecting-range,\n  .react-datepicker__quarter-text--in-range,\n  .react-datepicker__year-text--selected,\n  .react-datepicker__year-text--in-selecting-range,\n  .react-datepicker__year-text--in-range {\n    background: ",";\n    color: #000;\n  }\n\n  .react-datepicker__day--selected,\n  .react-datepicker__day--in-selecting-range:hover {\n    background: ",";\n    color: ",";\n  }\n\n  .react-datepicker__day--selected:hover,\n  .react-datepicker__day--in-range:hover {\n    background: ",";\n  }\n\n  .react-datepicker__day--in-selecting-range:not(.react-datepicker__day--in-range) {\n    background: ",";\n  }\n\n  .react-datepicker__navigation-icon::before {\n    border-color: #000;\n  }\n\n  .react-datepicker__triangle {\n    display: none;\n  }\n\n  .react-datepicker__time-container\n    .react-datepicker__time\n    .react-datepicker__time-box\n    ul.react-datepicker__time-list\n    li.react-datepicker__time-list-item--selected {\n    background-color: ",";\n    color: white;\n    font-weight: ",";\n  }\n  .react-datepicker__time-container\n    .react-datepicker__time\n    .react-datepicker__time-box\n    ul.react-datepicker__time-list\n    li.react-datepicker__time-list-item--selected:hover {\n    background-color: ",";\n  }\n"],["\n  .react-datepicker {\n    font-size: 14px;\n    border-radius: 0;\n    border: 1px solid ",";\n  }\n\n  .react-datepicker__header {\n    background: none;\n    border-bottom: none;\n  }\n\n  .react-datepicker__navigation {\n    top: 0.6rem;\n  }\n\n  .react-datepicker__month-container {\n    padding: 0.3rem 0.3rem 1rem;\n  }\n\n  .react-datepicker__month {\n    margin: 0;\n  }\n\n  .react-datepicker__current-month {\n    margin-bottom: 0.8rem;\n  }\n\n  .react-datepicker__day-name {\n    color: #3d5560;\n    font-weight: ",";\n    font-size: 12px;\n  }\n\n  .react-datepicker__day--selected,\n  .react-datepicker__day--in-selecting-range,\n  .react-datepicker__day--in-range,\n  .react-datepicker__month-text--selected,\n  .react-datepicker__month-text--in-selecting-range,\n  .react-datepicker__month-text--in-range,\n  .react-datepicker__quarter-text--selected,\n  .react-datepicker__quarter-text--in-selecting-range,\n  .react-datepicker__quarter-text--in-range,\n  .react-datepicker__year-text--selected,\n  .react-datepicker__year-text--in-selecting-range,\n  .react-datepicker__year-text--in-range {\n    background: ",";\n    color: #000;\n  }\n\n  .react-datepicker__day--selected,\n  .react-datepicker__day--in-selecting-range:hover {\n    background: ",";\n    color: ",";\n  }\n\n  .react-datepicker__day--selected:hover,\n  .react-datepicker__day--in-range:hover {\n    background: ",";\n  }\n\n  .react-datepicker__day--in-selecting-range:not(.react-datepicker__day--in-range) {\n    background: ",";\n  }\n\n  .react-datepicker__navigation-icon::before {\n    border-color: #000;\n  }\n\n  .react-datepicker__triangle {\n    display: none;\n  }\n\n  .react-datepicker__time-container\n    .react-datepicker__time\n    .react-datepicker__time-box\n    ul.react-datepicker__time-list\n    li.react-datepicker__time-list-item--selected {\n    background-color: ",";\n    color: white;\n    font-weight: ",";\n  }\n  .react-datepicker__time-container\n    .react-datepicker__time\n    .react-datepicker__time-box\n    ul.react-datepicker__time-list\n    li.react-datepicker__time-list-item--selected:hover {\n    background-color: ",";\n  }\n"])),styles_constants.Tj.form.greyBorder,styles_constants.Wy.medium,styles_constants.Tj.forest700,styles_constants.Tj.forest700,styles_constants.Tj.white,styles_constants.Tj.forest700,styles_constants.Tj.forest200,styles_constants.Tj.forest700,styles_constants.Wy.medium,styles_constants.Tj.forest700),DateTimePickerInput=function(props){var _a;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Input.Ay,(0,tslib_es6.Cl)({},props,{autoComplete:"off",errorMessage:void 0,onChange:void 0,readOnly:!0,value:null===(_a=props.value)||void 0===_a?void 0:_a.toString()}))},DateTimePicker_DateTimePicker=function(props){var isValidDate=react.useCallback((function(date){var current=moment_moment(date);return!props.disableWeekends||0!==current.day()&&6!==current.day()}),[props.disableWeekends]),renderErrors=react.useCallback((function(){if(props.errorMessage)return(0,emotion_react_jsx_runtime_browser_esm.Y)(components_FormError,{children:props.errorMessage})}),[props.errorMessage]),onChange=react.useCallback((function(date){var momentDate=moment_moment(date);return props.onChange(momentDate)}),[props.onChange]),isValidValue=react.useMemo((function(){return moment_moment(props.value).isValid()}),[props.value]),momentDate=react.useMemo((function(){return isValidValue?moment_moment(props.value):moment_moment()}),[props.value]),onKeyDown=(0,react.useCallback)((function(e){e.key===keys.D.Tab&&e.stopPropagation()}),[]);return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(react_datepicker_min_default(),{autoComplete:"off",className:props.className,customInput:props.input||(0,emotion_react_jsx_runtime_browser_esm.Y)(DateTimePickerInput,(0,tslib_es6.Cl)({},props)),disabled:props.disabled,filterDate:isValidDate,id:props.id,maxDate:props.dateLimit?moment_moment(props.dateLimit).toDate():null,minDate:props.disablePastDates?new Date:props.minDate?moment_moment(props.minDate).toDate():null,onChange,onKeyDown,placeholderText:props.placeholder,popperClassName:DateTimePicker_styled_dateRangePopperStyle,selected:isValidValue?momentDate.toDate():void 0,showTimeSelect:props.hasTime,wrapperClassName:props.wrapperClassName}),renderErrors()]})},DateTimePickerField=function(props){var input=props.input,meta=props.meta,invalid=meta&&meta.touched&&meta.error,errorMessage=invalid?meta.error:null,requiredDatePickerProperties={dateLimit:props.dateLimit,disablePastDates:props.disablePastDates,disableWeekends:props.disableWeekends,errorMessage,id:props.id,label:props.label,labelProps:props.labelProps,name:props.name},date=react.useMemo((function(){return moment_moment(input.value)}),[input.value]),onDateChange=react.useCallback((function(date){input.onChange(date.toString())}),[input.onChange]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(DateTimePicker_DateTimePicker,(0,tslib_es6.Cl)({onChange:onDateChange,value:date},requiredDatePickerProperties,{dataAnalytics:props.dataAnalytics,dataPendo:props.dataPendo,dataTestid:props.dataTestid,invalid,tabIndex:props.tabIndex}))};var Typography_templateObject_1,Typography_templateObject_2,Typography_templateObject_3,Typography_templateObject_4,Typography_templateObject_5,Typography_templateObject_6,Typography_templateObject_7,Typography_templateObject_8,CarrierFormType,CarrierFormEventType,TabbedCarrierFormName,ServiceLevelsIsHidden,components_Link_Link=__webpack_require__("./app/components/Link/Link.tsx"),typographyBaseCss=(__webpack_require__("./app/assets/icons/icon_error.svg"),(0,emotion_react_browser_esm.AH)(Typography_templateObject_1||(Typography_templateObject_1=(0,tslib_es6.ue)(["\n  font-family: inherit, serif;\n  font-style: normal;\n  color: ",";\n  padding: 0;\n  margin: 0;\n"],["\n  font-family: inherit, serif;\n  font-style: normal;\n  color: ",";\n  padding: 0;\n  margin: 0;\n"])),styles_constants.Tj.gray1000)),overrideCss=function(props){var color=props.color,fontSize=props.fontSize,lineHeight=props.lineHeight;return(0,emotion_react_browser_esm.AH)(Typography_templateObject_2||(Typography_templateObject_2=(0,tslib_es6.ue)(["\n    ","\n    ","\n    ","\n  "],["\n    ","\n    ","\n    ","\n  "])),color?"color: ".concat(color,";"):"",fontSize?"font-size: ".concat(fontSize,";"):"",lineHeight?"line-height: ".concat(lineHeight,";"):"")},Body=(emotion_styled_browser_esm.A.h4(Typography_templateObject_3||(Typography_templateObject_3=(0,tslib_es6.ue)(["\n  ","\n  font-weight: ",";\n  font-size: 16px;\n  line-height: 24px;\n  ","\n"],["\n  ","\n  font-weight: ",";\n  font-size: 16px;\n  line-height: 24px;\n  ","\n"])),typographyBaseCss,styles_constants.Wy.normal,(function(props){return overrideCss(props)})),emotion_styled_browser_esm.A.p(Typography_templateObject_4||(Typography_templateObject_4=(0,tslib_es6.ue)(["\n  ","\n  font-weight: ",";\n  font-size: 14px;\n  line-height: 24px;\n  ","\n"],["\n  ","\n  font-weight: ",";\n  font-size: 14px;\n  line-height: 24px;\n  ","\n"])),typographyBaseCss,styles_constants.Wy.normal,(function(props){return overrideCss(props)}))),getCarrierFormFieldsStore=(emotion_styled_browser_esm.A.p(Typography_templateObject_5||(Typography_templateObject_5=(0,tslib_es6.ue)(["\n  ","\n  font-weight: ",";\n  font-size: 12px;\n  line-height: 20px;\n  ","\n"],["\n  ","\n  font-weight: ",";\n  font-size: 12px;\n  line-height: 20px;\n  ","\n"])),typographyBaseCss,styles_constants.Wy.normal,(function(props){return overrideCss(props)})),emotion_styled_browser_esm.A.div(Typography_templateObject_6||(Typography_templateObject_6=(0,tslib_es6.ue)(["\n  margin-top: -8px;\n\n  & > * {\n    margin-top: 8px;\n  }\n"],["\n  margin-top: -8px;\n\n  & > * {\n    margin-top: 8px;\n  }\n"]))),emotion_styled_browser_esm.A.div(Typography_templateObject_7||(Typography_templateObject_7=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),emotion_styled_browser_esm.A.img(Typography_templateObject_8||(Typography_templateObject_8=(0,tslib_es6.ue)(["\n  width: 16px;\n  height: 16px;\n  margin-right: 12px;\n"],["\n  width: 16px;\n  height: 16px;\n  margin-right: 12px;\n"]))),function(state){return state.carrierFormFields}),getCarrierFormFields=(0,reselect_es.Mz)(getCarrierFormFieldsStore,(function(carrierFormFieldsStore){return carrierFormFieldsStore.carrierFormFields})),getIsFetchingCarrierFormFields=(0,reselect_es.Mz)(getCarrierFormFieldsStore,(function(carrierFormFieldsStore){return carrierFormFieldsStore.isFetchingCarrierFormFields})),getCarrierFormFieldsErrorMessage=(0,reselect_es.Mz)(getCarrierFormFieldsStore,(function(carrierFormFieldsStore){return carrierFormFieldsStore.errorMessage})),getCarrierFormFieldValidations=(0,reselect_es.Mz)(getCarrierFormFieldsStore,(function(carrierFormFieldsStore){return carrierFormFieldsStore.carrierFormFieldValidations})),upsEditParameters=[{disabled:!0,displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"account_number",label:"UPS Account Number",maxLength:6,minLength:null,placeholderText:null,rank:5},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!1,key:"cost_center",label:"Mail Innovations Cost Center",maxLength:20,minLength:null,placeholderText:null,rank:10,tooltip:"An identifier that UPS Mail Innovations assigned to your account."},{displayType:"show",fieldType:"choice",helpUrl:null,hiddenByKey:"cost_center",hiddenByValue:void 0,isRequired:!1,key:"usps_endorsement",label:"USPS Endorsement",maxLength:null,minLength:null,options:[{label:"Return Service Requested (1)",value:1},{label:"Forwarding Service Requested (2)",value:2},{label:"Address Service Requested (3)",value:3},{label:"Change Service Requested (4)",value:4},{label:"No Service Selected (5)",value:5}],placeholderText:null,rank:15,tooltip:"Specify how USPS, the last-mile carrier for UPS Mail Innovations, should handle non-deliverable packages."},{displayType:"show",fieldType:"boolean",helpUrl:null,isRequired:!1,key:"surepost",label:"Activate UPS Surepost",maxLength:null,minLength:null,placeholderText:null,rank:20,tooltip:"Activate this field if your account supports UPS Surepost. This needs to be explicitly enabled by UPS."}],eBayCanadaPostConnectParameters=[{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"customer_number",label:"Canada Post Customer Number",maxLength:10,minLength:null,placeholderText:null,rank:20},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"postal_zip_code",label:"Zip / Postal Code",maxLength:10,minLength:null,placeholderText:null,rank:40}],canadaPostParameters=[{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"customer_number",label:"Canada Post Customer Number",maxLength:10,minLength:null,placeholderText:null,rank:20},{displayType:"show",fieldType:"string",helpUrl:"https://support.goshippo.com/hc/en-us/articles/201772755-Where-do-I-get-my-Canada-Post-API-username-and-password-",isRequired:!0,key:"account_id",label:"API Username",maxLength:16,minLength:null,placeholderText:null,rank:40},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"api_password",label:"API Password",maxLength:22,minLength:null,placeholderText:null,rank:60},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!1,key:"contract_id",label:"Contract ID (optional)",maxLength:10,minLength:null,placeholderText:null,rank:80},{defaultValue:"CreditCard",displayType:"show",fieldType:"choice",helpUrl:null,isRequired:!0,key:"payment_method",label:"Payment Method",maxLength:null,minLength:null,options:[{label:"Credit Card",value:"CreditCard"},{label:"Bill Account",value:"Account"}],placeholderText:null,rank:100},{displayType:"show",fieldType:"boolean",helpUrl:null,isRequired:!1,key:"use_manifests",label:"Use Manifests",maxLength:null,minLength:null,placeholderText:null,rank:120}],lasershipParameters=[{displayType:"mask",fieldType:"string",helpUrl:null,isRequired:!0,key:"account_id",label:"Lasership API Key",maxLength:255,minLength:null,placeholderText:null,rank:20},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"lasership_apiid",label:"API ID",maxLength:255,minLength:null,placeholderText:null,rank:40},{displayType:"show",fieldType:"military_time",helpUrl:null,isRequired:!0,key:"critical_pull_time",label:"Critical Pull Time",maxLength:null,minLength:null,placeholderText:"HH:MM 24-hour time format",rank:60},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!1,key:"default_customer_branch",label:"Default Customer Branch",maxLength:255,minLength:null,placeholderText:null,rank:80}],dhlExpressParameters=[{displayType:"show_partial",fieldType:"string",helpUrl:null,isRequired:!0,key:"account_id",label:"DHL Express Account Number",maxLength:10,minLength:null,placeholderText:null,rank:20},{displayType:"show_partial",fieldType:"string",helpUrl:"https://support.goshippo.com/hc/en-us/articles/4409158652571",isRequired:!0,key:"site_id",label:"Site ID",maxLength:20,minLength:6,placeholderText:null,rank:30},{displayType:"mask",fieldType:"string",helpUrl:null,isRequired:!0,key:"password",label:"Password",maxLength:20,minLength:8,placeholderText:null,rank:40},{displayType:"show",fieldType:"choice",helpUrl:null,isRequired:!0,key:"payment_country",label:"Registered Country",maxLength:null,minLength:null,options:(0,Address.b8)(),placeholderText:null,rank:60}],AUSPOST_MYPOST_OPTIONS=[{label:"MyPost (under 1,000 labels per year)",value:"is_mypost"},{label:"eParcel (1,000+ labels a year)",value:"is_eparcel"}],UPS_REGISTRATION_COUNTRIES=[{label:"Argentina",value:"AR"},{label:"Australia",value:"AU"},{label:"Austria",value:"AT"},{label:"Belgium",value:"BE"},{label:"Brazil",value:"BR"},{label:"Canada",value:"CA"},{label:"Chile",value:"CL"},{label:"China",value:"CN"},{label:"Costa Rica",value:"CR"},{label:"Czech Republic",value:"CZ"},{label:"Denmark",value:"DK"},{label:"Dominican Republic",value:"DO"},{label:"Ecuador",value:"EC"},{label:"Finland",value:"FI"},{label:"France",value:"FR"},{label:"Germany",value:"DE"},{label:"Greece",value:"GR"},{label:"Guatemala",value:"GT"},{label:"Guernsey",value:"GG"},{label:"Hong Kong",value:"HK"},{label:"Hungary",value:"HU"},{label:"India",value:"IN"},{label:"Indonesia",value:"ID"},{label:"Ireland",value:"IE"},{label:"Israel",value:"IL"},{label:"Italy",value:"IT"},{label:"Japan",value:"JP"},{label:"Jersey",value:"JE"},{label:"Korea, Republic of",value:"KR"},{label:"Macao",value:"MO"},{label:"Malaysia",value:"MY"},{label:"Mexico",value:"MX"},{label:"Netherlands",value:"NL"},{label:"New Zealand",value:"NZ"},{label:"Norway",value:"NO"},{label:"Panama",value:"PA"},{label:"Philippines",value:"PH"},{label:"Poland",value:"PL"},{label:"Portugal",value:"PT"},{label:"Puerto Rico",value:"PR"},{label:"Romania",value:"RO"},{label:"Russian Federation",value:"RU"},{label:"Singapore",value:"SG"},{label:"Spain",value:"ES"},{label:"Sweden",value:"SE"},{label:"Switzerland",value:"CH"},{label:"Taiwan, Province of China",value:"TW"},{label:"Thailand",value:"TH"},{label:"Turkey",value:"TR"},{label:"United Arab Emirates",value:"AE"},{label:"United Kingdom",value:"GB"},{label:"United States",value:"US"},{label:"Viet Nam",value:"VN"}],parametersMap={canada_post:{connect:canadaPostParameters,create:[{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"street_number",label:"Street #",maxLength:10,minLength:null,placeholderText:null,rank:10},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"street",label:"Street",maxLength:60,minLength:null,placeholderText:null,rank:20},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!1,key:"unit_suite_apt",label:"Unit",maxLength:10,minLength:null,placeholderText:null,rank:30},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"city",label:"City",maxLength:40,minLength:null,placeholderText:null,rank:40},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"prov_state",label:"State / Province",maxLength:2,minLength:null,placeholderText:"Enter a 2-letter state code",rank:50},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"postal_zip_code",label:"Zip / Postal Code",maxLength:10,minLength:null,placeholderText:null,rank:60},{displayType:"show",fieldType:"choice",helpUrl:null,isRequired:!0,key:"country_code",label:"Country",maxLength:null,minLength:null,options:[{label:"Canada",value:"CA"},{label:"United States",value:"US"}],placeholderText:null,rank:70},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"phone_number",label:"Phone",maxLength:30,minLength:null,placeholderText:null,rank:80},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"legal_name",label:"Business Name",maxLength:40,minLength:null,placeholderText:null,rank:90},{displayType:"show",fieldType:"integer",helpUrl:null,isRequired:!1,key:"canada_parcel_volume",label:"How many items do you ship monthly to Canada?",maxLength:7,minLength:null,placeholderText:null,rank:100},{displayType:"show",fieldType:"integer",helpUrl:null,isRequired:!1,key:"us_parcel_volume",label:"How many items do you ship monthly to United States?",maxLength:7,minLength:null,placeholderText:null,rank:110},{displayType:"show",fieldType:"integer",helpUrl:null,isRequired:!1,key:"international_parcel_volume",label:"How many items do you ship monthly to international countries?",maxLength:7,minLength:null,placeholderText:null,rank:120},{defaultValue:!0,displayType:"show",fieldType:"boolean",helpUrl:null,isRequired:!0,key:"canada_post_agreement",label:'By checking this box, you agree to the <a href="https://goshippo.com/partners_static/canada_post/terms/">Canada Post Shipping Service Agreement</a>',maxLength:null,minLength:null,placeholderText:null,rank:150}],edit:canadaPostParameters},dhl_express:{connect:dhlExpressParameters,create:dhlExpressParameters,edit:dhlExpressParameters},lasership:{connect:lasershipParameters,create:lasershipParameters,edit:lasershipParameters},ups:{connect:[{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"full_name",label:"Full Name",maxLength:20,minLength:null,placeholderText:null,rank:10},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"title",label:"Title",maxLength:20,minLength:null,placeholderText:"Your title (e.g. Doctor, Artist, Manager, ...)",rank:15},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"company",label:"Company",maxLength:30,minLength:null,placeholderText:"If you don't have a company please fill with your full name",rank:20},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"email",label:"Email",maxLength:50,minLength:null,placeholderText:null,rank:25},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"phone",label:"Phone",maxLength:30,minLength:null,placeholderText:null,rank:30},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"billing_address_street1",label:"Street (1)",maxLength:30,minLength:null,placeholderText:null,rank:35},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!1,key:"billing_address_street2",label:"Street (2)",maxLength:50,minLength:null,placeholderText:"Apartment, suit, unit, floor, etc.",rank:40},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"billing_address_city",label:"City",maxLength:30,minLength:null,placeholderText:null,rank:50},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!1,key:"billing_address_state",label:"State (required for USA and Canada)",maxLength:20,minLength:null,placeholderText:"Use official code for other countries if applicable",rank:55},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"billing_address_zip",label:"Zip / Postal Code",maxLength:10,minLength:null,placeholderText:null,rank:60},{displayType:"show",fieldType:"choice",helpUrl:null,isRequired:!0,key:"billing_address_country_iso2",label:"Country",maxLength:null,minLength:null,options:UPS_REGISTRATION_COUNTRIES,placeholderText:null,rank:65},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"account_number",label:"UPS Account Number",maxLength:20,minLength:null,placeholderText:null,rank:70},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"collec_zip",label:"Postcode (collection location)",maxLength:10,minLength:null,placeholderText:null,rank:80},{displayType:"show",fieldType:"choice",helpUrl:null,isRequired:!0,key:"collec_country_iso2",label:"Country",maxLength:null,minLength:null,options:UPS_REGISTRATION_COUNTRIES,placeholderText:null,rank:85},{defaultValue:!1,displayType:"show",fieldType:"boolean",helpUrl:null,isRequired:!1,key:"has_invoice",label:'<b>Show personalized rates (requires latest invoice).</b><br />If disabled, you\'ll only see retail rates. <a style="color: #226015" href="https://support.goshippo.com/hc/en-us/articles/204781715-How-to-Connect-Your-UPS-Account-in-Shippo#h_877e2e40-64ad-4051-95fc-ea3b5afe6a4a">Learn more</a>',maxLength:null,minLength:null,placeholderText:null,rank:90},{displayType:"show",fieldType:"string",helpUrl:null,hiddenByKey:"has_invoice",hiddenByValue:!1,isRequired:!0,key:"invoice_number",label:"Invoice Number",maxLength:30,minLength:null,placeholderText:"Invoice number of a Regular account",rank:95},{displayType:"show",fieldType:"choice",helpUrl:null,hiddenByKey:"has_invoice",hiddenByValue:!1,isRequired:!0,key:"currency_code",label:"Currency Code",maxLength:null,minLength:null,options:[{label:"AED - United Arab Emirates Dirham",value:"AED"},{label:"AFN - Afghan Afghani",value:"AFN"},{label:"ALL - Albanian Lek",value:"ALL"},{label:"AMD - Armenian Dram",value:"AMD"},{label:"ANG - Netherlands Antillean Guilder",value:"ANG"},{label:"AOA - Angolan Kwanza",value:"AOA"},{label:"ARS - Argentine Peso",value:"ARS"},{label:"AUD - Australian Dollar",value:"AUD"},{label:"AWG - Aruban Florin",value:"AWG"},{label:"AZN - Azerbaijani Manat",value:"AZN"},{label:"BAM - Bosnia-Herzegovina Convertible Mark",value:"BAM"},{label:"BBD - Barbadian Dollar",value:"BBD"},{label:"BDT - Bangladeshi Taka",value:"BDT"},{label:"BGN - Bulgarian Lev",value:"BGN"},{label:"BHD - Bahraini Dinar",value:"BHD"},{label:"BIF - Burundian Franc",value:"BIF"},{label:"BMD - Bermudan Dollar",value:"BMD"},{label:"BND - Brunei Dollar",value:"BND"},{label:"BOB - Bolivian Boliviano",value:"BOB"},{label:"BRL - Brazilian Real",value:"BRL"},{label:"BSD - Bahamian Dollar",value:"BSD"},{label:"BTN - Bhutanese Ngultrum",value:"BTN"},{label:"BWP - Botswanan Pula",value:"BWP"},{label:"BYR - Belarusian Ruble",value:"BYR"},{label:"BZD - Belize Dollar",value:"BZD"},{label:"CAD - Canadian Dollar",value:"CAD"},{label:"CDF - Congolese Franc",value:"CDF"},{label:"CHF - Swiss Franc",value:"CHF"},{label:"CLF - Chilean Unit of Account (UF)",value:"CLF"},{label:"CLP - Chilean Peso",value:"CLP"},{label:"COP - Colombian Peso",value:"COP"},{label:"CRC - Costa Rican Colón",value:"CRC"},{label:"CUP - Cuban Peso",value:"CUP"},{label:"CVE - Cape Verdean Escudo",value:"CVE"},{label:"CZK - Czech Republic Koruna",value:"CZK"},{label:"DJF - Djiboutian Franc",value:"DJF"},{label:"DKK - Danish Krone",value:"DKK"},{label:"DOP - Dominican Peso",value:"DOP"},{label:"DZD - Algerian Dinar",value:"DZD"},{label:"EGP - Egyptian Pound",value:"EGP"},{label:"ERN - Eritrean Nakfa",value:"ERN"},{label:"ETB - Ethiopian Birr",value:"ETB"},{label:"EUR - Euro",value:"EUR"},{label:"FJD - Fijian Dollar",value:"FJD"},{label:"FKP - Falkland Islands Pound",value:"FKP"},{label:"GBP - British Pound Sterling",value:"GBP"},{label:"GEL - Georgian Lari",value:"GEL"},{label:"GHS - Ghanaian Cedi",value:"GHS"},{label:"GIP - Gibraltar Pound",value:"GIP"},{label:"GMD - Gambian Dalasi",value:"GMD"},{label:"GNF - Guinean Franc",value:"GNF"},{label:"GTQ - Guatemalan Quetzal",value:"GTQ"},{label:"GYD - Guyanaese Dollar",value:"GYD"},{label:"HKD - Hong Kong Dollar",value:"HKD"},{label:"HNL - Honduran Lempira",value:"HNL"},{label:"HRK - Croatian Kuna",value:"HRK"},{label:"HTG - Haitian Gourde",value:"HTG"},{label:"HUF - Hungarian Forint",value:"HUF"},{label:"IDR - Indonesian Rupiah",value:"IDR"},{label:"ILS - Israeli New Sheqel",value:"ILS"},{label:"INR - Indian Rupee",value:"INR"},{label:"IQD - Iraqi Dinar",value:"IQD"},{label:"IRR - Iranian Rial",value:"IRR"},{label:"ISK - Icelandic Króna",value:"ISK"},{label:"JMD - Jamaican Dollar",value:"JMD"},{label:"JOD - Jordanian Dinar",value:"JOD"},{label:"JPY - Japanese Yen",value:"JPY"},{label:"KES - Kenyan Shilling",value:"KES"},{label:"KGS - Kyrgystani Som",value:"KGS"},{label:"KHR - Cambodian Riel",value:"KHR"},{label:"KMF - Comorian Franc",value:"KMF"},{label:"KPW - North Korean Won",value:"KPW"},{label:"KRW - South Korean Won",value:"KRW"},{label:"KWD - Kuwaiti Dinar",value:"KWD"},{label:"KYD - Cayman Islands Dollar",value:"KYD"},{label:"KZT - Kazakhstani Tenge",value:"KZT"},{label:"LAK - Laotian Kip",value:"LAK"},{label:"LBP - Lebanese Pound",value:"LBP"},{label:"LKR - Sri Lankan Rupee",value:"LKR"},{label:"LRD - Liberian Dollar",value:"LRD"},{label:"LSL - Lesotho Loti",value:"LSL"},{label:"LYD - Libyan Dinar",value:"LYD"},{label:"MAD - Moroccan Dirham",value:"MAD"},{label:"MDL - Moldovan Leu",value:"MDL"},{label:"MGA - Malagasy Ariary",value:"MGA"},{label:"MKD - Macedonian Denar",value:"MKD"},{label:"MMK - Myanma Kyat",value:"MMK"},{label:"MNT - Mongolian Tugrik",value:"MNT"},{label:"MOP - Macanese Pataca",value:"MOP"},{label:"MRO - Mauritanian Ouguiya",value:"MRO"},{label:"MUR - Mauritian Rupee",value:"MUR"},{label:"MVR - Maldivian Rufiyaa",value:"MVR"},{label:"MWK - Malawian Kwacha",value:"MWK"},{label:"MXN - Mexican Peso",value:"MXN"},{label:"MYR - Malaysian Ringgit",value:"MYR"},{label:"MZN - Mozambican Metical",value:"MZN"},{label:"NAD - Namibian Dollar",value:"NAD"},{label:"NGN - Nigerian Naira",value:"NGN"},{label:"NIO - Nicaraguan Córdoba",value:"NIO"},{label:"NOK - Norwegian Krone",value:"NOK"},{label:"NPR - Nepalese Rupee",value:"NPR"},{label:"NZD - New Zealand Dollar",value:"NZD"},{label:"OMR - Omani Rial",value:"OMR"},{label:"PAB - Panamanian Balboa",value:"PAB"},{label:"PEN - Peruvian Nuevo Sol",value:"PEN"},{label:"PGK - Papua New Guinean Kina",value:"PGK"},{label:"PHP - Philippine Peso",value:"PHP"},{label:"PKR - Pakistani Rupee",value:"PKR"},{label:"PLN - Polish Zloty",value:"PLN"},{label:"PYG - Paraguayan Guarani",value:"PYG"},{label:"QAR - Qatari Rial",value:"QAR"},{label:"RMB - Chinese Yuan Renminbi",value:"RMB"},{label:"RON - Romanian Leu",value:"RON"},{label:"RSD - Serbian Dinar",value:"RSD"},{label:"RUB - Russian Ruble",value:"RUB"},{label:"RWF - Rwandan Franc",value:"RWF"},{label:"SAR - Saudi Riyal",value:"SAR"},{label:"SBD - Solomon Islands Dollar",value:"SBD"},{label:"SCR - Seychellois Rupee",value:"SCR"},{label:"SEK - Swedish Krona",value:"SEK"},{label:"SGD - Singapore Dollar",value:"SGD"},{label:"SHP - Saint Helena Pound",value:"SHP"},{label:"SLL - Sierra Leonean Leone",value:"SLL"},{label:"SOS - Somali Shilling",value:"SOS"},{label:"SRD - Surinamese Dollar",value:"SRD"},{label:"STD - São Tomé and Príncipe Dobra",value:"STD"},{label:"SVC - Salvadoran Colón",value:"SVC"},{label:"SYP - Syrian Pound",value:"SYP"},{label:"SZL - Swazi Lilangeni",value:"SZL"},{label:"THB - Thai Baht",value:"THB"},{label:"TJS - Tajikistani Somoni",value:"TJS"},{label:"TND - Tunisian Dinar",value:"TND"},{label:"TOP - Tongan Pa´anga",value:"TOP"},{label:"TRY - Turkish Lira",value:"TRY"},{label:"TTD - Trinidad and Tobago Dollar",value:"TTD"},{label:"TWD - New Taiwan Dollar",value:"TWD"},{label:"TZS - Tanzanian Shilling",value:"TZS"},{label:"UAH - Ukrainian Hryvnia",value:"UAH"},{label:"UGX - Ugandan Shilling",value:"UGX"},{label:"USD - United States Dollar",value:"USD"},{label:"UYU - Uruguayan Peso",value:"UYU"},{label:"UZS - Uzbekistan Som",value:"UZS"},{label:"VND - Vietnamese Dong",value:"VND"},{label:"VUV - Vanuatu Vatu",value:"VUV"},{label:"WST - Samoan Tala",value:"WST"},{label:"XAF - CFA Franc BEAC",value:"XAF"},{label:"XCD - East Caribbean Dollar",value:"XCD"},{label:"XOF - CFA Franc BCEAO",value:"XOF"},{label:"XPF - CFP Franc",value:"XPF"},{label:"YER - Yemeni Rial",value:"YER"},{label:"ZAR - South African Rand",value:"ZAR"},{label:"ZMK - Zambian Kwacha (pre-2013)",value:"ZMK"}],placeholderText:null,rank:100},{displayType:"show",fieldType:"string",helpUrl:null,hiddenByKey:"has_invoice",hiddenByValue:!1,isRequired:!0,key:"invoice_value",label:"Charges This Period",maxLength:30,minLength:null,placeholderText:null,rank:105,tooltip:"Value of the invoice. Max of 16 digits before decimal and 2 digits after decimal."},{displayType:"show",fieldType:"choice",helpUrl:null,hiddenByKey:"has_invoice",hiddenByValue:!1,isRequired:!0,key:"aia_country_iso2",label:"Country",maxLength:30,minLength:null,options:UPS_REGISTRATION_COUNTRIES,placeholderText:"Country associated with the account that issued the invoice",rank:110},{displayType:"show",fieldType:"date",helpUrl:null,hiddenByKey:"has_invoice",hiddenByValue:!1,isRequired:!0,key:"invoice_date",label:"Invoice Date",maxLength:null,minLength:null,placeholderText:null,rank:115},{displayType:"show",fieldType:"string",helpUrl:null,hiddenByKey:"has_invoice",hiddenByValue:!1,isRequired:!1,key:"invoice_controlid",label:"Control ID (required for USA)",maxLength:30,minLength:null,placeholderText:null,rank:120},{displayType:"show",fieldType:"boolean",helpUrl:null,isRequired:!0,key:"ups_agreements",label:'By checking this box, you agree to the <a style="color: #226015" href="https://goshippo.com/external_registration/ups/technology_agreement">UPS Technology Agreement</a>',maxLength:null,minLength:null,placeholderText:null,rank:125}],create:null,edit:upsEditParameters},ups_oauth:{connect:[{displayType:"show",fieldType:"choice",helpUrl:null,isRequired:!0,key:"billing_address_country_iso2",label:"Country",maxLength:null,minLength:null,options:UPS_REGISTRATION_COUNTRIES,placeholderText:null,rank:65},{displayType:"show",fieldType:"string",helpUrl:null,isRequired:!0,key:"account_number",label:"UPS Account Number",maxLength:20,minLength:null,placeholderText:null,rank:70},{displayType:"show",fieldType:"boolean",helpUrl:null,isRequired:!0,key:"ups_agreements",label:'By checking this box, you agree to the <a style="color: #226015" href="https://goshippo.com/external_registration/ups/technology_agreement">UPS Technology Agreement</a>',maxLength:null,minLength:null,placeholderText:null,rank:125}],create:null,edit:upsEditParameters}},isCarrierFormMocked=function(carrier,formType){return!(!parametersMap.hasOwnProperty(carrier)||!parametersMap[carrier][formType])},CarrierForm_SectionTitle=(0,emotion_styled_browser_esm.A)("header")(CarrierForm_templateObject_1||(CarrierForm_templateObject_1=(0,tslib_es6.ue)(["\n  font-size: 18px;\n  color: ",";\n  padding-bottom: 10px;\n  font-weight: ",";\n"],["\n  font-size: 18px;\n  color: ",";\n  padding-bottom: 10px;\n  font-weight: ",";\n"])),styles_constants.Tj.form.fontColor,styles_constants.Wy.medium),SectionBorder=(0,emotion_styled_browser_esm.A)("div")(CarrierForm_templateObject_2||(CarrierForm_templateObject_2=(0,tslib_es6.ue)(["\n  margin: 20px auto;\n  border: 0.5px solid ",";\n"],["\n  margin: 20px auto;\n  border: 0.5px solid ",";\n"])),styles_constants.Tj.gray50),CarrierFormModalBody=(0,emotion_styled_browser_esm.A)(Modal.A.Body)(CarrierForm_templateObject_3||(CarrierForm_templateObject_3=(0,tslib_es6.ue)(["\n  padding: "," "," 0.625rem;\n  line-height: 20px;\n  font-weight: ",";\n"],["\n  padding: "," "," 0.625rem;\n  line-height: 20px;\n  font-weight: ",";\n"])),"20px","32px",styles_constants.Wy.normal),StyledErrorMessage=(0,emotion_styled_browser_esm.A)("div")(CarrierForm_templateObject_4||(CarrierForm_templateObject_4=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: flex-start;\n  gap: 0.625rem;\n"],["\n  display: flex;\n  align-items: flex-start;\n  gap: 0.625rem;\n"]))),StyledAlertIcon=(0,emotion_styled_browser_esm.A)("i")(CarrierForm_templateObject_5||(CarrierForm_templateObject_5=(0,tslib_es6.ue)(["\n  color: ",";\n  vertical-align: middle;\n  font-size: 2em;\n  margin-right: 15px;\n"],["\n  color: ",";\n  vertical-align: middle;\n  font-size: 2em;\n  margin-right: 15px;\n"])),styles_constants.Tj.dangerRed),AgreementLabel=(0,emotion_styled_browser_esm.A)("span")(CarrierForm_templateObject_6||(CarrierForm_templateObject_6=(0,tslib_es6.ue)(["\n  a {\n    color: ",";\n  }\n"],["\n  a {\n    color: ",";\n  }\n"])),styles_constants.Tj.aqua),Centered=(0,emotion_styled_browser_esm.A)("div")(CarrierForm_templateObject_7||(CarrierForm_templateObject_7=(0,tslib_es6.ue)(["\n  text-align: center;\n  margin: 20px;\n"],["\n  text-align: center;\n  margin: 20px;\n"]))),TestCheckbox=(0,emotion_styled_browser_esm.A)(components_Checkbox.Y)(CarrierForm_templateObject_8||(CarrierForm_templateObject_8=(0,tslib_es6.ue)(["\n  margin-bottom: 4px;\n"],["\n  margin-bottom: 4px;\n"]))),TestLabel=(0,emotion_styled_browser_esm.A)("div")(CarrierForm_templateObject_9||(CarrierForm_templateObject_9=(0,tslib_es6.ue)(["\n  font-weight: ",";\n"],["\n  font-weight: ",";\n"])),styles_constants.Wy.medium),TestModeInfo=(0,emotion_styled_browser_esm.A)("div")(CarrierForm_templateObject_10||(CarrierForm_templateObject_10=(0,tslib_es6.ue)(["\n  color: ",";\n"],["\n  color: ",";\n"])),(function(props){return props.disabled?styles_constants.Tj.form.disabledLabelFontColor:styles_constants.Tj.form.labelFontColor})),TestHelpLink=(0,emotion_styled_browser_esm.A)(components_Link_Link.oJ)(CarrierForm_templateObject_11||(CarrierForm_templateObject_11=(0,tslib_es6.ue)(["\n  font-size: inherit;\n"],["\n  font-size: inherit;\n"]))),FedExAdvantageSection=(0,emotion_styled_browser_esm.A)("div")(CarrierForm_templateObject_12||(CarrierForm_templateObject_12=(0,tslib_es6.ue)(["\n  color: ",";\n"],["\n  color: ",";\n"])),(function(props){return props.disabled?styles_constants.Tj.form.disabledLabelFontColor:styles_constants.Tj.form.labelFontColor})),FedExAdvantageLink=(0,emotion_styled_browser_esm.A)(components_Link_Link.tp)(CarrierForm_templateObject_13||(CarrierForm_templateObject_13=(0,tslib_es6.ue)(["\n  font-size: inherit;\n"],["\n  font-size: inherit;\n"]))),Disclaimer=(0,emotion_styled_browser_esm.A)("div")(CarrierForm_templateObject_14||(CarrierForm_templateObject_14=(0,tslib_es6.ue)(["\n  line-height: 24px;\n  font-size: 14px;\n  color: ",";\n  padding-bottom: 10px;\n"],["\n  line-height: 24px;\n  font-size: 14px;\n  color: ",";\n  padding-bottom: 10px;\n"])),styles_constants.Tj.gray700),CarrierForm_Subtext=(0,emotion_styled_browser_esm.A)("div")(CarrierForm_templateObject_15||(CarrierForm_templateObject_15=(0,tslib_es6.ue)(["\n  color: ",";\n  font-size: 0.75rem;\n"],["\n  color: ",";\n  font-size: 0.75rem;\n"])),styles_constants.Tj.gray400),ServiceLevelsSection=(0,emotion_styled_browser_esm.A)("section")(CarrierForm_templateObject_16||(CarrierForm_templateObject_16=(0,tslib_es6.ue)(["\n  margin-bottom: 1rem;\n"],["\n  margin-bottom: 1rem;\n"]))),SectionSubtitle=(0,emotion_styled_browser_esm.A)("div")(CarrierForm_templateObject_17||(CarrierForm_templateObject_17=(0,tslib_es6.ue)(["\n  color: ",";\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n  margin-bottom: 1.25rem;\n"],["\n  color: ",";\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n  margin-bottom: 1.25rem;\n"])),styles_constants.Tj.gray700),ShowHideLabel=(0,emotion_styled_browser_esm.A)("div")(templateObject_18||(templateObject_18=(0,tslib_es6.ue)(["\n  font-weight: ",";\n  color: ",";\n"],["\n  font-weight: ",";\n  color: ",";\n"])),styles_constants.Wy.medium,styles_constants.Tj.gray400),ServiceLevelCheckbox=(0,emotion_styled_browser_esm.A)(components_Checkbox.Y)(templateObject_19||(templateObject_19=(0,tslib_es6.ue)(["\n  margin-bottom: 0.75rem;\n  margin-left: 0.25rem;\n"],["\n  margin-bottom: 0.75rem;\n  margin-left: 0.25rem;\n"]))),SelectAllToggleShowHide=(0,emotion_styled_browser_esm.A)("div")(templateObject_20||(templateObject_20=(0,tslib_es6.ue)(["\n  margin-bottom: 1rem;\n  display: flex;\n  gap: 0.3125rem;\n  cursor: pointer;\n"],["\n  margin-bottom: 1rem;\n  display: flex;\n  gap: 0.3125rem;\n  cursor: pointer;\n"]))),CarrierForm_Icon=(0,emotion_styled_browser_esm.A)("img")(templateObject_21||(templateObject_21=(0,tslib_es6.ue)(["\n  margin: 0 0.19rem;\n  vertical-align: middle;\n"],["\n  margin: 0 0.19rem;\n  vertical-align: middle;\n"]))),ViewMoreBtn=(0,emotion_styled_browser_esm.A)(components_Button.AL)(templateObject_22||(templateObject_22=(0,tslib_es6.ue)(["\n  font-weight: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 3px;\n  border: none;\n  width: 100%;\n"],["\n  font-weight: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 3px;\n  border: none;\n  width: 100%;\n"])),styles_constants.Wy.normal),ErrorHeader=(0,emotion_styled_browser_esm.A)("div")(templateObject_23||(templateObject_23=(0,tslib_es6.ue)(["\n  font-size: 0.8125rem;\n  font-weight: ",";\n  line-height: 1.25rem;\n  color: ",";\n  margin-bottom: 0.5rem;\n"],["\n  font-size: 0.8125rem;\n  font-weight: ",";\n  line-height: 1.25rem;\n  color: ",";\n  margin-bottom: 0.5rem;\n"])),styles_constants.Wy.medium,styles_constants.Tj.black),ErrorDetails=(0,emotion_styled_browser_esm.A)("div")(templateObject_24||(templateObject_24=(0,tslib_es6.ue)(["\n  font-size: 0.75rem;\n  font-weight: ",";\n  line-height: 1.25rem;\n  color: ",";\n"],["\n  font-size: 0.75rem;\n  font-weight: ",";\n  line-height: 1.25rem;\n  color: ",";\n"])),styles_constants.Wy.normal,styles_constants.Tj.black),AlertPanel=(0,emotion_styled_browser_esm.A)(InfoCard)(templateObject_25||(templateObject_25=(0,tslib_es6.ue)(["\n  background-color: ",";\n  border-color: ",";\n  border-radius: 3px;\n  font-size: 0.875rem;\n  margin-bottom: '0.5rem';\n  padding: 1rem 1rem 1rem 0.75rem;\n\n  @media only screen and (min-width: 1024px) {\n    border-radius: 3px;\n  }\n"],["\n  background-color: ",";\n  border-color: ",";\n  border-radius: 3px;\n  font-size: 0.875rem;\n  margin-bottom: '0.5rem';\n  padding: 1rem 1rem 1rem 0.75rem;\n\n  @media only screen and (min-width: 1024px) {\n    border-radius: 3px;\n  }\n"])),styles_constants.Tj.macaroni50,styles_constants.Tj.macaroni700);!function(CarrierFormType){CarrierFormType.Connect="connect",CarrierFormType.Create="create",CarrierFormType.Edit="edit"}(CarrierFormType||(CarrierFormType={})),function(CarrierFormEventType){CarrierFormEventType.Click="Click",CarrierFormEventType.Close="Close",CarrierFormEventType.Submit="Submit"}(CarrierFormEventType||(CarrierFormEventType={})),function(TabbedCarrierFormName){TabbedCarrierFormName.EbayCanadaPost="Ebay Canada Post",TabbedCarrierFormName.UpsMarketplace="UPS Marketplace"}(TabbedCarrierFormName||(TabbedCarrierFormName={})),function(ServiceLevelsIsHidden){ServiceLevelsIsHidden.All="all",ServiceLevelsIsHidden.Mix="mix",ServiceLevelsIsHidden.None="none"}(ServiceLevelsIsHidden||(ServiceLevelsIsHidden={}));var CarrierForm=function(_super){function CarrierForm(props){var _this=_super.call(this,props)||this;return _this.handleClickedFedExAdvantageEvent=function(){_this.props.clickFedExAdvantageLink("CLICKED_FEDEX_ADVANTAGE_LINK")},_this.onToggleSelectAll=function(){var e_1,_a,_b=_this.state,selectedCarrier=_b.selectedCarrier,serviceLevelsIsHidden=_b.serviceLevelsIsHidden;if(selectedCarrier){var allCheckboxChecked=serviceLevelsIsHidden===ServiceLevelsIsHidden.None;try{for(var _c=(0,tslib_es6.Ju)(selectedCarrier.serviceLevels),_d=_c.next();!_d.done;_d=_c.next()){var serviceLevel=_d.value;serviceLevel.is_used||_this.props.change(serviceLevel.token,!allCheckboxChecked)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}var setCheckboxState=allCheckboxChecked?ServiceLevelsIsHidden.All:ServiceLevelsIsHidden.None;_this.setState({serviceLevelsIsHidden:setCheckboxState})}},_this.onToggleViewMore=function(){var _a=_this.state,selectedCarrier=_a.selectedCarrier,viewMoreStatus=_a.viewMoreStatus;if(selectedCarrier&&!(selectedCarrier.serviceLevels.length<=10)){var content=viewMoreStatus?"less":"more",arrowPosition={transform:"rotate(".concat(viewMoreStatus?"180":"0","deg)")};return(0,emotion_react_jsx_runtime_browser_esm.FD)(ViewMoreBtn,(0,tslib_es6.Cl)({onClick:function(){return _this.setState({viewMoreStatus:!viewMoreStatus})}},{children:["View ".concat(content),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_Icon,{src:arrow_sea600,style:arrowPosition})]}))}},_this.renderApiOnlyMessage=function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(AlertPanel,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Icon.Ay,{alt:"",className:"mr-3",size:"16px",src:icon_alert_info_filled}),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"leading-6"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(utils_translate.x6,{components:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Link_Link.A,(0,tslib_es6.Cl)({color:"secondary",href:"https://goshippo.com/docs/reference#carrier-accounts"},{children:"_"}),(0,index_browser.Ak)()),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link_Link.A,(0,tslib_es6.Cl)({color:"secondary",href:"mailto:support@shippo.com"},{children:"_"}),(0,index_browser.Ak)())],i18nKey:"carriers.form.serviceLevelsSection.apiOnlyMsg"})}))]}))})},_this.renderErrorMessage=function(){return""!==_this.props.errorMessage&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Message.Kw,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledErrorMessage,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledAlertIcon,{className:"fa fa-exclamation-circle"}),(0,emotion_react_jsx_runtime_browser_esm.Y)("strong",{children:_this.props.errorMessage})]})})},_this.renderFetchErrorMessage=function(){return""!==_this.props.fetchErrorMessage&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Message.Kw,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledErrorMessage,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledAlertIcon,{className:"fa fa-exclamation-circle"}),(0,emotion_react_jsx_runtime_browser_esm.Y)("strong",{children:_this.props.fetchErrorMessage})]})})},_this.renderSectionBorder=function(shouldHideSectionBorder){return!shouldHideSectionBorder&&(0,emotion_react_jsx_runtime_browser_esm.Y)(SectionBorder,{})},_this.renderServiceLevelsErrorMessage=function(){var errors=_this.props.getServiceLevelsError;if(0!==errors.length)return(0,emotion_react_jsx_runtime_browser_esm.Y)(Message.Kw,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledErrorMessage,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_Icon,{src:exclamation_circle}),(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorHeader,{children:"Some settings could not be saved."}),(0,emotion_react_jsx_runtime_browser_esm.Y)("ul",{children:errors.map((function(error){return(0,emotion_react_jsx_runtime_browser_esm.Y)("li",{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorDetails,{children:error})},error)}))})]})]})})},_this.renderServiceLevelsList=function(){var _a=_this.state,selectedCarrier=_a.selectedCarrier,viewMoreStatus=_a.viewMoreStatus;if(selectedCarrier)return(viewMoreStatus?selectedCarrier.serviceLevels:selectedCarrier.serviceLevels.slice(0,10)).map((function(serviceLevel){var inputProps={disabled:serviceLevel.is_used,label:serviceLevel.name,labelProps:{},name:serviceLevel.token};return _this.serviceLevelCheckboxInput(inputProps)}))},_this.renderServiceLevelsSection=function(){var CheckboxIconsState,t=_this.props.t;return function(CheckboxIconsState){CheckboxIconsState[CheckboxIconsState.all=ic_unchecked]="all",CheckboxIconsState[CheckboxIconsState.mix=ic_indeterminate]="mix",CheckboxIconsState[CheckboxIconsState.none=ic_checked]="none"}(CheckboxIconsState||(CheckboxIconsState={})),(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(SectionBorder,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_SectionTitle,{children:t("carriers.form.serviceLevelsSection.header")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SectionSubtitle,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(utils_translate.x6,(0,tslib_es6.Cl)({i18nKey:"carriers.form.serviceLevelsSection.subtitle"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("b",{children:"hide it everywhere"})}))}),_this.renderServiceLevelsErrorMessage(),(0,emotion_react_jsx_runtime_browser_esm.FD)(ServiceLevelsSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(SelectAllToggleShowHide,(0,tslib_es6.Cl)({onClick:_this.onToggleSelectAll},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_Icon,{src:CheckboxIconsState[_this.state.serviceLevelsIsHidden||"none"]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ShowHideLabel,{children:t("carriers.form.serviceLevelsSection.showHideAll")})]})),_this.renderServiceLevelsList(),_this.onToggleViewMore()]})]})},_this.renderTestLabel=function(carrier){var _a=_this.props,disabled=_a.disabled,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:TestCheckbox,disabled,label:(0,emotion_react_jsx_runtime_browser_esm.Y)(TestLabel,{children:carriers.$k.includes(carrier.id)?t("carriers.form.enableActualTestAccount"):t("carriers.form.enableTestMode")}),labelProps:{disabled},name:"test",props:{dataTestid:"test-mode-checkbox"},responsive:!0}),(0,emotion_react_jsx_runtime_browser_esm.Y)(TestModeInfo,(0,tslib_es6.Cl)({disabled},{children:carriers.$k.includes(carrier.id)?t("carriers.form.actualTestAccount",{carrierName:carrier.name}):(0,emotion_react_jsx_runtime_browser_esm.FD)("span",{children:[t("carriers.form.testAccountInfo")," ",(0,emotion_react_jsx_runtime_browser_esm.Y)(TestHelpLink,(0,tslib_es6.Cl)({href:"https://support.goshippo.com/hc/en-us/articles/360003902611",target:"_blank"},{children:t("carriers.form.testLearnMore")})),"."]})}))]})},_this.serviceLevelCheckboxInput=function(_a){var disabled=_a.disabled,label=_a.label,labelProps=_a.labelProps,name=_a.name;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({inverted:!0,open:!!disabled&&void 0,style:{fontSize:"0.8125rem",lineHeight:"1.25rem",maxWidth:"18.75rem"},trigger:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:ServiceLevelCheckbox,disabled,label,labelProps,name,responsive:!0})},{children:_this.props.t("carriers.form.newFedExFooterCopy")}),name)},_this.setServiceLevelState=function(){var e_2,_a;if(_this.props.carrierAccountWithServiceLevels){var _b=_this.props,carrierAccountWithServiceLevels=_b.carrierAccountWithServiceLevels,isEditForm=_b.formType===CarrierFormType.Edit,isHiddenReadyToSet=null===_this.state.serviceLevelsIsHidden,hasServiceLevels=carrierAccountWithServiceLevels.hasOwnProperty("serviceLevels");if(isEditForm&&isHiddenReadyToSet&&hasServiceLevels){var serviceLevels=carrierAccountWithServiceLevels.serviceLevels,carrierAccountServiceLevels=[],hiddenCount={isHidden:0,notHidden:0},toggleState=ServiceLevelsIsHidden.All;try{for(var serviceLevels_1=(0,tslib_es6.Ju)(serviceLevels),serviceLevels_1_1=serviceLevels_1.next();!serviceLevels_1_1.done;serviceLevels_1_1=serviceLevels_1.next()){var serviceLevel=serviceLevels_1_1.value;carrierAccountServiceLevels.push(serviceLevel.token),serviceLevel.is_used||(serviceLevel.is_hidden?hiddenCount.isHidden++:hiddenCount.notHidden++)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{serviceLevels_1_1&&!serviceLevels_1_1.done&&(_a=serviceLevels_1.return)&&_a.call(serviceLevels_1)}finally{if(e_2)throw e_2.error}}toggleState=hiddenCount.isHidden&&hiddenCount.notHidden?ServiceLevelsIsHidden.Mix:hiddenCount.isHidden>=hiddenCount.notHidden?ServiceLevelsIsHidden.All:ServiceLevelsIsHidden.None,_this.setState({selectedCarrier:carrierAccountWithServiceLevels,serviceLevelsIsHidden:toggleState})}}},_this.setValidations=function(parameters){var e_3,_a,mockedValidations={},validateIsRequired=function(value){return value?void 0:"Required"},validateMaxLength=function(max){return function(value){return value&&value.length>max?"Maximum length is ".concat(max," characters (currently ").concat(value.length,")"):void 0}},validateMinLength=function(min){return function(value){return value&&value.length<min?"Minimum length is ".concat(min," characters (currently ").concat(value.length,")"):void 0}},validateIntegerType=function(value){return value&&isNaN(Number(value))?"Must be a number":void 0},validateRegex=function(regex,errorFormat){return function(value){return value&&!regex.test(value)?"Must be in format ".concat(errorFormat):void 0}};try{for(var parameters_1=(0,tslib_es6.Ju)(parameters),parameters_1_1=parameters_1.next();!parameters_1_1.done;parameters_1_1=parameters_1.next()){var parameter=parameters_1_1.value,parameterValidations=[];"integer"===parameter.fieldType&&parameterValidations.push(validateIntegerType),parameter.isRequired&&parameterValidations.push(validateIsRequired),parameter.maxLength&&parameterValidations.push(validateMaxLength(parameter.maxLength)),parameter.minLength&&parameterValidations.push(validateMinLength(parameter.minLength)),"military_time"===parameter.fieldType&&parameterValidations.push(validateRegex(/^(2[0-3]|[0-1][\d]):[0-5][\d]$/,"HH:MM")),mockedValidations[parameter.key]=parameterValidations}}catch(e_3_1){e_3={error:e_3_1}}finally{try{parameters_1_1&&!parameters_1_1.done&&(_a=parameters_1.return)&&_a.call(parameters_1)}finally{if(e_3)throw e_3.error}}_this.setState({mockedValidations})},_this.validateMetadataField=function(value){return value&&value.length>100?"Maximum length is ".concat(100," characters (currently ").concat(value.length,")"):void 0},_this.state={mockedValidations:{},selectedCarrier:null,serviceLevelsIsHidden:null,viewMoreStatus:!1},_this}return(0,tslib_es6.C6)(CarrierForm,_super),CarrierForm.prototype.componentDidMount=function(){var _a=this.props,carrier=_a.carrier,formType=_a.formType;isCarrierFormMocked(carrier.id,formType)?this.setValidations(this.props.parameters):this.props.fetchCarrierFormFields({carrier,formType}),this.setServiceLevelState()},CarrierForm.prototype.componentDidUpdate=function(prevProps){var parameters=this.props.parameters;prevProps.parameters!==parameters&&parameters&&this.setValidations(parameters),this.setServiceLevelState()},CarrierForm.prototype.componentWillUnmount=function(){this.props.clearCarrierFormFieldsState()},CarrierForm.prototype.handleLinkOnClick=function(e){"a"===e.target.tagName.toLowerCase()&&(e.stopPropagation(),e.preventDefault(),openLinkInNewTab(e.target.href))},CarrierForm.prototype.render=function(){var carrierFormFields,_this=this,_a=this.props,accountCountry=_a.accountCountry,carrier=_a.carrier,disabled=_a.disabled,fetchErrorMessage=_a.fetchErrorMessage,formState=_a.formState,formType=_a.formType,hideAccountNickname=_a.hideAccountNickname,hideTestMode=_a.hideTestMode,isFetchingCarrierFormFields=_a.isFetchingCarrierFormFields,masterAccountForm=_a.masterAccountForm,validations=_a.validations,mockedValidations=this.state.mockedValidations;carrierFormFields=isCarrierFormMocked(carrier.id,formType)?this.props.parameters:this.props.carrierFormFields;var defaultErrorMessage=this.renderFetchErrorMessage(),showErrorMessage=""!==fetchErrorMessage&&!masterAccountForm;return"lasership"===carrier.id&&(defaultErrorMessage=this.renderApiOnlyMessage(),showErrorMessage=!0),isFetchingCarrierFormFields?(0,emotion_react_jsx_runtime_browser_esm.Y)(Centered,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Spinner.hQ,{})}):(0,emotion_react_jsx_runtime_browser_esm.Y)("form",{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierFormModalBody,{children:showErrorMessage?defaultErrorMessage:(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[!masterAccountForm&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[this.renderErrorMessage(),!hideAccountNickname&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.f,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"100%"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,disabled,label:"Account Nickname",labelProps:{disabled},name:"metadata",placeholder:"e.g. Test Account, US Domestic, CA Facility",responsive:!0,validate:this.validateMetadataField})}))}),carrierFormFields.map((function(carrierFormField,index){var _a,_b,component,shouldHideSectionBorder=0===index&&hideAccountNickname,isAusPostMyPostRadioField=carrier.id===carriers.io.id&&formType===CarrierFormType.Connect&&"is_mypost"===carrierFormField.key;isAusPostMyPostRadioField&&(carrierFormField.options=AUSPOST_MYPOST_OPTIONS),isAusPostMyPostRadioField&&!selector(formState,carrierFormField.key)&&_this.props.setField("is_mypost",AUSPOST_MYPOST_OPTIONS[0]);var isUPSCreateCountryField="ups"===carrier.id&&formType===CarrierFormType.Create&&carrierFormField.key.endsWith("country_iso2");if("ups"===carrier.id&&formType===CarrierFormType.Create&&"ups_agreements"===carrierFormField.key&&accountCountry===constants_countries.Xr.CA.iso2&&(carrierFormField.label='By checking this box, you agree to the <a href="https://goshippo.com/external_registration/ups/technology_agreement/ca">UPS Technology Agreement</a> and <a href="https://shippo.com/CA-TToCos">UPS Tariff/Terms and Conditions of Service</a> and <a href="https://shippo.com/CA-LoPI">List of Prohibited Items for Shipping</a>'),carrierFormField.hiddenByKey){var valuePresent=selector(formState,carrierFormField.hiddenByKey),shouldHideAusPostFields=!1;if("is_mypost"===carrierFormField.hiddenByKey&&(carrierFormField.hiddenByValue&&"is_mypost"===(null==valuePresent?void 0:valuePresent.value)?shouldHideAusPostFields=!0:carrierFormField.hiddenByValue||"is_eparcel"!==(null==valuePresent?void 0:valuePresent.value)||(shouldHideAusPostFields=!0)),valuePresent===carrierFormField.hiddenByValue||shouldHideAusPostFields)return selector(formState,carrierFormField.key)&&_this.props.clearField(carrierFormField.key),null;if("pickup_address_country_iso2"===carrierFormField.key&&!selector(formState,carrierFormField.key)){var countryOption=void 0;accountCountry&&carrierFormField.options&&(countryOption=carrierFormField.options.filter((function(o){return o.value===accountCountry}))[0]),countryOption||(countryOption={label:constants_countries.Xr.US.name,value:constants_countries.Xr.US.iso2}),_this.props.setField("pickup_address_country_iso2",countryOption)}}var label=carrierFormField.label;switch(carrierFormField.fieldType){case"integer":case"string":case"military_time":component=formType!==CarrierFormType.Edit||"account_id"===carrierFormField.key||"mask"!==carrierFormField.displayType&&"show_partial"!==carrierFormField.displayType?Input.FO:Input.Ex;break;case"boolean":if(isAusPostMyPostRadioField){component=Radio_RadioField;break}component=components_Checkbox.Y,label=(0,emotion_react_jsx_runtime_browser_esm.Y)(AgreementLabel,{dangerouslySetInnerHTML:{__html:label},onClick:_this.handleLinkOnClick});break;case"choice":component=SmartSelect.s;break;case"date":component=DateTimePickerField;break;default:return null}var formField=(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component,disabled:formType===CarrierFormType.Edit&&"account_id"===carrierFormField.key||disabled||carrierFormField.disabled||isUPSCreateCountryField,id:carrierFormField.key,label,labelProps:{disabled:disabled||carrierFormField.disabled,required:!(formType===CarrierFormType.Edit&&"account_id"===carrierFormField.key||carrierFormField.disabled)&&carrierFormField.isRequired,tooltipText:carrierFormField.tooltip},linkText:"Where is this?",linkUrl:carrierFormField.helpUrl,name:carrierFormField.key,onClick:component===Input.Ex?function(){return _this.props.clearField(carrierFormField.key)}:void 0,options:isUPSCreateCountryField&&carrierFormField.options?carrierFormField.options.filter((function(o){return o.value===(accountCountry||constants_countries.Xr.US.iso2)})):carrierFormField.options,placeholder:carrierFormField.placeholderText,responsive:!0,type:carrierFormField.key.includes("password")&&!carrierFormField.key.includes("api_password")?"password":void 0,validate:function(){var _a;return(null===(_a=_this.props.initialValues)||void 0===_a?void 0:_a.password)===selector(formState,carrierFormField.key)&&formType===CarrierFormType.Edit&&"mask"===carrierFormField.displayType&&"password"===carrierFormField.key}()||formType===CarrierFormType.Edit&&"account_id"===carrierFormField.key||carrierFormField.disabled?void 0:isCarrierFormMocked(carrier.id,formType)?mockedValidations[carrierFormField.key]:validations[carrierFormField.key]});return(0,emotion_react_jsx_runtime_browser_esm.Y)(react.Fragment,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.f,(0,tslib_es6.Cl)({className:isAusPostMyPostRadioField?"mb-4":""},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(Grid.V,(0,tslib_es6.Cl)({width:"100%"},{children:[carrierFormField.key.endsWith("full_name")&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[_this.renderSectionBorder(shouldHideSectionBorder),formType===CarrierFormType.Connect&&(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_SectionTitle,{children:"Contact Information"})]}),carrierFormField.key.endsWith("first_name")&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[_this.renderSectionBorder(shouldHideSectionBorder),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_SectionTitle,{children:"Contact Information"})]}),carrier===carriers.$5&&formType===CarrierFormType.Create&&(null===(_b=null===(_a=carrierFormFields[index-1])||void 0===_a?void 0:_a.key)||void 0===_b?void 0:_b.endsWith("company"))&&(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_Subtext,{children:_this.props.t("carriers.upsMasterForm.companySubtext")}),(carrierFormField.key.endsWith("billing_address_st")||carrierFormField.key.endsWith("billing_address_st1")||carrierFormField.key.endsWith("billing_address_street")||carrierFormField.key.endsWith("billing_address_street1")||carrierFormField.key.endsWith("street_number"))&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[_this.renderSectionBorder(shouldHideSectionBorder),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_SectionTitle,{children:"Billing Address"})]}),(carrierFormField.key.endsWith("from_address_st")||carrierFormField.key.endsWith("from_address_st1")||carrierFormField.key.endsWith("from_address_street")||carrierFormField.key.endsWith("from_address_street1"))&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[_this.renderSectionBorder(shouldHideSectionBorder),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_SectionTitle,{children:"Shipping Address"})]}),carrierFormField.key.endsWith("same_as_billing_address")&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[_this.renderSectionBorder(shouldHideSectionBorder),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_SectionTitle,{children:"Pickup Address"}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Disclaimer,{children:"Note: Pickup address cannot be a PO Box"})]}),carrierFormField.key.includes("agreement")&&_this.renderSectionBorder(shouldHideSectionBorder),carrierFormField.key.endsWith("account")&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[_this.renderSectionBorder(shouldHideSectionBorder),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_SectionTitle,{children:"Account Information"})]}),carrierFormField.key.endsWith("has_invoice")&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[_this.renderSectionBorder(shouldHideSectionBorder),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_SectionTitle,{children:"Personalized UPS Rates"})]}),carrierFormField.key.endsWith("legal_name")&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[_this.renderSectionBorder(shouldHideSectionBorder),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_SectionTitle,{children:"Business Information"})]}),carrierFormField.key.endsWith("customer_number")&&(0,emotion_react_jsx_runtime_browser_esm.Y)(react.Fragment,{children:_this.renderSectionBorder(shouldHideSectionBorder)}),carrierFormField.key.endsWith("is_mypost")&&carrier.id===carriers.io.id&&(0,emotion_react_jsx_runtime_browser_esm.Y)(react.Fragment,{children:_this.renderSectionBorder(shouldHideSectionBorder)}),carrierFormField.key.endsWith("merchant_token")&&carrier.id===carriers.io.id&&(0,emotion_react_jsx_runtime_browser_esm.FD)(Body,(0,tslib_es6.Cl)({className:"mb-2"},{children:["".concat(_this.props.t("carriers.createAtCarrierWebsite",{accountType:"MyPost",carrierName:carrier.name})," "),(0,emotion_react_jsx_runtime_browser_esm.Y)(TestHelpLink,(0,tslib_es6.Cl)({href:"https://auspost.com.au/mypost-business",target:"_blank"},{children:_this.props.t("carriers.clickToGetStarted")}))]})),formField]}))}))},carrierFormField.key)}))]}),this.props.fedExInternationalSection&&(0,emotion_react_jsx_runtime_browser_esm.Y)(react.Fragment,{children:this.props.fedExInternationalSection}),formType===CarrierFormType.Connect&&this.props.isUserPaygPlan&&!this.props.newFedExAPI&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Body,(0,tslib_es6.Cl)({color:styles_constants.Tj.gray400},{children:"".concat(this.props.t("carriers.planInfo.formPaygPlanDisclaimer"),".")})),!(formType===CarrierFormType.Connect&&"ups"===carrier.id||formType===CarrierFormType.Create&&carriers.mp.includes(carrier.id)||hideTestMode)&&(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[this.renderSectionBorder(masterAccountForm),(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.f,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.V,(0,tslib_es6.Cl)({width:"100%"},{children:this.renderTestLabel(carrier)}))})]}),formType===CarrierFormType.Connect&&"fedex"===carrier.id&&(0,emotion_react_jsx_runtime_browser_esm.Y)(react.Fragment,{children:this.props.newFedExAPI?(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Divider.A,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",style:{margin:"".concat(shippoTheme.A.spacing(2)," 0px")},variant:"caption"},{children:this.props.t("carriers.form.newFedExFooterCopy")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Divider.A,{})]}):(0,emotion_react_jsx_runtime_browser_esm.FD)(FedExAdvantageSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(SectionBorder,{}),(0,emotion_react_jsx_runtime_browser_esm.FD)("span",{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(FedExAdvantageLink,(0,tslib_es6.Cl)({dataAnalytics:"click-fedex-advantage-link",href:"https://advantagemember.van.fedex.com/7502/",onClick:this.handleClickedFedExAdvantageEvent,target:"_blank"},{children:"Apply here to save up to 29% off with FedEx"})),". Signing up is completely free for both new and existing FedEx accounts."]})]})}),formType===CarrierFormType.Connect&&this.props.isUpsOauthNewRegistration&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:styles_constants.Tj.gray700,component:"p",style:{textAlign:"center"},variant:"body"},{children:this.props.t("carriers.upsOauthRegistrationForm.description")})),formType===CarrierFormType.Edit&&this.renderServiceLevelsSection(),this.props.children]})})})},CarrierForm}(react.Component),selector=(0,formValueSelector.A)(constants_form.QW);const CarrierForm_CarrierForm=(0,redux.Zz)((0,utils_translate.Tl)("settings"),(0,reduxForm.A)({enableReinitialize:!0,form:constants_form.QW}),(0,es.Ng)((function(state){return{carrierFormFields:getCarrierFormFields(state),fetchErrorMessage:getCarrierFormFieldsErrorMessage(state),formState:state,getServiceLevelsError:(0,carrier_accounts_selectors.Xs)(state),isFetchingCarrierFormFields:getIsFetchingCarrierFormFields(state),isUserPaygPlan:(0,plans_selectors.YJ)(state),serviceLevelsByAccount:(0,providers_selectors.eA)(state),validations:getCarrierFormFieldValidations(state)}}),(function(dispatch){return{clearCarrierFormFieldsState:function(){return dispatch(carrierFormFieldsClearState())},clearField:function(key){return dispatch((0,redux_form_es.Zg)(constants_form.QW,key,""))},clickFedExAdvantageLink:function(value){return dispatch((0,prod_analytics_actions.o)(value))},fetchCarrierFormFields:function(payload){return dispatch(fetchCarrierFormFields(payload))},fetchServiceLevelsAccounts:function(){return dispatch(fetchServiceLevelsByAccount())},setField:function(key,value){return dispatch((0,redux_form_es.Zg)(constants_form.QW,key,value))}}})))(CarrierForm);var CarrierForm_templateObject_1,CarrierForm_templateObject_2,CarrierForm_templateObject_3,CarrierForm_templateObject_4,CarrierForm_templateObject_5,CarrierForm_templateObject_6,CarrierForm_templateObject_7,CarrierForm_templateObject_8,CarrierForm_templateObject_9,CarrierForm_templateObject_10,CarrierForm_templateObject_11,CarrierForm_templateObject_12,CarrierForm_templateObject_13,CarrierForm_templateObject_14,CarrierForm_templateObject_15,CarrierForm_templateObject_16,CarrierForm_templateObject_17,templateObject_18,templateObject_19,templateObject_20,templateObject_21,templateObject_22,templateObject_23,templateObject_24,templateObject_25,components_Header=__webpack_require__("./app/components/Header/index.ts"),headerMobileHeight="".concat("40px"," + 92px"),CarrierLogo=(0,emotion_styled_browser_esm.A)("img")(CarrierModalHeader_templateObject_1||(CarrierModalHeader_templateObject_1=(0,tslib_es6.ue)(["\n  max-height: 42px;\n  max-width: 75px;\n  width: auto;\n  height: auto;\n"],["\n  max-height: 42px;\n  max-width: 75px;\n  width: auto;\n  height: auto;\n"]))),CarrierModalHeader_HeaderContainer=(0,emotion_styled_browser_esm.A)("div")(CarrierModalHeader_templateObject_2||(CarrierModalHeader_templateObject_2=(0,tslib_es6.ue)(["\n  margin-top: ",";\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n\n  @media screen and (min-width: ","px) {\n    margin-top: 0px;\n    position: relative;\n    top: auto;\n    left: auto;\n    right: auto;\n  }\n"],["\n  margin-top: ",";\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n\n  @media screen and (min-width: ","px) {\n    margin-top: 0px;\n    position: relative;\n    top: auto;\n    left: auto;\n    right: auto;\n  }\n"])),"40px",responsive.P.Mobile),StyledAddons=(0,emotion_styled_browser_esm.A)(components_Header.A.Addons)(CarrierModalHeader_templateObject_3||(CarrierModalHeader_templateObject_3=(0,tslib_es6.ue)(["\n  font-size: 14px;\n"],["\n  font-size: 14px;\n"]))),StyledHeaderFlexContainer=(0,emotion_styled_browser_esm.A)(components_Header.A.FlexContainer)(CarrierModalHeader_templateObject_4||(CarrierModalHeader_templateObject_4=(0,tslib_es6.ue)(["\n  flex-direction: row;\n  justify-content: space-between;\n"],["\n  flex-direction: row;\n  justify-content: space-between;\n"]))),StyledCheckbox=(0,emotion_styled_browser_esm.A)(Checkbox.Ay)(CarrierModalHeader_templateObject_5||(CarrierModalHeader_templateObject_5=(0,tslib_es6.ue)([""],[""])));const CarrierModalHeader_CarrierModalHeader=(0,redux.Zz)((0,utils_translate.Tl)("settings"))((function(props){var titleText,active=props.active,carrier=props.carrier,customTitleText=props.customTitleText,formType=props.formType,onActiveToggle=props.onActiveToggle,t=props.t,test=props.test;if(customTitleText)titleText=customTitleText;else switch(formType){case CarrierFormType.Create:titleText=t("carriers.form.titleText",{carrierName:carrier.name,formType:t("carriers.form.create")});break;case CarrierFormType.Edit:titleText=t("carriers.form.titleText",{carrierName:carrier.name,formType:t("carriers.form.edit")});break;default:titleText=t("carriers.form.titleText",{carrierName:carrier.name,formType:t("carriers.form.connect")})}return(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierModalHeader_HeaderContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Modal.A.Header,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledHeaderFlexContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Modal.A.Title,{children:[titleText," ",test&&(0,emotion_react_jsx_runtime_browser_esm.Y)(TestTag.A,{type:TestTag.d.Account})]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledAddons,{children:formType===CarrierFormType.Edit?(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledCheckbox,{checked:active,label:"".concat(t("carriers.active"),":"),labelPosition:"left",onChange:onActiveToggle,toggle:!0}):carrier.img&&(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierLogo,{src:carrier.img})})]})})})}));var CarrierModalHeader_templateObject_1,CarrierModalHeader_templateObject_2,CarrierModalHeader_templateObject_3,CarrierModalHeader_templateObject_4,CarrierModalHeader_templateObject_5,isValidPhoneNumber=__webpack_require__("./node_modules/libphonenumber-js/min/exports/isValidPhoneNumber.js"),APIAddressSelectionModalContent=__webpack_require__("./app/components/withAddressBook/APIAddressSelectionModalContent.tsx"),StyledPrimaryButton=(0,emotion_styled_browser_esm.A)(components_Button.jn)(CarrierModalFooter_templateObject_1||(CarrierModalFooter_templateObject_1=(0,tslib_es6.ue)(["\n  width: 100%;\n  padding: 0px;\n  margin-left: 0px;\n\n  @media screen and (min-width: ","px) {\n    width: initial;\n    padding: 0 20px;\n  }\n"],["\n  width: 100%;\n  padding: 0px;\n  margin-left: 0px;\n\n  @media screen and (min-width: ","px) {\n    width: initial;\n    padding: 0 20px;\n  }\n"])),responsive.P.Mobile),CancelButtonExtended=(0,emotion_styled_browser_esm.A)(APIAddressSelectionModalContent.Zb)(CarrierModalFooter_templateObject_2||(CarrierModalFooter_templateObject_2=(0,tslib_es6.ue)(["\n  border: none;\n  font-weight: ",";\n"],["\n  border: none;\n  font-weight: ",";\n"])),styles_constants.Wy.normal),FooterButtons=(0,emotion_styled_browser_esm.A)("div")(CarrierModalFooter_templateObject_3||(CarrierModalFooter_templateObject_3=(0,tslib_es6.ue)(["\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  & button.formSubmit {\n    margin-left: 0px;\n  }\n\n  @media screen and (min-width: ","px) {\n    & button.formSubmit {\n      margin-left: 10px;\n    }\n    :only-of-type {\n      margin-left: auto;\n    }\n  }\n"],["\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  & button.formSubmit {\n    margin-left: 0px;\n  }\n\n  @media screen and (min-width: ","px) {\n    & button.formSubmit {\n      margin-left: 10px;\n    }\n    :only-of-type {\n      margin-left: auto;\n    }\n  }\n"])),responsive.P.Mobile);const CarrierModalFooter_CarrierModalFooter=(0,redux.Zz)((0,utils_translate.Tl)("settings"))((function(props){var loadingText,primaryButtonText,carrier=props.carrier,customPrimaryButtonText=props.customPrimaryButtonText,customSecondaryButtonText=props.customSecondaryButtonText,formType=props.formType,isLoading=props.isLoading,onCancelClick=props.onCancelClick,onPrimaryClick=props.onPrimaryClick,t=props.t;switch(formType){case CarrierFormType.Create:loadingText="".concat(t("carriers.form.verifying"),"..."),primaryButtonText=t("carriers.form.createACarrierAccount",{carrierName:carrier.name});break;case CarrierFormType.Edit:loadingText="".concat(t("carriers.form.updating"),"..."),primaryButtonText=t("carriers.form.updateAccount");break;default:loadingText="".concat(t("carriers.form.verifying"),"..."),primaryButtonText=t("carriers.form.connectAccount")}return(0,emotion_react_jsx_runtime_browser_esm.Y)(Modal.A.MobileFooter,(0,tslib_es6.Cl)({hideBorder:!0},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(FooterButtons,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CancelButtonExtended,(0,tslib_es6.Cl)({disabled:isLoading,onClick:onCancelClick},{children:customSecondaryButtonText||t("carriers.cancel")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledPrimaryButton,(0,tslib_es6.Cl)({className:"formSubmit",dataAnalytics:"UPS"===carrier.name&&formType===CarrierFormType.Create?"ups-master-long-form-submit":"carrier-form-submit",disabled:isLoading,isLoading,loadingText,onClick:onPrimaryClick},{children:customPrimaryButtonText||primaryButtonText}))]})}))}));var CarrierModalFooter_templateObject_1,CarrierModalFooter_templateObject_2,CarrierModalFooter_templateObject_3;const Carriers_CarrierModalFooter=CarrierModalFooter_CarrierModalFooter;var CarrierErrorMessageDisplay_styles_templateObject_1,CarrierErrorMessageDisplay_styles_templateObject_2,styles_StyledErrorMessage=(0,emotion_styled_browser_esm.A)("div")(CarrierErrorMessageDisplay_styles_templateObject_1||(CarrierErrorMessageDisplay_styles_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),styles_StyledAlertIcon=(0,emotion_styled_browser_esm.A)("i")(CarrierErrorMessageDisplay_styles_templateObject_2||(CarrierErrorMessageDisplay_styles_templateObject_2=(0,tslib_es6.ue)(["\n  color: ",";\n  vertical-align: middle;\n  font-size: 2em;\n  margin-right: 15px;\n"],["\n  color: ",";\n  vertical-align: middle;\n  font-size: 2em;\n  margin-right: 15px;\n"])),styles_constants.Tj.dangerRed);const Carriers_CarrierErrorMessageDisplay=function(){var errorMessage=(0,es.d4)((function(state){return(0,carrier_accounts_selectors.E3)(state)})),displayErrorMessage="Account is not in a valid state for registration (may already be processing). Please try again after a few seconds. If problem persists, please contact support@goshippo.com"===errorMessage?"Account is not in a valid state for registration (may already be processing). Please try again after a few seconds or refresh the page. If problem persists, please contact support@goshippo.com":errorMessage;return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:errorMessage&&errorMessage.length>0&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Message.Kw,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(styles_StyledErrorMessage,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(styles_StyledAlertIcon,{className:"fa fa-exclamation-circle"}),(0,emotion_react_jsx_runtime_browser_esm.Y)("strong",{children:displayErrorMessage})]})})})};var SlideModal=__webpack_require__("./app/components/SlideModal/index.ts"),STORE_CONNECTION_SUCCESS_COOKIE_NAME="store_connection_success",getCookie=function(name){var match=document.cookie.match(new RegExp("(^| )".concat(name,"=([^;]+)")));if(match)return match[2]},FedexInternationalSection=__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/shared/FedexInternationalSection/index.js"),CanadaPostConnectRedirect_Container=emotion_styled_browser_esm.A.section(CanadaPostConnectRedirect_templateObject_1||(CanadaPostConnectRedirect_templateObject_1=(0,tslib_es6.ue)(["\n  color: ",";\n"],["\n  color: ",";\n"])),styles_constants.Tj.black),ComposedCanadaPostConnectRedirect=(0,utils_translate.Tl)("settings")((function(_a){var t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(CanadaPostConnectRedirect_Container,(0,tslib_es6.Cl)({className:"flex flex-col items-center text-center"},{children:[t("carriers.canadaPostRedirectForm.description"),(0,emotion_react_jsx_runtime_browser_esm.FD)(components_Button.FS,(0,tslib_es6.Cl)({className:"my-4",href:"".concat("https://dev-qa.shippodev.com","/carriers/canada-post/signup/initiate"),isExternal:!0,target:"_blank"},{children:[t("carriers.canadaPostRedirectForm.buttonText")," ",(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{className:"fa fa-external-link"})]})),t("carriers.canadaPostRedirectForm.reloadInstruction")]}))}));var CanadaPostConnectRedirect_templateObject_1;const Carriers_CanadaPostConnectRedirect=ComposedCanadaPostConnectRedirect;var VerificationStatus,VerificationPinLength_MAX=7,VerificationPinLength_MIN=6,VerificationOptions_CALL="CALL",VerificationOptions_EMAIL="EMAIL",VerificationOptions_INVOICE="INVOICE",VerificationOptions_SMS="SMS";!function(VerificationStatus){VerificationStatus.COMPLETE="COMPLETE",VerificationStatus.PENDING="PENDING"}(VerificationStatus||(VerificationStatus={}));var RequiredError,DefaultVerificationOption=VerificationOptions_SMS,DefaultInitialDate=moment_moment().format("YYYY-MM-DD");!function(RequiredError){RequiredError.BOTH_REQUIRED="both_required",RequiredError.LOGO_REQUIRED="logo_required",RequiredError.NONE="",RequiredError.SIGNATURE_REQUIRED="signature_required"}(RequiredError||(RequiredError={}));var useFedExInternationalSection=function(){var _a=(0,tslib_es6.zs)((0,react.useState)(!1),2),showFedExInternational=_a[0],setShowFedExInternational=_a[1],_b=(0,tslib_es6.zs)((0,react.useState)(RequiredError.NONE),2),showFedExImageUploadError=_b[0],setShowFedExImageUploadError=_b[1],_c=(0,tslib_es6.zs)((0,react.useState)(null),2),uploadedImage=_c[0],setUploadedImage=_c[1],validateImageUpload=(0,react.useCallback)((function(){return!showFedExInternational||((null==uploadedImage?void 0:uploadedImage.companyLogo)||(null==uploadedImage?void 0:uploadedImage.digitalSignature)?(null==uploadedImage?void 0:uploadedImage.companyLogo)?(null==uploadedImage?void 0:uploadedImage.digitalSignature)?(setShowFedExImageUploadError(RequiredError.NONE),!0):(setShowFedExImageUploadError(RequiredError.SIGNATURE_REQUIRED),!1):(setShowFedExImageUploadError(RequiredError.LOGO_REQUIRED),!1):(setShowFedExImageUploadError(RequiredError.BOTH_REQUIRED),!1))}),[showFedExInternational,uploadedImage]);return{handleImageUpload:function(files){setUploadedImage(files)},onFedExInternationalCheckboxChange:function(e){setShowFedExInternational(e.target.checked),e.target.checked||setUploadedImage(null)},showFedExImageUploadError,showFedExInternational,uploadedImage,validateImageUpload}},handleFedexVerificationError=function(t,addSnackbarActionAlert,errorDetails){addSnackbarActionAlert({message:errorDetails||t("carriers.form.fedexVerificationError"),severity:"error"})},validationFormZodResolver=zod_lib.z.object({verification_invoice_amount:zod_lib.z.string().optional(),verification_invoice_currency:zod_lib.z.string().optional(),verification_invoice_date:zod_lib.z.string().optional(),verification_invoice_number:zod_lib.z.string().optional(),verification_option:zod_lib.z.enum([VerificationOptions_SMS,VerificationOptions_EMAIL,VerificationOptions_CALL,VerificationOptions_INVOICE]),verification_pin:zod_lib.z.string().optional()}).refine((function(data){return data.verification_option===VerificationOptions_INVOICE||!!data.verification_pin}),{message:"settings:carriers:form:requiredError",path:["verification_pin"]}).refine((function(data){return data.verification_option===VerificationOptions_INVOICE||!!data.verification_pin&&(data.verification_pin.length>=VerificationPinLength_MIN&&data.verification_pin.length<=VerificationPinLength_MAX)}),{message:"settings:carriers:accountValidation:contactMethod:pinValidationLength",path:["verification_pin"]}).refine((function(data){return data.verification_option!==VerificationOptions_INVOICE||!!(data.verification_invoice_number&&data.verification_invoice_amount&&data.verification_invoice_date&&data.verification_invoice_currency)}),(function(data){var message="settings:carriers:form:requiredError",path=[];return data.verification_option!==VerificationOptions_INVOICE?{message:"",path}:data.verification_invoice_number?data.verification_invoice_amount?data.verification_invoice_date?data.verification_invoice_currency?{message,path}:{message,path:["verification_invoice_currency"]}:{message,path:["verification_invoice_date"]}:{message,path:["verification_invoice_amount"]}:{message,path:["verification_invoice_number"]}})),useFedExAccountVerification=function(_a){var t=_a.t,_b=(0,tslib_es6.zs)((0,react.useState)(!1),2),showFedExVerification=_b[0],setShowFedExVerification=_b[1],_c=(0,tslib_es6.zs)((0,react.useState)(!1),2),showPinField=_c[0],setShowPinField=_c[1],fedexCarrierAccountRef=(0,react.useRef)(null),newFedexAPI=(0,featureflags.u)(featureflags.gH.FEDEX_NEW_API_ENABLED),dispatch=(0,es.wA)(),formMethods=(0,index_esm.mN)({defaultValues:{verification_invoice_amount:"",verification_invoice_currency:"USD",verification_invoice_date:DefaultInitialDate,verification_invoice_number:"",verification_option:DefaultVerificationOption,verification_pin:""},mode:"onChange",reValidateMode:"onChange",resolver:(0,zod.u)(validationFormZodResolver)}),_d=useFedExInternationalSection(),handleImageUpload=_d.handleImageUpload,onFedExInternationalCheckboxChange=_d.onFedExInternationalCheckboxChange,showFedExImageUploadError=_d.showFedExImageUploadError,showFedExInternational=_d.showFedExInternational,uploadedImage=_d.uploadedImage,validateImageUpload=_d.validateImageUpload,getValues=formMethods.getValues,handleSubmit=formMethods.handleSubmit,_e=function(_a){var t=_a.t,_b=(0,hooks_useRequest.A)(),requestPinResponse=_b.data,requestPinError=_b.error,requestPinErrorDetails=_b.errorDetails,requestingPin=_b.loading,requestPin=_b.request,addSnackbarActionAlert=(0,GlobalComponentsProvider.s)().snackbar.addSnackbarActionAlert;return(0,react.useEffect)((function(){var _a,_b;"PENDING"===(null===(_b=null===(_a=null==requestPinResponse?void 0:requestPinResponse.data)||void 0===_a?void 0:_a.parameters)||void 0===_b?void 0:_b.verification_status)&&addSnackbarActionAlert({message:t("carriers.form.pinSent"),severity:"success"})}),[t,requestPinResponse,addSnackbarActionAlert]),(0,react.useEffect)((function(){var _a;requestPinError&&handleFedexVerificationError(t,addSnackbarActionAlert,null===(_a=null==requestPinErrorDetails?void 0:requestPinErrorDetails.data)||void 0===_a?void 0:_a.detail)}),[addSnackbarActionAlert,requestPinErrorDetails,requestPinError,t]),{requestPin,requestPinError,requestPinResponse,requestingPin}}({t}),requestPin=_e.requestPin,requestPinResponse=_e.requestPinResponse,requestingPin=_e.requestingPin,_f=function(_a){var t=_a.t,uploadedImage=_a.uploadedImage,_b=(0,hooks_useRequest.A)(),requestVerificationResponse=_b.data,requestVerificationError=_b.error,requestVerificationErrorDetails=_b.errorDetails,requestingVerification=_b.loading,requestVerification=_b.request,_c=(0,tslib_es6.zs)((0,react.useState)(!1),2),uploadingImage=_c[0],setUploadingImage=_c[1],addSnackbarActionAlert=(0,GlobalComponentsProvider.s)().snackbar.addSnackbarActionAlert;return(0,react.useEffect)((function(){!requestVerificationError&&requestVerificationResponse&&(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var carrierAccount,error_1,error_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:if(!(carrierAccount=CarrierAccount.rS(requestVerificationResponse.data)).objectId)return[3,9];if(!(null==uploadedImage?void 0:uploadedImage.companyLogo))return[3,4];setUploadingImage(!0),_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,uploadCompanyLogo(carrierAccount.objectId,uploadedImage.companyLogo)];case 2:return _a.sent(),[3,4];case 3:return error_1=_a.sent(),newRelic_newRelic.S.noticeError("Failed to upload company logo",{error:error_1}),[3,4];case 4:if(!(null==uploadedImage?void 0:uploadedImage.digitalSignature))return[3,9];_a.label=5;case 5:return _a.trys.push([5,7,,8]),[4,uploadDigitalSignature(carrierAccount.objectId,uploadedImage.digitalSignature)];case 6:return _a.sent(),[3,8];case 7:return error_2=_a.sent(),newRelic_newRelic.S.noticeError("Failed to upload digital signature",error_2),[3,8];case 8:setUploadingImage(!1),_a.label=9;case 9:return[2]}}))}))}),[t,requestVerificationResponse,requestVerificationError,addSnackbarActionAlert,uploadedImage]),(0,react.useEffect)((function(){var _a;requestVerificationError&&handleFedexVerificationError(t,addSnackbarActionAlert,null===(_a=null==requestVerificationErrorDetails?void 0:requestVerificationErrorDetails.data)||void 0===_a?void 0:_a.detail)}),[requestVerificationError,requestVerificationErrorDetails,addSnackbarActionAlert,t]),{requestVerification,requestVerificationError,requestVerificationResponse,requestingVerification:requestingVerification||uploadingImage}}({t,uploadedImage}),requestVerification=_f.requestVerification,requestingVerification=_f.requestingVerification;return(0,react.useEffect)((function(){var _a,_b;if("PENDING"===(null===(_b=null===(_a=null==requestPinResponse?void 0:requestPinResponse.data)||void 0===_a?void 0:_a.parameters)||void 0===_b?void 0:_b.verification_status)){var carrierAccount=CarrierAccount.rS(requestPinResponse.data);fedexCarrierAccountRef.current=carrierAccount,setShowPinField(!0)}}),[t,requestPinResponse]),{fedexCarrierAccountRef,formMethods,generateVerificationCode:function(){if(fedexCarrierAccountRef.current){var verificationOption=getValues("verification_option")||DefaultVerificationOption,carrierAccount=function(carrierData,verificationOption){var carrierAccount=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},carrierData),{parameters:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},null==carrierData?void 0:carrierData.parameters),{use_multi_factor_registration:!0,verification_option:verificationOption})});return"objectOwner"in carrierAccount&&delete carrierAccount.objectOwner,carrierAccount}(fedexCarrierAccountRef.current,verificationOption),shouldEditCarrierAccount=(null==newFedexAPI?void 0:newFedexAPI.enabled)&&!!(null==carrierAccount?void 0:carrierAccount.objectId);requestPin((function(){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var jsonCarrierAccount;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return jsonCarrierAccount=CarrierAccount.U2(carrierAccount),shouldEditCarrierAccount?[4,editCarrierAccount(jsonCarrierAccount,(null==carrierAccount?void 0:carrierAccount.objectId)||"")]:[3,2];case 1:case 3:return[2,_a.sent()];case 2:return[4,connectCarrierAccount(jsonCarrierAccount)]}}))}))}))}},getVerificationValues:getValues,handleImageUpload,onFedExInternationalCheckboxChange,onVerificationFormSubmit:handleSubmit((function(verificationData){if(fedexCarrierAccountRef.current){var carrierAccount=function(carrierData,verificationData){var carrierAccount=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},carrierData),{parameters:(0,tslib_es6.Cl)((0,tslib_es6.Cl)((0,tslib_es6.Cl)({},null==carrierData?void 0:carrierData.parameters),verificationData),{use_multi_factor_registration:!0})});return"objectOwner"in carrierAccount&&delete carrierAccount.objectOwner,carrierAccount}(fedexCarrierAccountRef.current,verificationData);requestVerification((function(){return(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var shouldEditCarrierAccount,jsonCarrierAccount,carrierAccountAPIResponse,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return shouldEditCarrierAccount=(null==newFedexAPI?void 0:newFedexAPI.enabled)&&!!(null==carrierAccount?void 0:carrierAccount.objectId),jsonCarrierAccount=CarrierAccount.U2(carrierAccount),"INVOICE"!==(null===(_a=carrierAccount.parameters)||void 0===_a?void 0:_a.verification_option)||shouldEditCarrierAccount?[3,2]:[4,connectCarrierAccount(jsonCarrierAccount)];case 1:return carrierAccountAPIResponse=_b.sent(),dispatch(connectCarrierAccountSuccess({carrierAccount})),[2,carrierAccountAPIResponse];case 2:return[4,editCarrierAccount(jsonCarrierAccount,(null==carrierAccount?void 0:carrierAccount.objectId)||"")];case 3:return carrierAccountAPIResponse=_b.sent(),dispatch(editCarrierAccountSuccess({carrierAccount})),[2,carrierAccountAPIResponse]}}))}))}))}})),requestingPin,requestingVerification,setShowFedExVerification,showFedExImageUploadError,showFedExInternational,showFedExVerification,showPinField,validateImageUpload}},useNewFedExAPIFeatureFlag=function(){var isNewFedExAPI=(0,featureflags.u)(featureflags.gH.FEDEX_NEW_API_ENABLED);return{isNewFedExAPI:null==isNewFedExAPI?void 0:isNewFedExAPI.enabled}},stores_actions=__webpack_require__("./app/actions/stores.actions.ts"),stores_selectors=__webpack_require__("./app/selectors/stores.selectors.ts"),withCarrierForm_Context=react.createContext({carrierAccountWithServiceLevels:{},carrierFormFields:[],connectCarrierAccount:function(){},createCarrierAccount:function(){},editCarrierAccount:function(){},editCarrierAccountServiceLevels:function(){},errorMessage:"",fetchServiceLevelsAccount:function(){},fetchStores:function(){},getInitialFormValues:function(){return[]},hasEBayCanadaPostAccount:!1,hasUpsMarketplaceOrMasterAcc:!1,isEBayConnected:!1,isSavingCarrierAccount:!1,serviceLevelsByAccounts:(0,fetchable.uk)(),shouldHideAccountNickname:function(){return!1},submitCarrierForm:function(){},submitting:!1,successfullyFetchedAccounts:!1,user:null});var withCarrierForm_mapStateToProps=function(state,ownProps){return{carrierAccountWithServiceLevels:(0,providers_selectors.jH)(state,{carrierAccount:ownProps.carrierAccount}),carrierFormFields:getCarrierFormFields(state),errorMessage:(0,carrier_accounts_selectors.E3)(state),hasEBayCanadaPostAccount:(0,carrier_accounts_selectors.lg)(state),hasUpsMarketplaceOrMasterAcc:(0,carrier_accounts_selectors.An)(state),isEBayConnected:(0,stores_selectors.Z1)(state),isSavingCarrierAccount:(0,carrier_accounts_selectors.sy)(state),serviceLevelsByAccounts:(0,providers_selectors.eA)(state),submitting:(0,isSubmitting.A)(constants_form.QW)(state),successfullyFetchedAccounts:(0,carrier_accounts_selectors.h$)(state),user:(0,user_selectors.wz)(state)}},withCarrierForm_mapDispatchToProps=function(dispatch){return{connectCarrierAccount:function(payload){return dispatch(function(payload){return{payload,type:constants.t.CONNECT_CARRIER_ACCOUNT}}(payload))},createCarrierAccount:function(payload){return dispatch(carrier_accounts_actions_createCarrierAccount(payload))},editCarrierAccount:function(payload){return dispatch(carrier_accounts_actions_editCarrierAccount(payload))},editCarrierAccountServiceLevels:function(payload){return dispatch(function(payload){return{payload,type:constants.t.EDIT_CARRIER_ACCOUNT_SERVICE_LEVELS}}(payload))},fetchServiceLevelsAccount:function(){return dispatch(fetchServiceLevelsByAccount())},fetchStores:function(){return dispatch((0,stores_actions.hO)())},submitCarrierForm:function(){return dispatch((0,redux_form_es.tA)(constants_form.QW))}}};const withCarrierForm_withCarrierForm=function withCarrierForm(Component){return(0,es.Ng)(withCarrierForm_mapStateToProps,withCarrierForm_mapDispatchToProps)(function(_super){function class_1(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.getInitialFormValues=function(carrierAccount,carrier,formType,mockedParameters){var e_1,_a,e_2,_b,e_3,_c,parameters,_d=_this.props,carrierAccountWithServiceLevels=_d.carrierAccountWithServiceLevels,user=_d.user,optionParameters={},initialValues={},providerServiceLevels={};parameters=mockedParameters&&mockedParameters.length>0?mockedParameters:isCarrierFormMocked(carrier.id,formType)?parametersMap[carrier.id][formType]:_this.props.carrierFormFields,carrier===carriers.$5&&formType===CarrierFormType.Create&&(initialValues.pickup_address_same_as_billing_address=!0);var _loop_1=function(parameter){if(parameter.hiddenByKey)return"continue";var key=parameter.key;if(void 0!==parameter.defaultValue&&null!==parameter.defaultValue){if(initialValues[key]=parameter.defaultValue,"choice"===parameter.fieldType&&parameter.options){var option=parameter.options.find((function(option){return option.value===parameter.defaultValue}));option&&(initialValues[key]=option)}}else key.endsWith("first_name")?initialValues[key]=user?user.firstName:null:key.endsWith("last_name")?initialValues[key]=user?user.lastName:null:key.endsWith("full_name")||key.endsWith("address_name")?initialValues[key]=user?user.firstName&&user.lastName?"".concat(user.firstName," ").concat(user.lastName):user.firstName:null:key.includes("email")?initialValues[key]=user?user.email:null:key.endsWith("company")||key.endsWith("company_name")||"legal_name"===key?initialValues[key]=user&&user.address?user.address.company:null:key.includes("phone")?initialValues[key]=user&&user.address?user.address.phone:null:user&&_this.prepopulateAddressField(initialValues,user.address,parameter,carrier)};try{for(var parameters_1=(0,tslib_es6.Ju)(parameters),parameters_1_1=parameters_1.next();!parameters_1_1.done;parameters_1_1=parameters_1.next()){_loop_1(parameters_1_1.value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{parameters_1_1&&!parameters_1_1.done&&(_a=parameters_1.return)&&_a.call(parameters_1)}finally{if(e_1)throw e_1.error}}if(carrierAccount){var _loop_2=function(parameter){if("choice"===parameter.fieldType&&parameter.options&&carrierAccount.parameters){var key=parameter.key,value_1=carrierAccount.parameters[key],option=parameter.options.find((function(option){return option.value===value_1}));option&&(optionParameters[key]=option)}};try{for(var parameters_2=(0,tslib_es6.Ju)(parameters),parameters_2_1=parameters_2.next();!parameters_2_1.done;parameters_2_1=parameters_2.next()){_loop_2(parameters_2_1.value)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{parameters_2_1&&!parameters_2_1.done&&(_b=parameters_2.return)&&_b.call(parameters_2)}finally{if(e_2)throw e_2.error}}if(carrierAccountWithServiceLevels)try{for(var _e=(0,tslib_es6.Ju)(carrierAccountWithServiceLevels.serviceLevels),_f=_e.next();!_f.done;_f=_e.next()){var serviceLevel=_f.value;providerServiceLevels[serviceLevel.token]||(providerServiceLevels[serviceLevel.token]=!serviceLevel.is_hidden)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_f&&!_f.done&&(_c=_e.return)&&_c.call(_e)}finally{if(e_3)throw e_3.error}}var initialValuesOnEdit=(0,tslib_es6.Cl)((0,tslib_es6.Cl)((0,tslib_es6.Cl)({account_id:carrierAccount.accountId,metadata:carrierAccount.metadata,test:carrierAccount.test},carrierAccount.parameters),optionParameters),providerServiceLevels);initialValues=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},initialValues),initialValuesOnEdit)}return initialValues},_this.prepopulateAddressField=function(initialValues,address,parameter,carrier){var key=parameter.key,accountCountry=_this.props.accountCountry?_this.props.accountCountry:constants_countries.Xr.US.iso2;if(address&&(carrier!==carriers.$5||!address.country||address.country.iso2===accountCountry||key.includes("country"))){var addressSplit=address.street1.split(" ");"street"===key?initialValues[key]=addressSplit.slice(1,addressSplit.length).join(" "):"street_number"===key&&addressSplit.length>1?initialValues[key]=addressSplit[0]:key.endsWith("street1")||key.endsWith("_st1")?initialValues[key]=address.street1:key.endsWith("street2")||key.endsWith("_st2")?initialValues[key]=address.street2:key.endsWith("_st")||key.endsWith("street")?initialValues[key]=address.street1&&address.street2?"".concat(address.street1," ").concat(address.street2):address.street1:key.endsWith("city")?initialValues[key]=address.city:key.includes("state")||key.includes("province")?initialValues[key]=address.state:key.includes("zip")||key.includes("postal")?(initialValues[key]=address.zip,carrier===carriers.$5&&(initialValues[key]=initialValues[key].slice(0,5))):key.includes("country")&&(initialValues[key]=address.country?address.country.iso2:null,carrier===carriers.$5&&(initialValues[key]=accountCountry)),"choice"===parameter.fieldType&&parameter.options&&initialValues.hasOwnProperty(key)&&(initialValues[key]=parameter.options.find((function(option){return option.value===initialValues[key]})))}},_this.shouldHideAccountNickname=function(carrier,formType){return formType===CarrierFormType.Create&&carrier===carriers.$5},_this}return(0,tslib_es6.C6)(class_1,_super),class_1.prototype.componentDidMount=function(){var _a=this.props,fetchServiceLevelsAccount=_a.fetchServiceLevelsAccount,fetchStores=_a.fetchStores,serviceLevelsByAccounts=_a.serviceLevelsByAccounts;fetchStores(),"success"!==serviceLevelsByAccounts.kind&&fetchServiceLevelsAccount()},class_1.prototype.render=function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(withCarrierForm_Context.Provider,(0,tslib_es6.Cl)({value:{carrierAccountWithServiceLevels:this.props.carrierAccountWithServiceLevels,carrierFormFields:this.props.carrierFormFields,connectCarrierAccount:this.props.connectCarrierAccount,createCarrierAccount:this.props.createCarrierAccount,editCarrierAccount:this.props.editCarrierAccount,editCarrierAccountServiceLevels:this.props.editCarrierAccountServiceLevels,errorMessage:this.props.errorMessage,fetchServiceLevelsAccount:this.props.fetchServiceLevelsAccount,fetchStores:this.props.fetchStores,getInitialFormValues:this.getInitialFormValues,hasEBayCanadaPostAccount:this.props.hasEBayCanadaPostAccount,hasUpsMarketplaceOrMasterAcc:this.props.hasUpsMarketplaceOrMasterAcc,isEBayConnected:this.props.isEBayConnected,isSavingCarrierAccount:this.props.isSavingCarrierAccount,serviceLevelsByAccounts:this.props.serviceLevelsByAccounts,shouldHideAccountNickname:this.shouldHideAccountNickname,submitCarrierForm:this.props.submitCarrierForm,submitting:this.props.submitting,successfullyFetchedAccounts:this.props.successfullyFetchedAccounts,user:this.props.user}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Component,(0,tslib_es6.Cl)({},this.props))}))},class_1}(react.Component))},Carriers_withCarrierForm=withCarrierForm_withCarrierForm;var TabsListWrapper=(0,emotion_styled_browser_esm.A)("div")(CarrierFormTabContainer_templateObject_1||(CarrierFormTabContainer_templateObject_1=(0,tslib_es6.ue)(["\n  margin-bottom: 30px;\n  @media screen and (min-width: ","px) {\n    margin-bottom: 9px;\n  }\n"],["\n  margin-bottom: 30px;\n  @media screen and (min-width: ","px) {\n    margin-bottom: 9px;\n  }\n"])),responsive.P.ExtraSmallMobile+1),StyledTabsList=(0,emotion_styled_browser_esm.A)(components_Tabs.TabsList)(CarrierFormTabContainer_templateObject_2||(CarrierFormTabContainer_templateObject_2=(0,tslib_es6.ue)(["\n  justify-content: space-evenly;\n"],["\n  justify-content: space-evenly;\n"]))),StyledTab=(0,emotion_styled_browser_esm.A)(components_Tabs.Tab)(CarrierFormTabContainer_templateObject_3||(CarrierFormTabContainer_templateObject_3=(0,tslib_es6.ue)(["\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n  width: 240px;\n  padding-top: 16px;\n"],["\n  display: block;\n  margin-left: auto;\n  margin-right: auto;\n  width: 240px;\n  padding-top: 16px;\n"]))),CarrierFormTabContainer_CarrierLogo=(0,emotion_styled_browser_esm.A)("img")(CarrierFormTabContainer_templateObject_4||(CarrierFormTabContainer_templateObject_4=(0,tslib_es6.ue)(["\n  display: block;\n  max-width: 100px;\n  padding-top: 20px;\n  margin: 0 auto;\n"],["\n  display: block;\n  max-width: 100px;\n  padding-top: 20px;\n  margin: 0 auto;\n"]))),StyledHeader=(0,emotion_styled_browser_esm.A)("div")(CarrierFormTabContainer_templateObject_5||(CarrierFormTabContainer_templateObject_5=(0,tslib_es6.ue)(["\n  color: ",";\n  font-weight: ",";\n  text-align: center;\n  border-bottom: 1px solid ",";\n  padding: 16px;\n"],["\n  color: ",";\n  font-weight: ",";\n  text-align: center;\n  border-bottom: 1px solid ",";\n  padding: 16px;\n"])),styles_constants.Tj.fontColor,styles_constants.Wy.medium,styles_constants.Tj.gray50),ComposedCarrierFormTabContainer=(0,redux.Zz)((0,es.Ng)(null,(function(dispatch){return{sendCarrierFormTrackEvent:function(formName,eventType,formType){return dispatch(function(formName,eventType,formType){return{eventType,formName,formType,type:constants.t.CARRIER_FORM_INPUT_EVENT}}(formName,eventType,formType))}}})),(0,utils_translate.Tl)("settings"),Carriers_withCarrierForm)((function(props){var carrier=props.carrier,customHeader=props.customHeader,hideAccountNickname=props.hideAccountNickname,initialValues=props.initialValues,onClose=props.onClose,renderEbayCanadaPostForm=props.renderEbayCanadaPostForm,context=react.useContext(withCarrierForm_Context),_a=useFedExAccountVerification({t:props.t}),fedexCarrierAccountRef=_a.fedexCarrierAccountRef,formMethods=_a.formMethods,generateVerificationCode=_a.generateVerificationCode,handleImageUpload=_a.handleImageUpload,onFedExInternationalCheckboxChange=_a.onFedExInternationalCheckboxChange,onVerificationFormSubmit=_a.onVerificationFormSubmit,requestingPin=_a.requestingPin,requestingVerification=_a.requestingVerification,setShowFedExVerification=_a.setShowFedExVerification,showFedExImageUploadError=_a.showFedExImageUploadError,showFedExInternational=_a.showFedExInternational,showFedExVerification=_a.showFedExVerification,showPinField=_a.showPinField,validateImageUpload=_a.validateImageUpload,isNewFedExAPI=useNewFedExAPIFeatureFlag().isNewFedExAPI,isUpsOauthNewRegistration=carrier.id===carriers.$5.id,shouldDisplayEbayCanadaPostForm=function(){return carrier===carriers.i3&&context.isEBayConnected&&!context.hasEBayCanadaPostAccount||renderEbayCanadaPostForm},showCreateTab=function(){var user=context.user;if(isUpsOauthNewRegistration)return!1;if(context.successfullyFetchedAccounts&&carriers.mp.includes(carrier.id)||renderEbayCanadaPostForm){if(shouldDisplayEbayCanadaPostForm())return!0;if(!(carrier!==carriers.$5||user&&user.address&&user.address.country&&"US"!==user.address.country.iso2||context.hasUpsMarketplaceOrMasterAcc))return!0}return!1}(),_b=(0,tslib_es6.zs)(react.useState(showCreateTab?CarrierFormType.Create:CarrierFormType.Connect),2),selectedTab=_b[0],setSelectedTab=_b[1],shouldShowFedEXInternationalSection=!(!isNewFedExAPI||carrier!==carriers.jr),onCarrierFormSubmit=function(formValues){var e_1,_a,_b,carrierAccount={accountId:formValues.account_id?"".concat(formValues.account_id):"filler_id",active:!0,carrier,test:!1},trackingReference=TrackingHelper.U.getTrackingReference(types.UQ.name,"settings",{carrierAccountId:carrierAccount.accountId,carrierName:carrier.name,carrierType:void 0});try{for(var _c=(0,tslib_es6.Ju)(Object.keys(formValues)),_d=_c.next();!_d.done;_d=_c.next()){var key=_d.value;if("account_id"!==key)if("metadata"===key)carrierAccount.metadata=formValues[key];else if("test"===key)carrierAccount.test=formValues[key];else if(carrierAccount.parameters||(carrierAccount.parameters={}),carrierAccount.parameters[key]=formValues[key],"is_mypost"===key){var is_mypost_field=JSON.parse(JSON.stringify(formValues[key]));is_mypost_field.value="is_mypost"===(null===(_b=formValues[key])||void 0===_b?void 0:_b.value),carrierAccount.parameters[key]=is_mypost_field,carrierAccount.metadata||(carrierAccount.metadata="MyPost")}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}if(fedexCarrierAccountRef.current=carrierAccount,!shouldShowFedEXInternationalSection||showFedExVerification)return(0,utils.EE)(trackingReference,types.UQ.operations.SAVE_ATTEMPTED,{}),shouldDisplayEbayCanadaPostForm()&&props.sendCarrierFormTrackEvent(TabbedCarrierFormName.EbayCanadaPost,CarrierFormEventType.Submit,selectedTab),selectedTab===CarrierFormType.Create?((0,utils.EE)(trackingReference,types.UQ.operations.ADDED,{}),context.createCarrierAccount({carrierAccount,trackingReference})):((0,utils.EE)(trackingReference,types.UQ.operations.ACTIVATED,{}),carrierAccount.active=!0,context.connectCarrierAccount({carrierAccount,trackingReference}));validateImageUpload()&&setShowFedExVerification(!0)};return(0,emotion_react_jsx_runtime_browser_esm.FD)(components_Tabs.Container,(0,tslib_es6.Cl)({activeBorderBottom:!0,onTabClick:function(tab){var userSelectedTab=CarrierFormType.Create;tab===CarrierFormType.Create||(userSelectedTab=CarrierFormType.Connect),setSelectedTab(userSelectedTab),shouldDisplayEbayCanadaPostForm()&&props.sendCarrierFormTrackEvent(TabbedCarrierFormName.EbayCanadaPost,CarrierFormEventType.Click,userSelectedTab)},selectedTab},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[customHeader||carrier.img260&&(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierFormTabContainer_CarrierLogo,{src:carrier.img260}),showCreateTab?(0,emotion_react_jsx_runtime_browser_esm.Y)(TabsListWrapper,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledTabsList,(0,tslib_es6.Cl)({activeBorderBottom:!0},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledTab,(0,tslib_es6.Cl)({tabKey:CarrierFormType.Create},{children:props.t("carriers.form.createFormTab")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledTab,(0,tslib_es6.Cl)({tabKey:CarrierFormType.Connect},{children:props.t("carriers.form.connectFormTab")}))]}))}):(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledHeader,{children:props.t("carriers.connectCarrierAccount",{carrierName:carrier.name})})]}),carrier!==carriers.i3||showCreateTab?(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[showFedExVerification?(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({style:{padding:shippoTheme.A.spacing(2.75,2.75,0)}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(FedexInternationalSection.hW,{formMethods,hasSentVerificationPin:showPinField,isSendingPin:requestingPin,onSendVerificationPin:generateVerificationCode,onVerificationFormSubmit,t:props.t})})):(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:function(){var mockedParameters=isCarrierFormMocked(carrier.id,selectedTab)?showCreateTab&&carrier===carriers.i3&&selectedTab===CarrierFormType.Connect?eBayCanadaPostConnectParameters:parametersMap[carrier.id][selectedTab]:[];isUpsOauthNewRegistration&&(mockedParameters=parametersMap.ups_oauth[selectedTab]);var showFedExInternationalSection,formInitialValues=context.getInitialFormValues(null,carrier,selectedTab,mockedParameters);return initialValues&&Object.keys(initialValues).forEach((function(key){formInitialValues[key]=initialValues[key]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierForm_CarrierForm,{carrier,errorMessage:context.errorMessage,fedExInternationalSection:(showFedExInternationalSection=shouldShowFedEXInternationalSection,showFedExInternationalSection?(0,emotion_react_jsx_runtime_browser_esm.Y)(FedexInternationalSection.M6,{onChangeCheckbox:onFedExInternationalCheckboxChange,onImageUpload:handleImageUpload,requiredError:showFedExImageUploadError,showFedExInternational,t:props.t}):null),formType:selectedTab,hideAccountNickname:hideAccountNickname||context.shouldHideAccountNickname(carrier,selectedTab),hideTestMode:showCreateTab,initialValues:formInitialValues,isUpsOauthNewRegistration,newFedExAPI:isNewFedExAPI,onSubmit:onCarrierFormSubmit,parameters:mockedParameters})}()}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierModalFooter_CarrierModalFooter,{carrier,customPrimaryButtonText:isUpsOauthNewRegistration?props.t("carriers.upsOauthRegistrationForm.next"):shouldShowFedEXInternationalSection&&!showFedExVerification?props.t("carriers.form.next"):void 0,customSecondaryButtonText:function(){if(showFedExVerification)return props.t("carriers.form.back")}(),formType:selectedTab,isLoading:context.isSavingCarrierAccount||requestingVerification,onCancelClick:function(){showFedExVerification?setShowFedExVerification(!1):(onClose(),shouldDisplayEbayCanadaPostForm()&&props.sendCarrierFormTrackEvent(TabbedCarrierFormName.EbayCanadaPost,CarrierFormEventType.Close))},onPrimaryClick:showFedExVerification?onVerificationFormSubmit:context.submitCarrierForm})]}):(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"px-8 py-5"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Carriers_CanadaPostConnectRedirect,{})}))]}))}));const CarrierFormTabContainer_CarrierFormTabContainer=ComposedCarrierFormTabContainer;var CarrierFormTabContainer_templateObject_1,CarrierFormTabContainer_templateObject_2,CarrierFormTabContainer_templateObject_3,CarrierFormTabContainer_templateObject_4,CarrierFormTabContainer_templateObject_5,SearchFilterContainer=(0,emotion_styled_browser_esm.A)(FlexContainer.Ay)(CarrierSearchAndFilter_templateObject_1||(CarrierSearchAndFilter_templateObject_1=(0,tslib_es6.ue)(["\n  flex-direction: column;\n  @media screen and (min-width: ","px) {\n    flex-direction: row;\n  }\n  margin-bottom: 12px;\n"],["\n  flex-direction: column;\n  @media screen and (min-width: ","px) {\n    flex-direction: row;\n  }\n  margin-bottom: 12px;\n"])),responsive.P.Mobile),CarrierSearchBar=(0,emotion_styled_browser_esm.A)(components_InputExtended)(CarrierSearchAndFilter_templateObject_2||(CarrierSearchAndFilter_templateObject_2=(0,tslib_es6.ue)(["\n  flex-grow: 1;\n  margin-bottom: 8px;\n  padding: 0px;\n  max-width: calc(100% - 2px);\n  @media screen and (min-width: ","px) {\n    margin-bottom: inherit;\n    margin-right: 10px;\n  }\n  height: ","px;\n"],["\n  flex-grow: 1;\n  margin-bottom: 8px;\n  padding: 0px;\n  max-width: calc(100% - 2px);\n  @media screen and (min-width: ","px) {\n    margin-bottom: inherit;\n    margin-right: 10px;\n  }\n  height: ","px;\n"])),responsive.P.Mobile,constants_form.hx.mediumLarge),CarrierFilter=(0,emotion_styled_browser_esm.A)(Select_Select)(CarrierSearchAndFilter_templateObject_3||(CarrierSearchAndFilter_templateObject_3=(0,tslib_es6.ue)(["\n  width: ","px;\n"],["\n  width: ","px;\n"])),constants_form.YI.medium),CarrierSearchIcon=(0,emotion_styled_browser_esm.A)("i")(CarrierSearchAndFilter_templateObject_4||(CarrierSearchAndFilter_templateObject_4=(0,tslib_es6.ue)(["\n  margin: 0px 12px;\n"],["\n  margin: 0px 12px;\n"]))),DefaultOption=(0,emotion_styled_browser_esm.A)("span")(CarrierSearchAndFilter_templateObject_5||(CarrierSearchAndFilter_templateObject_5=(0,tslib_es6.ue)(["\n  color: ",";\n  font-weight: ",";\n"],["\n  color: ",";\n  font-weight: ",";\n"])),styles_constants.Tj.form.placeholderFontColor,styles_constants.Wy.medium),SelectedOption=(0,emotion_styled_browser_esm.A)("span")(CarrierSearchAndFilter_templateObject_6||(CarrierSearchAndFilter_templateObject_6=(0,tslib_es6.ue)(["\n  font-weight: ",";\n"],["\n  font-weight: ",";\n"])),styles_constants.Wy.medium);const CarrierSearchAndFilter_CarrierSearchAndFilter=(0,redux.Zz)((0,utils_translate.Tl)("settings"))((function(props){var carrierOriginCountryOptions=Object.keys(carriers.vX).map((function(regionName){return{label:regionName,value:regionName.toLowerCase()}}));carrierOriginCountryOptions.unshift({label:props.t("carriers.filterCarriersZeroState"),value:""});return(0,emotion_react_jsx_runtime_browser_esm.FD)(SearchFilterContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierSearchBar,{id:"carrier-search-bar",onChange:function(input){props.onChange(input.target.value)},placeholder:props.t("carriers.searchCarriers"),renderPrefix:function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierSearchIcon,{className:"fa fa-search"})},value:props.value}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierFilter,{height:constants_form.hx.mediumLarge+2,onChange:function(option){props.onChangeFilter(option)},options:carrierOriginCountryOptions,placeholder:props.t("carriers.filterCarriers"),renderSelectButtonContent:function(selectedOption){return selectedOption&&""===selectedOption.value?selectedOption&&(0,emotion_react_jsx_runtime_browser_esm.Y)(DefaultOption,{children:selectedOption.label}):selectedOption&&(0,emotion_react_jsx_runtime_browser_esm.Y)(SelectedOption,{children:selectedOption.label})},value:props.filterValue})]})}));var CarrierSearchAndFilter_templateObject_1,CarrierSearchAndFilter_templateObject_2,CarrierSearchAndFilter_templateObject_3,CarrierSearchAndFilter_templateObject_4,CarrierSearchAndFilter_templateObject_5,CarrierSearchAndFilter_templateObject_6,headerCSS=(0,emotion_react_browser_esm.AH)(ConnectCarrierSelection_templateObject_1||(ConnectCarrierSelection_templateObject_1=(0,tslib_es6.ue)(["\n  margin-top: 0px;\n  font-size: 20px;\n  color: ",";\n  font-weight: ",";\n"],["\n  margin-top: 0px;\n  font-size: 20px;\n  color: ",";\n  font-weight: ",";\n"])),styles_constants.Tj.fontColor,styles_constants.Wy.medium),MobileModalHeader=(0,emotion_styled_browser_esm.A)("h3")(ConnectCarrierSelection_templateObject_2||(ConnectCarrierSelection_templateObject_2=(0,tslib_es6.ue)(["\n  "," margin: 0px;\n  padding: 30px;\n  position: fixed;\n  top: 0px;\n\n  @media screen and (min-width: ","px) {\n    display: none;\n  }\n"],["\n  "," margin: 0px;\n  padding: 30px;\n  position: fixed;\n  top: 0px;\n\n  @media screen and (min-width: ","px) {\n    display: none;\n  }\n"])),headerCSS,responsive.P.Mobile),FirstSlideHeader=(0,emotion_styled_browser_esm.A)("h3")(ConnectCarrierSelection_templateObject_3||(ConnectCarrierSelection_templateObject_3=(0,tslib_es6.ue)(["\n  "," display: none;\n  @media screen and (min-width: ","px) {\n    display: block;\n  }\n  font-weight: ",";\n"],["\n  "," display: none;\n  @media screen and (min-width: ","px) {\n    display: block;\n  }\n  font-weight: ",";\n"])),headerCSS,responsive.P.Mobile,styles_constants.Wy.medium),MobileModalFooterContainer=(0,emotion_styled_browser_esm.A)("div")(ConnectCarrierSelection_templateObject_4||(ConnectCarrierSelection_templateObject_4=(0,tslib_es6.ue)(["\n  display: none;\n  @media screen and (min-width: ","px) {\n    display: block;\n  }\n"],["\n  display: none;\n  @media screen and (min-width: ","px) {\n    display: block;\n  }\n"])),responsive.P.Mobile),CarrierModalContainer=(0,emotion_styled_browser_esm.A)(Modal.A.Body)(ConnectCarrierSelection_templateObject_5||(ConnectCarrierSelection_templateObject_5=(0,tslib_es6.ue)(["\n  overflow: auto;\n  padding-top: 0px;\n  padding-bottom: 0px;\n  position: fixed;\n  top: 90px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  @media screen and (min-width: ","px) {\n    height: 65vh;\n    padding-top: 30px;\n    position: relative;\n    top: auto;\n    bottom: auto;\n    right: auto;\n    left: auto;\n  }\n"],["\n  overflow: auto;\n  padding-top: 0px;\n  padding-bottom: 0px;\n  position: fixed;\n  top: 90px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n\n  @media screen and (min-width: ","px) {\n    height: 65vh;\n    padding-top: 30px;\n    position: relative;\n    top: auto;\n    bottom: auto;\n    right: auto;\n    left: auto;\n  }\n"])),responsive.P.Mobile),CarrierImg=(0,emotion_styled_browser_esm.A)("img")(ConnectCarrierSelection_templateObject_6||(ConnectCarrierSelection_templateObject_6=(0,tslib_es6.ue)(["\n  margin-bottom: 18px;\n  cursor: pointer;\n  max-width: 100%;\n"],["\n  margin-bottom: 18px;\n  cursor: pointer;\n  max-width: 100%;\n"]))),CarrierList=(0,emotion_styled_browser_esm.A)("ul")(ConnectCarrierSelection_templateObject_7||(ConnectCarrierSelection_templateObject_7=(0,tslib_es6.ue)(["\n  margin: 0;\n  padding: 0;\n"],["\n  margin: 0;\n  padding: 0;\n"]))),SegmentHeader=(0,emotion_styled_browser_esm.A)("div")(ConnectCarrierSelection_templateObject_8||(ConnectCarrierSelection_templateObject_8=(0,tslib_es6.ue)(["\n  padding-bottom: 10px;\n  font-size: 14px;\n  font-weight: ",";\n"],["\n  padding-bottom: 10px;\n  font-size: 14px;\n  font-weight: ",";\n"])),styles_constants.Wy.medium),SegmentImgsContainer=(0,emotion_styled_browser_esm.A)("div")(ConnectCarrierSelection_templateObject_9||(ConnectCarrierSelection_templateObject_9=(0,tslib_es6.ue)(["\n  display: grid;\n  column-gap: 14px;\n  grid-template-columns: repeat(2, 1fr);\n  @media screen and (min-width: ","px) {\n    grid-template-columns: repeat(4, 120px);\n  }\n"],["\n  display: grid;\n  column-gap: 14px;\n  grid-template-columns: repeat(2, 1fr);\n  @media screen and (min-width: ","px) {\n    grid-template-columns: repeat(4, 120px);\n  }\n"])),responsive.P.Mobile),CarrierUnderline=(0,emotion_styled_browser_esm.A)("div")(ConnectCarrierSelection_templateObject_10||(ConnectCarrierSelection_templateObject_10=(0,tslib_es6.ue)(["\n  width: 20px;\n  border-bottom: 3px solid ",";\n"],["\n  width: 20px;\n  border-bottom: 3px solid ",";\n"])),styles_constants.Tj.form.successBar),filterCarriers=function(searchValue,filterValue){var filteredCarriers={};for(var segment in carriers.TN){var filtered=carriers.TN[segment].filter((function(value){var searchMatch=!0,filterMatch=!0;return carriers.vX[filterValue]&&(filterMatch=carriers.vX[filterValue].includes(carriers.Ps[value.id])),""!==searchValue&&filterMatch&&(searchMatch=value.name.toLowerCase().includes(searchValue.toLowerCase())),searchMatch&&filterMatch}));filteredCarriers[segment]=filtered}return filteredCarriers},ComposedConnectCarrierSelection=(0,redux.Zz)((0,utils_translate.Tl)("settings"))((function(props){var _a=(0,tslib_es6.zs)(react.useState(props.carrierSearchQuery),2),carrierSearchQuery=_a[0],setCarrierSearchQuery=_a[1],_b=(0,tslib_es6.zs)(react.useState(props.carrierFilter),2),carrierFilter=_b[0],setCarrierFilter=_b[1],_c=(0,tslib_es6.zs)(react.useState(props.carrierSearchResults),2),carrierSearchResults=_c[0],setCarrierSearchResults=_c[1],onSearchFilterChange=function(searchValue,filterValue){if(""===searchValue&&""===filterValue)setCarrierSearchResults(carriers.TN);else{var filteredCarriers=filterCarriers(searchValue,filterValue);setCarrierSearchResults(filteredCarriers),props.setCarrierSearchResults(filteredCarriers)}},renderCarrierSegment=function(segmentName,segment){var onClickCarrier=props.onClickCarrier,t=props.t;return segment.map((function(carrier){return(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierImg,{alt:t("carriers.connectCarrierImageAltText",{carrierName:carrier.name}),id:carrier.id,onClick:onClickCarrier,src:carrier.img260?carrier.img260:carrier.img},"".concat(segmentName,"_").concat(carrier.id))}))},t=props.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(MobileModalHeader,{children:t("carriers.connectButtonText")}),(0,emotion_react_jsx_runtime_browser_esm.FD)(CarrierModalContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(FirstSlideHeader,{children:t("carriers.connectButtonText")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierSearchAndFilter_CarrierSearchAndFilter,{filterValue:carrierFilter,onChange:function(searchValue){setCarrierSearchQuery(searchValue),onSearchFilterChange(searchValue,carrierFilter.label),props.setCarrierSearchQuery(searchValue)},onChangeFilter:function(filterOption){setCarrierFilter(filterOption),onSearchFilterChange(carrierSearchQuery,filterOption.label),props.setCarrierFilter(filterOption)},value:carrierSearchQuery}),function(){var t=props.t,carrierArray=[];for(var segment in carrierSearchResults)0!==carrierSearchResults[segment].length&&(carrierArray.push((0,emotion_react_jsx_runtime_browser_esm.FD)(SegmentHeader,{children:[segment,(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierUnderline,{})]},"".concat(segment,"_seg"))),carrierArray.push((0,emotion_react_jsx_runtime_browser_esm.Y)(SegmentImgsContainer,{children:renderCarrierSegment(segment,carrierSearchResults[segment])},segment)));return 0===carrierArray.length?(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:[t("carriers.searchCarriersNoResult")," ",(0,emotion_react_jsx_runtime_browser_esm.Y)("i",{children:carrierSearchQuery})]}):(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierList,{children:carrierArray})}()]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(MobileModalFooterContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Modal.A.Footer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Button.vM,(0,tslib_es6.Cl)({onClick:props.onClose},{children:t("carriers.cancel")}))})})]})}));const ConnectCarrierSelection_ConnectCarrierSelection=ComposedConnectCarrierSelection;var ConnectCarrierSelection_templateObject_1,ConnectCarrierSelection_templateObject_2,ConnectCarrierSelection_templateObject_3,ConnectCarrierSelection_templateObject_4,ConnectCarrierSelection_templateObject_5,ConnectCarrierSelection_templateObject_6,ConnectCarrierSelection_templateObject_7,ConnectCarrierSelection_templateObject_8,ConnectCarrierSelection_templateObject_9,ConnectCarrierSelection_templateObject_10,growCSS=(0,emotion_react_browser_esm.AH)(SlideConnectCarrierModal_templateObject_1||(SlideConnectCarrierModal_templateObject_1=(0,tslib_es6.ue)(["\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-basis: auto;\n"],["\n  flex-grow: 1;\n  flex-shrink: 1;\n  flex-basis: auto;\n"]))),StyledSlideModal=(0,emotion_styled_browser_esm.A)(SlideModal.A)(SlideConnectCarrierModal_templateObject_2||(SlideConnectCarrierModal_templateObject_2=(0,tslib_es6.ue)(["\n  overflow: hidden !important;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n\n  @media screen and (min-width: ","px) {\n    top: auto;\n    bottom: auto;\n    position: relative;\n  }\n"],["\n  overflow: hidden !important;\n  position: fixed;\n  top: 0;\n  bottom: 0;\n\n  @media screen and (min-width: ","px) {\n    top: auto;\n    bottom: auto;\n    position: relative;\n  }\n"])),responsive.P.Mobile),CarrierFormGrowContainer=(0,emotion_styled_browser_esm.A)(SlideModal.U)(SlideConnectCarrierModal_templateObject_3||(SlideConnectCarrierModal_templateObject_3=(0,tslib_es6.ue)(["\n  display: block;\n  overflow: auto;\n  position: fixed;\n  top: 71px;\n  bottom: 0px;\n  left: 0;\n  right: 0;\n  padding-bottom: calc(",");\n\n  @media screen and (min-width: ","px) {\n    position: relative;\n    top: auto;\n    bottom: auto;\n    left: auto;\n    right: auto;\n    padding-bottom: initial;\n  }\n"],["\n  display: block;\n  overflow: auto;\n  position: fixed;\n  top: 71px;\n  bottom: 0px;\n  left: 0;\n  right: 0;\n  padding-bottom: calc(",");\n\n  @media screen and (min-width: ","px) {\n    position: relative;\n    top: auto;\n    bottom: auto;\n    left: auto;\n    right: auto;\n    padding-bottom: initial;\n  }\n"])),"66px",responsive.P.Mobile);(0,redux.Zz)((0,es.Ng)(null,(function(dispatch){return{clearCarrierAccountsState:function(){return dispatch({type:constants.t.CARRIER_ACCOUNTS_CLEAR_STATE})},track:function(eventName,properties){return dispatch((0,prod_analytics_actions.o)(eventName,properties))}}})),(0,utils_translate.Tl)("settings"))((function(props){var isEbayCanadaRegistrationCookiePresent="true"===getCookie("ebay_ca_connect_start"),_a=(0,tslib_es6.zs)(react.useState(null),2),selectedCarrier=_a[0],setSelectedCarrier=_a[1],_b=(0,tslib_es6.zs)(react.useState(!1),2),canSlide=_b[0],setCanSlide=_b[1],_c=(0,tslib_es6.zs)(react.useState(""),2),carrierSearchCache=_c[0],setCarrierSearchCache=_c[1],_d=(0,tslib_es6.zs)(react.useState(isEbayCanadaRegistrationCookiePresent?{label:"Canada",value:"canada"}:props.carrierFilter?{label:props.carrierFilter,value:props.carrierFilter.toLowerCase()}:{label:props.t("carriers.filterCarriers"),value:""}),2),carrierFilterCache=_d[0],setCarrierFilterCache=_d[1],_e=(0,tslib_es6.zs)(react.useState(isEbayCanadaRegistrationCookiePresent?filterCarriers("","Canada"):props.carrierFilter?filterCarriers("",props.carrierFilter):carriers.TN),2),carrierSearchResultsCache=_e[0],setCarrierSearchResultsCache=_e[1];react.useEffect((function(){isEbayCanadaRegistrationCookiePresent&&props.track("EBAYCA_CARRIER_SLIDE_MODAL_RENDERED",{Filter:carrierFilterCache.value})}),[]);var clearSlideModal=function(){setCanSlide(!1),setSelectedCarrier(null),props.clearCarrierAccountsState()},onCancelClick=function(){clearSlideModal(),props.onClose()},onClose=props.onClose,t=props.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(StyledSlideModal,(0,tslib_es6.Cl)({backText:t("carriers.back"),backTextAsTitle:!0,closeOnClickOutside:!1,isOpen:!0,isSlided:canSlide,onBackClick:clearSlideModal,onClose,size:"md"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ConnectCarrierSelection_ConnectCarrierSelection,{carrierFilter:carrierFilterCache,carrierSearchQuery:carrierSearchCache,carrierSearchResults:carrierSearchResultsCache,onClickCarrier:function(e){var carrier=carriers.Ps[e.target.id],trackingReferece=TrackingHelper.U.getTrackingReference(types.UQ.name,"settings",{carrierAccountId:carrier.id,carrierName:null==carrier?void 0:carrier.name,carrierType:void 0});(0,utils.EE)(trackingReferece,types.UQ.operations.SELECTED,{}),setSelectedCarrier(carrier),setCanSlide(!0),props.track("CARRIER_SLIDE_MODAL_CARRIER_SELECTED",{Carrier:carrier.name})},onClose:onCancelClick,setCarrierFilter:setCarrierFilterCache,setCarrierSearchQuery:setCarrierSearchCache,setCarrierSearchResults:setCarrierSearchResultsCache}),selectedCarrier?(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierFormGrowContainer,(0,tslib_es6.Cl)({slideContent:!0},{children:selectedCarrier?(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierFormTabContainer_CarrierFormTabContainer,{carrier:selectedCarrier,onClose:onCancelClick}):null})):(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{})]}))}));var SlideConnectCarrierModal_templateObject_1,SlideConnectCarrierModal_templateObject_2,SlideConnectCarrierModal_templateObject_3,CanadaPostRegistrationModal_styles_templateObject_1,CanadaPostRegistrationModal_styles_templateObject_2,CanadaPostRegistrationModal_styles_templateObject_3,styles_FormGroup=(0,emotion_styled_browser_esm.A)("div")(CanadaPostRegistrationModal_styles_templateObject_1||(CanadaPostRegistrationModal_styles_templateObject_1=(0,tslib_es6.ue)(["\n  margin-bottom: 1rem;\n  label {\n    margin-bottom: 0.25rem;\n  }\n  &.hidden {\n    display: none;\n  }\n"],["\n  margin-bottom: 1rem;\n  label {\n    margin-bottom: 0.25rem;\n  }\n  &.hidden {\n    display: none;\n  }\n"]))),styles_CarrierFormGrowContainer=(0,emotion_styled_browser_esm.A)("div")(CanadaPostRegistrationModal_styles_templateObject_2||(CanadaPostRegistrationModal_styles_templateObject_2=(0,tslib_es6.ue)(["\n  ",";\n  position: fixed;\n  top: calc(",");\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: auto;\n  padding-bottom: ",";\n\n  @media screen and (min-width: ","px) {\n    position: relative;\n    top: auto;\n    left: auto;\n    right: auto;\n    bottom: auto;\n    overflow: visible;\n    padding-bottom: initial;\n  }\n"],["\n  ",";\n  position: fixed;\n  top: calc(",");\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: auto;\n  padding-bottom: ",";\n\n  @media screen and (min-width: ","px) {\n    position: relative;\n    top: auto;\n    left: auto;\n    right: auto;\n    bottom: auto;\n    overflow: visible;\n    padding-bottom: initial;\n  }\n"])),growCSS,headerMobileHeight,"66px",responsive.P.Mobile),TermsWrapper=(0,emotion_styled_browser_esm.A)("span")(CanadaPostRegistrationModal_styles_templateObject_3||(CanadaPostRegistrationModal_styles_templateObject_3=(0,tslib_es6.ue)(["\n  > a {\n    color: ",";\n  }\n"],["\n  > a {\n    color: ",";\n  }\n"])),styles_constants.Tj.sea600),formBaseName="canada_post-master",ComposedCanadaPostRegistrationLongForm=(0,utils_translate.Tl)("settings")((function(props){var _a=props.description,description=void 0===_a?"":_a,formType=props.formType,header=props.header,initialFormValues=props.initialFormValues,_b=props.isSubmitting,isSubmitting=void 0!==_b&&_b,onClose=props.onClose,onSubmit=props.onSubmit,_c=props.primaryButtonText,primaryButtonText=void 0===_c?"":_c,t=props.t,_d=(0,index_esm.mN)(),control=_d.control,formState=_d.formState,getValues=_d.getValues,handleSubmit=_d.handleSubmit,register=_d.register,setValue=_d.setValue,trigger=_d.trigger,watch=_d.watch,dispatch=(0,es.wA)(),_e=(0,tslib_es6.zs)(react.useState("I agree to the Canada Post <a href='https://www.canadapost-postescanada.ca/tools/pg/serviceoverview/ParcelsContractCustomersCanada-e.asp' target='_blank' rel='noreferrer' > Terms of Use </a> and <a href='https://www.canadapost-postescanada.ca/cpc/en/our-company/about-us/privacy-policy/privacy-policy-introduction.page' target='_blank' rel='noreferrer' >Privacy Statement</a>"),2),termsConditionsTitle=_e[0],setTermsConditionsTitle=_e[1],carrierFormFields=(0,es.d4)((function(state){return getCarrierFormFields(state)}));react.useEffect((function(){return dispatch((0,prod_analytics_actions.o)("CANADA_POST_MASTER_LONG_FORM_SHOWN")),dispatch(fetchCarrierFormFields({carrier:carriers.i3,formType:CarrierFormType.Create})),function(){dispatch(carrierFormFieldsClearState())}}),[]),react.useEffect((function(){if(carrierFormFields&&carrierFormFields.length>0){var termsFieldParams=carrierFormFields[carrierFormFields.length-1];"canada_post_terms"===(null==termsFieldParams?void 0:termsFieldParams.key)&&setTermsConditionsTitle(termsFieldParams.label)}}),[carrierFormFields]),react.useEffect((function(){initialFormValues&&Object.keys(initialFormValues).forEach((function(fieldName){setValue(fieldName,initialFormValues[fieldName])}))}),[initialFormValues]);var onFormSubmit=react.useCallback((function(){trigger().then((function(valid){if(valid){var formValues=getValues();onSubmit(formValues)}}))}),[onSubmit]),getErrorMessage=react.useCallback((function(fieldName){var fieldErrors=formState.errors[fieldName];return fieldErrors&&fieldErrors.type?"phone"!==fieldName?fieldErrors.message:"isValidPhoneNumber"===fieldErrors.type?t("carriers.canadaPostMasterForm.fieldError.invalidPhone"):fieldErrors.message:""}),[formState]);return(0,emotion_react_jsx_runtime_browser_esm.FD)("form",(0,tslib_es6.Cl)({onSubmit:handleSubmit(onFormSubmit)},{children:[header&&header,(0,emotion_react_jsx_runtime_browser_esm.Y)(styles_CarrierFormGrowContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(CarrierFormModalBody,(0,tslib_es6.Cl)({"data-testid":"canada-post-registration-long-form"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Carriers_CarrierErrorMessageDisplay,{}),(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex flex-col"},{children:[description&&(0,emotion_react_jsx_runtime_browser_esm.Y)("p",{children:description}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Grid.f,(0,tslib_es6.Cl)({className:"mb-4"},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(Grid.V,(0,tslib_es6.Cl)({width:"100%"},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(styles_FormGroup,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Label.A,(0,tslib_es6.Cl)({htmlFor:"".concat(formBaseName,"-company"),required:!0},{children:t("carriers.canadaPostMasterForm.fields.company")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(index_esm.xI,{control,name:"company",render:function(_a){var field=_a.field;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Input.Ay,(0,tslib_es6.Cl)({},field,{errorMessage:getErrorMessage("company"),id:"".concat(formBaseName,"-company"),inputRef:register("company",{required:{message:t("carriers.canadaPostMasterForm.fieldError.required"),value:!0}}).ref,invalid:getErrorMessage("company").length>0,name:"company",responsive:!0}))}})]}),(0,emotion_react_jsx_runtime_browser_esm.FD)(styles_FormGroup,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Label.A,(0,tslib_es6.Cl)({htmlFor:"".concat(formBaseName,"-full_name"),required:!0},{children:t("carriers.canadaPostMasterForm.fields.full_name")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(index_esm.xI,{control,name:"full_name",render:function(_a){var field=_a.field;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Input.Ay,(0,tslib_es6.Cl)({},field,{errorMessage:getErrorMessage("full_name"),id:"".concat(formBaseName,"-full_name"),inputRef:register("full_name",{required:{message:t("carriers.canadaPostMasterForm.fieldError.required"),value:!0}}).ref,invalid:getErrorMessage("full_name").length>0,name:"full_name",responsive:!0}))},rules:{required:{message:t("carriers.canadaPostMasterForm.fieldError.required"),value:!0}}})]}),(0,emotion_react_jsx_runtime_browser_esm.FD)(styles_FormGroup,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Label.A,(0,tslib_es6.Cl)({htmlFor:"".concat(formBaseName,"-email"),required:!0},{children:t("carriers.canadaPostMasterForm.fields.email")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(index_esm.xI,{control,name:"email",render:function(_a){var field=_a.field;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Input.Ay,(0,tslib_es6.Cl)({},field,{errorMessage:getErrorMessage("email"),id:"".concat(formBaseName,"-email"),inputRef:register("email",{required:{message:t("carriers.canadaPostMasterForm.fieldError.required"),value:!0}}).ref,invalid:getErrorMessage("email").length>0,name:"email",responsive:!0}))},rules:{required:{message:t("carriers.canadaPostMasterForm.fieldError.required"),value:!0}}})]}),(0,emotion_react_jsx_runtime_browser_esm.FD)(styles_FormGroup,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Label.A,(0,tslib_es6.Cl)({htmlFor:"".concat(formBaseName,"-phone"),required:!0},{children:t("carriers.canadaPostMasterForm.fields.phone")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(index_esm.xI,{control,name:"phone",render:function(_a){var field=_a.field;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Input.Ay,(0,tslib_es6.Cl)({},field,{errorMessage:getErrorMessage("phone"),id:"".concat(formBaseName,"-phone"),inputRef:register("phone",{required:{message:t("carriers.canadaPostMasterForm.fieldError.required"),value:!0},validate:{isValidPhoneNumber:function(value){var _a,countryCode=null===(_a=null==initialFormValues?void 0:initialFormValues.country)||void 0===_a?void 0:_a.iso2;return!value||!countryCode||(0,isValidPhoneNumber.g)(value,countryCode)}}}).ref,invalid:getErrorMessage("phone").length>0,name:"phone",responsive:!0}))},rules:{required:{message:t("carriers.canadaPostMasterForm.fieldError.required"),value:!0},validate:{isValidPhoneNumber:function(value){var _a,countryCode=null===(_a=null==initialFormValues?void 0:initialFormValues.country)||void 0===_a?void 0:_a.iso2;return!value||!countryCode||(0,isValidPhoneNumber.g)(value,countryCode)}}}})]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(styles_FormGroup,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(index_esm.xI,{control,"data-testid":"".concat(formBaseName,"-terms"),defaultValue:!0,name:"canada_post_terms",render:function(_a){var field=_a.field;return(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Checkbox.A,(0,tslib_es6.Cl)({},field,{checked:watch("canada_post_terms"),"data-testid":"".concat(formBaseName,"-terms"),errorMessage:getErrorMessage("canada_post_terms"),id:"".concat(formBaseName,"-terms"),label:(0,emotion_react_jsx_runtime_browser_esm.Y)(TermsWrapper,{dangerouslySetInnerHTML:{__html:termsConditionsTitle}})}))},rules:{required:{message:t("carriers.canadaPostMasterForm.fieldError.required"),value:!0}}})})]}))}))]}))]}))}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Carriers_CarrierModalFooter,{carrier:carriers.i3,customPrimaryButtonText:primaryButtonText,formType,isLoading:isSubmitting,onCancelClick:onClose,onPrimaryClick:onFormSubmit})]}))}));const CanadaPostRegistrationModal_CanadaPostRegistrationLongForm=ComposedCanadaPostRegistrationLongForm;(0,utils_translate.Tl)("orders")((function(props){var onClose=props.onClose,t=props.t,formType=CarrierFormType.Create,carrier=carriers.i3,dispatch=(0,es.wA)(),user=(0,es.d4)((function(state){return(0,user_selectors.wz)(state)})),userCompany=(0,es.d4)(user_selectors.Zg)||"",isFormSubmitting=(0,es.d4)((function(state){return(0,carrier_accounts_selectors.sy)(state)})),_a=(0,tslib_es6.zs)(react.useState({}),2),formInitialValues=_a[0],setFormInitialValues=_a[1],customModalProps=react.useMemo((function(){return{primaryButtonText:t("canadaPostRegModal.submit"),titleText:t("canadaPostRegModal.title")}}),[]);react.useEffect((function(){user?setFormInitialValues((function(){var _a,_b,_c;return{company:(null===(_a=null==user?void 0:user.address)||void 0===_a?void 0:_a.company)||userCompany,country:null===(_b=null==user?void 0:user.address)||void 0===_b?void 0:_b.country,email:null==user?void 0:user.email,full_name:"".concat(null==user?void 0:user.firstName," ").concat(null==user?void 0:user.lastName).trim(),phone:(null===(_c=null==user?void 0:user.address)||void 0===_c?void 0:_c.phone)||""}})):userCompany&&setFormInitialValues((function(){return{company:userCompany}}))}),[user,userCompany]),react.useEffect((function(){""===userCompany&&dispatch((0,user_actions.uF)())}),[]);var onFormSubmit=react.useCallback((function(formValues){var carrierAccount={accountId:formValues.account_id?"".concat(formValues.account_id):"filler_id",active:!0,carrier,parameters:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},formValues),{isMasterAccount:!0}),test:!!formValues.test},trackingReference=TrackingHelper.U.getTrackingReference(types.UQ.name,"settings",{carrierAccountId:carrierAccount.accountId,carrierName:carrier.name,carrierType:"Shippo Master"});(0,utils.EE)(trackingReference,types.UQ.operations.SAVE_ATTEMPTED,{}),(0,utils.EE)(trackingReference,types.UQ.operations.ADDED,{}),dispatch(carrier_accounts_actions_createCarrierAccount({carrierAccount,trackingReference}))}),[]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(Modal.A.MobileContainer,(0,tslib_es6.Cl)({closeOnClickOutside:!1,isOpen:!0,onClose,size:"md"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CanadaPostRegistrationModal_CanadaPostRegistrationLongForm,{description:t("canadaPostRegModal.description"),formType,header:(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierModalHeader_CarrierModalHeader,{carrier,customTitleText:customModalProps.titleText,formType}),initialFormValues:formInitialValues,isSubmitting:isFormSubmitting,onClose,onSubmit:onFormSubmit,primaryButtonText:customModalProps.primaryButtonText})}))}));var TermsAndConditions=function(_super){function TermsAndConditions(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.C6)(TermsAndConditions,_super),TermsAndConditions.prototype.onLinkClick=function(e){e.stopPropagation()},TermsAndConditions.prototype.render=function(){var _this=this,_a=this.props,agreements=_a.agreements,checked=_a.checked,dataPendo=_a.dataPendo,disabled=_a.disabled,errorMessage=_a.errorMessage,focused=_a.focused,hideErrors=_a.hideErrors,labelText=_a.labelText,onBlur=_a.onBlur,onChange=_a.onChange,onFocus=_a.onFocus;if(!agreements)return null;var startingText=(null==labelText?void 0:labelText.startingText)||"By checking this box, you agree to the",concatWithText=(null==labelText?void 0:labelText.concatWith)||"and",label=(0,emotion_react_jsx_runtime_browser_esm.FD)("span",{children:["".concat(startingText," "),agreements.map((function(agreement){return(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.zN,(0,tslib_es6.Cl)({href:agreement.agreementUrl,onClick:_this.onLinkClick,target:"_blank"},{children:agreement.label}),agreement.label)})).reduce((function(prev,curr){return[prev," ".concat(concatWithText," "),curr]}))]});return(0,emotion_react_jsx_runtime_browser_esm.Y)(Checkbox.Ay,{checked,dataPendo,disabled,errorMessage,focused,hideErrors,label,onBlur,onChange,onFocus})},TermsAndConditions}(react.Component);const components_TermsAndConditions=TermsAndConditions;var CarrierRegistrationModal_styles_templateObject_1,CarrierRegistrationModal_styles_templateObject_2,CarrierRegistrationModal_styles_templateObject_3,CarrierRegistrationModal_styles_templateObject_4,CarrierRegistrationModal_styles_templateObject_5,CarrierRegistrationModal_styles_templateObject_6,styles_templateObject_7,styles_templateObject_8,styles_templateObject_9,icon_close_dark_gray=__webpack_require__("./app/assets/icons/icon_close_dark_gray.svg"),CloseIcon=__webpack_require__("./app/components/CloseIcon/CloseIcon.tsx"),CarrierRegistrationModal_styles_CarrierFormGrowContainer=(0,emotion_styled_browser_esm.A)("div")(CarrierRegistrationModal_styles_templateObject_1||(CarrierRegistrationModal_styles_templateObject_1=(0,tslib_es6.ue)(["\n  ",";\n  position: fixed;\n  top: 91px;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: auto;\n  padding-bottom: ",";\n\n  @media screen and (min-width: ","px) {\n    position: relative;\n    top: auto;\n    left: auto;\n    right: auto;\n    bottom: auto;\n    overflow: visible;\n    padding-bottom: initial;\n  }\n"],["\n  ",";\n  position: fixed;\n  top: 91px;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: auto;\n  padding-bottom: ",";\n\n  @media screen and (min-width: ","px) {\n    position: relative;\n    top: auto;\n    left: auto;\n    right: auto;\n    bottom: auto;\n    overflow: visible;\n    padding-bottom: initial;\n  }\n"])),growCSS,"66px",responsive.P.Mobile),styles_Description=(0,emotion_styled_browser_esm.A)("div")(CarrierRegistrationModal_styles_templateObject_2||(CarrierRegistrationModal_styles_templateObject_2=(0,tslib_es6.ue)(["\n  color: ",";\n  padding-bottom: 16px;\n"],["\n  color: ",";\n  padding-bottom: 16px;\n"])),styles_constants.Tj.gray1000),styles_StyledPrimaryButton=(0,emotion_styled_browser_esm.A)(components_Button.jn)(CarrierRegistrationModal_styles_templateObject_3||(CarrierRegistrationModal_styles_templateObject_3=(0,tslib_es6.ue)(["\n  width: 100%;\n  padding: 0;\n  margin-left: 0;\n\n  @media screen and (min-width: ","px) {\n    width: initial;\n    padding: 0 20px;\n  }\n"],["\n  width: 100%;\n  padding: 0;\n  margin-left: 0;\n\n  @media screen and (min-width: ","px) {\n    width: initial;\n    padding: 0 20px;\n  }\n"])),responsive.P.Mobile),CenteredButtonFooter=(0,emotion_styled_browser_esm.A)(Modal.A.MobileFooter)(CarrierRegistrationModal_styles_templateObject_4||(CarrierRegistrationModal_styles_templateObject_4=(0,tslib_es6.ue)(["\n  @media screen and (min-width: ","px) {\n    justify-content: center;\n  }\n"],["\n  @media screen and (min-width: ","px) {\n    justify-content: center;\n  }\n"])),responsive.P.Mobile),NoBottomPaddingModalBody=(0,emotion_styled_browser_esm.A)(CarrierFormModalBody)(CarrierRegistrationModal_styles_templateObject_5||(CarrierRegistrationModal_styles_templateObject_5=(0,tslib_es6.ue)(["\n  padding-bottom: 0;\n"],["\n  padding-bottom: 0;\n"]))),styles_CarrierLogo=(0,emotion_styled_browser_esm.A)("img")(CarrierRegistrationModal_styles_templateObject_6||(CarrierRegistrationModal_styles_templateObject_6=(0,tslib_es6.ue)(["\n  max-height: 42px;\n  max-width: 75px;\n  width: auto;\n  height: auto;\n"],["\n  max-height: 42px;\n  max-width: 75px;\n  width: auto;\n  height: auto;\n"]))),styles_StyledAddons=(0,emotion_styled_browser_esm.A)(components_Header.A.Addons)(styles_templateObject_7||(styles_templateObject_7=(0,tslib_es6.ue)(["\n  flex-direction: column;\n  align-self: flex-start;\n"],["\n  flex-direction: column;\n  align-self: flex-start;\n"]))),styles_StyledHeaderFlexContainer=(0,emotion_styled_browser_esm.A)(components_Header.A.FlexContainer)(styles_templateObject_8||(styles_templateObject_8=(0,tslib_es6.ue)(["\n  flex-direction: row;\n  justify-content: space-between;\n"],["\n  flex-direction: row;\n  justify-content: space-between;\n"]))),StyledTitle=(0,emotion_styled_browser_esm.A)(Modal.A.Title)(styles_templateObject_9||(styles_templateObject_9=(0,tslib_es6.ue)(["\n  margin-left: 12px;\n  font-weight: ",";\n"],["\n  margin-left: 12px;\n  font-weight: ",";\n"])),styles_constants.Wy.medium);const CarrierRegistrationModal_CarrierRegistrationModalHeader=function(props){var carrier=props.carrier,onClose=props.onClose,titleText=props.titleText;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Modal.A.Header,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(styles_StyledHeaderFlexContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(styles_CarrierLogo,{src:carrier.icon}),(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledTitle,{children:titleText}),(0,emotion_react_jsx_runtime_browser_esm.Y)(styles_StyledAddons,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CloseIcon.U,{iconSvg:icon_close_dark_gray,onClose})})]})})};var agreements={canada_post:[{agreementUrl:carriers.NL,label:"Terms of Use"},{agreementUrl:carriers.Sr,label:"Privacy Statement"}],dhl_express:[{agreementUrl:carriers.bJ,label:"Terms and Conditions"}],ups_ca:[{agreementUrl:carriers.Sv,label:"technology agreement"},{agreementUrl:carriers.is,label:"tariff/terms and conditions of service"},{agreementUrl:carriers.aM,label:"list of prohibited items for shipping"}],ups_us:[{agreementUrl:carriers.LO,label:"technology agreement"},{agreementUrl:carriers.F0,label:"tariff/terms and conditions of service"},{agreementUrl:carriers.Df,label:"list of prohibited items for shipping"},{agreementUrl:carriers.EU,label:"UPS Ground Saver terms of service"}]},labelText={canada_post:{concatWith:"and",startingText:"I agree to the Canada Post"},dhl_express:{startingText:"I agree to the DHL"},ups:{concatWith:"and",startingText:"I agree to the UPS"}},ComposedCarrierRegistrationShortFormModal=(0,utils_translate.Tl)("settings")((function(props){var _a=props.accountCountry,accountCountry=void 0===_a?constants_countries.Xr.US.iso2:_a,_b=props.carrier,carrier=void 0===_b?carriers.$5:_b,onClose=props.onClose,onSubmit=props.onSubmit,t=props.t,_c=(0,tslib_es6.zs)(react.useState(!0),2),hasAgreedTerms=_c[0],setHasAgreedTerms=_c[1],carrierKey=carrier.id===carriers.$5.id?"".concat(carrier.id,"_").concat(accountCountry.toLowerCase()):carrier.id,address=(0,es.d4)((function(state){return(0,user_selectors.GA)(state)})),submitting=(0,es.d4)((function(state){return(0,carrier_accounts_selectors.sy)(state)})),onTermsChange=react.useCallback((function(){setHasAgreedTerms((function(prevState){return!prevState}))}),[]),register=react.useCallback((function(){var _a,parameters={};carrier===carriers.$5&&(parameters={agreements:!0,billing_address_city:(null==address?void 0:address.city)||"",billing_address_country_iso2:(null===(_a=null==address?void 0:address.country)||void 0===_a?void 0:_a.iso2)||"",billing_address_state:(null==address?void 0:address.state)||"",billing_address_street1:(null==address?void 0:address.street1)||"",billing_address_street2:(null==address?void 0:address.street2)||"",billing_address_zip:(null==address?void 0:address.zip)||"",pickup_address_same_as_billing_address:!0}),onSubmit&&onSubmit(parameters)}),[address,onSubmit,carrier]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(Modal.A.MobileContainer,(0,tslib_es6.Cl)({alwaysHideCloseIcon:!0,closeOnClickOutside:!1,isOpen:!0,minHeight:"100px",onClose,size:"md"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierRegistrationModal_CarrierRegistrationModalHeader,{carrier,onClose,titleText:t("settings:carriers:shortform:".concat(carrierKey,":title"))}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierRegistrationModal_styles_CarrierFormGrowContainer,(0,tslib_es6.Cl)({"data-testid":"".concat(carrierKey,"-registration-modal")},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(NoBottomPaddingModalBody,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Carriers_CarrierErrorMessageDisplay,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(styles_Description,{children:t("settings:carriers:shortform:".concat(carrierKey,":description"))}),(0,emotion_react_jsx_runtime_browser_esm.Y)(components_TermsAndConditions,{agreements:agreements[carrierKey],checked:hasAgreedTerms,labelText:labelText[carrier.id.toLowerCase()],onChange:onTermsChange})]})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(CenteredButtonFooter,(0,tslib_es6.Cl)({hideBorder:!0},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(styles_StyledPrimaryButton,(0,tslib_es6.Cl)({dataAnalytics:"".concat(carrier.id,"-master-short-form-submit"),disabled:!hasAgreedTerms||submitting,isLoading:submitting,onClick:register},{children:t("settings:carriers:shortform:".concat(carrierKey,":primaryButton"))}))}))]}))}));const CarrierRegistrationModal_CarrierRegistrationShortFormModal=ComposedCarrierRegistrationShortFormModal;(0,redux.Zz)((0,utils_translate.Tl)("settings"))((function(_a){var carrierAccount=_a.carrierAccount,onClose=_a.onClose,t=_a.t,_b=useFedExAccountVerification({t}),fedexCarrierAccountRef=_b.fedexCarrierAccountRef,formMethods=_b.formMethods,generateVerificationCode=_b.generateVerificationCode,getVerificationValues=_b.getVerificationValues,onVerificationFormSubmit=_b.onVerificationFormSubmit,requestingPin=_b.requestingPin,requestingVerification=_b.requestingVerification,showPinField=_b.showPinField;if(!carrierAccount)return null;fedexCarrierAccountRef.current=carrierAccount;var verificationValues=getVerificationValues(),isSubmitForInvoiceEnabled=verificationValues.verification_option===VerificationOptions_INVOICE&&verificationValues.verification_invoice_number&&verificationValues.verification_invoice_amount&&verificationValues.verification_invoice_date&&verificationValues.verification_invoice_currency,isSubmitForRemainingOptionsEnabled=verificationValues.verification_option!==VerificationOptions_INVOICE&&verificationValues.verification_pin,isSubmitEnabled=isSubmitForInvoiceEnabled||isSubmitForRemainingOptionsEnabled;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Dialog_Dialog.l,{actions:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({color:"secondary",onClick:onClose,variant:"text"},{children:t("carriers.cancel")}),0),(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({color:"primary",disabled:!isSubmitEnabled||requestingVerification,onClick:function(){return onVerificationFormSubmit()},startIcon:requestingVerification?(0,emotion_react_jsx_runtime_browser_esm.Y)(CircularProgress.A,{}):null},{children:t("carriers.submit")}),1)],content:(0,emotion_react_jsx_runtime_browser_esm.Y)(FedexInternationalSection.hW,{formMethods,hasSentVerificationPin:showPinField,isSendingPin:requestingPin,onSendVerificationPin:generateVerificationCode,onVerificationFormSubmit,t}),onClose,open:!0,title:t("carriers.verifyAccount")})}));const Carriers_CarrierForm=CarrierForm_CarrierForm,Carriers_CarrierModalHeader=CarrierModalHeader_CarrierModalHeader;var SaveCarrierAccountModal_CarrierFormGrowContainer=(0,emotion_styled_browser_esm.A)("div")(SaveCarrierAccountModal_templateObject_1||(SaveCarrierAccountModal_templateObject_1=(0,tslib_es6.ue)(["\n  ",";\n  position: fixed;\n  top: calc(",");\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: auto;\n  padding-bottom: ",";\n\n  @media screen and (min-width: ","px) {\n    position: relative;\n    top: auto;\n    left: auto;\n    right: auto;\n    bottom: auto;\n    overflow: visible;\n    padding-bottom: initial;\n  }\n"],["\n  ",";\n  position: fixed;\n  top: calc(",");\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: auto;\n  padding-bottom: ",";\n\n  @media screen and (min-width: ","px) {\n    position: relative;\n    top: auto;\n    left: auto;\n    right: auto;\n    bottom: auto;\n    overflow: visible;\n    padding-bottom: initial;\n  }\n"])),growCSS,headerMobileHeight,"66px",responsive.P.Mobile),AlertInformation=(0,emotion_styled_browser_esm.A)("div")(SaveCarrierAccountModal_templateObject_2||(SaveCarrierAccountModal_templateObject_2=(0,tslib_es6.ue)(["\n  margin: 10px 30px 0px 30px;\n\n  & div {\n    margin-bottom: 0px;\n  }\n"],["\n  margin: 10px 30px 0px 30px;\n\n  & div {\n    margin-bottom: 0px;\n  }\n"])));const Carriers_SaveCarrierAccountModal_SaveCarrierAccountModal=(0,redux.Zz)((0,utils_translate.Tl)("settings"),Carriers_withCarrierForm)((function(props){var accountCountry=props.accountCountry,carrier=props.carrier,carrierAccount=props.carrierAccount,customizableProps=props.customizableProps,onClose=props.onClose,t=props.t,_a=(0,tslib_es6.zs)(react.useState(!carrierAccount||carrierAccount.active),2),active=_a[0],setActive=_a[1],formType=carrierAccount?CarrierFormType.Edit:props.formType,carrierFormContext=react.useContext(withCarrierForm_Context),isNewFedExAPI=useNewFedExAPIFeatureFlag().isNewFedExAPI,_b=(0,tslib_es6.zs)(react.useState(!1),2),uploadingImage=_b[0],setUploadingImage=_b[1],_c=useFedExInternationalSection(),handleImageUpload=_c.handleImageUpload,onFedExInternationalCheckboxChange=_c.onFedExInternationalCheckboxChange,showFedExImageUploadError=_c.showFedExImageUploadError,showFedExInternational=_c.showFedExInternational,uploadedImage=_c.uploadedImage,shouldShowFedEXInternationalSection=!(!isNewFedExAPI||carrier.id!==carriers.jr.id),isUpsOauthNewRegistration=carrier.id===carriers.$5.id,onSaveCarrierAccountFormSubmit=react.useCallback((function(formValues){var e_1,_a,e_2,_b,carrier=props.carrier,carrierAccountWithServiceLevels=props.carrierAccountWithServiceLevels,formType=props.formType,trackingReference=TrackingHelper.U.getTrackingReference(types.UQ.name,"settings",{carrierAccountId:null==formValues?void 0:formValues.account_id,carrierName:carrier.name,carrierType:void 0});(0,utils.EE)(trackingReference,types.UQ.operations.SAVE_ATTEMPTED,{}),(0,utils.EE)(trackingReference,types.UQ.operations.EDITED,{});var serviceLevelsPayload=[],localCarrierAccount={accountId:formValues.account_id?"".concat(formValues.account_id):"filler_id",active,carrier,test:!!formValues.test},findMatchServiceLevel=function(key){if(carrierAccountWithServiceLevels)return carrierAccountWithServiceLevels.serviceLevels.find((function(el){return el.token===key}))};try{for(var _c=(0,tslib_es6.Ju)(Object.keys(formValues)),_d=_c.next();!_d.done;_d=_c.next()){if("account_id"!==(key=_d.value)&&"test"!==key){var matchedServiceLevel=findMatchServiceLevel(key);if("metadata"===key)localCarrierAccount.metadata=formValues[key];else if(matchedServiceLevel){var initialValueFromDB=!formValues[key];if(matchedServiceLevel.is_hidden!==initialValueFromDB){var serviceLevelPayload={op:"replace",path:"/".concat(key,"/is_hidden"),value:!formValues[key]};serviceLevelsPayload.push(serviceLevelPayload)}}else localCarrierAccount.parameters||(localCarrierAccount.parameters={}),localCarrierAccount.parameters[key]=formValues[key]}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}if(!carrierAccount)return formType===CarrierFormType.Create?((0,utils.EE)(trackingReference,types.UQ.operations.ADDED,{}),carrierFormContext.createCarrierAccount({carrierAccount:localCarrierAccount,trackingReference})):((0,utils.EE)(trackingReference,types.UQ.operations.ACTIVATED,{}),localCarrierAccount.active=!0,carrierFormContext.connectCarrierAccount({carrierAccount:localCarrierAccount,trackingReference}));var accountLevelParams=["account_id","test","active","metadata"];if(carrierAccount.parameters)try{for(var _e=(0,tslib_es6.Ju)(Object.keys(formValues)),_f=_e.next();!_f.done;_f=_e.next()){var key=_f.value;if(!accountLevelParams.includes(key))((0,CarrierAccount.oL)(formValues[key])?formValues[key].value:formValues[key])===carrierAccount.parameters[key]&&delete localCarrierAccount.parameters[key]}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_f&&!_f.done&&(_b=_e.return)&&_b.call(_e)}finally{if(e_2)throw e_2.error}}var id_1=carrierAccount.objectId;(0,tslib_es6.sH)(void 0,void 0,void 0,(function(){var error_1,error_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:if(!(null==uploadedImage?void 0:uploadedImage.companyLogo)&&!(null==uploadedImage?void 0:uploadedImage.digitalSignature))return[3,9];if(setUploadingImage(!0),!(null==uploadedImage?void 0:uploadedImage.companyLogo))return[3,4];_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,uploadCompanyLogo(id_1,uploadedImage.companyLogo)];case 2:return _a.sent(),[3,4];case 3:return error_1=_a.sent(),newRelic_newRelic.S.noticeError("Failed to upload company logo",{error:error_1}),[3,4];case 4:if(!(null==uploadedImage?void 0:uploadedImage.digitalSignature))return[3,8];_a.label=5;case 5:return _a.trys.push([5,7,,8]),[4,uploadDigitalSignature(id_1,uploadedImage.digitalSignature)];case 6:return _a.sent(),[3,8];case 7:return error_2=_a.sent(),newRelic_newRelic.S.noticeError("Failed to upload digital signature",error_2),[3,8];case 8:setUploadingImage(!1),_a.label=9;case 9:return serviceLevelsPayload.length>0?[2,carrierFormContext.editCarrierAccountServiceLevels({carrierAccount:localCarrierAccount,id:id_1,serviceLevelsPayload,trackingReference})]:[2,carrierFormContext.editCarrierAccount({carrierAccount:localCarrierAccount,id:id_1,trackingReference})]}}))}))}),[active,carrierAccount,carrierFormContext,props,uploadedImage]),mockedParameters=isCarrierFormMocked(carrier.id,formType)?parametersMap[carrier.id][formType]:[];isUpsOauthNewRegistration&&(mockedParameters=parametersMap.ups_oauth[formType]),carrier.id===carriers.i3.id&&mockedParameters&&(carrierAccount&&carrierAccount.parameters&&carrierAccount.parameters.platform_id_key?mockedParameters=mockedParameters.filter((function(field){return"customer_number"===field.key})):formType===CarrierFormType.Connect&&(mockedParameters=mockedParameters.filter((function(field){return"postal_zip_code"!==field.key}))));return(0,emotion_react_jsx_runtime_browser_esm.FD)(Modal.A.MobileContainer,(0,tslib_es6.Cl)({closeOnClickOutside:!1,isOpen:!0,minHeight:"100px",onClose,size:"mdl"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Carriers_CarrierModalHeader,{active,carrier,customTitleText:null==customizableProps?void 0:customizableProps.titleText,formType,onActiveToggle:function(){setActive(!active)},test:carrierAccount&&carrierAccount.test}),carrierAccount&&carrierAccount.parameters&&"eBay"===carrierAccount.parameters.platform_id_key&&formType===CarrierFormType.Edit&&(0,emotion_react_jsx_runtime_browser_esm.Y)(AlertInformation,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Message.QB,{children:t("carriers.ebayOnly")})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SaveCarrierAccountModal_CarrierFormGrowContainer,(0,tslib_es6.Cl)({"data-testid":"save-carrier-account-modal"},{children:carrier===carriers.i3&&formType===CarrierFormType.Connect?(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"px-8 py-5"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Carriers_CanadaPostConnectRedirect,{})})):(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Carriers_CarrierForm,{accountCountry,carrier,carrierAccountWithServiceLevels:carrierFormContext.carrierAccountWithServiceLevels,disabled:!active,errorMessage:carrierFormContext.errorMessage,fedExInternationalSection:function(showFedExInternationalSection){var _a,_b;return showFedExInternationalSection?(0,emotion_react_jsx_runtime_browser_esm.Y)(FedexInternationalSection.M6,{assetReferences:{companyLogo:"".concat((null===(_a=null==carrierAccount?void 0:carrierAccount.parameters)||void 0===_a?void 0:_a.letterhead_reference_id)||""),digitalSignature:"".concat((null===(_b=null==carrierAccount?void 0:carrierAccount.parameters)||void 0===_b?void 0:_b.signature_reference_id)||"")},onChangeCheckbox:onFedExInternationalCheckboxChange,onImageUpload:handleImageUpload,requiredError:showFedExImageUploadError,showFedExInternational,t:props.t}):null}(shouldShowFedEXInternationalSection),formType:formType!==CarrierFormType.Edit||carrierAccount?formType:CarrierFormType.Connect,hideAccountNickname:carrierFormContext.shouldHideAccountNickname(carrier,formType),hideTestMode:formType===CarrierFormType.Create,initialValues:carrierFormContext.getInitialFormValues(carrierAccount,carrier,formType,mockedParameters),isUpsOauthNewRegistration,masterAccountForm:carrierAccount&&carrierAccount.isShippoAccount,newFedExAPI:shouldShowFedEXInternationalSection,onSubmit:onSaveCarrierAccountFormSubmit,parameters:mockedParameters}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Carriers_CarrierModalFooter,{carrier,customPrimaryButtonText:null==customizableProps?void 0:customizableProps.primaryButtonText,formType,isLoading:carrierFormContext.isSavingCarrierAccount||uploadingImage,onCancelClick:onClose,onPrimaryClick:carrierFormContext.submitCarrierForm})]})}))]}))}));var SaveCarrierAccountModal_templateObject_1,SaveCarrierAccountModal_templateObject_2;const Carriers_SaveCarrierAccountModal=Carriers_SaveCarrierAccountModal_SaveCarrierAccountModal;(0,redux.Zz)((0,es.Ng)((function(state){return{errorMessage:(0,carrier_accounts_selectors.E3)(state),hasValidAddress:(0,user_selectors.Oz)(state),userCountryIso2:(0,user_selectors.XM)(state)}}),(function(dispatch){return{sendTrackEvent:function(event){return dispatch((0,prod_analytics_actions.o)(event))}}})),(0,utils_translate.Tl)("orders"))((function(props){var _a=props.accountCountry,accountCountry=void 0===_a?constants_countries.Xr.US.iso2:_a,errorMessage=props.errorMessage,hasValidAddress=props.hasValidAddress,onClose=props.onClose,sendTrackEvent=props.sendTrackEvent,showFullForm=props.showFullForm,t=props.t,userCountryIso2=props.userCountryIso2,dispatch=(0,es.wA)(),customModalProps={primaryButtonText:t("upsRegModal.submit"),titleText:t("upsRegModal.title")},onShortFormSubmit=react.useCallback((function(parameters){var carrierAccount={accountId:"",carrier:carriers.$5,parameters:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},parameters),{ups_agreements:!0})},trackingReference=TrackingHelper.U.getTrackingReference(types.UQ.name,"settings",{carrierAccountId:void 0,carrierName:"UPS",carrierType:"Shippo Master"});(0,utils.EE)(trackingReference,types.UQ.operations.SAVE_ATTEMPTED,{}),(0,utils.EE)(trackingReference,types.UQ.operations.ACTIVATED,{}),dispatch(carrier_accounts_actions_createCarrierAccount({carrierAccount,trackingReference}))}),[]);return showFullForm||errorMessage||!(hasValidAddress&&userCountryIso2===accountCountry)?(sendTrackEvent("UPS_MASTER_LONG_FORM_SHOWN"),(0,emotion_react_jsx_runtime_browser_esm.Y)(Carriers_SaveCarrierAccountModal,{accountCountry,carrier:carriers.$5,customizableProps:customModalProps,formType:CarrierFormType.Create,onClose})):(sendTrackEvent("UPS_MASTER_SHORT_FORM_SHOWN"),(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierRegistrationModal_CarrierRegistrationShortFormModal,{accountCountry,carrier:carriers.$5,onClose,onSubmit:onShortFormSubmit}))}));var withCarrierAccounts_Context=react.createContext({carrierAccountRegStatuses:{},clearCarrierAccountsSubmit:function(){},fetchCarrierAccountRegStatuses:function(){},getAccountRegStatus:function(){return null},isUserPaygPlan:!1,masterAccounts:[],openCanadaPostRegistrationModal:function(){},openEditModal:function(){},openFedExValidationModal:function(){},openModal:function(){},openSlideModal:function(){},openUpsRegistrationModal:function(){},setRegistrationCarrierAccount:function(){},successfulSubmit:null,totalMasterCarrierAccounts:0,totalUserCarrierAccounts:0,userAccounts:[],userAction:"none"});var CarrierAccountRegStatus=__webpack_require__("./app/types/CarrierAccountRegStatus.ts"),types_utils=__webpack_require__("./app/pages/Orders/Blackbeard/types/utils.ts");const hooks_useSingleCarrierRates=function(selectRate,batchEntryId){var dispatch=(0,es.wA)(),rates=function(batchEntryId){var memoizedBatchEntryId=(0,react.useMemo)((function(){return batchEntryId||-1}),[batchEntryId]);return(0,es.d4)((function(state){return(0,batch_entry_composite_selectors.jl)(state,{batchEntryId:memoizedBatchEntryId})}))}(batchEntryId),shipment=function(batchEntryId){var memoizedBatchEntryId=(0,react.useMemo)((function(){return batchEntryId||-1}),[batchEntryId]);return(0,es.d4)((function(state){return(0,batch_entry_composite_selectors.Qb)(state,{batchEntryId:memoizedBatchEntryId})}))}(batchEntryId),carrierAccountsMap=(0,es.d4)(carrier_accounts_selectors.Nf),hasValidSenderAddress=(0,es.d4)(user_selectors.Oz),registrationStatus=(0,es.d4)((function(state){return(0,batch_entry_composite_selectors.yu)(state,{batchEntryIds:[batchEntryId]})}),types_utils.t7),selectedRate=(0,es.d4)((function(state){return batchEntryId?(0,batch_entry_composite_selectors.aq)(state,{batchEntryId}):null})),_a=react.useContext(withCarrierAccounts_Context),masterAccounts=_a.masterAccounts,setRegistrationCarrierAccount=_a.setRegistrationCarrierAccount,sendTrackEvent=(0,react.useCallback)((function(event,properties){dispatch((0,prod_analytics_actions.o)(event,properties))}),[dispatch]);return{rates,selectRateWithAccountCheck:(0,react.useCallback)((function(shipmentId,rate){selectRate({accountObjectId:rate.carrierAccount,rateObjectId:rate.objectId,serviceLevelToken:rate.servicelevel.token,shipmentObjectId:shipmentId});var carrier=carrierAccountsMap[rate.carrierAccount].carrier,incompleteRegStatus=registrationStatus[carrier.id];if(incompleteRegStatus){switch(carrier.id){case"ups":sendTrackEvent("UPS_MASTER_PENDING_RATE_SELECTED");break;case"canada_post":sendTrackEvent("CANADA_POST_MASTER_PENDING_RATE_SELECTED")}var showFullForm=!(incompleteRegStatus===CarrierAccountRegStatus.n.PENDING_TERMS&&hasValidSenderAddress);setRegistrationCarrierAccount(carrier.id,showFullForm)}"USPS"===rate.provider&&masterAccounts.some((function(carrierAccount){return carrierAccount.objectId===rate.carrierAccount}))&&sendTrackEvent("USPS_MASTER_RATE_SELECTED")}),[selectRate,carrierAccountsMap,registrationStatus,masterAccounts,hasValidSenderAddress,setRegistrationCarrierAccount,sendTrackEvent]),selectedRate,shipment}};var OrdersBatch=__webpack_require__("./app/types/OrdersBatch.ts"),Refresh=__webpack_require__("./node_modules/@mui/icons-material/esm/Refresh.js"),Box=__webpack_require__("./node_modules/@goshippo/components/esm/Box/Box.js"),actions=__webpack_require__("./node_modules/connected-react-router/esm/actions.js"),compact=__webpack_require__("./node_modules/lodash-es/compact.js"),uniq=__webpack_require__("./node_modules/lodash-es/uniq.js"),redux_saga_effects_npm_proxy_esm=__webpack_require__("./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.esm.js"),addSnackbarMessage=function(payload){return{payload:{i18n:payload.i18n||!1,i18nValues:payload.i18nValues,message:payload.message,severity:payload.severity},type:constants.t.SNACKBAR_ADD_MESSAGE}},address_service=__webpack_require__("./app/services/address.service.ts"),APIAddress=__webpack_require__("./app/types/APIAddress.ts"),store_connect_actions=__webpack_require__("./app/pages/StoreConnections/store/store-connect.actions.ts");(0,redux_saga_effects_npm_proxy_esm.jP)(store_connect_actions.U.START_STORE_CONNECT,(function startStoreConnection(action){var url;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return 0!==(url=action.payload.storeSelection.connectLink).indexOf("/")?[3,2]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)({pathname:url,search:""}))];case 1:return _a.sent(),[3,3];case 2:window.location.href=url,_a.label=3;case 3:return[2]}}))}));var getAuthorizedApps=function(){return services_api.Ay.request({method:"GET",url:"/ui/oauth/authorized_client_apps"})},deleteAuthorizedApps=function(id){return services_api.Ay.request({method:"DELETE",url:"/ui/oauth/authorized_client_apps/".concat(id)})},camelize=function(string){return obj=string,(obj-=0)==obj?string:(string=string.replace(/[-_\s]+(.)?/g,(function(_match,chr){return chr?chr.toUpperCase():""}))).substr(0,1).toLowerCase()+string.substr(1);var obj},decamelize=function(string,options){return function(string,options){var separator=(options=options||{}).separator||"_",split=options.split||/(?=[A-Z])/;return string.split(split).join(separator)}(string,options).toLowerCase()},_processKeys=function(convert,obj,options){if(!function(obj){return obj===Object(obj)}(obj)||function(obj){return"[object Date]"===toString.call(obj)}(obj)||function(obj){return"[object RegExp]"===toString.call(obj)}(obj)||function(obj){return"[object Boolean]"===toString.call(obj)}(obj)||function(obj){return"function"==typeof obj}(obj))return obj;var output,i=0,l=0;if(function(obj){return"[object Array]"===toString.call(obj)}(obj))for(output=[],l=obj.length;i<l;i++)output.push(_processKeys(convert,obj[i],options));else for(var key in output={},obj)Object.prototype.hasOwnProperty.call(obj,key)&&(output[convert(key,options)]=_processKeys(convert,obj[key],options));return output},_processor=function(convert,options){var callback=options&&"process"in options?options.process:options;return"function"!=typeof callback?convert:function(string,options){return callback(string,convert,options)}},camelizeKeys=function(object,options){return _processKeys(_processor(camelize,options),object,options)},decamelizeKeys=function(object,options){return _processKeys(_processor(decamelize,options),object,options)};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_APPS,(function apps_saga_getAuthorizedApps(action){var response,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getAuthorizedApps)];case 1:return response=_a.sent(),action.callback(camelizeKeys(response.data)),[3,3];case 2:return err_1=_a.sent(),action.callback({err:err_1}),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.DELETE_APP,(function apps_saga_deleteAuthorizedApps(action){var response,err_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(deleteAuthorizedApps,action.id)];case 1:return response=_a.sent(),action.callback(camelizeKeys(response.data)),[3,3];case 2:return err_2=_a.sent(),action.callback({err:err_2}),[3,3];case 3:return[2]}}))}));var js_cookie=__webpack_require__("./node_modules/js-cookie/src/js.cookie.js"),auth_actions=__webpack_require__("./app/actions/auth.actions.ts"),onboarding=__webpack_require__("./app/constants/onboarding.ts"),utils_onboarding=__webpack_require__("./app/pages/Onboarding/utils/onboarding.ts"),EmbeddableAuth=__webpack_require__("./app/pages/common/EmbeddableAuth/index.ts"),register=function(payload){return services_api.Sg.request({data:payload,headers:{},method:"POST",url:"register/"})},resendVerification=function(){return services_api.YZ.request({method:"GET",url:"/verify/resend/"})},toJSON=function(registerUser){var _a,_b,marketing={};registerUser.marketing&&(marketing={attribution_snippet:registerUser.marketing.attributionSnippet,campaign:registerUser.marketing.campaign,campaign_content:registerUser.marketing.campaignContent,campaign_term:registerUser.marketing.campaignTerm,http_referrer:registerUser.marketing.httpReferrer,medium:registerUser.marketing.medium,ps_partner_key:registerUser.marketing.psPartnerKey,ps_xid:registerUser.marketing.psXid,raw_http_referrer:registerUser.marketing.rawHttpReferrer,raw_query_string:registerUser.marketing.rawQueryString,reg_method:registerUser.marketing.regMethod,sh_ad1:registerUser.marketing.shAd1,sh_ad2:registerUser.marketing.shAd2,sh_ad3:registerUser.marketing.shAd3,sh_ad4:registerUser.marketing.shAd4,sh_device:registerUser.marketing.shDevice,sh_matchtype:registerUser.marketing.shMatchtype,source:registerUser.marketing.source,usps_referral_key:registerUser.marketing.uspsReferralKey});var userTracking={};registerUser.userTracking&&(userTracking={tracker_sessionid:registerUser.userTracking.tracker_sessionid});var context={};return registerUser.context&&(context={cycle:registerUser.context.cycle,feature_test_variant_name:registerUser.context.featureTestVariantName,fixed_fee_waived_until:registerUser.context.fixedFeeWaivedUntil,lang:registerUser.context.lang,locale:registerUser.context.locale,next:registerUser.context.next,plan:registerUser.context.plan,pricing_test_variant:registerUser.context.pricingTestVariant,tier:registerUser.context.tier}),{context:(0,tslib_es6.Cl)({},context),marketing:(0,tslib_es6.Cl)({},marketing),user:{company:registerUser.user.companyName,email:registerUser.user.email,first_name:registerUser.user.firstName,g_recaptcha_response:registerUser.user.gRecaptchaResponse,last_name:registerUser.user.lastName,password:registerUser.user.password,phone:registerUser.user.phone,terms:{shippo:null===(_a=registerUser.user.terms)||void 0===_a?void 0:_a.shippo,ups_technology:null===(_b=registerUser.user.terms)||void 0===_b?void 0:_b.upsTechnology}},user_tracking:(0,tslib_es6.Cl)({},userTracking)}},local_storage=__webpack_require__("./app/utils/local-storage.ts"),SUBDOMAIN_WHITELIST=["lets","get","track"],setCookie=function setCookie(cookie,value,expires){var parsedCurrentURL=parseURL(window.location.href);void 0===expires&&(expires=new Date).setDate(expires.getDate()+60);var cookieString=cookie+"="+value+"; domain="+parsedCurrentURL.domain+".com; path=/; expires="+expires.toUTCString();document.cookie=cookieString},parseURL=function parseURL(url){var hostname="",parsedURL={};if(function isURLSupported(){try{var u=new __webpack_require__.g.URL("b","http://a");return u.pathname="c d","http://a/c%20d"===u.href&&u.searchParams}catch(e){return!1}}()){hostname=new URL(url).hostname}else{var a=document.createElement("a");a.href=url,hostname=a.hostname}var splitHostname=hostname.replace("www.","").split(".");return 3===splitHostname.length?(parsedURL.subdomain=splitHostname[0],parsedURL.domain=splitHostname[1]):(parsedURL.subdomain=null,parsedURL.domain=splitHostname[0]),parsedURL},isOffDomain=function isOffDomain(domain){return domain!==parseURL(window.location.href).domain},setAttributionCookie=function setAttributionCookie(){var results=function getUpdatedSourceAttributionObject(queryString,storedValues){var utmParameters=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","sh_device","sh_matchtype"],newValues={},wasUpdated=!1,queryStringkeys=Object.keys(queryString);if(queryStringkeys.length>0){var URLHasUTMParameters=function arrayIntersects(firstArray,secondArray){return secondArray.some((function(v){return firstArray.indexOf(v)>=0}))}(queryStringkeys,utmParameters),referrerCode=function getReferrerCodeFromQS(QS){return QS.rsCode||QS.gclid||QS.msclkid||QS.sh_cl||null}(queryString);wasUpdated=!0,URLHasUTMParameters?utmParameters.forEach((function(tag){queryString[tag]&&(newValues[tag]=queryString[tag])})):utmParameters.forEach((function(tag){storedValues[tag]&&(newValues[tag]=storedValues[tag])})),["sh_ad1","sh_ad2","sh_ad3","sh_ad4"].forEach((function(tag){(queryString[tag]||storedValues[tag])&&(newValues[tag]=queryString[tag]||storedValues[tag])})),referrerCode?newValues.attribution_snippet=referrerCode:storedValues.attribution_snippet&&(newValues.attribution_snippet=storedValues.attribution_snippet)}else newValues=storedValues;if(storedValues.http_referrer)newValues.http_referrer=storedValues.http_referrer;else{var referrerURL=document.referrer;if(referrerURL){var parsedReferrerURL=parseURL(referrerURL);(isOffDomain(parsedReferrerURL.domain)||!isOffDomain(parsedReferrerURL.domain)&&SUBDOMAIN_WHITELIST.indexOf(parsedReferrerURL.subdomain)>-1)&&(newValues.http_referrer=referrerURL,wasUpdated=!0)}}return{newValues,wasUpdated}}(function getQueryString(){var keyValuePairs=window.location.search.slice(1).split("&"),queryString={};return keyValuePairs.forEach((function(pair){(pair=pair.split("=")).length&&2===pair.length&&(queryString[pair[0]]=decodeURIComponent(pair[1]||""))})),queryString}(),function getCookie(cookieName){var name=cookieName+"=",cookieArray=document.cookie.split(";"),cookieString=null;if(cookieArray.forEach((function(cookie){(cookie=cookie.replace(/^\s+|\s+$/g,"")).indexOf(name)>-1&&(cookieString=cookie.substring(name.length,cookie.length))})),null!==cookieString)try{return JSON.parse(decodeURIComponent(cookieString))}catch(e){return{}}return{}}("shippoUTM"));results.wasUpdated&&setCookie("shippoUTM",encodeURIComponent(JSON.stringify(results.newValues)))};setAttributionCookie();__webpack_require__("./node_modules/querystring/index.js");var extractMarketingPayloadFromCookie=function(cookie){return{attributionSnippet:cookie.attribution_snippet||"",campaign:cookie.utm_campaign||"",campaignContent:cookie.utm_content||"",campaignTerm:cookie.utm_term||"",httpReferrer:cookie.http_referrer||"",medium:cookie.utm_medium||"",rawHttpReferrer:document.referrer,rawQueryString:document.location?document.location.search:void 0,shAd1:cookie.sh_ad1||"",shAd2:cookie.sh_ad2||"",shAd3:cookie.sh_ad3||"",shAd4:cookie.sh_ad4||"",shDevice:cookie.sh_device||"",shMatchtype:cookie.sh_matchtype||"",source:cookie.utm_source||""}};var getStartingPricePlan=function(QS){var pricePlan={};return["plan","tier","cycle","variant"].forEach((function(tag){var qsValue=QS[tag];qsValue&&("variant"===tag?pricePlan.pricingTestVariant=qsValue:pricePlan[tag]=qsValue)})),pricePlan},withDefaultValue=function(value,defaultValue){return value&&""!==value?value:defaultValue},marketoSubmit=function(user,marketingPayload,context){if(window.MktoForms2){var mktoForm=window.MktoForms2.getForm(1194);if(mktoForm){var email=user.email,firstName=user.firstName,lastName=user.lastName,campaign=withDefaultValue(marketingPayload.campaign,"none"),medium=withDefaultValue(marketingPayload.medium,"none"),source=withDefaultValue(marketingPayload.source,"none"),campaignTerm=withDefaultValue(marketingPayload.campaignTerm,"none");return mktoForm.addHiddenFields({Email:email,FirstName:firstName,LastName:lastName,Shipping_Volume_Per_Month__c:null==context?void 0:context.monthlyShippingVolume,eNV:"production",fTutmcontent:"shippo_sign_up",fTutmterm:campaignTerm,ft_utm_campaign:campaign,ft_utm_medium:medium,ft_utm_source:source,utm_campaign:campaign,utm_content:"shippo_sign_up",utm_medium:medium,utm_source:source,utm_term:campaignTerm}),new Promise((function(resolve){var timeoutId=setTimeout(resolve,1e3);mktoForm.onSuccess((function(){clearTimeout(timeoutId),resolve()})).submit()}))}}};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.REGISTER,(function auth_saga_register(action){var UTMCookies,QS,pricePlan,marketingPayload,embeddableUser,trackerSessionId,trackingPayload,newPayload,response,hasAuthenticatedBefore,error_1,nextUrl,absolute,hasPurchasedLabel,properties,err_1,error,errorMap,_a,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,18,,23]),(UTMCookies=js_cookie.getJSON("shippoUTM"))||(setAttributionCookie(),UTMCookies=js_cookie.getJSON("shippoUTM")),UTMCookies=UTMCookies||{},[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(getParsedQS)];case 1:return QS=_c.sent(),pricePlan=getStartingPricePlan(QS),marketingPayload=extractMarketingPayloadFromCookie(UTMCookies),embeddableUser=(0,EmbeddableAuth.jY)(),trackerSessionId=js_cookie.get("tracker_sessionid")||"",trackingPayload={tracker_sessionid:trackerSessionId},newPayload=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},action.payload),{context:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({fixedFeeWaivedUntil:QS.fixed_fee_waived_until,lang:QS.lang,locale:(0,locale.JK)(),next:QS.next||""},action.payload.context),pricePlan),marketing:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({psPartnerKey:js_cookie.get("ps_partner_key")||"",psXid:js_cookie.get("ps_xid")||"",regMethod:embeddableUser?"embeddable":"web-responsive-3",uspsReferralKey:QS.usps_referral_key||""},action.payload.marketing),marketingPayload),userTracking:(0,tslib_es6.Cl)({},trackingPayload)}),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(register,toJSON(newPayload))];case 2:return response=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(js_cookie.set,"jwt",response.data.jwt,{domain:".shippodev.com"})];case 3:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(js_cookie.set,"is_logged_in","true",{domain:".shippodev.com"})];case 4:return _c.sent(),hasAuthenticatedBefore=!!getCookie("copy"),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(js_cookie.set,"copy",response.data.jwt,{domain:".shippodev.com"})];case 5:_c.sent(),_c.label=6;case 6:return _c.trys.push([6,9,,10]),function(_a){return _a.user,!0}(action.payload)?[3,8]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(marketoSubmit,action.payload.user,marketingPayload,action.payload.context)];case 7:_c.sent(),_c.label=8;case 8:return[3,10];case 9:return error_1=_c.sent(),newRelic_newRelic.S.noticeError("Failed to submit Marketo form",{error:error_1}),[3,10];case 10:return nextUrl=void 0,!action.next||newPayload.context&&"professional"===newPayload.context.plan?nextUrl="/user/":(absolute=new RegExp(/^https?:\/\//i),nextUrl=absolute.test(action.next)?action.next:"https://dev-qa.shippodev.com"+action.next),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(auth_actions.Jj(response.data.session_token,nextUrl))];case 11:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(js_cookie.set,"user_register_success","true",{domain:".shippodev.com"})];case 12:return _c.sent(),embeddableUser?[3,14]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(local_storage.r,onboarding.k.SHOULD_ONBOARD,"true")];case 13:_c.sent(),_c.label=14;case 14:return hasPurchasedLabel="true"===getCookie("customer"),properties={"User Type":hasPurchasedLabel?"Sketchy Bad Agent?":hasAuthenticatedBefore?"Return Visitor":"First Time Visitor","Visit Type":"Registration"},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.R)(properties))];case 15:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("Account Created"))];case 16:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(auth_actions.BP())];case 17:return _c.sent(),[3,23];case 18:return(err_1=_c.sent())?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils_onboarding.U_,!1)]:[3,22];case 19:return _c.sent(),error=null===(_a=null==err_1?void 0:err_1.response)||void 0===_a?void 0:_a.data,errorMap={email:null==error?void 0:error.email,errorMessage:error.error||err_1.toJSON&&(null===(_b=err_1.toJSON())||void 0===_b?void 0:_b.message),firstName:null==error?void 0:error.first_name,lastName:null==error?void 0:error.last_name,password:null==error?void 0:error.password},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(auth_actions.MA(errorMap))];case 20:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.lM)("join",errorMap))];case 21:_c.sent(),_c.label=22;case 22:return[3,23];case 23:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RESEND_VERIFICATION,(function auth_saga_resendVerification(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,5,,8]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(resendVerification)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(auth_actions.oT())];case 2:return _a.sent(),action.payload.withRedirect?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)({pathname:"/resend_verification/success"}))]:[3,4];case 3:_a.sent(),_a.label=4;case 4:return[3,8];case 5:return _a.sent()?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(auth_actions.jb({errorMessage:"Unable to process your request. Please try again later."}))]:[3,7];case 6:_a.sent(),_a.label=7;case 7:return[3,8];case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.REGISTER_ERROR,(function clearRegisterError(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.cb)(2e3)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(auth_actions.I0())];case 2:return _a.sent(),[2]}}))}));var fetchBusinessRules=function(){return{type:constants.t.FETCH_BUSINESS_RULES}},fetchBusinessRulesSuccess=function(payload){return{payload,type:constants.t.FETCH_BUSINESS_RULES_SUCCESS}},fetchBusinessRulesError=function(payload){return{payload,type:constants.t.FETCH_BUSINESS_RULES_ERROR}},setRuleError=function(error){return{payload:{error},type:constants.t.AUTOMATIONS_SET_RULE_ERROR}},reorderRulesSuccess=function(rules){return{payload:{rules},type:constants.t.AUTOMATIONS_REORDER_RULES_SUCCESS}},startRuleReprocessStatusPolling=function(){return{type:constants.t.AUTOMATIONS_REPROCESS_RULES_POLL_START}},stopRuleReprocessStatusPolling=function(){return{type:constants.t.AUTOMATIONS_REPROCESS_RULES_POLL_END}},updateRuleReprocessStatus=function(status){return{payload:{status},type:constants.t.AUTOMATIONS_UPDATE_REPROCESS_STATUS}},rules=__webpack_require__("./app/constants/rules.ts"),getAllServiceLevels=function(){return services_api.Ay.request({method:"GET",params:{use_database:!0},url:"/api_account/service_levels"})},ProviderAccount_fromJSON=function(jsonProviderAccounts){return jsonProviderAccounts.sort((function(a,b){return(null==a?void 0:a.provider_name)&&(null==b?void 0:b.provider_name)?a.provider_name.localeCompare(b.provider_name):0})).map((function(jsonProviderAccount){var e_1,_a,serviceLevelsByToken={};try{for(var _b=(0,tslib_es6.Ju)(jsonProviderAccount.service_levels),_c=_b.next();!_c.done;_c=_b.next()){var serviceLevel=_c.value;serviceLevelsByToken[serviceLevel.token]=serviceLevel}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}var allServiceLevels=jsonProviderAccount.service_levels.sort((function(a,b){return(null==a?void 0:a.name)&&(null==b?void 0:b.name)?a.name.localeCompare(b.name):0})).map((function(serviceLevel){return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},serviceLevel),{provider_image_75:jsonProviderAccount.provider_image_75,provider_image_200:jsonProviderAccount.provider_image_200,provider_name:jsonProviderAccount.provider_name})})),serviceLevels=allServiceLevels.filter((function(serviceLevel){return!(null==serviceLevel?void 0:serviceLevel.parent_servicelevel)})),visibleServiceLevels=serviceLevels.filter((function(serviceLevel){return!(null==serviceLevel?void 0:serviceLevel.is_hidden)}));return{allServiceLevels,isManifestable:jsonProviderAccount.is_manifestable,isShippoAccount:jsonProviderAccount.is_shippo_account,isTest:jsonProviderAccount.is_test,nickname:jsonProviderAccount.nickname,objectId:jsonProviderAccount.object_id,providerImage75:jsonProviderAccount.provider_image_75,providerImage200:jsonProviderAccount.provider_image_200,providerName:jsonProviderAccount.provider_name,providerToken:jsonProviderAccount.provider_token,serviceLevels,serviceLevelsByToken,visibleServiceLevels}}))};function providers_saga_fetchServiceLevelsByAccount(){var response,accounts,_a,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,4,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getAllServiceLevels)];case 1:return response=_c.sent(),accounts=ProviderAccount_fromJSON(null!==(_b=null===(_a=response.data)||void 0===_a?void 0:_a.results)&&void 0!==_b?_b:[]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchServiceLevelsByAccountSuccess(accounts))];case 2:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(retryAutoSelectRates())];case 3:case 5:return _c.sent(),[3,6];case 4:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchServiceLevelsByAccountError("settings:automations:serviceLevelRetrievalError"))];case 6:return[2]}}))}(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.FETCH_SERVICE_LEVELS_BY_ACCOUNT,providers_saga_fetchServiceLevelsByAccount);var getBusinessRules=function(){return services_api.YZ.request({method:"GET",url:"setting/rules/"})},automations_service_deleteRule=function(ruleId){return services_api.YZ.request({method:"DELETE",url:"setting/rules/".concat(ruleId,"/")})},updateRule=function(payload){return services_api.YZ.request({data:payload,method:"PUT",url:"setting/rules/"})},automations_service_createRule=function(payload){return services_api.YZ.request({data:payload,method:"POST",url:"setting/rules/"})},automations_service_reorderRules=function(payload){return services_api.YZ.request({data:payload,method:"PUT",url:"setting/rules/reorder/"})},automations_service_reprocessRules=function(){return services_api.YZ.request({method:"POST",url:"setting/rules/reprocess/"})},automations_service_getRuleReprocessStatus=function(){return services_api.YZ.request({method:"GET",url:"setting/rules/reprocess/"})},filterGroupToJSON=function(filterGroup){var filterCriteria=filterGroup.filterCriteria;return{filter_criteria:filterCriteriaToJSON(filterCriteria)}},filterCriteriaToJSON=function(filterCriteria){return filterCriteria.map((function(filterCriterion){return filterCriterion.operator?filterClauseToJSON(filterCriterion):filterCriterion}))},filterClauseToJSON=function(filterClause){var filterCriteria=filterClause.filterCriteria,operator=filterClause.operator;return{filter_criteria:filterCriteriaToJSON(filterCriteria),operator}},AutomationRuleError=__webpack_require__("./app/types/AutomationRuleError.ts");var worker=null;function ruleReprocessStatusWorker(){var result,status_2,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:0,_b.label=1;case 1:return _b.trys.push([1,10,,13]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(automations_service_getRuleReprocessStatus)];case 2:return result=_b.sent(),status_2=null===(_a=null==result?void 0:result.data)||void 0===_a?void 0:_a.status,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(updateRuleReprocessStatus(status_2||""))];case 3:return _b.sent(),status_2?[3,5]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stopRuleReprocessStatusPolling())];case 4:return _b.sent(),[3,9];case 5:return(0,businessRules.Sx)(status_2)?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stopRuleReprocessStatusPolling())]:[3,7];case 6:return _b.sent(),[3,9];case 7:return[4,(0,redux_saga_effects_npm_proxy_esm.cb)(rules.pr)];case 8:_b.sent(),_b.label=9;case 9:return[3,13];case 10:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(updateRuleReprocessStatus(rules.ri.error))];case 11:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stopRuleReprocessStatusPolling())];case 12:return _b.sent(),[3,13];case 13:return[3,0];case 14:return[2]}}))}function ruleReprocessStatusPollRace(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.O4)({cancel:(0,redux_saga_effects_npm_proxy_esm.s)([constants.t.AUTOMATIONS_REPROCESS_RULES_POLL_END]),task:(0,redux_saga_effects_npm_proxy_esm.T1)(ruleReprocessStatusWorker),timeout:(0,redux_saga_effects_npm_proxy_esm.cb)(rules.Bz,!0)})];case 1:return _a.sent().timeout?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(updateRuleReprocessStatus(rules.ri.error))]:[3,4];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stopRuleReprocessStatusPolling())];case 3:_a.sent(),_a.label=4;case 4:return worker=null,[2]}}))}(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_BUSINESS_RULES,(function automations_sagas_fetchBusinessRules(){var getResponse,err_1,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getBusinessRules)];case 1:return getResponse=_a.sent(),payload=(0,businessRules.rJ)(getResponse.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchBusinessRulesSuccess(payload))];case 2:case 4:return _a.sent(),[3,5];case 3:return err_1=_a.sent(),payload={errorMessage:err_1.message},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchBusinessRulesError(payload))];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.AUTOMATIONS_DELETE_RULE,(function deleteBusinessRule(action){var err_4;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,4,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(automations_service_deleteRule,action.payload.ruleId)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.AUTOMATIONS_DELETE_RULE_SUCCESS})];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchBusinessRules())];case 3:case 5:return _a.sent(),[3,6];case 4:return err_4=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((errorMessage=err_4.message,{payload:{errorMessage},type:constants.t.AUTOMATIONS_DELETE_RULE_ERROR}))];case 6:return[2]}var errorMessage}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.AUTOMATIONS_CREATE_RULE,(function createBusinessRule(action){var payload,err_5,response,error;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,13,,20]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.De)(constants_form.XP))];case 1:return _a.sent(),(payload=function(rule){if(!rule)return null;var accountObjectId=rule.accountObjectId,description=rule.description,filterGroup=rule.filterGroup,name=rule.name,objectId=rule.objectId,parcelTemplateId=rule.parcelTemplateId,ruleType=rule.ruleType,senderAddressId=rule.senderAddressId,serviceLevelToken=rule.serviceLevelToken,tagId=rule.tagId;return{account_object_id:accountObjectId||null,description:description||null,filter_group:filterGroupToJSON(filterGroup),name,object_id:objectId||null,parcel_template_object_id:parcelTemplateId,rule_type:ruleType,sender_address_id:senderAddressId||null,service_level_token:serviceLevelToken||null,tag_id:tagId||null}}(action.payload.ruleFormData))&&payload.object_id?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(updateRule,payload)]:[3,3];case 2:return _a.sent(),[3,5];case 3:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(automations_service_createRule,payload)];case 4:_a.sent(),_a.label=5;case 5:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.lM)(constants_form.XP))];case 6:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.AUTOMATIONS_CREATE_RULE_SUCCESS})];case 7:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.Wv)(constants_form.XP))];case 8:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.AUTOMATIONS_CLOSE_ADD_RULE_MODAL})];case 9:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(setRuleError(AutomationRuleError.U))];case 10:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(providers_saga_fetchServiceLevelsByAccount)];case 11:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchBusinessRules())];case 12:return _a.sent(),[3,20];case 13:return err_5=_a.sent(),(response=err_5.response)||!axios_default().isAxiosError(err_5)?[3,15]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(setRuleError({kind:"GENERIC_ERROR"}))];case 14:_a.sent(),_a.label=15;case 15:return response?(error=AutomationRuleError.r(response),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(setRuleError(error))]):[3,19];case 16:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.lM)(constants_form.XP))];case 17:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.uj)(constants_form.XP))];case 18:_a.sent(),_a.label=19;case 19:return[3,20];case 20:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.AUTOMATIONS_REORDER_RULES,(function automations_sagas_reorderRules(action){var payload,err_6;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),payload={rules:(0,businessRules._h)(action.payload.rules)},[4,(0,redux_saga_effects_npm_proxy_esm.T1)(automations_service_reorderRules,payload)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(reorderRulesSuccess(action.payload.rules))];case 2:case 4:return _a.sent(),[3,5];case 3:return err_6=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((errorMessage=err_6.message,{payload:{errorMessage},type:constants.t.AUTOMATIONS_REORDER_RULES_ERROR}))];case 5:return[2]}var errorMessage}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.AUTOMATIONS_REPROCESS_RULES,(function startRuleReprocessing(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,5,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(automations_service_reprocessRules)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.AUTOMATIONS_RESET_RULE_REPROCESS_PENDING_NOTIF})];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.AUTOMATIONS_RESET_RULE_REPROCESS_COMPLETE_NOTIF})];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(startRuleReprocessStatusPolling())];case 4:return _a.sent(),[3,6];case 5:return _a.sent(),[3,6];case 6:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.AUTOMATIONS_GET_REPROCESS_STATUS,(function getRuleReprocessingStatus(){var result,status_1,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,4,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(automations_service_getRuleReprocessStatus)];case 1:return result=_b.sent(),status_1=null===(_a=null==result?void 0:result.data)||void 0===_a?void 0:_a.status,(0,businessRules.Sx)(status_1)?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(startRuleReprocessStatusPolling())];case 2:_b.sent(),_b.label=3;case 3:return[3,5];case 4:return _b.sent(),[3,5];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.AUTOMATIONS_UPDATE_REPROCESS_STATUS,(function autoCloseRuleReprocessingCompleteNotification(action){var newStatus;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,4,,5]),newStatus=action.payload.status,(0,businessRules.Sx)(newStatus)?[4,(0,redux_saga_effects_npm_proxy_esm.cb)(6e3)]:[3,3];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.AUTOMATIONS_CLOSE_RULE_REPROCESS_COMPLETE_NOTIF})];case 2:_a.sent(),_a.label=3;case 3:return[3,5];case 4:return _a.sent(),[3,5];case 5:return[2]}}))})),function ruleReprocessStatusPollWatcher(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.s)([constants.t.AUTOMATIONS_REPROCESS_RULES_POLL_START])];case 1:return _a.sent(),worker?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.Zy)(ruleReprocessStatusPollRace)];case 2:worker=_a.sent(),_a.label=3;case 3:return[3,0];case 4:return[2]}}))}();(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_FETCH_SUCCESS,(function billingCloseCreditCardModal(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.BILLING_CLOSE_CREDIT_CARD_MODAL})];case 1:return _a.sent(),[2]}}))}));var keyBy=__webpack_require__("./node_modules/lodash-es/keyBy.js"),CONNECTED_STORE_SUCCESS="CONNECTED_STORE_SUCCESS",FIRST_STORE_CONNECTED="FIRST_STORE_CONNECTED";(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_CARRIER_ACCOUNTS,(function carrier_accounts_saga_fetchCarrierAccounts(payload){var response,carrierAccountsResponse,accountCarriers,carrierProvidersResponse,carriersExtraFields,carriersMap_1,carrierAccounts,parsedCarrierAccounts,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,4,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(carrier_accounts_service_getCarrierAccounts,payload.payload)];case 1:return response=_a.sent(),carrierAccountsResponse=response.data.results.map(CarrierAccount.rS),accountCarriers=carrierAccountsResponse.filter((function(account){return!!account.carrier})).map((function(account){var _a;return null===(_a=account.carrier)||void 0===_a?void 0:_a.providerToken})),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getCarrierProviders,accountCarriers)];case 2:return carrierProvidersResponse=_a.sent(),carriersExtraFields=carrierProvidersResponse.data.results.carriers.map(Carrier.O),carriersMap_1=(0,keyBy.A)(carriersExtraFields,"providerToken"),carrierAccounts=carrierAccountsResponse.filter((function(account){return account.carrier})).map((function(account){return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},account),{carrier:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},account.carrier),carriersMap_1[account.carrier.providerToken])})})),parsedCarrierAccounts={carrierAccounts},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchCarrierAccountsSuccess(parsedCarrierAccounts))];case 3:case 5:return _a.sent(),[3,6];case 4:return err_1=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchCarrierAccountsError({error:err_1.message}))];case 6:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CONNECT_CARRIER_ACCOUNT,(function carrier_accounts_saga_connectCarrierAccount(action){var trackingReference,jsonCarrierAccount,carriers,response,carrierAccount,err_3,errorMessage,responseData,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:trackingReference=action.payload.trackingReference,_b.label=1;case 1:return _b.trys.push([1,9,,11]),jsonCarrierAccount=CarrierAccount.U2(action.payload.carrierAccount),[4,selectState(carrier_accounts_selectors.sp)];case 2:return carriers=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(connectCarrierAccount,jsonCarrierAccount)];case 3:return response=_b.sent(),(0,utils.A9)(trackingReference,response),carrierAccount=CarrierAccount.rS(response.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(connectCarrierAccountSuccess({carrierAccount}))];case 4:return _b.sent(),0!==carriers.length?[3,7]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({eventName:"SET_FIRST_CARRIER"}))];case 5:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("First Carrier Connect"))];case 6:_b.sent(),_b.label=7;case 7:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("Carrier Connect Success",{Carrier:carrierAccount.carrier.name}))];case 8:return _b.sent(),[3,11];case 9:return err_3=_b.sent(),axios_default().isAxiosError(err_3)&&(0,utils.dj)(trackingReference,err_3),errorMessage=void 0,err_3.response?(responseData=null===(_a=err_3.response)||void 0===_a?void 0:_a.data,errorMessage="object"==typeof responseData?Object.values(responseData).join("\n"):Array.isArray(responseData)?responseData.join("\n"):responseData):errorMessage="An error occurred. Please contact support.",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((payload={error:errorMessage},{payload,type:constants.t.CONNECT_CARRIER_ACCOUNT_ERROR}))];case 10:return _b.sent(),[3,11];case 11:return[2]}var payload}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.EDIT_CARRIER_ACCOUNT,(function carrier_accounts_saga_editCarrierAccount(action){var trackingReference,jsonCarrierAccount,response,carrierAccount,err_4,errorMessage,responseData,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:trackingReference=action.payload.trackingReference,_b.label=1;case 1:return _b.trys.push([1,4,,6]),jsonCarrierAccount=CarrierAccount.U2(action.payload.carrierAccount),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(editCarrierAccount,jsonCarrierAccount,action.payload.id)];case 2:return response=_b.sent(),carrierAccount=CarrierAccount.rS(response.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(editCarrierAccountSuccess({carrierAccount}))];case 3:return _b.sent(),(0,utils.A9)(trackingReference,response),[3,6];case 4:return err_4=_b.sent(),axios_default().isAxiosError(err_4)&&(0,utils.dj)(trackingReference,err_4),errorMessage=void 0,err_4.response?(responseData=null===(_a=err_4.response)||void 0===_a?void 0:_a.data,errorMessage="object"==typeof responseData?Object.values(responseData).join("\n"):Array.isArray(responseData)?responseData.join("\n"):responseData):errorMessage="An error occurred. Please contact support.",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((payload={error:errorMessage},{payload,type:constants.t.EDIT_CARRIER_ACCOUNT_ERROR}))];case 5:return _b.sent(),[3,6];case 6:return[2]}var payload}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.EDIT_CARRIER_ACCOUNT_SERVICE_LEVELS,(function carrier_accounts_saga_editCarrierAccountServiceLevels(action){var trackingReference,response,err_5,errors,responseData,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:trackingReference=action.payload.trackingReference,_b.label=1;case 1:return _b.trys.push([1,6,,8]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(editCarrierAccountServiceLevels,action.payload.serviceLevelsPayload,action.payload.id)];case 2:return response=_b.sent(),(0,utils.A9)(trackingReference,response),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(providers_saga_fetchServiceLevelsByAccount)];case 3:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((payload={status:response.status},{payload,type:constants.t.EDIT_CARRIER_ACCOUNT_SERVICE_LEVELS_SUCCESS}))];case 4:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(carrier_accounts_actions_editCarrierAccount({carrierAccount:action.payload.carrierAccount,id:action.payload.id,trackingReference}))];case 5:return _b.sent(),[3,8];case 6:return err_5=_b.sent(),axios_default().isAxiosError(err_5)&&(0,utils.dj)(trackingReference,err_5),errors=void 0,err_5.response&&(responseData=null===(_a=err_5.response)||void 0===_a?void 0:_a.data,errors=responseData.errors||[],responseData.error&&(errors=[responseData.error])),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(editCarrierAccountServiceLevelsError(errors))];case 7:return _b.sent(),[3,8];case 8:return[2]}var payload}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CREATE_CARRIER_ACCOUNT,(function carrier_accounts_saga_createCarrierAccount(action){var trackingReference,response,jsonCreateCarrierAccount,jsonCarrierAccount,carrierAccount,err_2,errorMessage,responseData,_b,_c;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:trackingReference=action.payload.trackingReference,_d.label=1;case 1:return _d.trys.push([1,16,,18]),response=void 0,carriers.L5.includes(action.payload.carrierAccount.carrier.id)||(null===(_b=action.payload.carrierAccount.parameters)||void 0===_b?void 0:_b.isMasterAccount)?(jsonCreateCarrierAccount=CarrierAccount.Ch(action.payload.carrierAccount),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(carrier_accounts_service_createCarrierAccount,jsonCreateCarrierAccount)]):[3,3];case 2:return response=_d.sent(),[3,5];case 3:return jsonCarrierAccount=CarrierAccount.U2(action.payload.carrierAccount),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(connectCarrierAccount,jsonCarrierAccount)];case 4:response=_d.sent(),_d.label=5;case 5:return(0,utils.A9)(trackingReference,response),carrierAccount=CarrierAccount.rS(response.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((payload={carrierAccount,trackingReference},{payload,type:constants.t.CREATE_CARRIER_ACCOUNT_SUCCESS}))];case 6:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("CARRIER_REGISTRATION_SUCCESS",{Carrier:carrierAccount.carrier.name}))];case 7:if(_d.sent(),!carrierAccount.carrier||!carrierAccount.isShippoAccount)return[3,15];switch(carrierAccount.carrier){case carriers.$5:return[3,8];case carriers.i3:return[3,10];case carriers.y6:return[3,12]}return[3,14];case 8:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("UPS_MASTER_REGISTRATION_SUCCESS"))];case 9:return _d.sent(),[3,15];case 10:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("CANADA_POST_MASTER_REGISTRATION_SUCCESS"))];case 11:return _d.sent(),[3,15];case 12:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("DHL_EXPRESS_MASTER_REGISTRATION_SUCCESS"))];case 13:return _d.sent(),[3,15];case 14:return[3,15];case 15:return[3,18];case 16:return err_2=_d.sent(),axios_default().isAxiosError(err_2)&&(0,utils.dj)(trackingReference,err_2),errorMessage=void 0,err_2&&err_2.response?(responseData=null===(_c=err_2.response)||void 0===_c?void 0:_c.data,errorMessage="object"==typeof responseData?Object.values(responseData).join("\n"):Array.isArray(responseData)?responseData.join("\n"):responseData):errorMessage="An error occurred. Please contact support.",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(createCarrierAccountError({error:errorMessage}))];case 17:return _d.sent(),[3,18];case 18:return[2]}var payload}))})),(0,redux_saga_effects_npm_proxy_esm.p8)([constants.t.FETCH_CARRIER_ACCOUNT_REG_STATUSES,constants.t.CREATE_CARRIER_ACCOUNT_SUCCESS,constants.t.CREATE_CARRIER_ACCOUNT_ERROR],(function carrier_accounts_saga_fetchCarrierAccountRegStatuses(){var response,carrierAccountRegStatuses,err_6;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(carrier_accounts_service_fetchCarrierAccountRegStatuses)];case 1:return response=_a.sent(),carrierAccountRegStatuses=response.data.results.map((function(regStatus){return CarrierAccountRegStatus.r(regStatus)})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((payload={carrierAccountRegStatuses},{payload,type:constants.t.FETCH_CARRIER_ACCOUNT_REG_STATUSES_SUCCESS}))];case 2:case 4:return _a.sent(),[3,5];case 3:return err_6=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchCarrierAccountRegStatusesError({error:err_6.message}))];case 5:return[2]}var payload}))}));var carrier_form_fields_service_fetchCarrierFormFields=function(carrier,formType){return services_api.YZ.request({data:{carrier:carrier.providerToken,form_type:formType},method:"POST",url:"/setting/carrier-params"})};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_CARRIER_FORM_FIELDS,(function carrier_form_fields_saga_fetchCarrierFormFields(action){var setValidations,response,carrierFormFields,carrierFormFieldValidations,successPayload,err_1,errorMessage;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:setValidations=function(carrierFormFields){var e_1,_a,validations={},validateIsRequired=function(value){return value?void 0:"Required"},validateMaxLength=function(max){return function(value){return value&&value.length>max?"Maximum length is ".concat(max," characters (currently ").concat(value.length,")"):void 0}},validateMinLength=function(min){return function(value){return value&&value.length<min?"Minimum length is ".concat(min," characters (currently ").concat(value.length,")"):void 0}},validateIntegerType=function(value){return value&&isNaN(Number(value))?"Must be a number":void 0};try{for(var carrierFormFields_1=(0,tslib_es6.Ju)(carrierFormFields),carrierFormFields_1_1=carrierFormFields_1.next();!carrierFormFields_1_1.done;carrierFormFields_1_1=carrierFormFields_1.next()){var parameter=carrierFormFields_1_1.value,parameterValidations=[];"integer"===parameter.fieldType&&parameterValidations.push(validateIntegerType),parameter.isRequired&&parameterValidations.push(validateIsRequired),parameter.maxLength&&parameterValidations.push(validateMaxLength(parameter.maxLength)),parameter.minLength&&parameterValidations.push(validateMinLength(parameter.minLength)),validations[parameter.key]=parameterValidations}}catch(e_1_1){e_1={error:e_1_1}}finally{try{carrierFormFields_1_1&&!carrierFormFields_1_1.done&&(_a=carrierFormFields_1.return)&&_a.call(carrierFormFields_1)}finally{if(e_1)throw e_1.error}}return validations},_a.label=1;case 1:return _a.trys.push([1,4,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(carrier_form_fields_service_fetchCarrierFormFields,action.payload.carrier,action.payload.formType)];case 2:if(response=_a.sent(),0===(carrierFormFields=response.data.params.reduce((function(results,param){var serialized=function(jsonCarrierFormField){if(!jsonCarrierFormField)return null;var serialized={defaultValue:jsonCarrierFormField.default_value,displayType:jsonCarrierFormField.display_type,fieldType:jsonCarrierFormField.field_type,helpUrl:jsonCarrierFormField.help_url,hiddenByKey:jsonCarrierFormField.hidden_by_key,hiddenByValue:jsonCarrierFormField.hidden_by_value,isRequired:jsonCarrierFormField.is_required,key:jsonCarrierFormField.key,label:jsonCarrierFormField.label,maxLength:jsonCarrierFormField.max_length,minLength:jsonCarrierFormField.min_length,options:jsonCarrierFormField.options,placeholderText:jsonCarrierFormField.placeholder_text,rank:jsonCarrierFormField.rank};return serialized.rank&&serialized.label&&serialized.key?serialized:null}(param);return serialized&&results.push(serialized),results}),[])).length)throw{response:{data:"This carrier form is currently not supported."}};return carrierFormFieldValidations=setValidations(carrierFormFields),successPayload={carrierFormFieldValidations,carrierFormFields},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((payload=successPayload,{payload,type:constants.t.FETCH_CARRIER_FORM_FIELDS_SUCCESS}))];case 3:return _a.sent(),[3,6];case 4:return err_1=_a.sent(),errorMessage=err_1.response?err_1.response.data:"An error occurred while retrieving the form. Please contact support.",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchCarrierFormFieldsError({error:errorMessage}))];case 5:return _a.sent(),[3,6];case 6:return[2]}var payload}))}));var getTrackEventName=function(formType,eventType,formName,isOnOrdersPage,isOnCarrierSettingsPage){var pageLocation="";if(isOnOrdersPage?pageLocation="Orders Page":isOnCarrierSettingsPage&&(pageLocation="Carrier Settings Page"),""===pageLocation)return"";var suffix=eventType===CarrierFormEventType.Click?"Tab":"Form",formTypeName="";formType&&""!==formType&&(formTypeName=formType.charAt(0).toUpperCase()+formType.slice(1));var trackEventString="".concat(formName," ").concat(pageLocation," - ").concat(eventType," ").concat(formTypeName," ").concat(suffix);return eventType===CarrierFormEventType.Close&&(suffix="Modal",trackEventString="".concat(formName," ").concat(pageLocation," - ").concat(eventType," ").concat(suffix)),trackEventString};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CARRIER_FORM_INPUT_EVENT,(function carrier_form_input_saga_trackCarrierFormEvent(action){var formType,eventType,formName,pathName,trackEventName;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return formType=action.formType||"",eventType=action.eventType,formName=action.formName,[4,selectState(router_selectors_getPathname)];case 1:return pathName=_a.sent(),""===(trackEventName=getTrackEventName(formType,eventType,formName,"/orders"===pathName,"/settings/carriers"===pathName))?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)(trackEventName))];case 2:_a.sent(),_a.label=3;case 3:return"true"!==js_cookie.get("ebay_ca_connect_start")||formName!==TabbedCarrierFormName.EbayCanadaPost||eventType!==CarrierFormEventType.Close&&eventType!==CarrierFormEventType.Submit||eventType!==CarrierFormEventType.Close?[3,5]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(js_cookie.remove,"ebay_ca_connect_start",{domain:".shippodev.com"})];case 4:_a.sent(),_a.label=5;case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)([constants.t.CREATE_CARRIER_ACCOUNT_SUCCESS,constants.t.CONNECT_CARRIER_ACCOUNT_SUCCESS,constants.t.CLEAR_EBAY_CANADA_CONNECT_START_COOKIE],(function removeEbayRegistrationCookie(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return"true"!==js_cookie.get("ebay_ca_connect_start")?[3,2]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(js_cookie.remove,"ebay_ca_connect_start",{domain:".shippodev.com"})];case 1:_a.sent(),_a.label=2;case 2:return[2]}}))}));var uploadCSVSuccess=function(payload){return{payload,type:constants.t.CSV_IMPORT_FILE_UPLOAD_SUCCESS}},uploadCSVError=function(errorMessage,errorTitle){return{payload:{errorMessage,errorTitle},type:constants.t.CSV_IMPORT_FILE_UPLOAD_ERROR}},fetchCSVTemplatesSuccess=function(payload){return{payload,type:constants.t.CSV_IMPORT_FETCH_TEMPLATES_SUCCESS}},fetchCSVTemplatesError=function(errorMessage,errorTitle){return{payload:{errorMessage,errorTitle},type:constants.t.CSV_IMPORT_FETCH_TEMPLATES_ERROR}},deleteCSVTemplateSuccess=function(payload){return{payload:{deletedTemplateId:payload.deletedTemplateId,templates:payload.templates},type:constants.t.CSV_IMPORT_DELETE_TEMPLATE_SUCCESS}},deleteCSVTemplateError=function(errorMessage,errorTitle){return{payload:{errorMessage,errorTitle},type:constants.t.CSV_IMPORT_DELETE_TEMPLATE_ERROR}},saveCSVTemplateError=function(errorMessage,errorTitle){return{payload:{errorMessage,errorTitle},type:constants.t.CSV_IMPORT_SAVE_TEMPLATE_ERROR}},importCSVOrdersError=function(errorMessage,errorTitle){return{payload:{errorMessage,errorTitle},type:constants.t.CSV_IMPORT_ORDERS_ERROR}},baseURL="https://dev-qa.shippodev.com",csv_import_service_uploadCSV=function(file){var formData=new FormData;return formData.append("file",file),services_api.Ay.request({baseURL,data:formData,headers:{"Content-Type":"multipart/form-data"},method:"POST",url:"user/orders/import/csv/v2/ajaxpreload/"})},getTemplates=function(){return services_api.Ay.request({baseURL,method:"GET",url:"user/orders/import/csv/v2/mapping/"})},saveTemplate=function(payload){return services_api.Ay.request({baseURL,data:payload,method:"POST",url:"user/orders/import/csv/v2/mapping/"})},deleteTemplate=function(payload){return services_api.Ay.request({baseURL:"https://service-dev-qa.shippodev.com",data:payload,method:"DELETE",url:"user/orders/import/csv/v2/mapping/"})},importCSVOrders=function(payload){return services_api.Ay.request({baseURL,data:payload,method:"POST",url:"user/orders/import/csv/v2/"})},user_service=__webpack_require__("./app/services/user.service.ts"),fieldMappingFromJSON=function(jsonFieldMapping){return{colIdx:jsonFieldMapping.col_idx,colName:jsonFieldMapping.col_name,field:(jsonField=jsonFieldMapping.field,{id:jsonField.id,isRequired:jsonField.is_required,name:jsonField.name})};var jsonField},fieldMappingToJSON=function(fieldMapping){return{col_idx:fieldMapping.colIdx,col_name:fieldMapping.colName,field:(field=fieldMapping.field,{id:field.id,is_required:field.isRequired,name:field.name})};var field},CSVMapping_fromJSON=function(jsonCSV){return{fieldMappings:jsonCSV.field_mappings.map(fieldMappingFromJSON),id:jsonCSV.id,isActive:jsonCSV.is_active,name:jsonCSV.name}},CSVValue_fromJSON=function(jsonCSV){return{colName:jsonCSV.col_name,value:jsonCSV.value}},IDVerification=__webpack_require__("./app/types/IDVerification.ts");(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CSV_IMPORT_FILE_UPLOAD,(function uploadFile(action){var result,payload,err_1,idvResult,verification;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,4,,10]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(csv_import_service_uploadCSV,action.payload.file)];case 1:return result=_a.sent(),payload={fileUrl:result.data.file_url,mapping:CSVMapping_fromJSON(result.data.mapping),userValues:result.data.user_values.map(CSVValue_fromJSON)},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(uploadCSVSuccess(payload))];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)({pathname:"/orders/csv-import/step-two"}))];case 3:return _a.sent(),[3,10];case 4:return(err_1=_a.sent()).response&&403===err_1.response.status?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.ut)]:[3,7];case 5:return idvResult=_a.sent(),verification=IDVerification.r(idvResult.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,user_actions.hZ)(verification))];case 6:return _a.sent(),[3,9];case 7:return"We were unable to upload your CSV file","uploadMessage",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(uploadCSVError("uploadMessage","We were unable to upload your CSV file"))];case 8:_a.sent(),_a.label=9;case 9:return[3,10];case 10:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CSV_IMPORT_FETCH_TEMPLATES,(function fetchTemplates(){var result,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getTemplates)];case 1:return result=_a.sent(),payload={templates:result.data.map(CSVMapping_fromJSON)},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchCSVTemplatesSuccess(payload))];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),"We were unable to fetch your CSV templates","refreshMessage",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchCSVTemplatesError("refreshMessage","We were unable to fetch your CSV templates"))];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CSV_IMPORT_SAVE_TEMPLATE,(function csv_import_saga_saveTemplate(action){var filteredMappings,payload,result;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),filteredMappings=action.payload.template.fieldMappings.filter((function(fieldMapping){return 0!==fieldMapping.field.id})),payload={field_mappings:filteredMappings.map(fieldMappingToJSON),id:action.payload.template.id,is_active:action.payload.isActive,name:action.payload.name},[4,(0,redux_saga_effects_npm_proxy_esm.T1)(saveTemplate,payload)];case 1:return result=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((fileUrl=action.payload.fileUrl,templateId=result.data.template_id,trackingReference=action.payload.trackingReference,{payload:{fileUrl,templateId,trackingReference},type:constants.t.CSV_IMPORT_SAVE_TEMPLATE_SUCCESS}))];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),"We are unable to save your CSV template","refreshMessage",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(saveCSVTemplateError("refreshMessage","We are unable to save your CSV template"))];case 5:return[2]}var fileUrl,templateId,trackingReference}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CSV_IMPORT_DELETE_TEMPLATE,(function csv_import_saga_deleteTemplate(action){var payload,result,successPayload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,4,,6]),payload={template_id:action.payload.templateId},[4,(0,redux_saga_effects_npm_proxy_esm.T1)(deleteTemplate,payload)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getTemplates)];case 2:return result=_a.sent(),successPayload={deletedTemplateId:action.payload.templateId,templates:result.data.map(CSVMapping_fromJSON)},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(deleteCSVTemplateSuccess(successPayload))];case 3:case 5:return _a.sent(),[3,6];case 4:return _a.sent(),"Error occured deleting CSV template","deleteMessage",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(deleteCSVTemplateError("deleteMessage","Error occured deleting CSV template"))];case 6:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CSV_IMPORT_SAVE_TEMPLATE_SUCCESS,(function importOrders(action){var payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,5,,7]),payload={csv_url:action.payload.fileUrl,template_id:action.payload.templateId},[4,(0,redux_saga_effects_npm_proxy_esm.T1)(importCSVOrders,payload)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.CSV_IMPORT_ORDERS_SUCCESS})];case 2:return _a.sent(),(0,utils.Ro)(action.payload.trackingReference,types.iB.operations.IMPORT_STARTED,{}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("CSV Import"))];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({eventName:"CSV_IMPORT_SUCCESS"}))];case 4:case 6:return _a.sent(),[3,7];case 5:return _a.sent(),"We can't read your CSV file","uploadMessage",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(importCSVOrdersError("uploadMessage","We can't read your CSV file"))];case 7:return[2]}}))}));function getBatchEntriesIdsToUpdate(orderSelection){var _a,batchEntries,newSelectedOrder,resetBatchEntries;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(setupBatchEntries,orderSelection)];case 1:return _a=_b.sent(),batchEntries=_a.batchEntries,newSelectedOrder=_a.newSelectedOrder,resetBatchEntries=_a.resetBatchEntries,[2,{batchEntriesIdsToUpdate:(0,uniq.A)(batchEntries.map((function(be){return be.id}))),newSelectedOrder,resetBatchEntries}]}}))}function setupBatchEntries(orderSelection){var orderObjectIDs,batchEntryIDs,getOrCloneResult,batchEntries,orderObjectID,beId,pathname,qs_1,initialBatchEntries,resetBatchEntries,newSelectedOrder;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return orderObjectIDs=[],batchEntryIDs=[],Object.entries(orderSelection).forEach((function(_a){var _b=(0,tslib_es6.zs)(_a,2),orderObjectId=_b[0],orderBatchEntryIDs=_b[1];orderObjectIDs.push(orderObjectId),(null==orderBatchEntryIDs?void 0:orderBatchEntryIDs.length)>0&&batchEntryIDs.push.apply(batchEntryIDs,(0,tslib_es6.fX)([],(0,tslib_es6.zs)(orderBatchEntryIDs),!1))})),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.NX,orderObjectIDs,batchEntryIDs)];case 1:return getOrCloneResult=_a.sent(),batchEntries=(null==getOrCloneResult?void 0:getOrCloneResult.data.map(OrderBatchEntry.kc))||[],1!==orderObjectIDs.length||1!==batchEntries.length?[3,5]:(orderObjectID=orderObjectIDs[0],beId=batchEntries[0].id,[4,selectState(router_selectors_getPathname)]);case 2:return!(pathname=_a.sent()).includes(orderObjectID)||pathname.includes(beId.toString())?[3,5]:[4,selectState(getQS)];case 3:return qs_1=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.HC)("/orders/".concat(orderObjectID,"/shipments/").concat(beId).concat(qs_1)))];case 4:_a.sent(),_a.label=5;case 5:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orderSelectionToBatchEntries,orderSelection)];case 6:return initialBatchEntries=_a.sent(),resetBatchEntries=findResetBatchEntries(initialBatchEntries,batchEntries),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,orders_actions.iZ)(initialBatchEntries,resetBatchEntries))];case 7:return _a.sent(),newSelectedOrder=batchEntries.reduce((function(accum,entry){return accum[entry.orderObjectId]=accum[entry.orderObjectId]?(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(accum[entry.orderObjectId]),!1),[entry.id],!1):[entry.id],accum}),{}),[2,{batchEntries,newSelectedOrder,resetBatchEntries}]}}))}function orderSelectionToBatchEntries(orderSelection){var _a,orderObjectIds,batchEntryIds,batchEntriesFromOrders,batchEntriesFromIds;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _a=(0,tslib_es6.zs)(Object.entries(orderSelection).reduce((function(_a,_b){var _c=(0,tslib_es6.zs)(_a,2),os=_c[0],bes=_c[1],_d=(0,tslib_es6.zs)(_b,2),orderObjectId=_d[0],batchEntryIds=_d[1];return(null==batchEntryIds?void 0:batchEntryIds.length)?[os,bes.concat(batchEntryIds)]:[os.concat(orderObjectId),bes]}),[new Array,new Array]),2),orderObjectIds=_a[0],batchEntryIds=_a[1],[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_selectors.dM,{orderObjectIds})];case 1:return batchEntriesFromOrders=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_selectors.uq,{batchEntryIds})];case 2:return batchEntriesFromIds=_b.sent(),[2,batchEntriesFromOrders.concat(batchEntriesFromIds)]}}))}var findResetBatchEntries=function(initialBatchEntries,batchEntries){var batchEntryIdsSelected=new Set(initialBatchEntries.map((function(batchEntry){return batchEntry.id})));return batchEntries.filter((function(batchEntry){return!batchEntryIdsSelected.has(batchEntry.id)}))},customs_service_createCustomsItem=function(batchEntryIds,customsItems){return services_api.YZ.request({data:{batch_entries:batchEntryIds,customs_items:customsItems},method:"POST",url:"/batch_entry/customs_items"})},updateCustomsItem=function(batchEntryIds,customsItem){return services_api.YZ.request({data:{batch_entries:batchEntryIds,customs_items:[customsItem]},method:"PUT",url:"/batch_entry/customs_items"})},deleteCustomsItems=function(batchEntryIds,customsItems){return services_api.YZ.request({data:{batch_entries:batchEntryIds,customs_items:customsItems},method:"DELETE",url:"/batch_entry/customs_items/"})},updateCustomsDeclaration=function(batchEntryIds,customsDeclaration){return services_api.YZ.request({data:{batch_entries:batchEntryIds,customs_declaration:customsDeclaration},method:"PUT",url:"/batch_entry/customs_declaration"})};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CUSTOMS_ITEM_CREATE,(function customs_saga_createCustomsItem(action){var batchEntriesIdsToUpdate,ordersData,order,result,parsedBatchEntries,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,10,,13]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.De)(constants_form.Y0))];case 1:return _a.sent(),[5,(0,tslib_es6.Ju)(getBatchEntriesIdsToUpdate(action.payload.orderSelection))];case 2:return batchEntriesIdsToUpdate=_a.sent().batchEntriesIdsToUpdate,[4,selectState(orders_selectors.Sv)];case 3:return ordersData=_a.sent(),order=ordersData[Object.keys(action.payload.orderSelection)[0]],[4,(0,redux_saga_effects_npm_proxy_esm.T1)(customs_service_createCustomsItem,(0,uniq.A)(batchEntriesIdsToUpdate),[CustomsItem.eL(action.payload.customsItemPayload)])];case 4:return result=_a.sent(),parsedBatchEntries=(null==result?void 0:result.data.map(OrderBatchEntry.kc))||[],[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(order.objectId))];case 5:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(parsedBatchEntries))];case 6:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj([order.objectId]))];case 7:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.CUSTOMS_ITEM_CREATE_SUCCESS})];case 8:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.Wv)(constants_form.Y0))];case 9:case 12:return _a.sent(),[3,13];case 10:return err_1=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.uj)(constants_form.Y0))];case 11:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((err=err_1,{payload:{err},type:constants.t.CUSTOMS_ITEM_CREATE_ERROR}))];case 13:return[2]}var err}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CUSTOMS_ITEM_UPDATE,(function customs_saga_editCustomsItem(action){var _a,batchEntriesIdsToUpdate,resetBatchEntries,initialCustomsItems,customsItemPayload,initialCustomsItems_1,initialCustomsItems_1_1,ci,ordersData,order,result,parsedBatchEntries,err_2,e_1,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,11,,14]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.De)(constants_form.Y0))];case 1:return _c.sent(),[5,(0,tslib_es6.Ju)(getBatchEntriesIdsToUpdate(action.payload.orderSelection))];case 2:if(_a=_c.sent(),batchEntriesIdsToUpdate=_a.batchEntriesIdsToUpdate,resetBatchEntries=_a.resetBatchEntries,initialCustomsItems=void 0,customsItemPayload=(0,tslib_es6.Cl)({},action.payload.customsItemPayload),resetBatchEntries.length>0){initialCustomsItems=resetBatchEntries.reduce((function(customsItems,batchEntry){return(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(customsItems),!1),(0,tslib_es6.zs)(batchEntry.customsItems),!1)}),[]);try{for(initialCustomsItems_1=(0,tslib_es6.Ju)(initialCustomsItems),initialCustomsItems_1_1=initialCustomsItems_1.next();!initialCustomsItems_1_1.done;initialCustomsItems_1_1=initialCustomsItems_1.next())if(ci=initialCustomsItems_1_1.value,CustomsItem.Q5(ci,action.payload.initialValues)){customsItemPayload=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},customsItemPayload),{id:ci.id});break}}catch(e_1_1){e_1={error:e_1_1}}finally{try{initialCustomsItems_1_1&&!initialCustomsItems_1_1.done&&(_b=initialCustomsItems_1.return)&&_b.call(initialCustomsItems_1)}finally{if(e_1)throw e_1.error}}}return[4,selectState(orders_selectors.Sv)];case 3:return ordersData=_c.sent(),order=ordersData[Object.keys(action.payload.orderSelection)[0]],[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils.f0,action.payload.appLocation,segment.sV.customs_items_form_submit,(0,tslib_es6.Cl)((0,tslib_es6.Cl)({order_id:order.objectId},action.payload.trackingData),CustomsItem.eL(customsItemPayload)))];case 4:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(updateCustomsItem,(0,uniq.A)(batchEntriesIdsToUpdate),CustomsItem.eL(customsItemPayload))];case 5:return result=_c.sent(),parsedBatchEntries=(null==result?void 0:result.data.map(OrderBatchEntry.kc))||[],[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(order.objectId))];case 6:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(parsedBatchEntries))];case 7:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj(Object.keys(action.payload.orderSelection)))];case 8:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.CUSTOMS_ITEM_UPDATE_SUCCESS})];case 9:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.Wv)(constants_form.Y0))];case 10:case 13:return _c.sent(),[3,14];case 11:return err_2=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.uj)(constants_form.Y0))];case 12:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((err=err_2,{payload:{err},type:constants.t.CUSTOMS_ITEM_UPDATE_ERROR}))];case 14:return[2]}var err}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CUSTOMS_ITEM_DELETE,(function customs_saga_deleteCustomsItem(action){var _a,initialValues,orderSelection,_b,batchEntriesIdsToUpdate,resetBatchEntries,initialCustomsItems_2,customsItemsPayload_1,batchEntry,result,parsedBatchEntries,_c;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:return _d.trys.push([0,9,,11]),_a=action.payload,initialValues=_a.initialValues,orderSelection=_a.orderSelection,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getBatchEntriesIdsToUpdate,orderSelection)];case 1:return _b=_d.sent(),batchEntriesIdsToUpdate=_b.batchEntriesIdsToUpdate,resetBatchEntries=_b.resetBatchEntries,customsItemsPayload_1=(0,tslib_es6.fX)([],(0,tslib_es6.zs)(initialValues),!1),(0,lodash_es_flatten.A)(Object.values(orderSelection)).length<1?[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_selectors.fu,{batchEntryId:batchEntriesIdsToUpdate[0]})]:[3,3];case 2:batchEntry=_d.sent(),customsItemsPayload_1=(null===(_c=null==batchEntry?void 0:batchEntry.customsItems)||void 0===_c?void 0:_c.map(CustomsItem.rx))||[],_d.label=3;case 3:return resetBatchEntries.length>0&&(initialCustomsItems_2=resetBatchEntries.reduce((function(customsItems,batchEntry){return(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(customsItems),!1),(0,tslib_es6.zs)(batchEntry.customsItems),!1)}),[]),customsItemsPayload_1.forEach((function(payload,index){var e_2,_a;try{for(var initialCustomsItems_3=(0,tslib_es6.Ju)(initialCustomsItems_2),initialCustomsItems_3_1=initialCustomsItems_3.next();!initialCustomsItems_3_1.done;initialCustomsItems_3_1=initialCustomsItems_3.next()){var ci=initialCustomsItems_3_1.value;if(CustomsItem.Q5(ci,payload)){customsItemsPayload_1[index].id=ci.id;break}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{initialCustomsItems_3_1&&!initialCustomsItems_3_1.done&&(_a=initialCustomsItems_3.return)&&_a.call(initialCustomsItems_3)}finally{if(e_2)throw e_2.error}}}))),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(deleteCustomsItems,(0,uniq.A)(batchEntriesIdsToUpdate),customsItemsPayload_1.map(CustomsItem.eL))];case 4:return result=_d.sent(),parsedBatchEntries=(null==result?void 0:result.data.map(OrderBatchEntry.kc))||[],[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(Object.keys(action.payload.orderSelection)[0]))];case 5:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(parsedBatchEntries))];case 6:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj(Object.keys(action.payload.orderSelection)))];case 7:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.CUSTOMS_ITEM_DELETE_SUCCESS})];case 8:return _d.sent(),[3,11];case 9:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((error="Something happened. Please try again",{payload:{error},type:constants.t.CUSTOMS_ITEM_DELETE_ERROR}))];case 10:return _d.sent(),[3,11];case 11:return[2]}var error}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CUSTOMS_DECLARATION_UPDATE,(function customs_saga_editCustomsDeclaration(action){var _a,batchEntriesIdsToUpdate,resetBatchEntries,initialCustomsDeclaration,customsDeclarationPayload,orderIDs,result,parsedBatchEntries,err_3,_b,_c,_d,_e,_f;return(0,tslib_es6.YH)(this,(function(_g){switch(_g.label){case 0:return _g.trys.push([0,9,,12]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.De)(constants_form.ZP))];case 1:return _g.sent(),[5,(0,tslib_es6.Ju)(getBatchEntriesIdsToUpdate(action.payload.orderSelection))];case 2:return _a=_g.sent(),batchEntriesIdsToUpdate=_a.batchEntriesIdsToUpdate,resetBatchEntries=_a.resetBatchEntries,initialCustomsDeclaration=void 0,customsDeclarationPayload=(0,tslib_es6.Cl)({},action.payload.customsDeclarationPayload),(null===(_b=null==resetBatchEntries?void 0:resetBatchEntries[0])||void 0===_b?void 0:_b.customsDeclaration)&&(initialCustomsDeclaration=resetBatchEntries[0].customsDeclaration,(CustomsDeclaration.Lr(initialCustomsDeclaration,(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},action.payload.initialValues),{b13aFilingOption:(null===(_d=null===(_c=action.payload.initialValues.b13aFilingOption)||void 0===_c?void 0:_c.value)||void 0===_d?void 0:_d.toString())||"",contentsExplanation:action.payload.initialValues.contentsExplanation,contentsType:action.payload.initialValues.contentsType.value.toString(),eelPfc:action.payload.initialValues.eelPfc?action.payload.initialValues.eelPfc.value.toString():"",incoterm:action.payload.initialValues.incoterm.value.toString(),nonDeliveryOption:action.payload.initialValues.nonDeliveryOption.value.toString(),taxIdType:(null===(_f=null===(_e=action.payload.initialValues.taxIdType)||void 0===_e?void 0:_e.value)||void 0===_f?void 0:_f.toString())||""}))||initialCustomsDeclaration.id!==action.payload.customsDeclarationPayload.id)&&(customsDeclarationPayload=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},customsDeclarationPayload),{id:initialCustomsDeclaration.id}))),orderIDs=Object.keys(action.payload.orderSelection),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils.f0,action.payload.appLocation,segment.sV.customs_options_form_submit,(0,tslib_es6.Cl)((0,tslib_es6.Cl)({order_id:orderIDs.length?orderIDs[0]:""},action.payload.trackingData),CustomsDeclaration.Fk(CustomsDeclaration.QX(customsDeclarationPayload))))];case 3:return _g.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(updateCustomsDeclaration,(0,uniq.A)(batchEntriesIdsToUpdate),CustomsDeclaration.QX(customsDeclarationPayload))];case 4:return result=_g.sent(),parsedBatchEntries=(null==result?void 0:result.data.map(OrderBatchEntry.kc))||[],[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(parsedBatchEntries))];case 5:return _g.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj(parsedBatchEntries.map((function(batchEntry){return batchEntry.orderObjectId}))))];case 6:return _g.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.CUSTOMS_DECLARATION_UPDATE_SUCCESS})];case 7:return _g.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.Wv)(constants_form.ZP))];case 8:case 11:return _g.sent(),[3,12];case 9:return err_3=_g.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.uj)(constants_form.ZP))];case 10:return _g.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((err=err_3,{payload:{err},type:constants.t.CUSTOMS_DECLARATION_UPDATE_ERROR}))];case 12:return[2]}var err}))}));var getFeatureTestStore=function(state){return state.featureTests},getAllFeatureTestVariantNames=((0,reselect_es.Mz)(getFeatureTestStore,(function(featureTests){return isInTestVariant(featureTests)("One Dollar Billing Threshold","One Dollar Billing Threshold Enabled")})),(0,reselect_es.Mz)(getFeatureTestStore,(function(featureTests){return featureTests.testVariants.reduce((function(variantNames,featTest){return(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(variantNames),!1),[featTest.featureTestVariant.name],!1)}),[])}))),isInTestVariant=function(featureTests){return function(testName,variantName){var userVariant=featureTests.testVariantByFeature[testName];return!!userVariant&&userVariant.name===variantName}},feature_tests_service_fetchFeatureTests=function(){return services_api.Ay.request({method:"GET",url:"/ui/features"})},featureTestUserVariantFromJSON=function(variant){return{featureTest:{name:variant.feature_test.name},featureTestVariant:{name:variant.feature_test_variant.name}}};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_AB_TEST_FEATURES,(function feature_tests_saga_fetchFeatureTests(){var response;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,4]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(feature_tests_service_fetchFeatureTests)];case 1:return response=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((featureTestUserVariants=response.data.results.map(featureTestUserVariantFromJSON),{payload:{featureTestUserVariants},type:constants.t.FETCH_AB_TEST_FEATURES_SUCCESS}))];case 2:return _a.sent(),[3,4];case 3:return _a.sent(),[3,4];case 4:return[2]}var featureTestUserVariants}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_AB_TEST_FEATURES_SUCCESS,(function postFeatureTestFetchSuccessHook(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.INITIALIZE_FEATURE_TEST_VARIANT_NAMES})];case 1:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.INITIALIZE_FEATURE_TEST_VARIANT_NAMES,(function feature_tests_saga_initializeFeatureTestVariantNames(){var names,gtmEvent;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,selectState(getAllFeatureTestVariantNames)];case 1:return(names=_a.sent())?(gtmEvent={data:{featureTestVariants:names.join(", ")},eventName:"FEATURE_TESTS_PUSHED_EVENT"},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent(gtmEvent))]):[3,3];case 2:_a.sent(),_a.label=3;case 3:return[2]}}))}));var saveFilterGroupError=function(errorMessage){return{payload:{errorMessage},type:constants.t.FILTER_SAVE_FILTER_GROUP_ERROR}},getFilterGroupsSuccess=function(data){return{payload:{data},type:constants.t.FILTER_GET_FILTER_GROUPS_SUCCESS}},getFilterGroupsError=function(errorMessage){return{payload:{errorMessage},type:constants.t.FILTER_GET_FILTER_GROUPS_ERROR}},deleteFilterGroupError=function(errorMessage){return{payload:{errorMessage},type:constants.t.FILTER_DELETE_FILTER_GROUP_ERROR}},changeTabShown=function(tabName){return{payload:{tabName},type:constants.t.FILTER_CHANGE_TAB}},saveTempFilterGroup=function(filters){return{payload:{filters},type:constants.t.FILTER_SAVE_TEMP_GROUP}},isEqual=__webpack_require__("./node_modules/lodash-es/isEqual.js"),parseFilterGroups=function(show,filterGroups){if(!filterGroups)return{};var newFilters={},filterGroup=filterGroups.find((function(filterGroup){return filterGroup.name===show}));return filterGroup&&filterGroup.filter_criteria&&filterGroup.filter_criteria.forEach((function(filterCriteria){var _a,_b,filter=filterCriteria.filter;if("ORDER_BY"===filter.field&&(newFilters.order_by=filter.value.text),"SORT_BY"===filter.field&&(newFilters.sort_by=filter.value.text),"WEIGHT"===filter.field){var comparator="less_than"===filter.comparator?"lt":"gt";newFilters["weight_".concat(comparator)]=filter.value.value,newFilters.weight_unit=filter.value.enum}if("STORE_PLATFORM"===filter.field&&filter.value.set&&filter.value.set.length>0&&(newFilters.shop_app=filter.value.set[0]),"IS_INTERNATIONAL"===filter.field&&(newFilters.is_international=null===(_a=filter.value.boolean)||void 0===_a?void 0:_a.toString()),"DATE_CREATED"===filter.field&&("greater_than_or_equal_to"===filter.comparator?newFilters.start_date=moment_moment(filter.value.date).format():"less_than_or_equal_to"===filter.comparator&&(newFilters.end_date=moment_moment(filter.value.date).format())),"SHIPPING_METHOD"===filter.field&&(newFilters.shipping_method=filter.value.set),"ITEM"===filter.field&&(newFilters.item=null===(_b=filter.value.set)||void 0===_b?void 0:_b.sort()),"ORDER_STATUS"===filter.field&&filter.value.set&&filter.value.set.length>0&&(newFilters.order_status=filter.value.set.length>1?"pending":"fulfilled"),"SEARCH_TEXT"===filter.field&&(newFilters.q=filter.value.text),"TAG"===filter.field&&filter.value.set){var untaggedIndex=filter.value.set.indexOf("untagged");if(-1===untaggedIndex)newFilters.tag=filter.value.set,newFilters.untagged="false";else{var copyTagSet=(0,tslib_es6.fX)([],(0,tslib_es6.zs)(filter.value.set),!1);copyTagSet.splice(untaggedIndex,1),newFilters.untagged="true",copyTagSet.length>0&&(newFilters.tag=copyTagSet)}}})),newFilters},parseFilters=function(filters){var filterCriteria=[];if("weight_unit"in filters){var weightFilter={filter:{field:"weight",value:{enum:filters.weight_unit}}};"weight_lt"in filters&&filterCriteria.push({filter:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},weightFilter.filter),{comparator:"less_than",value:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},weightFilter.filter.value),{value:filters.weight_lt})})}),"weight_gt"in filters&&filterCriteria.push({filter:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},weightFilter.filter),{comparator:"greater_than",value:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},weightFilter.filter.value),{value:filters.weight_gt})})})}if("shop_app"in filters&&filterCriteria.push({filter:{comparator:"in",field:"store_platform",value:{set:[filters.shop_app]}}}),"is_international"in filters&&filterCriteria.push({filter:{comparator:"equal_to",field:"is_international",value:{boolean:"true"===filters.is_international}}}),"start_date"in filters&&filterCriteria.push({filter:{comparator:"greater_than_or_equal_to",field:"date_created",value:{date:filters.start_date}}}),"end_date"in filters&&filterCriteria.push({filter:{comparator:"less_than_or_equal_to",field:"date_created",value:{date:filters.end_date}}}),"shipping_method"in filters&&filterCriteria.push({filter:{comparator:"in",field:"shipping_method",value:{set:filters.shipping_method}}}),"item"in filters&&filterCriteria.push({filter:{comparator:"in",field:"item",value:{set:filters.item}}}),"order_status"in filters&&filterCriteria.push({filter:{comparator:"in",field:"ORDER_STATUS",value:{set:"pending"===filters.order_status?[Order.Re.PAID,Order.Re.UNKNOWN,Order.Re.AWAITPAY,Order.Re.PARTIALLY_FULFILLED]:[Order.Re.SHIPPED]}}}),"q"in filters&&filterCriteria.push({filter:{comparator:"equal_to",field:"search_text",value:{text:filters.q}}}),"sort_by"in filters&&filterCriteria.push({filter:{comparator:"equal_to",field:"sort_by",value:{text:filters.sort_by}}}),"order_by"in filters&&filterCriteria.push({filter:{comparator:"equal_to",field:"order_by",value:{text:filters.order_by}}}),"tag"in filters||"untagged"in filters&&"true"===filters.untagged){var tagsSet=[];"tag"in filters&&(Array.isArray(filters.tag)?tagsSet.push.apply(tagsSet,(0,tslib_es6.fX)([],(0,tslib_es6.zs)(filters.tag),!1)):"string"==typeof filters.tag?tagsSet.push(filters.tag):"object"==typeof filters.tag&&tagsSet.push.apply(tagsSet,(0,tslib_es6.fX)([],(0,tslib_es6.zs)(Object.values(filters.tag)),!1))),"untagged"in filters&&"true"===filters.untagged&&tagsSet.push("untagged"),filterCriteria.push({filter:{comparator:"in",field:"tag",value:{set:tagsSet}}})}return filterCriteria},getTabName=function(nonEmptyFilterValues,filters,savedTabName,filterGroups){var savedFilterGroup=filterGroups.find((function(filterGroup){return filterGroup.name===savedTabName}))||{},parsedFilters=parseFilterGroups(savedTabName,[savedFilterGroup]),cleanedFilters=Object.keys(filters).reduce((function(cleanFilters,filterName){var _a;return filters[filterName]?(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},cleanFilters),((_a={})[filterName]=filters[filterName],_a)):cleanFilters}),{});return 0===nonEmptyFilterValues.length||(0,isEqual.A)(cleanedFilters,parsedFilters)||2===nonEmptyFilterValues.length&&"desc"===filters.order_by&&"_score"===filters.sort_by?savedTabName:"new"},cleanFilterCriteria=function(filters){return filters.map((function(filter){var removeEmptySearchText=filter.filter_criteria.filter((function(criteria){return"SEARCH_TEXT"!==criteria.filter.field||"SEARCH_TEXT"===criteria.filter.field&&criteria.filter.value.text}));return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},filter),{filter_criteria:removeEmptySearchText})}))},getFiltersStore=function(state){return state.filters},getCurrentFilterGroups=((0,reselect_es.Mz)(getFiltersStore,(function(filtersStore){return filtersStore.saveOrderViewModalIsOpen})),(0,reselect_es.Mz)(getFiltersStore,(function(filtersStore){return filtersStore.deleteOrderViewModalIsOpen})),(0,reselect_es.Mz)(getFiltersStore,(function(filtersStore){return filtersStore.showNewTab})),(0,reselect_es.Mz)(getFiltersStore,(function(filtersStore){return filtersStore.filterGroups}))),getSelectedTab=((0,reselect_es.Mz)(getFiltersStore,(function(filterStore){return filterStore.filterGroupsIsLoading})),(0,reselect_es.Mz)(getQSSaved,getNotEmptyOrdersFilters,getOrderFiltersValues,getCurrentFilterGroups,(function(savedTabName,notEmptyOrdersFilters,orderFiltersValues,currentFilterGroups){return getTabName(notEmptyOrdersFilters,orderFiltersValues,savedTabName,currentFilterGroups)}))),getTempFilters=((0,reselect_es.Mz)(getSelectedTab,(function(selectedTab){return"new"===selectedTab})),(0,reselect_es.Mz)(getFiltersStore,(function(filtersStore){return filtersStore.tempFilterGroup}))),createFilterGroup=function(payload){return services_api.YZ.request({data:payload,headers:{"Content-Type":"application/json"},method:"POST",url:"orderviews/"})},filters_service_getFilterGroups=function(){return services_api.YZ.request({method:"GET",url:"orderviews/"})},filters_service_deleteFilterGroup=function(filterGroupObjectID){return services_api.YZ.request({method:"DELETE",url:"orderviews/".concat(filterGroupObjectID,"/")})};function filters_saga_getFilterGroups(){var result,cleanedFilters,savedTabName_1,nonEmptyFilterValues,filters,parsedFilters_1,tabName;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,7,,9]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(filters_service_getFilterGroups)];case 1:return result=_a.sent(),cleanedFilters=cleanFilterCriteria(result.data.results),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(getFilterGroupsSuccess(cleanedFilters))];case 2:return _a.sent(),[4,selectState(getQSSaved)];case 3:return savedTabName_1=_a.sent(),[4,selectState(getNotEmptyOrdersFilters)];case 4:return nonEmptyFilterValues=_a.sent(),[4,selectState(getOrderFiltersValues)];case 5:return filters=_a.sent(),parsedFilters_1={},cleanedFilters.forEach((function(filterGroup){filterGroup.name===savedTabName_1&&(parsedFilters_1=parseFilterGroups(savedTabName_1,[filterGroup]))})),tabName=getTabName(nonEmptyFilterValues,filters,savedTabName_1,parsedFilters_1),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(changeTabShown(tabName))];case 6:case 8:return _a.sent(),[3,9];case 7:return _a.sent(),"There is an error that requires investigation. Please contact support.",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(getFilterGroupsError("There is an error that requires investigation. Please contact support."))];case 9:return[2]}}))}(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FILTER_SAVE_FILTER_GROUP,(function filters_saga_saveFilterGroup(action){var result,err_1,errorMessage,payload,_a,_b,_c;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:return _d.trys.push([0,4,,7]),payload={filter_criteria:parseFilters(action.payload.filters),name:action.payload.filterGroupName},[4,(0,redux_saga_effects_npm_proxy_esm.T1)(createFilterGroup,payload)];case 1:return result=_d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((data=result.data,{payload:{data},type:constants.t.FILTER_SAVE_FILTER_GROUP_SUCCESS}))];case 2:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,routing_actions.bJ)("saved",action.payload.filterGroupName))];case 3:case 6:return _d.sent(),[3,7];case 4:return err_1=_d.sent(),errorMessage="There is an error that requires investigation. Please contact support.",err_1.response&&(null===(_a=err_1.response)||void 0===_a?void 0:_a.data)&&(null===(_b=err_1.response)||void 0===_b?void 0:_b.data.detail)&&(errorMessage=null===(_c=err_1.response)||void 0===_c?void 0:_c.data.detail),payload={closeButtonText:"Close",messages:[errorMessage]},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(saveFilterGroupError(errorMessage))];case 5:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(showDialog(payload,"error"))];case 7:return[2]}var data}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FILTER_GET_FILTER_GROUPS,filters_saga_getFilterGroups),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FILTER_DELETE_FILTER_GROUP,(function filters_saga_deleteFilterGroup(action){var errorMessage,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,6,,9]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(filters_service_deleteFilterGroup,action.payload.filterGroupObjectID)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(filters_saga_getFilterGroups)];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.FILTER_DELETE_FILTER_GROUP_SUCCESS})];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,routing_actions.UQ)({}))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(changeTabShown(""))];case 5:case 8:return _a.sent(),[3,9];case 6:return _a.sent(),payload={closeButtonText:"Close",messages:[errorMessage="There is an error that requires investigation. Please contact support."]},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(deleteFilterGroupError(errorMessage))];case 7:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(showDialog(payload,"error"))];case 9:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FILTER_CHANGE_TAB,(function filters_saga_changeTabShown(action){var filterGroups,currentFilters,filters,currentTabName,tempFilters;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,selectState(getCurrentFilterGroups)];case 1:return filterGroups=_a.sent(),[4,selectState(getOrderFiltersValues)];case 2:return currentFilters=_a.sent(),filters={},[4,selectState(getSelectedTab)];case 3:return(currentTabName=_a.sent())===action.payload.tabName?[2]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,routing_actions.UQ)({}))];case 4:return _a.sent(),["","fulfilled","new","pending"].includes(action.payload.tabName)?["fulfilled","pending"].includes(action.payload.tabName)?filters.order_status=action.payload.tabName:filters.order_status=void 0:(filters=parseFilterGroups(action.payload.tabName,filterGroups)).saved=action.payload.tabName,"new"!==action.payload.tabName?[3,7]:[4,selectState(getTempFilters)];case 5:return tempFilters=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,routing_actions.UQ)(tempFilters))];case 6:return _a.sent(),[3,14];case 7:return"new"!==currentTabName?[3,12]:Object.keys(filters).length<=1&&!filters.order_status?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.FILTER_HIDE_NEW_TAB})]:[3,9];case 8:return _a.sent(),[3,12];case 9:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(saveTempFilterGroup(currentFilters))];case 10:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.FILTER_SHOW_NEW_TAB})];case 11:_a.sent(),_a.label=12;case 12:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,routing_actions.UQ)(filters))];case 13:_a.sent(),_a.label=14;case 14:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((tabName=action.payload.tabName,{payload:{tabName},type:constants.t.FILTER_CHANGE_TAB_SUCCESS}))];case 15:return _a.sent(),[2]}var tabName}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FILTER_DETERMINE_TAB_NAME,(function filters_saga_determineTabName(){var savedTabName,nonEmptyFilterValues,filters,filterGroups,tabName;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,selectState(getQSSaved)];case 1:return savedTabName=_a.sent(),[4,selectState(getNotEmptyOrdersFilters)];case 2:return nonEmptyFilterValues=_a.sent(),[4,selectState(getOrderFiltersValues)];case 3:return filters=_a.sent(),[4,selectState(getCurrentFilterGroups)];case 4:return filterGroups=_a.sent(),tabName=getTabName(nonEmptyFilterValues,filters,savedTabName,filterGroups),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(changeTabShown(tabName))];case 5:return _a.sent(),[2]}}))}));var getDataLayer=function(){return window.dataLayer||[]},gtm_service_sendGTMEvent=function(payload){getDataLayer().push((0,tslib_es6.Cl)({event:payload.eventName},payload.data))},gtm_service_pushToGTMDataLayer=function(payload){getDataLayer().push(payload)};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.SEND_GTM_EVENT,(function gtm_saga_sendGTMEvent(action){var userId,firedTime,eventName,payload,e_1,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return[4,selectState(user_selectors.F6)||-1];case 1:userId=_b.sent(),firedTime=(new Date).toISOString(),eventName=action.payload.eventName,payload={data:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},action.payload.data),(_a={},_a[eventName]=(0,tslib_es6.Cl)({firedTime,userId},action.payload.data),_a)),eventName:action.payload.eventName},_b.label=2;case 2:return _b.trys.push([2,5,,7]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(gtm_service_sendGTMEvent,payload)];case 3:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEventSuccess(action.payload.eventName))];case 4:return _b.sent(),[3,7];case 5:return e_1=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEventError(action.payload.eventName,e_1.toString()))];case 6:return _b.sent(),[3,7];case 7:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.PUSH_TO_GTM_DATA_LAYER,(function gtm_saga_pushToGTMDataLayer(action){var e_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(gtm_service_pushToGTMDataLayer,action.payload)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.PUSH_TO_GTM_DATA_LAYER_SUCCESS})];case 2:case 4:return _a.sent(),[3,5];case 3:return e_2=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((errorMessage=e_2.toString(),{errorMessage,type:constants.t.PUSH_TO_GTM_DATA_LAYER_ERROR}))];case 5:return[2]}var errorMessage}))}));var dist=__webpack_require__("./node_modules/react-gtm-module/dist/index.js"),dist_default=__webpack_require__.n(dist),User=__webpack_require__("./app/types/User.ts"),getIsImpersonateCookie=function(){return js_cookie.get("is_impersonate")||"false"};function isImpersonating(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getIsImpersonateCookie)];case 1:return[2,"true"===_a.sent()]}}))}function createDataLayer(currentUser){var _a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _a={availableCarriers:[],dateJoined:currentUser.dateJoined.toISOString(),event:"USER_DATA_POPULATED",groupName:currentUser.groupName||"0"},[4,(0,redux_saga_effects_npm_proxy_esm.T1)(isImpersonating)];case 1:return _a.isImpersonating=_b.sent(),_a.lifetimeVolSegmentMax=currentUser.lifetimeVolSegmentMax||0,_a.lifetimeVolSegmentMin=currentUser.lifetimeVolSegmentMin||0,_a.loginUserId=currentUser.loginUserId,_a.revenueTierName=currentUser.revenueTierName||"5",_a.storesEnabled=[],_a.userEmail=currentUser.email,_a.userFullName=(0,User.dS)(currentUser),_a.userId=currentUser.id,[2,_a]}}))}var getGTMConfig=function(){var _a={dataLayer:"dataLayer",enabled:!0,id:"GTM-544FF49"};return{auth:_a.auth,dataLayerName:_a.dataLayer,enabled:_a.enabled,gtmId:_a.id,preview:_a.preview}};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.INITIALIZE_ANONYMOUS_TAG_MANAGER,(function initializeAnonymousGTM(){var anonymousGTMTriggered,gtmConfig,tagManagerArgs;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return anonymousGTMTriggered=!0,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getGTMConfig)];case 1:if(!(gtmConfig=_a.sent()).enabled)return[2];_a.label=2;case 2:return anonymousGTMTriggered?(tagManagerArgs=(0,tslib_es6.Cl)({},gtmConfig),[4,(0,redux_saga_effects_npm_proxy_esm.T1)([dist_default(),dist_default().initialize],tagManagerArgs)]):[3,4];case 3:return _a.sent(),anonymousGTMTriggered=!1,[3,2];case 4:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_DID_AUTHENTICATE,(function initializeGTM(action){var currentUser,today,gtmConfig,dataLayer,tagManagerArgs;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return currentUser=action.payload.currentUser,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(isImpersonating)];case 1:return _a.sent()?[3,3]:(today=new Date,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(js_cookie.set,"shippo_last_seen",JSON.stringify({availableCarriers:[],dateJoined:currentUser.dateJoined.toISOString().substring(0,10),id:currentUser.id,lastSeen:today.toISOString().substring(0,10),lifetimeVolSegmentMax:currentUser.lifetimeVolSegmentMax||0,lifetimeVolSegmentMin:currentUser.lifetimeVolSegmentMin||0,revenueTierName:currentUser.revenueTierName||"5",storesEnabled:[]}),{domain:".shippodev.com",expires:365})]);case 2:_a.sent(),_a.label=3;case 3:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getGTMConfig)];case 4:return(gtmConfig=_a.sent()).enabled?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(createDataLayer,currentUser)]:[2];case 5:return dataLayer=_a.sent(),tagManagerArgs=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},gtmConfig),{dataLayer}),[4,(0,redux_saga_effects_npm_proxy_esm.T1)([dist_default(),dist_default().initialize],tagManagerArgs)];case 6:return _a.sent(),[2]}}))}));var getInvoiceAdjustmentsOfInvoice=function(invoiceId){return services_api.Ay.request({method:"GET",url:"/v1/invoices/".concat(invoiceId,"/adjustments")})},InvoiceAdjustment_fromJSON=function(jsonInvoice){return{amount:jsonInvoice.amount||null,amountCurrency:jsonInvoice.amount_currency?constants_currency.q[jsonInvoice.amount_currency]:null,description:jsonInvoice.description}};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.DISPLAY_INVOICE_ADJUSTMENTS_FETCH,(function invoice_adjustments_saga_fetchInvoiceAdjustmentsOfInvoice(action){var results,e_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getInvoiceAdjustmentsOfInvoice,action.payload.invoiceId)];case 1:return results=_a.sent().data.results,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((invoiceAdjustments=results.map(InvoiceAdjustment_fromJSON),{payload:{invoiceAdjustments},type:constants.t.DISPLAY_INVOICE_ADJUSTMENTS_FETCH_SUCCESS}))];case 2:case 4:return _a.sent(),[3,5];case 3:return e_1=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((err=e_1,{payload:{err},type:constants.t.DISPLAY_INVOICE_ADJUSTMENTS_FETCH_ERROR}))];case 5:return[2]}var err,invoiceAdjustments}))}));const invoice_items_service_buildInvoiceItemsQueryString=function(namespace,queryObject){return Object.entries(queryObject).reduce((function(qs,_a){var _b=(0,tslib_es6.zs)(_a,2),key=_b[0],val=_b[1];return val?"".concat(qs,"&").concat(namespace,"[").concat(key,"]=").concat(val):qs}),"")};var InvoiceItemType,exportInvoiceItems=function(filter){return services_api.Ay.request({data:{filter:{carrier_account_id:filter.carrierAccountId,end_date:filter.endDate,invoice_item_type:filter.invoiceItemType,is_paid:filter.isPaid,shop_app:filter.shopApp,start_date:filter.startDate}},method:"POST",url:"/billing/invoicing/export"})},searchInvoiceItems=function(pageNumber,pageSize,searchQuery,startDate,endDate,paymentStatus,invoiceItemType,shopApp,carrierAccountId){void 0===pageNumber&&(pageNumber=1),void 0===pageSize&&(pageSize=25),void 0===searchQuery&&(searchQuery="");var page={limit:pageSize,number:pageNumber},filtersQueryString=invoice_items_service_buildInvoiceItemsQueryString("filter",{carrier_account_id:carrierAccountId,end_date:endDate,invoice_item_type:invoiceItemType,is_paid:paymentStatus,shop_app:shopApp,start_date:startDate}),pageQueryString=invoice_items_service_buildInvoiceItemsQueryString("page",page),searchQueryString="&q=".concat(searchQuery);return services_api.Ay.request({method:"GET",url:"/v1/invoice_items/search?expand[]=transaction&expand[]=order&expand[]=invoice".concat(filtersQueryString).concat(pageQueryString).concat(searchQueryString)})},charge=function(objectId){return services_api.kC.request({method:"PUT",url:"/invoices/".concat(objectId,"/charge")})},invoices_service_get=function(page,count){return services_api.kC.request({method:"GET",params:{page,results:count},url:"/v1/invoices/"})},invoices_service_getById=function(invoiceId){return services_api.kC.request({method:"GET",url:"/v1/invoices/".concat(invoiceId)})},getInvoiceItemsOfInvoice=function(invoiceId){return services_api.kC.request({method:"GET",url:"/v1/invoices/".concat(invoiceId,"/items?results=200")})};!function(InvoiceItemType){InvoiceItemType.ADDRESS_VALIDATION_FEE="Address Validation Fee",InvoiceItemType.BRANDING="Branding",InvoiceItemType.INSURANCE_FEE="Insurance Fee",InvoiceItemType.LABEL_FAILURE="Label Failure",InvoiceItemType.LABEL_FEE="Label Fee",InvoiceItemType.LABEL_PAYMENT="Label Payment",InvoiceItemType.LABEL_PAYMENT_ADJUSTMENT="Label payment adjustment",InvoiceItemType.LABEL_PRICE_TRUE_UP_CHARGE="Label Price True Up Charge",InvoiceItemType.LABEL_PRICE_TRUE_UP_REFUND="Label Price True Up Refund",InvoiceItemType.LABEL_REFUND="Label Refund",InvoiceItemType.LABEL_REFUND_ADJUSTMENT="Label refund adjustment",InvoiceItemType.LABEL_SURCHARGE="Label Surcharge",InvoiceItemType.LEGACY_CHARGE="Legacy Charge",InvoiceItemType.LEGACY_REFUND="Legacy Refund",InvoiceItemType.MULTI_USER_LOGIN="Multi User Login",InvoiceItemType.ONE_OFF_CREDIT="One Off Credit",InvoiceItemType.POSTAGE_PRICE="Postage Price",InvoiceItemType.PREAUTH_CAPTURE="Preauth Capture",InvoiceItemType.PROMO_CODE_CREDIT="Promo Code Credit",InvoiceItemType.REBATE="Rebate",InvoiceItemType.SUBSCRIPTION_PLAN_FEE="Subscription Plan Fee",InvoiceItemType.TRACK_FEE="Track Fee"}(InvoiceItemType||(InvoiceItemType={}));var InvoiceItemTypeMap={ADDRESS_VALIDATION_FEE:InvoiceItemType.ADDRESS_VALIDATION_FEE,BRANDING:InvoiceItemType.BRANDING,INSURANCE_FEE:InvoiceItemType.INSURANCE_FEE,LABEL_FAILURE:InvoiceItemType.LABEL_FAILURE,LABEL_FEE:InvoiceItemType.LABEL_FEE,LABEL_PAYMENT:InvoiceItemType.LABEL_PAYMENT,LABEL_PAYMENT_ADJUSTMENT:InvoiceItemType.LABEL_PAYMENT_ADJUSTMENT,LABEL_PRICE_TRUE_UP_CHARGE:InvoiceItemType.LABEL_PRICE_TRUE_UP_CHARGE,LABEL_PRICE_TRUE_UP_REFUND:InvoiceItemType.LABEL_PRICE_TRUE_UP_REFUND,LABEL_REFUND:InvoiceItemType.LABEL_REFUND,LABEL_REFUND_ADJUSTMENT:InvoiceItemType.LABEL_REFUND_ADJUSTMENT,LABEL_SURCHARGE:InvoiceItemType.LABEL_SURCHARGE,LEGACY_CHARGE:InvoiceItemType.LEGACY_CHARGE,LEGACY_REFUND:InvoiceItemType.LEGACY_REFUND,MULTI_USER_LOGIN:InvoiceItemType.MULTI_USER_LOGIN,ONE_OFF_CREDIT:InvoiceItemType.ONE_OFF_CREDIT,POSTAGE_PRICE:InvoiceItemType.POSTAGE_PRICE,PREAUTH_CAPTURE:InvoiceItemType.PREAUTH_CAPTURE,PROMO_CODE_CREDIT:InvoiceItemType.PROMO_CODE_CREDIT,REBATE:InvoiceItemType.REBATE,SUBSCRIPTION_PLAN_FEE:InvoiceItemType.SUBSCRIPTION_PLAN_FEE,TRACK_FEE:InvoiceItemType.TRACK_FEE},InvoiceItem_fromJSON=function(jsonInvoiceItem){var _a,_b,_c,_d,_e,_f;return{amount:jsonInvoiceItem.amount,carrier:(null===(_a=jsonInvoiceItem.transaction)||void 0===_a?void 0:_a.carrier)||jsonInvoiceItem.provider_name,currency:jsonInvoiceItem.currency,description:jsonInvoiceItem.description,id:jsonInvoiceItem.id,invoiceItemType:jsonInvoiceItem.invoice_item_type,invoiceNumber:null===(_b=jsonInvoiceItem.invoice)||void 0===_b?void 0:_b.number,invoiceObjectId:null===(_c=jsonInvoiceItem.invoice)||void 0===_c?void 0:_c.object_id,isCredit:jsonInvoiceItem.is_credit,isPaid:jsonInvoiceItem.is_paid,objectCreated:moment_moment(jsonInvoiceItem.object_created),objectPurpose:jsonInvoiceItem.object_purpose,orderNumber:null===(_d=jsonInvoiceItem.order)||void 0===_d?void 0:_d.order_number,shopApp:null===(_e=jsonInvoiceItem.order)||void 0===_e?void 0:_e.shop_app,trackingNumber:(null===(_f=jsonInvoiceItem.transaction)||void 0===_f?void 0:_f.tracking_number)||jsonInvoiceItem.tracking_number}};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.TRANSACTIONS_INVOICE_ITEMS_EXPORT,(function invoice_items_saga_exportInvoiceItems(action){var _a,carrierAccount,endDate,invoiceItemType,invoiceStatus,startDate,storeName,csv_export,e_1;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,3,,5]),_a=action.payload.filter,carrierAccount=_a.carrierAccount,endDate=_a.endDate,invoiceItemType=_a.invoiceItemType,invoiceStatus=_a.invoiceStatus,startDate=_a.startDate,storeName=_a.storeName,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(exportInvoiceItems,{carrierAccountId:null==carrierAccount?void 0:carrierAccount.value.toString(),endDate:null==endDate?void 0:endDate.toISOString(),invoiceItemType:null==invoiceItemType?void 0:invoiceItemType.value.toString(),isPaid:invoiceStatus?"PAID"===invoiceStatus.value:void 0,shopApp:null==storeName?void 0:storeName.value.toString(),startDate:null==startDate?void 0:startDate.toISOString()})];case 1:return csv_export=_b.sent().data.links.csv_export,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((exportURL=csv_export,{payload:{exportURL},type:constants.t.TRANSACTIONS_INVOICE_ITEMS_EXPORT_SUCCESS}))];case 2:case 4:return _b.sent(),[3,5];case 3:return e_1=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((err=e_1,{payload:{err},type:constants.t.TRANSACTIONS_INVOICE_ITEMS_EXPORT_ERROR}))];case 5:return[2]}var err,exportURL}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.TRANSACTIONS_INVOICE_ITEMS_FETCH,(function invoice_items_saga_searchInvoiceItems(action){var _a,count,results,error_1;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(searchInvoiceItems,action.payload.pageNumber,action.payload.pageSize,action.payload.searchQuery,action.payload.startDate,action.payload.endDate,action.payload.paymentStatus,action.payload.invoiceItemType,action.payload.shopApp,action.payload.carrierAccountId)];case 1:return _a=_b.sent().data,count=_a.count,results=_a.results,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((invoiceItems=results.map(InvoiceItem_fromJSON),page=action.payload.pageNumber||1,pageCount=Math.ceil(count/(action.payload.pageSize||25)),{payload:{invoiceItems,page,pageCount},type:constants.t.TRANSACTIONS_INVOICE_ITEMS_FETCH_SUCCESS}))];case 2:return _b.sent(),[3,5];case 3:return error_1=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((err=error_1,{payload:{err},type:constants.t.TRANSACTIONS_INVOICE_ITEMS_FETCH_ERROR}))];case 4:return _b.sent(),newRelic_newRelic.S.noticeError("Failed to fetch invoice items",{error:error_1}),[3,5];case 5:return[2]}var err,invoiceItems,page,pageCount}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.DISPLAY_INVOICE_INVOICE_ITEMS_FETCH,(function invoice_items_saga_fetchInvoiceItemsOfInvoice(action){var results,e_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getInvoiceItemsOfInvoice,action.payload.invoiceId)];case 1:return results=_a.sent().data.results,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((invoiceItems=results.map(InvoiceItem_fromJSON),{payload:{invoiceItems},type:constants.t.DISPLAY_INVOICE_INVOICE_ITEMS_FETCH_SUCCESS}))];case 2:case 4:return _a.sent(),[3,5];case 3:return e_2=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((err=e_2,{payload:{err},type:constants.t.DISPLAY_INVOICE_INVOICE_ITEMS_FETCH_ERROR}))];case 5:return[2]}var err,invoiceItems}))}));var chargeInvoiceSuccess=function(invoice){return{payload:{invoice},type:constants.t.INVOICE_CHARGE_SUCCESS}},fetchInvoiceSuccess=function(invoice){return{payload:{invoice},type:constants.t.INVOICE_FETCH_SUCCESS}},fetchInvoicesSuccess=function(invoices,page,numPages){return{payload:{invoices,numPages,page},type:constants.t.INVOICES_FETCH_SUCCESS}},Invoice=__webpack_require__("./app/types/Invoice.ts");(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.INVOICE_CHARGE,(function invoices_saga_chargeInvoice(action){var result,invoice,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,4,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(charge,action.payload.objectId)];case 1:return result=_a.sent(),invoice=(0,Invoice.rS)(result.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(chargeInvoiceSuccess(invoice))];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,user_actions.rz)())];case 3:case 5:return _a.sent(),[3,6];case 4:return err_1=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((objectId=action.payload.objectId,err=err_1,{payload:{err,objectId},type:constants.t.INVOICE_CHARGE_ERROR}))];case 6:return[2]}var objectId,err}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.INVOICES_FETCH,(function invoices_saga_fetchInvoices(action){var _a,count,page,result,_b,totalCount,results,parsedInvoices,numPages,err_2;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,3,,5]),_a=action.payload,count=_a.count,page=_a.page,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(invoices_service_get,page,count)];case 1:return result=_c.sent(),_b=result.data,totalCount=_b.count,results=_b.results,parsedInvoices=results.map(Invoice.rS),numPages=Math.ceil(totalCount/count),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchInvoicesSuccess(parsedInvoices,page,numPages))];case 2:case 4:return _c.sent(),[3,5];case 3:return err_2=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((err=err_2,{payload:{err},type:constants.t.INVOICES_FETCH_ERROR}))];case 5:return[2]}var err}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.INVOICE_FETCH,(function invoices_saga_fetchInvoice(action){var result,invoice,err_3;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(invoices_service_getById,action.payload.invoiceId)];case 1:return result=_a.sent(),invoice=(0,Invoice.rS)(result.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchInvoiceSuccess(invoice))];case 2:case 4:return _a.sent(),[3,5];case 3:return err_3=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((err=err_3,{payload:{err},type:constants.t.INVOICE_FETCH_ERROR}))];case 5:return[2]}var err}))}));var fetchItem=function(query,page){return services_api.YZ.request({method:"GET",params:{limit:10,offset:10*page,q:query},url:"/order_items"})};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_ITEMS,(function getItem(action){var response,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(fetchItem,action.payload.query,action.payload.page)];case 1:return response=_a.sent(),action.callback(response.data),[3,3];case 2:return err_1=_a.sent(),action.callback(err_1),[3,3];case 3:return[2]}}))}));var didSaveLabel=function(response){return{payload:response,type:constants.t.SAVE_LABEL_SETTINGS_SUCCESS}},fetchLabelSettingsSuccess=function(response){return{payload:response,type:constants.t.FETCH_LABEL_SETTINGS_SUCCESS}},LabelSettings_fromJSON=function(data){return{defaultLabelFormat:data.default_label_format,defaultPackingSlipFormat:data.default_packing_slip_format,isAutoCreateReturnLabels:data.is_auto_create_return_label,isMergeLabelsAndPackingSlips:data.is_merged_labels_packing_slips,isRequireSignatureConfirmation:data.is_signature_confirmation_selected,isUseOrderNumber:data.is_use_order_number,labelLogoType:data.label_logo_type,outboundReturnLabelServiceLevel:data.default_return_service_level,outboundServiceLevel:data.default_outbound_service_level,packingSlipShowPrices:!data.is_packing_slip_hide_prices,packingSlipText:data.packing_slip_text,refText1:data.default_shipment_reference_1,refText2:data.default_shipment_reference_2,storePolicyText:data.store_policy_text}},settings_service=__webpack_require__("./app/services/settings.service.ts");(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.SAVE_LABEL_SETTINGS,(function saveLabelSettings(action){var formPayload,response,serviceLevelResponse,responsePayload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,11,,13]),formPayload=function(labelSettings){var _a,_b,_c,_d,_e,_f;return{default_label_format:labelSettings.defaultLabelFormat||null,default_outbound_account:labelSettings.outboundServiceLevel?null===(_a=labelSettings.outboundCarrierServiceLevelAccount)||void 0===_a?void 0:_a.toString():null,default_outbound_service_level:(null===(_b=labelSettings.outboundServiceLevel)||void 0===_b?void 0:_b.toString())||null,default_packing_slip_format:labelSettings.defaultPackingSlipFormat||null,default_provider:(null===(_c=labelSettings.outboundCarrierServiceLevel)||void 0===_c?void 0:_c.toString())||null,default_return_account:labelSettings.returnLabelServiceLevel?null===(_d=labelSettings.returnLabelCarrierAccount)||void 0===_d?void 0:_d.toString():null,default_return_provider:(null===(_e=labelSettings.returnLabelCarrier)||void 0===_e?void 0:_e.toString())||null,default_return_service_level:(null===(_f=labelSettings.returnLabelServiceLevel)||void 0===_f?void 0:_f.toString())||null,default_shipment_reference_1:labelSettings.refText1||"",default_shipment_reference_2:labelSettings.refText2||"",is_auto_create_return_label:labelSettings.isAutoCreateReturnLabels,is_merged_labels_packing_slips:labelSettings.isMergeLabelsAndPackingSlips,is_packing_slip_hide_prices:!labelSettings.packingSlipShowPrices||!1,is_signature_confirmation_selected:labelSettings.isRequireSignatureConfirmation||!1,is_use_order_number:labelSettings.isUseOrderNumber,label_logo_type:labelSettings.labelLogoType||null,packing_slip_text:labelSettings.packingSlipText||"",store_policy_text:labelSettings.storePolicyText||""}}(action.payload.formData),[4,(0,redux_saga_effects_npm_proxy_esm.T1)([settings_service.default,settings_service.default.saveLabelSettings],formPayload)];case 1:return response=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(settings_service.default.saveDefaultServiceLevel,formPayload.default_outbound_service_level,formPayload.default_return_service_level)];case 2:return serviceLevelResponse=_a.sent(),formPayload.default_provider&&formPayload.default_outbound_service_level?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.ph(formPayload.default_provider,formPayload.default_outbound_service_level))]:[3,4];case 3:_a.sent(),_a.label=4;case 4:return formPayload.default_return_provider&&formPayload.default_return_service_level?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.bL(formPayload.default_return_provider,formPayload.default_return_service_level))]:[3,6];case 5:_a.sent(),_a.label=6;case 6:return formPayload.default_outbound_service_level||formPayload.default_return_service_level?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(fetchServiceLevelsByAccount)]:[3,8];case 7:_a.sent(),_a.label=8;case 8:return response.data.default_provider=serviceLevelResponse.data.default_provider,response.data.default_service_level=serviceLevelResponse.data.default_service_level,responsePayload=LabelSettings_fromJSON(response.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(didSaveLabel(responsePayload))];case 9:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.$4())];case 10:return _a.sent(),[3,13];case 11:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.$4())];case 12:return _a.sent(),[3,13];case 13:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_LABEL_SETTINGS,(function labels_settings_saga_fetchLabelSettings(){var response,responsePayload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,4]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)([settings_service.default,settings_service.default.fetchLabelSettings])];case 1:return response=_a.sent(),responsePayload=LabelSettings_fromJSON(response.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchLabelSettingsSuccess(responsePayload))];case 2:return _a.sent(),[3,4];case 3:return _a.sent(),[3,4];case 4:return[2]}}))}));var line_item_service_deleteLineItem=function(id,orderId){return services_api.YZ.request({method:"DELETE",url:"/orders/".concat(orderId,"/line_items/").concat(id)})},line_item_service_editLineItem=function(id,orderId,lineItem){return services_api.YZ.request({data:(0,tslib_es6.Cl)({},lineItem),method:"PUT",url:"/orders/".concat(orderId,"/line_items/").concat(id)})},line_item_service_createLineItem=function(orderObjectId,lineItemPayload){return services_api.YZ.request({data:(0,tslib_es6.Cl)({},lineItemPayload),method:"POST",url:"/orders/".concat(orderObjectId,"/line_items")})};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.LINE_ITEMS_DELETE,(function line_item_saga_deleteLineItem(action){var trackingReference,updatedBatchEntries,parsedBatchEntries,e_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:trackingReference=action.payload.trackingReference,_a.label=1;case 1:return _a.trys.push([1,11,,14]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.De)(constants_form.aF))];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Z2,[action.payload.orderObjectId])];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(line_item_service_deleteLineItem,action.payload.id,action.payload.orderObjectId)];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(action.payload.orderObjectId))];case 5:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Z2,[action.payload.orderObjectId])];case 6:return updatedBatchEntries=_a.sent(),(0,utils.A9)(trackingReference,updatedBatchEntries),parsedBatchEntries=updatedBatchEntries.data.map(OrderBatchEntry.kc),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(parsedBatchEntries))];case 7:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj([action.payload.orderObjectId]))];case 8:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.LINE_ITEMS_DELETE_SUCCESS})];case 9:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.Wv)(constants_form.aF))];case 10:return _a.sent(),[3,14];case 11:return e_1=_a.sent(),(0,utils.dj)(trackingReference,e_1),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.uj)(constants_form.aF))];case 12:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.LINE_ITEMS_DELETE_ERROR})];case 13:return _a.sent(),[3,14];case 14:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.LINE_ITEM_CREATE,(function line_item_saga_createLineItem(action){var trackingReference,updatedBatchEntries,parsedBatchEntries,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:trackingReference=action.payload.trackingReference,_a.label=1;case 1:return _a.trys.push([1,11,,14]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.De)(constants_form.aF))];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Z2,[action.payload.orderObjectId])];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(line_item_service_createLineItem,action.payload.orderObjectId,(0,LineItem.eL)(action.payload.lineItemPayload))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(action.payload.orderObjectId))];case 5:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Z2,[action.payload.orderObjectId])];case 6:return updatedBatchEntries=_a.sent(),(0,utils.A9)(trackingReference,updatedBatchEntries),parsedBatchEntries=updatedBatchEntries.data.map(OrderBatchEntry.kc),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(parsedBatchEntries))];case 7:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj([action.payload.orderObjectId]))];case 8:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.Wv)(constants_form.aF))];case 9:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.LINE_ITEM_CREATE_SUCCESS})];case 10:return _a.sent(),[3,14];case 11:return err_1=_a.sent(),(0,utils.dj)(trackingReference,err_1),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.uj)(constants_form.aF))];case 12:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.LINE_ITEM_CREATE_ERROR})];case 13:return _a.sent(),[3,14];case 14:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.LINE_ITEM_EDIT,(function line_item_saga_editLineItem(action){var trackingReference,updatedBatchEntries,parsedBatchEntries,err_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:trackingReference=action.payload.trackingReference,_a.label=1;case 1:return _a.trys.push([1,11,,14]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.De)(constants_form.aF))];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Z2,[action.payload.orderObjectId])];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(line_item_service_editLineItem,action.payload.lineItemObjectId,action.payload.orderObjectId,(0,LineItem.eL)(action.payload.lineItemPayload))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(action.payload.orderObjectId))];case 5:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Z2,[action.payload.orderObjectId])];case 6:return updatedBatchEntries=_a.sent(),(0,utils.A9)(trackingReference,updatedBatchEntries),parsedBatchEntries=updatedBatchEntries.data.map(OrderBatchEntry.kc),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(parsedBatchEntries))];case 7:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj([action.payload.orderObjectId]))];case 8:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.LINE_ITEM_EDIT_SUCCESS})];case 9:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.Wv)(constants_form.aF))];case 10:return _a.sent(),[3,14];case 11:return err_2=_a.sent(),(0,utils.dj)(trackingReference,err_2),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.uj)(constants_form.aF))];case 12:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.LINE_ITEM_EDIT_ERROR})];case 13:return _a.sent(),[3,14];case 14:return[2]}}))}));var envId,baseHeaders,LoginFailures,TwoFactorMessages,loginSuccess=function(next){return{payload:{next},type:constants.t.LOGIN_SUCCESS}},loginError=function(error){return{payload:{error},type:constants.t.LOGIN_ERROR}},resetPasswordError=function(error){return{payload:{error},type:constants.t.RESET_PASSWORD_ERROR}},verify2FAError=function(error){return{payload:{error},type:constants.t.VERIFY_2FA_ERROR}},resend2FAError=function(error){return{payload:{error},type:constants.t.RESEND_2FA_ERROR}},djangoApi=axios_default().create({baseURL:"https://dev-qa.shippodev.com",headers:(envId="dynamic",baseHeaders={},"production"===envId||(baseHeaders["X-HTTP-Request-Source"]="React-".concat(envId)),baseHeaders),withCredentials:!0}),login=function(email,password,gRecaptchaResponse,challengeCode){return djangoApi.request({data:{challengeCode,email,gRecaptchaResponse,password},method:"POST",url:"/api/auth/login/?_t=".concat((new Date).valueOf())}).then((function(response){var _a=response.data;return{reason:_a.reason,success:_a.success}})).catch((function(error){var response=error.response;if(!response)return{};var _a=response.data,reason=_a.reason,success=_a.success;return{reason,status:response.status,success}}))};!function(LoginFailures){LoginFailures.CHALLENGE_2FA="requires_2fa",LoginFailures.EXCESSIVE_2FA="2fa_max_attempts_exceeded",LoginFailures.EXCESSIVE_LOGINS="login_max_attempts_exceeded",LoginFailures.EXPIRED_CODE="2fa_code_expired",LoginFailures.INVALID_CAPTCHA="invalid_captcha",LoginFailures.INVALID_CODE="2fa_invalid_code",LoginFailures.INVALID_CREDS="invalid_credentials",LoginFailures.LOGIN_FAILED="login_failed",LoginFailures.SSO_AUTHENTICATION_FAILED="unauthenticated"}(LoginFailures||(LoginFailures={})),function(TwoFactorMessages){TwoFactorMessages.RESEND_2FA_SUCCESS="resend_2FA_success"}(TwoFactorMessages||(TwoFactorMessages={}));var forgotPassword=function(email,gRecaptchaResponse,next){return djangoApi.request({data:{email,gRecaptchaResponse,next},method:"POST",url:"/api/auth/forgotpassword/"}).then((function(response){var _a=response.data,reason=_a.reason,success=_a.success;return{reason,status:response.status,success}})).catch((function(error){var response=error.response;if(!response)return{};var _a=response.data,reason=_a.reason,success=_a.success;return{reason,status:response.status,success}}))},generate2FA=function(email){return djangoApi.request({data:{email},method:"POST",url:"/api/auth/generate2fa/"}).then((function(response){return{success:response.data.success}})).catch((function(error){var response=error.response;return response?{success:response.data.success}:{}}))},takeRight=__webpack_require__("./node_modules/lodash-es/takeRight.js"),getTopLevelDomain=function(url){try{var matches=url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i),domain=matches&&matches[2];if(!domain)return null;var splitDomain=domain&&domain.split(".");return(0,takeRight.A)(splitDomain,2).join(".")}catch(error){return null}};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.LOGIN_SUBMIT,(function login_saga_login(action){var _a,email,gRecaptchaResponse,next,password,response,reason,status_1,success,challengeUrl,loginUrl,error_1;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:_a=action.payload,email=_a.email,gRecaptchaResponse=_a.gRecaptchaResponse,next=_a.next,password=_a.password,_c.label=1;case 1:return _c.trys.push([1,17,,20]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(login,email,password,gRecaptchaResponse)];case 2:return response=_c.sent(),reason=response.reason,status_1=response.status,(success=response.success)&&"success"===reason?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(loginSuccess(next))]:[3,4];case 3:return _c.sent(),[3,16];case 4:if(success||401!==status_1)return[3,14];switch(reason){case LoginFailures.CHALLENGE_2FA:return[3,5];case LoginFailures.LOGIN_FAILED:return[3,8];case LoginFailures.EXCESSIVE_LOGINS:case LoginFailures.INVALID_CAPTCHA:case LoginFailures.INVALID_CREDS:return[3,10]}return[3,13];case 5:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.VERIFY_2FA_START})];case 6:return _c.sent(),challengeUrl=next?"/challenge?next=".concat(encodeURIComponent(next)):"/challenge",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)(challengeUrl))];case 7:return _c.sent(),[3,13];case 8:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(loginError(reason))];case 9:return _c.sent(),[3,13];case 10:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(loginError(reason))];case 11:return _c.sent(),loginUrl=next?"/login?next=".concat(encodeURIComponent(next)):"/login",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)(loginUrl))];case 12:return _c.sent(),[3,13];case 13:return[3,16];case 14:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(loginError("Login Unsuccessful"))];case 15:_c.sent(),_c.label=16;case 16:return[3,20];case 17:return error_1=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(loginError(error_1))];case 18:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(newRelic_newRelic.S.noticeError,"Failed to log in",{error:error_1})];case 19:return _c.sent(),[3,20];case 20:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.LOGIN_SUCCESS,(function loginSuccessful(action){var next,cookieDomain;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return next=action.payload.next,cookieDomain=getTopLevelDomain(window.location.href),new Date<new Date("11/08/2023")?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(js_cookie.set,"is_existing_user","true",{domain:".".concat(cookieDomain),expires:90})]:[3,2];case 1:_a.sent(),_a.label=2;case 2:return next?new RegExp(/^https?:\/\//i).test(next)?(window.location.href=next,[3,5]):[3,3]:[3,6];case 3:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)(next))];case 4:_a.sent(),_a.label=5;case 5:return[3,8];case 6:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)("/"))];case 7:_a.sent(),_a.label=8;case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RESET_PASSWORD_SUBMIT,(function resetPassword(action){var _a,email,gRecaptchaResponse,next,_b,reason,status_3,success,sentUrl,error_3;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:_a=action.payload,email=_a.email,gRecaptchaResponse=_a.gRecaptchaResponse,next=_a.next,_c.label=1;case 1:return _c.trys.push([1,10,,13]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(forgotPassword,email,gRecaptchaResponse,next)];case 2:return _b=_c.sent(),reason=_b.reason,status_3=_b.status,(success=_b.success)?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.RESET_PASSWORD_SUCCESS})]:[3,5];case 3:return _c.sent(),sentUrl=next?"/sent?next=".concat(encodeURIComponent(next)):"/sent",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)(sentUrl))];case 4:return _c.sent(),[3,9];case 5:return success||401!==status_3?[3,7]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(resetPasswordError(reason))];case 6:return _c.sent(),[3,9];case 7:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(resetPasswordError("Error submitting reset password action"))];case 8:_c.sent(),_c.label=9;case 9:return[3,13];case 10:return error_3=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(resetPasswordError(error_3))];case 11:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(newRelic_newRelic.S.noticeError,"Failed to reset password",{error:error_3})];case 12:return _c.sent(),[3,13];case 13:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.VERIFY_2FA_SUBMIT,(function loginWith2FA(action){var _a,challengeCode,email,gRecaptchaResponse,next,password,_b,reason,status_2,success,loginUrl,error_2;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:_a=action.payload,challengeCode=_a.challengeCode,email=_a.email,gRecaptchaResponse=_a.gRecaptchaResponse,next=_a.next,password=_a.password,_d.label=1;case 1:return _d.trys.push([1,15,,18]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(login,email,password,gRecaptchaResponse,challengeCode)];case 2:return _b=_d.sent(),reason=_b.reason,status_2=_b.status,(success=_b.success)?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.VERIFY_2FA_SUCCESS})]:[3,5];case 3:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(loginSuccess(next))];case 4:return _d.sent(),[3,14];case 5:if(success||401!==status_2)return[3,12];switch(reason){case LoginFailures.INVALID_CREDS:case LoginFailures.EXCESSIVE_LOGINS:return[3,6];case LoginFailures.CHALLENGE_2FA:case LoginFailures.EXCESSIVE_2FA:case LoginFailures.EXPIRED_CODE:case LoginFailures.INVALID_CAPTCHA:case LoginFailures.INVALID_CODE:return[3,9]}return[3,11];case 6:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(loginError(reason))];case 7:return _d.sent(),loginUrl=next?"/login?next=".concat(encodeURIComponent(next)):"/login",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)(loginUrl))];case 8:return _d.sent(),[3,11];case 9:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(verify2FAError(reason))];case 10:return _d.sent(),[3,11];case 11:return[3,14];case 12:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(verify2FAError("Verification Unsuccessful"))];case 13:_d.sent(),_d.label=14;case 14:return[3,18];case 15:return error_2=_d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(verify2FAError(error_2))];case 16:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(newRelic_newRelic.S.noticeError,"Failed to log in with 2FA",{error:error_2})];case 17:return _d.sent(),[3,18];case 18:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RESEND_2FA_SUBMIT,(function login_saga_generate2FA(action){var email,error_4;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,6,,9]),email=action.payload.email,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(generate2FA,email)];case 1:return _a.sent().success?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((successMessage=TwoFactorMessages.RESEND_2FA_SUCCESS,{payload:{successMessage},type:constants.t.RESEND_2FA_SUCCESS}))]:[3,3];case 2:return _a.sent(),[3,5];case 3:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(resend2FAError("Error requesting two-factor token"))];case 4:_a.sent(),_a.label=5;case 5:return[3,9];case 6:return error_4=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(resend2FAError(error_4))];case 7:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(newRelic_newRelic.S.noticeError,"Failed to generate 2FA",{error:error_4})];case 8:return _a.sent(),[3,9];case 9:return[2]}var successMessage}))}));var ManifestStatus,startOfDay=__webpack_require__("./node_modules/date-fns/esm/startOfDay/index.js"),formatRFC3339=__webpack_require__("./node_modules/date-fns/esm/formatRFC3339/index.js"),subBusinessDays=__webpack_require__("./node_modules/date-fns/esm/subBusinessDays/index.js"),endOfDay=__webpack_require__("./node_modules/date-fns/esm/endOfDay/index.js"),addBusinessDays=__webpack_require__("./node_modules/date-fns/esm/addBusinessDays/index.js"),FileSaver_min=__webpack_require__("./node_modules/file-saver/dist/FileSaver.min.js"),FileSaver_min_default=__webpack_require__.n(FileSaver_min),fetchManifestsSuccessTerminalState=function(payload){return{payload,type:constants.t.MANIFESTS_FETCH_SUCCESS_TERMINAL_STATE}},fetchManifestsGroupsError=function(payload){return{payload,type:constants.t.MANIFESTS_GROUPS_FETCH_ERROR}},fetchManifestsError=function(payload){return{payload,type:constants.t.MANIFESTS_FETCH_ERROR}},startManifestsPolling=function(manifestsToPoll){return{payload:{manifestsToPoll},type:constants.t.MANIFESTS_POLL_START}},stopManifestsPolling=function(){return{type:constants.t.MANIFESTS_POLL_END}},getManifestGroups=function(dateRangeStart,dateRangeEnd,carrierObjectId){return services_api.YZ.request({method:"GET",params:{carrier_account_object_id:carrierObjectId,date_range_end:dateRangeEnd,date_range_start:dateRangeStart,is_test:!1},url:"/manifests/groups/"})},manifests_service_generateManifest=function(params){var _a,_b;return services_api.kC.request({data:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},params),{address_from:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},params.address_from),{country:null===(_b=null===(_a=params.address_from)||void 0===_a?void 0:_a.country)||void 0===_b?void 0:_b.iso2})}),method:"POST",url:"v1/manifests"})},downloadManifestDocumentsZip=function(manifestID){return services_api.YZ.request({method:"GET",responseType:"arraybuffer",url:"/manifests/documents/".concat(manifestID)})},getManifestsByObjectIds=function(manifestObjectIds){return services_api.YZ.request({method:"GET",params:{manifests:manifestObjectIds},url:"/manifests"})},getManifestsByDateRange=function(dateRangeStart,dateRangeEnd){return services_api.YZ.request({method:"GET",params:{date_range_end:dateRangeEnd,date_range_start:dateRangeStart},url:"/manifests"})},ManifestFromJSON=function(manifestJSON){return{addressFrom:manifestJSON.address_from,carrier:manifestJSON.carrier,documents:manifestJSON.documents,errors:manifestJSON.errors,id:manifestJSON.id,objectId:manifestJSON.object_id,objectStatus:manifestJSON.object_status,providerToken:manifestJSON.provider,submissionDate:new Date(manifestJSON.shipment_date)}},ManifestServiceLevelCountsFromJSON=function(jsonManifestServiceLevelCounts){return{dateRangeEnd:jsonManifestServiceLevelCounts.date_range_end,dateRangeStart:jsonManifestServiceLevelCounts.date_range_start,manifestableTransactionCount:jsonManifestServiceLevelCounts.manifestable_transaction_count.map((function(entry){return{count:entry.count,servicelevelName:entry.servicelevel_name}})),submissionDate:jsonManifestServiceLevelCounts.submission_date}};!function(ManifestStatus){ManifestStatus.ERROR="ERROR",ManifestStatus.QUEUED="QUEUED",ManifestStatus.SUCCESS="SUCCESS"}(ManifestStatus||(ManifestStatus={}));var manifests_saga_worker=null,manifestsToPoll=[];function manifestsPollWorker(manifestsToPoll){var MANIFEST_POLL_WAIT_TIME,results,manifests,manifestsInTerminalState,manifests_1,manifests_1_1,manifest,e_1,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:MANIFEST_POLL_WAIT_TIME=1e3,_b.label=1;case 1:if(!manifestsToPoll.length)return[3,11];_b.label=2;case 2:return _b.trys.push([2,8,,10]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getManifestsByObjectIds,manifestsToPoll)];case 3:if(!(results=_b.sent().data.results)||!results.length)return[3,7];manifests=results.map(ManifestFromJSON),manifestsInTerminalState=[];try{for(e_1=void 0,manifests_1=(0,tslib_es6.Ju)(manifests),manifests_1_1=manifests_1.next();!manifests_1_1.done;manifests_1_1=manifests_1.next())manifest=manifests_1_1.value,[ManifestStatus.ERROR,ManifestStatus.SUCCESS].includes(manifest.objectStatus)&&manifestsInTerminalState.push(manifest)}catch(e_1_1){e_1={error:e_1_1}}finally{try{manifests_1_1&&!manifests_1_1.done&&(_a=manifests_1.return)&&_a.call(manifests_1)}finally{if(e_1)throw e_1.error}}return manifestsInTerminalState.length?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchManifestsSuccessTerminalState(manifestsInTerminalState))]:[3,5];case 4:_b.sent(),_b.label=5;case 5:return manifestsInTerminalState.length!==manifestsToPoll.length?[3,7]:(manifestsToPoll=[],[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stopManifestsPolling())]);case 6:_b.sent(),_b.label=7;case 7:return[3,10];case 8:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stopManifestsPolling())];case 9:return _b.sent(),[3,10];case 10:return[3,13];case 11:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stopManifestsPolling())];case 12:_b.sent(),_b.label=13;case 13:return[4,(0,redux_saga_effects_npm_proxy_esm.cb)(MANIFEST_POLL_WAIT_TIME)];case 14:return _b.sent(),[3,1];case 15:return[2]}}))}function manifestsPollRace(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return 25e3,[4,(0,redux_saga_effects_npm_proxy_esm.O4)({cancel:(0,redux_saga_effects_npm_proxy_esm.s)(constants.t.MANIFESTS_POLL_END),task:(0,redux_saga_effects_npm_proxy_esm.T1)(manifestsPollWorker,manifestsToPoll),timeout:(0,redux_saga_effects_npm_proxy_esm.cb)(25e3,!0)})];case 1:return _a.sent().timeout?(manifestsToPoll=[],[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stopManifestsPolling())]):[3,3];case 2:_a.sent(),_a.label=3;case 3:return manifests_saga_worker=null,[2]}}))}(function manifestsPollWatcher(){var action;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.s)(constants.t.MANIFESTS_POLL_START)];case 1:return action=_a.sent(),manifestsToPoll=action.payload.manifestsToPoll,manifests_saga_worker?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.Zy)(manifestsPollRace)];case 2:manifests_saga_worker=_a.sent(),_a.label=3;case 3:return[3,0];case 4:return[2]}}))})(),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.MANIFESTS_GROUPS_FETCH,(function getManifestsGroups(action){var _a,carrierObjectId,dateRangeEnd,dateRangeStart,results,error_1;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,3,,6]),_a=action.payload,carrierObjectId=_a.carrierObjectId,dateRangeEnd=_a.dateRangeEnd,dateRangeStart=_a.dateRangeStart,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getManifestGroups,dateRangeStart,dateRangeEnd,carrierObjectId)];case 1:return results=_b.sent().data.results,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((jsonManifestGroups=results,payload={addresses:jsonManifestGroups.addresses.map((function(jsonAddress){return(0,Address.rS)(jsonAddress)})),carrierAccount:jsonManifestGroups.carrier_account,ranges:Object.entries(jsonManifestGroups.ranges).reduce((function(rangesMap,_a){var _b=(0,tslib_es6.zs)(_a,2),key=_b[0],jsonServiceLevelCountsList=_b[1];return rangesMap[key]=jsonServiceLevelCountsList.map(ManifestServiceLevelCountsFromJSON),rangesMap}),{})},{payload,type:constants.t.MANIFESTS_GROUPS_FETCH_SUCCESS}))];case 2:case 5:return _b.sent(),[3,6];case 3:return error_1=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchManifestsGroupsError(error_1))];case 4:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(newRelic_newRelic.S.noticeError,"Failed to fetch manifest groups",{error:error_1})];case 6:return[2]}var payload,jsonManifestGroups}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.MANIFESTS_FETCH,(function getRecentManifests(){var today,dateRangeStart,dateRangeEnd,results,manifests,manifestsToPoll_1,error_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,5,,8]),today=(0,startOfDay.default)(Date.now()),dateRangeStart=(0,formatRFC3339.A)((0,subBusinessDays.A)(today,5)),dateRangeEnd=(0,formatRFC3339.A)((0,endOfDay.default)((0,addBusinessDays.A)(today,5))),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getManifestsByDateRange,dateRangeStart,dateRangeEnd)];case 1:return results=_a.sent().data.results,manifests=results.map(ManifestFromJSON),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((payload=manifests,{payload,type:constants.t.MANIFESTS_FETCH_SUCCESS}))];case 2:return _a.sent(),(manifestsToPoll_1=manifests.filter((function(manifest){return manifest.objectStatus===ManifestStatus.QUEUED})).map((function(manifest){return manifest.objectId}))).length?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(startManifestsPolling(manifestsToPoll_1))]:[3,4];case 3:_a.sent(),_a.label=4;case 4:return[3,8];case 5:return error_2=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchManifestsError(error_2))];case 6:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(newRelic_newRelic.S.noticeError,"Failed to fetch recent manifests",{error:error_2})];case 7:return _a.sent(),[3,8];case 8:return[2]}var payload}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.MANIFESTS_DOWNLOAD_ZIP,(function downloadManifestZip(action){var response,blob,error_3;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(downloadManifestDocumentsZip,action.payload)];case 1:return response=_a.sent(),blob=new Blob([response.data],{type:"application/zip"}),FileSaver_min_default().saveAs(blob,"manifest_".concat(action.payload.toString(),".zip")),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.MANIFESTS_DOWNLOAD_ZIP_SUCCESS})];case 2:case 5:return _a.sent(),[3,6];case 3:return error_3=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.MANIFESTS_DOWNLOAD_ZIP_ERROR})];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(newRelic_newRelic.S.noticeError,"Failed to download manifest ZIP",{error:error_3})];case 6:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.MANIFESTS_GENERATE,(function manifests_saga_generateManifest(action){var trackingReference,response,err_1,errorMessage,_a,_b,_c;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:trackingReference=action.payload.trackingReference,_d.label=1;case 1:return _d.trys.push([1,6,,8]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(manifests_service_generateManifest,action.payload)];case 2:return response=_d.sent(),(0,utils.A9)(trackingReference,response),(null===(_a=null==response?void 0:response.data)||void 0===_a?void 0:_a.object_id)?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(startManifestsPolling([response.data.object_id]))]:[3,4];case 3:_d.sent(),_d.label=4;case 4:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.MANIFESTS_GENERATE_SUCCESS})];case 5:return _d.sent(),[3,8];case 6:return err_1=_d.sent(),(0,utils.dj)(trackingReference,err_1),errorMessage="Something unexpected happened on our end.",(null===(_c=null===(_b=null==err_1?void 0:err_1.response)||void 0===_b?void 0:_b.data)||void 0===_c?void 0:_c.detail)&&(errorMessage=err_1.response.data.detail),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((payload=new Error(errorMessage),{payload,type:constants.t.MANIFESTS_GENERATE_ERROR}))];case 7:return _d.sent(),[3,8];case 8:return[2]}var payload}))}));var has=__webpack_require__("./node_modules/lodash-es/has.js"),createOrderSuccess=function(objectId){return{payload:{objectId},type:constants.t.MANUALORDER_SAVE_ORDER_SUCCESS}},manualOrderReset=function(){return{type:constants.t.MANUALORDER_RESET}};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.MANUALORDER_SAVE_ORDER,(function manual_order_saga_createOrder(action){var errorMessage,objectId,trackingReference,conditionals,addresses,savedAddresses,senderAddress,returnAddress,senderAPIAddress,userReturnAddress,senderAPIAddressJSON,_a,returnAPIAddress,userAddress,returnAPIAddressJSON,response,_b,savedAddressesCount,i,address,isDefaultReturn,fromAddress,toAddress,order,savedOrder,object_id,batchEntryResponse,batchEntry,batchEntryId,returnAddressToUse,sanitizedReturnAddress,location_1,addressUpdateResponse,error_1,err,_c,_d,_e;return(0,tslib_es6.YH)(this,(function(_f){switch(_f.label){case 0:errorMessage="",objectId="",trackingReference=action.payload.trackingReference,_f.label=1;case 1:return _f.trys.push([1,43,,49]),conditionals=action.payload.manualOrder.conditionals,addresses=action.payload.manualOrder.addresses,savedAddresses=[],senderAddress=(0,has.A)(addresses,addressBook.y9)?addresses.sender:null,returnAddress=(0,has.A)(addresses,addressBook.lj)?addresses.return:null,conditionals.saveAsDefaultSenderAddress?(errorMessage="Unable to save default sender address",senderAPIAddress=APIAddress.ZC(senderAddress),[4,selectState(user_selectors.kQ)]):[3,7];case 2:return userReturnAddress=_f.sent(),senderAPIAddress.isDefaultSender=conditionals.saveAsDefaultSenderAddress,senderAPIAddress.isDefaultReturn=conditionals.useSenderAddressAsReturn,!senderAPIAddress.isDefaultReturn&&userReturnAddress&&senderAddress&&userReturnAddress.id===senderAddress.id&&(senderAPIAddress.isDefaultReturn=userReturnAddress.isDefaultReturn),senderAPIAddressJSON=APIAddress.U2((0,Address.ko)(senderAPIAddress)),senderAddress&&void 0!==senderAddress.id?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(address_service.de,senderAddress.id,senderAPIAddressJSON)]:[3,4];case 3:return _a=_f.sent(),[3,6];case 4:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(address_service.pC,senderAPIAddressJSON)];case 5:_a=_f.sent(),_f.label=6;case 6:response=_a,address=APIAddress.rS(response.data),savedAddresses.push(address),_f.label=7;case 7:return!conditionals.saveAsDefaultReturnAddress||conditionals.useSenderAddressAsReturn?[3,15]:(errorMessage="Unable to save default return address",returnAPIAddress=APIAddress.ZC(returnAddress),conditionals.saveAsDefaultSenderAddress?(senderAddress&&returnAddress&&returnAddress.id===senderAddress.id&&(returnAPIAddress.isDefaultSender=senderAddress.isDefaultSender),[3,10]):[3,8]);case 8:return[4,selectState(user_selectors.GA)];case 9:userAddress=_f.sent(),returnAddress&&returnAddress.id===(null==userAddress?void 0:userAddress.id)&&(returnAPIAddress.isDefaultSender=null==userAddress?void 0:userAddress.isDefaultSender),_f.label=10;case 10:return returnAPIAddress.isDefaultReturn=conditionals.saveAsDefaultReturnAddress,returnAPIAddressJSON=APIAddress.U2((0,Address.ko)(returnAPIAddress)),returnAddress&&void 0!==returnAddress.id?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(address_service.de,returnAddress.id,returnAPIAddressJSON)]:[3,12];case 11:return _b=_f.sent(),[3,14];case 12:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(address_service.pC,returnAPIAddressJSON)];case 13:_b=_f.sent(),_f.label=14;case 14:response=_b,address=APIAddress.rS(response.data),savedAddresses.push(address),_f.label=15;case 15:savedAddressesCount=savedAddresses.length,i=0,_f.label=16;case 16:return i<savedAddressesCount?(address=savedAddresses[i],isDefaultReturn=address.isDefaultReturn,address.isDefaultSender?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.UZ({address}))]:[3,19]):[3,27];case 17:return _f.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("Manual Label - Saved Sender Address as Default"))];case 18:_f.sent(),_f.label=19;case 19:return isDefaultReturn?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.UI({address}))]:[3,22];case 20:return _f.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("Manual Label - Saved Return Address as Default"))];case 21:_f.sent(),_f.label=22;case 22:return senderAddress&&address.id===senderAddress.id||returnAddress&&address.id===returnAddress.id?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(address_actions.Yl({address,id:address.id,trackingReference}))]:[3,24];case 23:return _f.sent(),[3,26];case 24:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(address_actions._M({address,trackingReference}))];case 25:_f.sent(),_f.label=26;case 26:return i+=1,[3,16];case 27:return errorMessage="Unable to create order",fromAddress=(0,Address.U2)(action.payload.manualOrder.addresses.sender),toAddress=(0,Address.U2)(action.payload.manualOrder.addresses.recipient),order=(0,Order.X0)(fromAddress,toAddress),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.fS,order)];case 28:return savedOrder=_f.sent(),(0,utils.mq)(trackingReference,{isError:savedOrder.status>=300,message:void 0,status:savedOrder.status,url:savedOrder.config.url||""}),errorMessage="Unable to set return address of new order",object_id=savedOrder.data.object_id,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.NX,[object_id],[])];case 29:return batchEntryResponse=_f.sent(),(0,utils.mq)(trackingReference,{isError:batchEntryResponse.status>=300,message:void 0,status:batchEntryResponse.status,url:batchEntryResponse.config.url||""}),batchEntry=batchEntryResponse.data,batchEntryId=batchEntry[0].id,returnAddressToUse=conditionals.useSenderAddressAsReturn?addresses.sender:addresses.return,sanitizedReturnAddress=(0,Address.ko)(returnAddressToUse),[4,selectState(getLocation)];case 30:return location_1=_f.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.EZ,sanitizedReturnAddress,addressBook.lj,[batchEntryId])];case 31:return addressUpdateResponse=_f.sent(),(0,utils.mq)(trackingReference,{isError:addressUpdateResponse.status>=300,message:void 0,status:addressUpdateResponse.status,url:addressUpdateResponse.config.url||""}),objectId=object_id,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(createOrderSuccess(objectId))];case 32:return _f.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("Manual Label - Created Manual Label"))];case 33:return _f.sent(),(null===(_c=location_1.search)||void 0===_c?void 0:_c.includes("progressMeter"))?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("Progress Meter - Create Order Completed - (Manual Label)"))]:[3,35];case 34:_f.sent(),_f.label=35;case 35:return conditionals.useSenderAddressAsReturn?[3,37]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("Manual Label - Separate Return Address"))];case 36:_f.sent(),_f.label=37;case 37:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(manualOrderReset())];case 38:return _f.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)("/orders/".concat(objectId)))];case 39:return _f.sent(),[4,selectState(orders_selectors.Oz)];case 40:return 0!==_f.sent()?[3,42]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({eventName:"FIRST_ORDER_ADDED"}))];case 41:_f.sent(),_f.label=42;case 42:return[3,49];case 43:return error_1=_f.sent(),err=error_1,axios_default().isAxiosError(error_1)&&(0,utils.mq)(trackingReference,{isError:!0,message:error_1.message,status:(null===(_d=error_1.response)||void 0===_d?void 0:_d.status)||-1,url:error_1.config.url||""}),objectId.length>0?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(manualOrderReset())]:[3,46];case 44:return _f.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)("/orders/".concat(objectId)))];case 45:return _f.sent(),[3,48];case 46:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((message=errorMessage,error=err,{payload:{error,message},type:constants.t.MANUALORDER_SAVE_ORDER_FAILURE}))];case 47:_f.sent(),"Unable to save default sender address"===errorMessage&&newRelic_newRelic.S.noticeError("Failed to save default sender address",{error:error_1,response:null===(_e=err.response)||void 0===_e?void 0:_e.data}),_f.label=48;case 48:return[3,49];case 49:return[2]}var message,error}))}));var fetchNotificationsSuccess=function(payload){return{payload,type:constants.t.FETCH_NOTIFICATIONS_SUCCESS}},updateOrderShippedEmailSettingsSuccess=function(orderShippedFormFields){return{payload:{orderShippedFormFields},type:constants.t.UPDATE_ORDER_SHIPPED_EMAIL_SETTINGS_SUCCESS}},updateOrderArrivedEmailSettingsSuccess=function(orderArrivedFormFields){return{payload:{orderArrivedFormFields},type:constants.t.UPDATE_ORDER_ARRIVED_EMAIL_SETTINGS_SUCCESS}},notifications_service_get=function(){return services_api.YZ.request({method:"GET",url:"/setting/notifications"})},notifications_service_put=function(data){return services_api.YZ.request({data,method:"PUT",url:"/setting/notifications"})},EmailNotifications=__webpack_require__("./app/types/EmailNotifications.ts");(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_NOTIFICATIONS,(function fetchNotificationSetting(){var response,payload,errorData_1,error,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(notifications_service_get)];case 1:return response=_b.sent(),payload={autoDeliveredEmailCustomText:response.data.notification_configs.DELIVERED.custom_text,autoDeliveredEmailNotifications:response.data.notification_configs.DELIVERED.is_auto_email_enabled,autoEmailNotifications:response.data.notification_configs.UNKNOWN.is_auto_email_enabled,autoOrderEmailCustomText:response.data.notification_configs.UNKNOWN.custom_text,autoOrderEmailDelayMinutes:response.data.notification_configs.UNKNOWN.auto_email_delay_minutes},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchNotificationsSuccess(payload))];case 2:case 4:return _b.sent(),[3,5];case 3:return errorData_1=_b.sent(),error=errorData_1,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((errorMessage=null===(_a=error.response)||void 0===_a?void 0:_a.data,{payload:{errorMessage},type:constants.t.FETCH_NOTIFICATIONS_ERROR}))];case 5:return[2]}var errorMessage}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.SEND_SAMPLE_EMAIL,(function notifications_saga_sendSampleEmail(action){var sendSampleEmailByType,sendSampleEmailSuccessByType,sendSampleEmailErrorByType;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),sendSampleEmailByType=function(){return notificationType=action.notificationType,services_api.YZ.request({data:{notification_type:notificationType},method:"POST",url:"/order-notifications/send-sample"});var notificationType},sendSampleEmailSuccessByType=function(){return{notificationType:action.notificationType,type:constants.t.SEND_SAMPLE_EMAIL_SUCCESS}},[4,(0,redux_saga_effects_npm_proxy_esm.T1)(sendSampleEmailByType)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendSampleEmailSuccessByType())];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),sendSampleEmailErrorByType=function(){return{notificationType:action.notificationType,type:constants.t.SEND_SAMPLE_EMAIL_ERROR}},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendSampleEmailErrorByType())];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.UPDATE_ORDER_SHIPPED_EMAIL_SETTINGS,(function notifications_saga_updateOrderShippedEmailSettings(action){var orderShippedFormFields,servicePayload,data,updatedFormFields,err_1,axiosError,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:orderShippedFormFields=action.payload.orderShippedFormFields,servicePayload={notification_configs:(0,EmailNotifications.MJ)(orderShippedFormFields)},_b.label=1;case 1:return _b.trys.push([1,5,,7]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(notifications_service_put,servicePayload)];case 2:return data=_b.sent().data,updatedFormFields=(0,EmailNotifications.$7)(data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(updateOrderShippedEmailSettingsSuccess(updatedFormFields))];case 3:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.u4,segment.sV.email_notification_changed,{email_type:"order_shipped",has_custom_text:updatedFormFields.orderShippingEmailContent.length>0,is_enabled:updatedFormFields.orderShippingEmailEnabled})];case 4:return _b.sent(),[3,7];case 5:return err_1=_b.sent(),axiosError=err_1,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((errorData=null===(_a=axiosError.response)||void 0===_a?void 0:_a.data,{payload:{errorData},type:constants.t.UPDATE_ORDER_SHIPPED_EMAIL_SETTINGS_ERROR}))];case 6:return _b.sent(),[3,7];case 7:return[2]}var errorData}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.UPDATE_ORDER_ARRIVED_EMAIL_SETTINGS,(function notifications_saga_updateOrderArrivedEmailSettings(action){var orderArrivedFormFields,servicePayload,data,updatedFormFields,err_2,axiosError,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:orderArrivedFormFields=action.payload.orderArrivedFormFields,servicePayload={notification_configs:(0,EmailNotifications.en)(orderArrivedFormFields)},_b.label=1;case 1:return _b.trys.push([1,5,,7]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(notifications_service_put,servicePayload)];case 2:return data=_b.sent().data,updatedFormFields=(0,EmailNotifications.PW)(data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(updateOrderArrivedEmailSettingsSuccess(updatedFormFields))];case 3:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.u4,segment.sV.email_notification_changed,{email_type:"order_delivered",has_custom_text:updatedFormFields.orderArrivedEmailContent.length>0,is_enabled:updatedFormFields.orderArrivedEmailEnabled})];case 4:return _b.sent(),[3,7];case 5:return err_2=_b.sent(),axiosError=err_2,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((errorData=null===(_a=axiosError.response)||void 0===_a?void 0:_a.data,{payload:{errorData},type:constants.t.UPDATE_ORDER_ARRIVED_EMAIL_SETTINGS_ERROR}))];case 6:return _b.sent(),[3,7];case 7:return[2]}var errorData}))}));var apiMessageErrorCodes=__webpack_require__("./app/constants/errors/apiMessageErrorCodes.ts"),getNotificationsStore=function(state){return state.notifications},isAutoOrderEmailEnabled=(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.isAutoOrderEmailEnabled})),orders_batch_selectors=((0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.isAutoDeliveredEmailEnabled})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.orderShippedEmailSettingSubmitSuccess})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.orderShippedEmailSettingSubmitFailed})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.orderArrivedEmailSettingSubmitSuccess})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.orderArrivedEmailSettingSubmitFailed})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.autoOrderEmailDelayMinutes})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.isLoadingNotifications})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.autoOrderEmailCustomText})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.autoDeliveredEmailCustomText})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.sendingSampleShippedEmail})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.sampleShippedEmailSent})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.sampleShippedEmailFailed})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.sendingSampleDeliveredEmail})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.sampleDeliveredEmailSent})),(0,reselect_es.Mz)(getNotificationsStore,(function(notificationsStore){return notificationsStore.sampleDeliveredEmailFailed})),__webpack_require__("./app/selectors/orders-batch.selectors.ts")),transactions_selectors=__webpack_require__("./app/selectors/transactions.selectors.ts");function batchWorker(batchId,trackingReference){var batchShipments,batchEntries,batchTransactionsData,response,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,selectState(orders_batch_selectors.mK)];case 1:return batchShipments=_a.sent(),[4,selectState(orders_batch_selectors.tF)];case 2:return batchEntries=_a.sent(),[4,selectState(orders_batch_selectors.EL)];case 3:batchTransactionsData=_a.sent(),_a.label=4;case 4:return _a.trys.push([4,8,,10]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.fH,batchId)];case 5:return response=_a.sent(),payload={batch:OrdersBatch.rS(response.data),currentBatchEntries:batchEntries.data,currentShipments:batchShipments.data,currentTransactions:batchTransactionsData,trackingReference},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.nv(payload))];case 6:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.cb)(500)];case 7:return _a.sent(),[3,10];case 8:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.s5())];case 9:return _a.sent(),[3,10];case 10:return[3,0];case 11:return[2]}}))}(function batchWatcher(){var action;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.s)(constants.t.ORDERS_BATCH_POLL_START)];case 1:return action=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.O4)({cancel:(0,redux_saga_effects_npm_proxy_esm.s)([constants.t.ORDERS_BATCH_POLL_END]),task:(0,redux_saga_effects_npm_proxy_esm.T1)(batchWorker,action.payload.batchId,action.payload.trackingReference),timeout:(0,redux_saga_effects_npm_proxy_esm.cb)(12e4,!0)})];case 2:return _a.sent().timeout?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.cJ())]:[3,4];case 3:_a.sent(),_a.label=4;case 4:return[3,0];case 5:return[2]}}))})(),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_BATCH_FETCH_SUCCESS,(function fetchBatchOrdersData(action){var wasOrdersFetchTriggered,ordersFetched,batchOrders,storedOrders,batchEntriesByOrderObjectId,batchOrders_1,batchOrders_1_1,batchOrder,batchEntry,e_1_1,e_1,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return[4,selectState(orders_batch_selectors.qe)];case 1:return wasOrdersFetchTriggered=_b.sent(),ordersFetched=[],wasOrdersFetchTriggered?[2]:(batchOrders=action.payload.batch.orders,[4,selectState(orders_selectors.Sv)]);case 2:storedOrders=_b.sent(),batchEntriesByOrderObjectId=action.payload.batch.batchEntries.reduce((function(hashMap,batchEntry){var _a;return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},hashMap),((_a={})[batchEntry.orderObjectId]=batchEntry,_a))}),{}),_b.label=3;case 3:_b.trys.push([3,8,9,10]),batchOrders_1=(0,tslib_es6.Ju)(batchOrders),batchOrders_1_1=batchOrders_1.next(),_b.label=4;case 4:return batchOrders_1_1.done?[3,7]:(batchOrder=batchOrders_1_1.value,batchEntry=batchEntriesByOrderObjectId[batchOrder.objectId],storedOrders[batchOrder.objectId]||batchEntry.objectStatus===OrdersBatch.DO.EXCLUDED_ORDER?[3,6]:(ordersFetched.push(batchOrder.objectId),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(batchOrder.objectId))]));case 5:_b.sent(),_b.label=6;case 6:return batchOrders_1_1=batchOrders_1.next(),[3,4];case 7:return[3,10];case 8:return e_1_1=_b.sent(),e_1={error:e_1_1},[3,10];case 9:try{batchOrders_1_1&&!batchOrders_1_1.done&&(_a=batchOrders_1.return)&&_a.call(batchOrders_1)}finally{if(e_1)throw e_1.error}return[7];case 10:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.$z(ordersFetched))];case 11:return _b.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_BATCH_FETCH_SUCCESS,(function fetchBatchOrderLabels(action){var _a,batch,currentTransactions,trackingReference,currentBatchStep,allTransactionsNew,transactionsToFetch,_b,_c,transaction,orderObjectId,e_4_1,hasSingleTransactionError,outboundGroupIsCompleted,returnGroupIsCompleted,isSidePanelCheckout,anyQueuedReturnLabelTransaction,hasAutomatedEmailNotifications,hasMergedDocuments,successFullTransactionCount,e_4,_d;return(0,tslib_es6.YH)(this,(function(_e){switch(_e.label){case 0:return _a=action.payload,batch=_a.batch,currentTransactions=_a.currentTransactions,trackingReference=_a.trackingReference,[4,selectState(orders_batch_selectors.eS)];case 1:if((currentBatchStep=_e.sent())!==OrdersBatch.kG.ORDERS_PAGE&&currentBatchStep!==OrdersBatch.kG.LABELS)return[2];allTransactionsNew=(0,list.fL)(batch.transactions),transactionsToFetch=function(_a){var allTransactionsNew=_a.allTransactionsNew,currentTransactions=_a.currentTransactions;return Object.keys(allTransactionsNew).reduce((function(list,objectId){var newTransaction=allTransactionsNew[objectId],currentTransaction=currentTransactions[objectId];return currentTransaction&&currentTransaction.objectStatus===newTransaction.objectStatus&&newTransaction.objectStatus!==Transaction.x8.ERROR&&newTransaction.objectStatus!==Transaction.x8.QUEUED||list.push(newTransaction),list}),[])}({allTransactionsNew,currentTransactions}),_e.label=2;case 2:_e.trys.push([2,10,11,12]),_b=(0,tslib_es6.Ju)(transactionsToFetch),_c=_b.next(),_e.label=3;case 3:return _c.done?[3,9]:(transaction=_c.value,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((transactionId=transaction.objectId,{payload:{transactionId},type:constants.t.FETCH_TRANSACTION}))]);case 4:return _e.sent(),currentBatchStep!==OrdersBatch.kG.ORDERS_PAGE||transaction.objectStatus===Transaction.x8.QUEUED?[3,8]:[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_selectors.EG,{batchEntryId:transaction.batchEntryId})];case 5:return(orderObjectId=_e.sent())?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(orderObjectId))]:[3,8];case 6:return _e.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.NS(orderObjectId))];case 7:_e.sent(),_e.label=8;case 8:return _c=_b.next(),[3,3];case 9:return[3,12];case 10:return e_4_1=_e.sent(),e_4={error:e_4_1},[3,12];case 11:try{_c&&!_c.done&&(_d=_b.return)&&_d.call(_b)}finally{if(e_4)throw e_4.error}return[7];case 12:return hasSingleTransactionError=1===transactionsToFetch.length&&transactionsToFetch[0].objectStatus===Transaction.x8.ERROR,outboundGroupIsCompleted=batch.transactionGroupStatus===OrdersBatch.ag.COMPLETE,returnGroupIsCompleted=batch.returnTransactionGroupStatus===OrdersBatch.ag.NOT_APPLICABLE||batch.returnTransactionGroupStatus===OrdersBatch.ag.COMPLETE,[4,selectState(orders_selectors.kA)];case 13:return isSidePanelCheckout=_e.sent(),anyQueuedReturnLabelTransaction=function(transactions,batchEntries){var batchEntriesMap=(0,list.eZ)(batchEntries);return transactions.some((function(transaction){var batchEntry=batchEntriesMap[null==transaction?void 0:transaction.batchEntryId];return batchEntry&&(null==batchEntry?void 0:batchEntry.isReturn)&&(null==transaction?void 0:transaction.objectStatus)===Transaction.x8.QUEUED}))}(transactionsToFetch,null==batch?void 0:batch.batchEntries),outboundGroupIsCompleted&&returnGroupIsCompleted&&!anyQueuedReturnLabelTransaction?hasSingleTransactionError?[3,26]:[4,selectState(isAutoOrderEmailEnabled)]:[3,30];case 14:return hasAutomatedEmailNotifications=_e.sent(),[4,selectState(user_selectors.DJ)];case 15:return hasMergedDocuments=_e.sent(),trackingReference&&transactionsToFetch.length>0?[4,selectState(transactions_selectors.B3)]:[3,24];case 16:return successFullTransactionCount=_e.sent(),0===successFullTransactionCount?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((count=1,{payload:{count},type:constants.t.UPDATE_SUCCESSFUL_TRANSACTIONS_COUNT}))]:[3,19];case 17:return _e.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((objectId=batch.transactions[0].objectId,{payload:{objectId},type:constants.t.UPDATE_FIRST_SUCCESSFUL_TRANSACTION_OBJECT_ID}))];case 18:_e.sent(),_e.label=19;case 19:return function(transactions){return!!transactions.length&&transactions.some((function(t){return Transaction.x8.ERROR===t.objectStatus}))}(transactionsToFetch)&&isSidePanelCheckout?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Ep(hasAutomatedEmailNotifications,hasMergedDocuments))]:[3,21];case 20:return _e.sent(),[3,23];case 21:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.BX(hasAutomatedEmailNotifications,hasMergedDocuments))];case 22:_e.sent(),_e.label=23;case 23:return[3,26];case 24:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.BX(hasAutomatedEmailNotifications,hasMergedDocuments))];case 25:_e.sent(),_e.label=26;case 26:return hasSingleTransactionError&&isSidePanelCheckout?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Ep())]:[3,28];case 27:_e.sent(),_e.label=28;case 28:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.K9())];case 29:_e.sent(),_e.label=30;case 30:return[2]}var objectId,count,transactionId}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_BATCH_FETCH_SUCCESS,(function fetchOrderShipmentRates(action){var currentBatchStep,newBatch,currentShipments,allShipmentsNew,shipmentsToFetch,_a,_b,e_2_1,shipmentsToFetch_1,shipmentsToFetch_1_1,objectId,trackingReference,e_3_1,e_2,_c,e_3,_d;return(0,tslib_es6.YH)(this,(function(_e){switch(_e.label){case 0:return[4,selectState(orders_batch_selectors.eS)];case 1:if(currentBatchStep=_e.sent(),newBatch=action.payload.batch,currentShipments=action.payload.currentShipments,allShipmentsNew=(0,list.fL)(newBatch.shipments),shipmentsToFetch=[],currentBatchStep!==OrdersBatch.kG.LABELS||0!==Object.keys(currentShipments).length||newBatch.shipmentGroupStatus!==OrdersBatch.ag.COMPLETE)return[3,9];_e.label=2;case 2:_e.trys.push([2,7,8,9]),_a=(0,tslib_es6.Ju)(Object.keys(allShipmentsNew)),_b=_a.next(),_e.label=3;case 3:return _b.done?[3,6]:(objectId=_b.value,trackingReference=TrackingHelper.U.getTrackingReference(types.Fd.name,"other",{rateIds:void 0}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchShipment(objectId,trackingReference))]);case 4:_e.sent(),_e.label=5;case 5:return _b=_a.next(),[3,3];case 6:return[3,9];case 7:return e_2_1=_e.sent(),e_2={error:e_2_1},[3,9];case 8:try{_b&&!_b.done&&(_c=_a.return)&&_c.call(_a)}finally{if(e_2)throw e_2.error}return[7];case 9:if(currentBatchStep!==OrdersBatch.kG.RATES)return[2];shipmentsToFetch=0===Object.keys(currentShipments).length||newBatch.shipmentGroupStatus===OrdersBatch.ag.COMPLETE?Object.keys(allShipmentsNew):Object.keys(currentShipments).reduce((function(shipmentsList,currentShipmentKey){var shipment=currentShipments[currentShipmentKey],newShipment=allShipmentsNew[currentShipmentKey];return newShipment&&shipment.numRates!==newShipment.numRates?(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(shipmentsList),!1),[newShipment.objectId],!1):shipmentsList}),[]),_e.label=10;case 10:_e.trys.push([10,15,16,17]),shipmentsToFetch_1=(0,tslib_es6.Ju)(shipmentsToFetch),shipmentsToFetch_1_1=shipmentsToFetch_1.next(),_e.label=11;case 11:return shipmentsToFetch_1_1.done?[3,14]:(objectId=shipmentsToFetch_1_1.value,trackingReference=TrackingHelper.U.getTrackingReference(types.Fd.name,"other",{rateIds:void 0}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchShipment(objectId,trackingReference))]);case 12:_e.sent(),_e.label=13;case 13:return shipmentsToFetch_1_1=shipmentsToFetch_1.next(),[3,11];case 14:return[3,17];case 15:return e_3_1=_e.sent(),e_3={error:e_3_1},[3,17];case 16:try{shipmentsToFetch_1_1&&!shipmentsToFetch_1_1.done&&(_d=shipmentsToFetch_1.return)&&_d.call(shipmentsToFetch_1)}finally{if(e_3)throw e_3.error}return[7];case 17:return newBatch.shipmentGroupStatus!==OrdersBatch.ag.COMPLETE?[3,19]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.K9())];case 18:_e.sent(),_e.label=19;case 19:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_BATCH_FETCH_SUCCESS,(function fetchOrdersErrors(action){var currentBatchEntriesList,newBatchEntries,batchEntriesToFetch,batchEntriesToFetch_1,batchEntriesToFetch_1_1,batchEntry,e_5_1,e_5,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:currentBatchEntriesList=Object.values(action.payload.currentBatchEntries||{}),newBatchEntries=(0,list.eZ)(action.payload.batch.batchEntries),batchEntriesToFetch=[],batchEntriesToFetch=0===currentBatchEntriesList.length?Object.values(newBatchEntries).filter(OrdersBatch.Wq):currentBatchEntriesList.reduce((function(list,batchEntry){var newBatchEntry=newBatchEntries[batchEntry.id];return batchEntry.objectStatus!==newBatchEntry.objectStatus&&OrdersBatch.Wq(newBatchEntry)?(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(list),!1),[newBatchEntry],!1):list}),[]),_b.label=1;case 1:_b.trys.push([1,6,7,8]),batchEntriesToFetch_1=(0,tslib_es6.Ju)(batchEntriesToFetch),batchEntriesToFetch_1_1=batchEntriesToFetch_1.next(),_b.label=2;case 2:return batchEntriesToFetch_1_1.done?[3,5]:(batchEntry=batchEntriesToFetch_1_1.value,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(batchEntry.orderObjectId))]);case 3:_b.sent(),_b.label=4;case 4:return batchEntriesToFetch_1_1=batchEntriesToFetch_1.next(),[3,2];case 5:return[3,8];case 6:return e_5_1=_b.sent(),e_5={error:e_5_1},[3,8];case 7:try{batchEntriesToFetch_1_1&&!batchEntriesToFetch_1_1.done&&(_a=batchEntriesToFetch_1.return)&&_a.call(batchEntriesToFetch_1)}finally{if(e_5)throw e_5.error}return[7];case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_BATCH_CREATE_TRANSACTIONS,(function createTransactions(action){var trackingReference,excludedAndIgnoredOrders,result,batchId,err_2,data,detail,label_limit_renewal_date,remaining_labels_until_limit,idvResult,verification;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:trackingReference=action.payload.trackingReference,_a.label=1;case 1:return _a.trys.push([1,7,,20]),excludedAndIgnoredOrders=[],[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.kc,action.payload.batchId,action.payload.rates,excludedAndIgnoredOrders)];case 2:return result=_a.sent(),(0,utils.A9)(trackingReference,result),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.BM(null==result?void 0:result.data.remaining_labels_until_limit,null==result?void 0:result.data.label_limit_renewal_date))];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.ZA(action.payload.rates.length))];case 4:return _a.sent(),[4,selectState(orders_batch_selectors.M1)];case 5:return batchId=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.ns(batchId,trackingReference))];case 6:return _a.sent(),[3,20];case 7:return(err_2=_a.sent()).response?[3,9]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions._S("We hit an unexpected error. Please try again."))];case 8:return _a.sent(),[2];case 9:return axios_default().isAxiosError(err_2)&&(0,utils.mq)(trackingReference,{isError:err_2.response.status>300,message:(0,utils.w$)(err_2)||void 0,status:err_2.response.status,url:err_2.config.url||""}),(data=err_2.response.data)?(detail=data.detail,label_limit_renewal_date=data.label_limit_renewal_date,remaining_labels_until_limit=data.remaining_labels_until_limit,data.requires_verification?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.ut)]:[3,13]):[2];case 10:return idvResult=_a.sent(),verification=(0,IDVerification.r)(idvResult.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,user_actions.hZ)(verification))];case 11:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions._S(apiMessageErrorCodes.H))];case 12:return _a.sent(),[2];case 13:return remaining_labels_until_limit?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.BM(remaining_labels_until_limit,label_limit_renewal_date))]:[3,15];case 14:_a.sent(),_a.label=15;case 15:return detail?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions._S(detail))]:[3,17];case 16:return _a.sent(),[3,19];case 17:return remaining_labels_until_limit?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions._S("You have exceeded the monthly label limit for your plan."))]:[3,19];case 18:_a.sent(),_a.label=19;case 19:return[3,20];case 20:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_BATCH_POLL_END,(function generatePackingSlips(){var currentBatchStep,batchStore,batchOrders,remainingOrders,allOrders_1,orderObjectIDs,batchEntryIDs,orderObjectIDsForLabels,response,_a,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,7,,9]),[4,selectState(orders_batch_selectors.eS)];case 1:return(currentBatchStep=_c.sent())!==OrdersBatch.kG.ORDERS_PAGE&&currentBatchStep!==OrdersBatch.kG.LABELS?[2]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.E3())];case 2:return _c.sent(),[4,selectState(orders_batch_selectors._J)];case 3:return batchStore=_c.sent(),batchOrders=null===(_a=null==batchStore?void 0:batchStore.batchEntries)||void 0===_a?void 0:_a.byOrderObjectId,[4,selectState(orders_selectors.Z)];case 4:return remainingOrders=_c.sent(),allOrders_1=Object.keys(remainingOrders).length?(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},remainingOrders),batchOrders):batchOrders,orderObjectIDs=Object.keys(allOrders_1),batchEntryIDs=orderObjectIDs.reduce((function(accum,orderObjectID){return(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(accum),!1),(0,tslib_es6.zs)(allOrders_1[orderObjectID]),!1)}),[]),orderObjectIDsForLabels=orderObjectIDs.filter((function(orderObjectID){return!allOrders_1[orderObjectID]||0===allOrders_1[orderObjectID].length})),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Em,orderObjectIDsForLabels,batchEntryIDs)];case 5:return response=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.HW({slipUrl:null===(_b=null==response?void 0:response.data)||void 0===_b?void 0:_b.slip_url}))];case 6:case 8:return _c.sent(),[3,9];case 7:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.Uk("We hit an unexpected error. Please try again."))];case 9:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_BATCH_POLL_END,(function generateAllLabels(){var currentBatchStep,batchStore,batchOrders,remainingOrders,allOrders_2,orderObjectIDs,batchEntryIDs,response,error_1,_a,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,7,,14]),[4,selectState(orders_batch_selectors.eS)];case 1:return(currentBatchStep=_c.sent())!==OrdersBatch.kG.ORDERS_PAGE&&currentBatchStep!==OrdersBatch.kG.LABELS?[2]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.YG())];case 2:return _c.sent(),[4,selectState(orders_batch_selectors._J)];case 3:return batchStore=_c.sent(),batchOrders=null===(_a=null==batchStore?void 0:batchStore.batchEntries)||void 0===_a?void 0:_a.byOrderObjectId,[4,selectState(orders_selectors.Z)];case 4:return remainingOrders=_c.sent(),allOrders_2=Object.keys(remainingOrders).length?(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},remainingOrders),batchOrders):batchOrders,orderObjectIDs=Object.keys(allOrders_2),batchEntryIDs=orderObjectIDs.reduce((function(accum,orderObjectID){return(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(accum),!1),(0,tslib_es6.zs)(allOrders_2[orderObjectID]),!1)}),[]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.fn,orderObjectIDs,batchEntryIDs)];case 5:return response=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.J({labelsUrl:response.data.url}))];case 6:return _c.sent(),[3,14];case 7:return error_1=_c.sent(),axios_default().isAxiosError(error_1)&&403===(null===(_b=error_1.response)||void 0===_b?void 0:_b.status)?(utils_observability.O.singleEvent("LABEL_DOWNLOAD_BLOCKED"),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.Ud("Label Download Unauthorized"))]):[3,9];case 8:return _c.sent(),[3,13];case 9:return error_1.response&&error_1.response.data?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.Ud(error_1.response.data))]:[3,11];case 10:return _c.sent(),[3,13];case 11:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.Ud("We hit an unexpected error. Please try again."))];case 12:_c.sent(),_c.label=13;case 13:return[3,14];case 14:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_BATCH_CREATE_AND_BUY,(function createAndBuyBatch(action){var trackingReference,batchEntryIds,response,parsedBatch,rates_1,transactedRates,transactionAmount,serviceLevels,isSplitOrder,err_4,errorMessage;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:trackingReference=action.payload.trackingReference,_a.label=1;case 1:return _a.trys.push([1,8,,10]),batchEntryIds=(0,lodash_es_flatten.A)(Object.values(action.payload.orderSelection)),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Xm,[],batchEntryIds)];case 2:return response=_a.sent(),parsedBatch=OrdersBatch.rS(response.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.WV(parsedBatch))];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_batch_actions.kc(parsedBatch.id,action.payload.rateObjectIds,trackingReference))];case 4:return _a.sent(),[4,selectState(rates_selectors.aT)];case 5:return rates_1=_a.sent(),transactedRates=action.payload.rateObjectIds.map((function(x){return rates_1[x]})),transactionAmount=transactedRates.reduce((function(total,_a){var amountLocal=_a.amountLocal;return total+Number(amountLocal)}),0),serviceLevels=transactedRates.reduce((function(serviceLevels,_a){var servicelevel=_a.servicelevel;return(0,uniq.A)((0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(serviceLevels),!1),[servicelevel.name],!1))}),[]).join(", "),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_selectors.id,{batchEntryIds})];case 6:return isSplitOrder=_a.sent(),utils_observability.O.successEvent("RETURN_WORKFLOW_CREATE_LABEL"),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("Purchase",{"Is Split Order":isSplitOrder,"Service Level":serviceLevels,"Transaction Amount":transactionAmount}))];case 7:return _a.sent(),[3,10];case 8:return err_4=_a.sent(),axios_default().isAxiosError(err_4)&&err_4.response&&(0,utils.mq)(trackingReference,{isError:err_4.response.status>300,message:(0,utils.w$)(err_4.response.data)||void 0,status:err_4.response.status,url:err_4.response.config.url||""}),errorMessage="We were not able to process your request. Please try again.",utils_observability.O.errorEvent("RETURN_WORKFLOW_CREATE_LABEL",{errorMessage}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.nM(errorMessage))];case 9:return _a.sent(),[3,10];case 10:return[2]}}))}));var fetchDefaultPackageUnitsSuccess=function(payload){return{payload,type:constants.t.FETCH_PACKAGE_DEFAULT_UNITS_SUCCESS}},fetchDefaultPackageUnitsError=function(payload){return{payload,type:constants.t.FETCH_PACKAGE_DEFAULT_UNITS_ERROR}},savePackageTemplateSuccess=function(parcelTemplate,trackingReference,applyNewParcelTemplateOnParcelForm){return{payload:{applyNewParcelTemplateOnParcelForm,parcelTemplate,trackingReference},type:constants.t.SAVE_PACKAGE_TEMPLATE_SUCCESS}},Section=(0,emotion_styled_browser_esm.A)("section")(FormSection_templateObject_1||(FormSection_templateObject_1=(0,tslib_es6.ue)(["\n  border: 1px solid ",";\n  border-radius: 5px;\n  margin-bottom: 20px;\n"],["\n  border: 1px solid ",";\n  border-radius: 5px;\n  margin-bottom: 20px;\n"])),styles_constants.Tj.greyBorder),FormSection_Header=(0,emotion_styled_browser_esm.A)("header")(FormSection_templateObject_2||(FormSection_templateObject_2=(0,tslib_es6.ue)(["\n  background-color: #fbfbfb;\n  border-bottom: 1px solid ",";\n  padding: 15px 16px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  -webkit-border-top-left-radius: 5px;\n  -webkit-border-top-right-radius: 5px;\n  -moz-border-radius-topleft: 5px;\n  -moz-border-radius-topright: 5px;\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n"],["\n  background-color: #fbfbfb;\n  border-bottom: 1px solid ",";\n  padding: 15px 16px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  -webkit-border-top-left-radius: 5px;\n  -webkit-border-top-right-radius: 5px;\n  -moz-border-radius-topleft: 5px;\n  -moz-border-radius-topright: 5px;\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n"])),styles_constants.Tj.greyBorder),FormSection_Title=(0,emotion_styled_browser_esm.A)("h4")(FormSection_templateObject_3||(FormSection_templateObject_3=(0,tslib_es6.ue)(["\n  font-size: 16px;\n  color: ",";\n  padding: 0;\n  margin: 0;\n  flex-grow: 1;\n  font-weight: 400;\n"],["\n  font-size: 16px;\n  color: ",";\n  padding: 0;\n  margin: 0;\n  flex-grow: 1;\n  font-weight: 400;\n"])),styles_constants.Tj.gray1000),Addons=(0,emotion_styled_browser_esm.A)("div")(FormSection_templateObject_4||(FormSection_templateObject_4=(0,tslib_es6.ue)(["\n  flex-shrink: 1;\n"],["\n  flex-shrink: 1;\n"]))),FormSection_Description=(0,emotion_styled_browser_esm.A)("span")(FormSection_templateObject_5||(FormSection_templateObject_5=(0,tslib_es6.ue)(["\n  display: block;\n  font-size: 14px;\n  color: ",";\n  margin-bottom: 20px;\n  padding: 0;\n  line-height: 1em;\n"],["\n  display: block;\n  font-size: 14px;\n  color: ",";\n  margin-bottom: 20px;\n  padding: 0;\n  line-height: 1em;\n"])),styles_constants.Tj.gray1000),FormSection_Body=(0,emotion_styled_browser_esm.A)("div")(FormSection_templateObject_6||(FormSection_templateObject_6=(0,tslib_es6.ue)(["\n  "," box-sizing: border-box;\n  display: block;\n  height: 100%;\n  color: ",";\n\n  ",";\n"],["\n  "," box-sizing: border-box;\n  display: block;\n  height: 100%;\n  color: ",";\n\n  ",";\n"])),(function(_a){return _a.noPadding?"padding: 0;":"padding: 16px;"}),styles_constants.Tj.gray1000,(function(_a){var collapsible=_a.collapsible,isCollapsed=_a.isCollapsed;return"never"===collapsible?"display: block;":"always"===collapsible?"display: ".concat(isCollapsed?"none":"block",";"):"@media only screen and (max-width: ".concat(collapsible,"px) {\n  display: ").concat(isCollapsed?"none":"block",";\n}")})),FormSection_Row=(0,emotion_styled_browser_esm.A)(Grid.f)(FormSection_templateObject_7||(FormSection_templateObject_7=(0,tslib_es6.ue)(["\n  ","\n  ","\n  margin-bottom: 30px;\n\n  &:last-of-type {\n    margin-bottom: 0px;\n  }\n"],["\n  ","\n  ","\n  margin-bottom: 30px;\n\n  &:last-of-type {\n    margin-bottom: 0px;\n  }\n"])),(function(_a){var wrappable=_a.wrappable;return wrappable?!0===wrappable?"\n        flex-wrap: wrap;\n      ":"\n        @media only screen and (max-width: ".concat(wrappable,"px) {\n          flex-direction: column;\n        }\n      "):null}),(function(_a){return _a.wrappable?"\n    margin-top: -20px;\n\n    & > * {\n      margin-top: 20px;\n      max-width: 100%;\n    }":null})),Column=(0,emotion_styled_browser_esm.A)(Grid.V)(FormSection_templateObject_8||(FormSection_templateObject_8=(0,tslib_es6.ue)(["\n  ","\n  ","\n"],["\n  ","\n  ","\n"])),(function(_a){return _a.noPadding?null:"\n    &:last-of-type {\n      padding-left: 8px;\n    }\n\n    &:first-of-type {\n      padding-left: 0px;\n    }"}),(function(_a){var width=_a.width;return width?"width: ".concat(width):""})),InputContainer=(0,emotion_styled_browser_esm.A)("div")(FormSection_templateObject_9||(FormSection_templateObject_9=(0,tslib_es6.ue)(["\n  margin-bottom: 20px;\n\n  &:last-of-type {\n    margin-bottom: 0px;\n  }\n"],["\n  margin-bottom: 20px;\n\n  &:last-of-type {\n    margin-bottom: 0px;\n  }\n"]))),CollapseIcon=((0,emotion_styled_browser_esm.A)("div")(FormSection_templateObject_10||(FormSection_templateObject_10=(0,tslib_es6.ue)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  margin: 20px 0;\n"],["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  margin: 20px 0;\n"]))),(0,emotion_styled_browser_esm.A)("i")(FormSection_templateObject_11||(FormSection_templateObject_11=(0,tslib_es6.ue)(["\n  margin-left: 10px;\n  font-size: 18px;\n  display: none;\n\n  ",";\n"],["\n  margin-left: 10px;\n  font-size: 18px;\n  display: none;\n\n  ",";\n"])),(function(_a){var collapsible=_a.collapsible;return"never"===collapsible?"display: none;":"always"===collapsible?"display: block;":"@media only screen and (max-width: ".concat(collapsible,"px) {\n    display: block;\n  }")})));const components_FormSection_FormSection=function(props){var bodyClassName=props.bodyClassName,collapsible=props.collapsible,description=props.description,noPadding=props.noPadding,title=props.title,AddonComponents=props.addons,_a=(0,tslib_es6.zs)(react.useState(!0),2),isCollapsed=_a[0],setIsCollapsed=_a[1],onCollapseChange=react.useCallback((function(){return setIsCollapsed(!isCollapsed)}),[isCollapsed]),isActuallyCollapsed=!!collapsible&&"never"!==collapsible&&isCollapsed;return(0,emotion_react_jsx_runtime_browser_esm.FD)(Section,(0,tslib_es6.Cl)({className:props.className},{children:[title&&(0,emotion_react_jsx_runtime_browser_esm.FD)(FormSection_Header,(0,tslib_es6.Cl)({onClick:onCollapseChange},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(FormSection_Title,{children:title}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Addons,{children:AddonComponents&&(0,emotion_react_jsx_runtime_browser_esm.Y)(AddonComponents,{})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CollapseIcon,{className:"fa fa-caret-".concat(isCollapsed?"down":"up"),collapsible:collapsible||"never"})]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(FormSection_Body,(0,tslib_es6.Cl)({className:bodyClassName,collapsible:collapsible||"never",isCollapsed:isActuallyCollapsed,noPadding:!!noPadding},{children:[description&&(0,emotion_react_jsx_runtime_browser_esm.Y)(FormSection_Description,{children:description}),props.children]}))]}))};var FormSection_templateObject_1,FormSection_templateObject_2,FormSection_templateObject_3,FormSection_templateObject_4,FormSection_templateObject_5,FormSection_templateObject_6,FormSection_templateObject_7,FormSection_templateObject_8,FormSection_templateObject_9,FormSection_templateObject_10,FormSection_templateObject_11,submitButtonStyle=(0,emotion_react_browser_esm.AH)(SubmitButton_templateObject_1||(SubmitButton_templateObject_1=(0,tslib_es6.ue)(["\n  min-width: 100px;\n"],["\n  min-width: 100px;\n"])));const SubmitButton_SubmitButton=function(props){var autoWidth=props.autoWidth,buttonType=props.buttonType,fullWidth=props.fullWidth,preSubmitText=props.preSubmitText,submittedSuccess=props.submittedSuccess,submitting=props.submitting,successSubmitText=props.successSubmitText,buttonProps=(0,tslib_es6.Tt)(props,["autoWidth","buttonType","fullWidth","preSubmitText","submittedSuccess","submitting","successSubmitText"]),Button=components_Button.Uo[buttonType],text=submittedSuccess?successSubmitText:preSubmitText,css=autoWidth||fullWidth?void 0:submitButtonStyle;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Button,(0,tslib_es6.Cl)({css,fullWidth,isLoading:submitting},buttonProps,{children:text}))};var SubmitButton_templateObject_1,getPackagesStore=function(state){return state.packages},getDefaultWeightUnit=(0,reselect_es.Mz)(getPackagesStore,(function(packagesStore){return packagesStore.defaultWeightUnit})),packages_selectors_getDefaultDistanceUnit=(0,reselect_es.Mz)(getPackagesStore,(function(packagesStore){return packagesStore.defaultDistanceUnit})),getActiveParcelTemplate=(0,reselect_es.Mz)(getPackagesStore,(function(packageStore){return packageStore.parcelTemplate})),DefaultPackageUnitsForm=function(_super){function DefaultPackageUnitsForm(){return null!==_super&&_super.apply(this,arguments)||this}return(0,tslib_es6.C6)(DefaultPackageUnitsForm,_super),DefaultPackageUnitsForm.prototype.componentDidUpdate=function(prevProps){this.props.anyTouched||(prevProps.defaultWeightUnit!==this.props.defaultWeightUnit&&this.props.change("defaultWeightUnit",options.Ay.commonWeightOptions[this.props.defaultWeightUnit]),prevProps.defaultDistanceUnit!==this.props.defaultDistanceUnit&&this.props.change("defaultDistanceUnit",options.Ay.commonDistanceOptions[this.props.defaultDistanceUnit]))},DefaultPackageUnitsForm.prototype.render=function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)("form",(0,tslib_es6.Cl)({onSubmit:this.props.handleSubmit},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(components_FormSection_FormSection,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(FormSection_Row,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(Column,(0,tslib_es6.Cl)({width:"100%"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(InputContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,label:"Default weight unit",name:"defaultWeightUnit",options:Object.keys(weight.bm).map((function(weightunit){return{label:weightunit,value:weightunit}})),size:"100%"})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(InputContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:SelectField,label:"Default dimension unit",name:"defaultDistanceUnit",options:Object.keys(distance.S).map((function(distanceUnit){return{label:distanceUnit,value:distanceUnit}})),size:"100%",style:{minWidth:"100%"}})}),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(SubmitButton_SubmitButton,{buttonType:components_Button.EY.Primary,preSubmitText:"Save",submittedSuccess:this.props.submitSucceeded,submitting:this.props.submitting,successSubmitText:"Saved",type:"submit"})})]}))})})}))},DefaultPackageUnitsForm}(react.Component);(0,redux.Zz)((0,reduxForm.A)({form:"DEFAULT_PACKAGE_UNITS_FORM"}),(0,es.Ng)((function(state){return{defaultDistanceUnit:packages_selectors_getDefaultDistanceUnit(state),defaultWeightUnit:getDefaultWeightUnit(state)}})))(DefaultPackageUnitsForm);const common_PackageTemplateChooser=PackageTemplateChooser_PackageTemplateChooser;var getAutomationsStore=function(state){return state.automations},getPackageTemplateIdsWithRules=(0,reselect_es.Mz)(getAutomationsStore,(function(automationsStore){return automationsStore.associatedPackageTemplateIds}));(0,reselect_es.Mz)(getAutomationsStore,(function(automationsStore){return automationsStore.businessRules.filter((function(rule){return 0!==rule.rankDesc}))})),(0,reselect_es.Mz)(getAutomationsStore,(function(automationsStore){return automationsStore.deleteRuleModalIsOpen})),(0,reselect_es.Mz)(getAutomationsStore,(function(automationsStore){return automationsStore.addRuleModalIsOpen})),(0,reselect_es.Mz)(getAutomationsStore,(function(automationsStore){return automationsStore.addRuleSuccess})),(0,reselect_es.Mz)(getAutomationsStore,(function(_a){return _a.error})),(0,reselect_es.Mz)(getAutomationsStore,(function(automationsStore){return automationsStore.reprocessRuleStatus})),(0,reselect_es.Mz)(getAutomationsStore,(function(automationsStore){return automationsStore.reprocessRuleStatus===rules.ri.pending})),(0,reselect_es.Mz)(getAutomationsStore,(function(automationsStore){return automationsStore.closedReprocessingPendingNotification})),(0,reselect_es.Mz)(getAutomationsStore,(function(automationsStore){return automationsStore.closedReprocessingCompleteNotification}));const SavePackageTemplateModal_validate=function(values){var errors=PackageTemplateChooser_validate(values);return values.parcelTemplateName&&values.parcelTemplateName.length>50&&(errors.parcelTemplateName="The package template name cannot be longer than 50 characters."),values.extras&&values.extras.isUsingCustomDimensions&&!values.parcelTemplateName&&(errors.parcelTemplateName="Please enter a package name"),errors};var SavePackageTemplateModal_ModalBody=(0,emotion_styled_browser_esm.A)(Modal.A.Body)(SavePackageTemplateModal_templateObject_1||(SavePackageTemplateModal_templateObject_1=(0,tslib_es6.ue)(["\n  position: absolute;\n  bottom: 66px;\n  left: 0px;\n  right: 0px;\n  overflow: auto;\n  top: 65px;\n  @media screen and (min-width: ","px) {\n    top: 71px;\n  }\n  @media screen and (min-width: ","px) {\n    position: initial;\n  }\n"],["\n  position: absolute;\n  bottom: 66px;\n  left: 0px;\n  right: 0px;\n  overflow: auto;\n  top: 65px;\n  @media screen and (min-width: ","px) {\n    top: 71px;\n  }\n  @media screen and (min-width: ","px) {\n    position: initial;\n  }\n"])),responsive.P.SmallMobile,responsive.P.Mobile),SavePackageTemplateModal_ModalFooter=(0,emotion_styled_browser_esm.A)(Modal.A.Footer)(SavePackageTemplateModal_templateObject_2||(SavePackageTemplateModal_templateObject_2=(0,tslib_es6.ue)(["\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  overflow: hidden;\n  @media screen and (min-width: ","px) {\n    position: initial;\n  }\n"],["\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  overflow: hidden;\n  @media screen and (min-width: ","px) {\n    position: initial;\n  }\n"])),responsive.P.Mobile),SavePackageTemplateModal_FooterButtons=(0,emotion_styled_browser_esm.A)("div")(SavePackageTemplateModal_templateObject_3||(SavePackageTemplateModal_templateObject_3=(0,tslib_es6.ue)(["\n  :only-of-type {\n    margin-left: auto;\n  }\n  width: 100%;\n"],["\n  :only-of-type {\n    margin-left: auto;\n  }\n  width: 100%;\n"]))),SavePackageTemplateModal_CancelButton=(0,emotion_styled_browser_esm.A)(components_Button.vM)(SavePackageTemplateModal_templateObject_4||(SavePackageTemplateModal_templateObject_4=(0,tslib_es6.ue)(["\n  display: none;\n  @media screen and (min-width: ","px) {\n    display: initial;\n  }\n"],["\n  display: none;\n  @media screen and (min-width: ","px) {\n    display: initial;\n  }\n"])),responsive.P.Mobile),SavePackageTemplateModal_ApplyButton=(0,emotion_styled_browser_esm.A)(components_Button.jn)(SavePackageTemplateModal_templateObject_5||(SavePackageTemplateModal_templateObject_5=(0,tslib_es6.ue)(["\n  margin-left: 0px !important;\n  @media screen and (min-width: ","px) {\n    width: auto;\n    margin-left: 10px !important;\n  }\n"],["\n  margin-left: 0px !important;\n  @media screen and (min-width: ","px) {\n    width: auto;\n    margin-left: 10px !important;\n  }\n"])),responsive.P.Mobile),SavePackageTemplateModal_Divider=(0,emotion_styled_browser_esm.A)("div")(SavePackageTemplateModal_templateObject_6||(SavePackageTemplateModal_templateObject_6=(0,tslib_es6.ue)(["\n  border-bottom: 1px solid ",";\n  padding: 12px;\n  margin: 10px 30px 30px 0;\n"],["\n  border-bottom: 1px solid ",";\n  padding: 12px;\n  margin: 10px 30px 30px 0;\n"])),styles_constants.Tj.greyBorder),SavePackageTemplateModal_CheckboxContainer=(0,emotion_styled_browser_esm.A)("div")(SavePackageTemplateModal_templateObject_7||(SavePackageTemplateModal_templateObject_7=(0,tslib_es6.ue)(["\n  margin-bottom: 30px;\n"],["\n  margin-bottom: 30px;\n"]))),InputFieldContainer=(0,emotion_styled_browser_esm.A)("div")(SavePackageTemplateModal_templateObject_8||(SavePackageTemplateModal_templateObject_8=(0,tslib_es6.ue)(["\n  margin-bottom: 20px;\n"],["\n  margin-bottom: 20px;\n"]))),SavePackageTemplateModal=function(_super){function SavePackageTemplateModal(props){var _this=_super.call(this,props)||this;return _this.handleSubmit=function(formValues){var customDimensions=formValues.customDimensions,parcelTemplate=formValues.parcelTemplate,template=parcelTemplate&&(0,ParcelTemplate.MS)(parcelTemplate)?parcelTemplate.carrierTemplate:parcelTemplate,packageTemplate={carrierTemplate:template,distanceUnit:customDimensions?customDimensions.distanceUnit.value:distance.k.IN,height:customDimensions?Number(customDimensions.height):0,isDefault:formValues.isDefault,length:customDimensions?Number(customDimensions.length):0,name:formValues.parcelTemplateName||"",objectId:_this.props.parcelTemplate?_this.props.parcelTemplate.objectId:void 0,weight:Number(formValues.weight),weightUnit:formValues.weightUnit?formValues.weightUnit.value:weight.VV.LB,width:customDimensions?Number(customDimensions.width):0},packageName=template?template.name:packageTemplate.name,eventProperties={"Is Custom Template":!template,"Is Set as Default":formValues.isDefault,"Package Name":packageName};_this.props.sendTrackEvent("Saved Package Template",eventProperties),(0,segment.u4)(segment.sV.package_template_created,{is_default:formValues.isDefault,package_name:packageName});var trackingReference=TrackingHelper.U.getTrackingReference(types.wK.name,_this.props.appLocation,{isAutoSave:!1,isQuickSelect:!1,parcelId:packageTemplate.objectId});(0,utils.bT)(trackingReference,types.wK.operations.SAVE_ATTEMPTED,{parcelId:packageTemplate.objectId}),packageTemplate.objectId?(0,utils.bT)(trackingReference,types.wK.operations.UPDATED,{parcelId:packageTemplate.objectId}):(0,utils.bT)(trackingReference,types.wK.operations.CREATED,{parcelId:packageTemplate.objectId}),_this.props.savePackageTemplate(packageTemplate,trackingReference)},_this.hideDeleteConfirm=function(){_this.setState({packageTemplateObjectIdToDelete:null})},_this.onClose=function(e){e.preventDefault(),e.stopPropagation(),_this.props.onCancel(),_this.props.resetForm()},_this.onDelete=function(objectId){return function(){_this.setState({packageTemplateObjectIdToDelete:objectId})}},_this.onDeleteConfirm=function(){if(_this.state.packageTemplateObjectIdToDelete){var trackingReference=TrackingHelper.U.getTrackingReference(types.wK.name,_this.props.appLocation,{isAutoSave:!1,isQuickSelect:!1,parcelId:_this.state.packageTemplateObjectIdToDelete});(0,utils.bT)(trackingReference,types.wK.operations.SAVE_ATTEMPTED,{parcelId:_this.state.packageTemplateObjectIdToDelete}),(0,utils.bT)(trackingReference,types.wK.operations.DELETED,{parcelId:_this.state.packageTemplateObjectIdToDelete}),_this.props.delete(_this.state.packageTemplateObjectIdToDelete,trackingReference),_this.setState({packageTemplateObjectIdToDelete:null})}},_this.state={packageTemplateObjectIdToDelete:null},_this}return(0,tslib_es6.C6)(SavePackageTemplateModal,_super),SavePackageTemplateModal.prototype.componentDidUpdate=function(){var _a=this.props,initialValues=_a.initialValues,initialize=_a.initialize;!_a.isInitialized&&initialValues&&initialize(initialValues)},SavePackageTemplateModal.prototype.render=function(){return(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[this.renderDeleteConfirmation(),this.renderEditTemplateModal()]})},SavePackageTemplateModal.prototype.renderDeleteConfirmation=function(){var _a=this.props,packageTemplateIdsWithRules=_a.packageTemplateIdsWithRules,t=_a.t,packageTemplateObjectIdToDelete=this.state.packageTemplateObjectIdToDelete,isOpen=null!==packageTemplateObjectIdToDelete||this.props.isDeleting,hasAssociatedRule=packageTemplateIdsWithRules.includes(packageTemplateObjectIdToDelete),deleteMessage=(0,emotion_react_jsx_runtime_browser_esm.Y)(utils_translate.x6,(0,tslib_es6.Cl)({i18nKey:hasAssociatedRule?"packages.deleteModalTextAutomations":"packages.deleteModalText"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("br",{})}));return isOpen&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorDialog.A,{closeButtonText:t("packages.cancelButton"),confirmButtonText:t("packages.removeButton"),isOpen,message:deleteMessage,onClose:this.hideDeleteConfirm,onConfirm:this.onDeleteConfirm,title:t("packages.deleteModalTitle")})},SavePackageTemplateModal.prototype.renderEditTemplateModal=function(){var isNew=!this.props.parcelTemplate||!this.props.parcelTemplate.objectId,title=isNew?"New Package Template":"Edit Package Template",isOpen=!this.state.packageTemplateObjectIdToDelete&&!this.props.isDeleting,templateNameField=this.props.isUsingCustomDimensions?(0,emotion_react_jsx_runtime_browser_esm.Y)(InputFieldContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Input.FO,label:"Your Package Name",labelPosition:"top",name:"parcelTemplateName",placeholder:"Large box with sticker",responsive:!0,size:constants_form.YI.large,tabIndex:1})}):null;return isOpen&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Modal.A.Container,(0,tslib_es6.Cl)({closeOnClickOutside:!1,isOpen:this.props.isOpen,onClose:this.onClose,size:"md"},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)("form",(0,tslib_es6.Cl)({onSubmit:this.props.handleSubmit(this.handleSubmit)},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Modal.A.Header,{children:title}),(0,emotion_react_jsx_runtime_browser_esm.FD)(SavePackageTemplateModal_ModalBody,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(common_PackageTemplateChooser,{disableDropdown:null!==this.props.parcelTemplate,editingCustomTemplate:!0,formName:PACKAGE_TEMPLATE_MODAL,shouldShowPolymailer:!0,someOrderHasImportedWeight:!1,startingTabIndex:1}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SavePackageTemplateModal_Divider,{}),templateNameField,(0,emotion_react_jsx_runtime_browser_esm.Y)(SavePackageTemplateModal_CheckboxContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Field.A,{component:Checkbox.Yh,label:"Set as default package template for label purchase",name:"isDefault",tabIndex:1})})]}),(0,emotion_react_jsx_runtime_browser_esm.FD)(SavePackageTemplateModal_ModalFooter,{children:[isNew?null:(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Button.tA,(0,tslib_es6.Cl)({disabled:this.props.isDeleting,isLoading:this.props.isDeleting,onClick:this.onDelete(this.props.parcelTemplate.objectId),tabIndex:1,useGreenSpinner:!0},{children:"Delete Template"})),(0,emotion_react_jsx_runtime_browser_esm.FD)(SavePackageTemplateModal_FooterButtons,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(SavePackageTemplateModal_CancelButton,(0,tslib_es6.Cl)({disabled:this.props.isDeleting,onClick:this.onClose,tabIndex:1},{children:"Cancel"})),(0,emotion_react_jsx_runtime_browser_esm.Y)(SavePackageTemplateModal_ApplyButton,(0,tslib_es6.Cl)({disabled:this.props.submitting||this.props.isDeleting,fullWidth:!0,isLoading:this.props.submitting,tabIndex:1,type:"submit"},{children:"Save Template"}))]})]})]}))}))},SavePackageTemplateModal}(react.Component),PACKAGE_TEMPLATE_MODAL="PACKAGE_TEMPLATE_MODAL";(0,redux.Zz)((0,utils_translate.Tl)("settings"),(0,es.Ng)((function(state){var formValues=(0,getFormValues.A)(PACKAGE_TEMPLATE_MODAL)(state),userConfigDefaults=(0,user_selectors.Og)(state),parcelTemplate=getActiveParcelTemplate(state);return{initialValues:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},getInitialFormValues(parcelTemplate,userConfigDefaults,null)),{isDefault:!!parcelTemplate&&parcelTemplate.isDefault,parcelTemplateName:parcelTemplate?parcelTemplate.name:""}),isDeleting:isDeleting(state),isInitialized:!!formValues,isOpen:state.packages.savePackageTemplateModalIsOpen,isUsingCustomDimensions:formValues&&formValues.extras.isUsingCustomDimensions,packageTemplateIdsWithRules:getPackageTemplateIdsWithRules(state),parcelTemplate}}),(function(dispatch,ownProps){return{delete:function(objectId,trackingReference){return dispatch(function(objectId,trackingReference){return{payload:{objectId,trackingReference},type:constants.t.DELETE_PACKAGE_TEMPLATE}}(objectId,trackingReference))},initialize:function(initialValues){dispatch((0,redux_form_es.n_)(PACKAGE_TEMPLATE_MODAL,initialValues))},onCancel:function(){return dispatch(closeModal())},resetForm:function(){return dispatch((0,redux_form_es.cL)(PACKAGE_TEMPLATE_MODAL))},savePackageTemplate:function(formData,trackingReference){return dispatch(function(formData,applyNewParcelTemplateOnParcelForm,trackingReference){return{payload:{applyNewParcelTemplateOnParcelForm,formData,trackingReference},type:constants.t.SAVE_PACKAGE_TEMPLATE}}(formData,!!ownProps.applyNewParcelTemplateOnParcelForm,trackingReference))},sendTrackEvent:function(event,properties){void 0===properties&&(properties={});var eventName=event;ownProps.dataAnalyticsContext&&ownProps.dataAnalyticsContext.prefix&&(eventName="".concat(ownProps.dataAnalyticsContext.prefix," - ").concat(eventName)),dispatch((0,prod_analytics_actions.o)(eventName,properties))}}})),(0,reduxForm.A)({destroyOnUnmount:!0,enableReinitialize:!0,form:PACKAGE_TEMPLATE_MODAL,touchOnChange:!0,validate:SavePackageTemplateModal_validate}))(SavePackageTemplateModal);var SavePackageTemplateModal_templateObject_1,SavePackageTemplateModal_templateObject_2,SavePackageTemplateModal_templateObject_3,SavePackageTemplateModal_templateObject_4,SavePackageTemplateModal_templateObject_5,SavePackageTemplateModal_templateObject_6,SavePackageTemplateModal_templateObject_7,SavePackageTemplateModal_templateObject_8,packages_service_get=function(){return services_api.YZ.request({method:"GET",url:"/setting/package-units"})},packages_service_put=function(data){return services_api.YZ.request({data,method:"PUT",url:"/setting/package-units"})},update=function(data,objectId){return services_api.YZ.request({data,method:"PUT",url:"/setting/parcel_templates/".concat(objectId)})},create=function(data){return services_api.YZ.request({data,method:"POST",url:"/setting/parcel_templates"})},del=function(objectId){return services_api.YZ.request({method:"DELETE",url:"/setting/parcel_templates/".concat(objectId)})};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_PACKAGE_DEFAULT_UNITS,(function packages_sagas_fetchDefaultPackageUnits(){var response,payload,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(packages_service_get)];case 1:return response=_a.sent(),payload={defaultDistanceUnit:response.data.dimension_unit,defaultWeightUnit:response.data.weight_unit},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchDefaultPackageUnitsSuccess(payload))];case 2:case 4:return _a.sent(),[3,5];case 3:return err_1=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchDefaultPackageUnitsError(err_1.message))];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.UPDATE_PACKAGE_DEFAULT_UNITS,(function packages_sagas_updateDefaultPackageUnits(action){var servicePayload,err_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,7,,11]),servicePayload={dimension_unit:action.payload.defaultDistanceUnit,weight_unit:action.payload.defaultWeightUnit},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.De)("DEFAULT_PACKAGE_UNITS_FORM"))];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(packages_service_put,servicePayload)];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((payload=action.payload,{payload,type:constants.t.UPDATE_PACKAGE_DEFAULT_UNITS_SUCCESS}))];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.u4,segment.sV.save_default_package_units)];case 4:case 8:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.lM)("DEFAULT_PACKAGE_UNITS_FORM"))];case 5:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.Wv)("DEFAULT_PACKAGE_UNITS_FORM"))];case 6:case 10:return _a.sent(),[3,11];case 7:return err_2=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchDefaultPackageUnitsError(err_2.message))];case 9:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.uj)("DEFAULT_PACKAGE_UNITS_FORM"))];case 11:return[2]}var payload}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.SAVE_PACKAGE_TEMPLATE,(function packages_sagas_savePackageTemplate(action){var parcelTemplate,applyNewParcelTemplateOnParcelForm,response,newParcelTemplate,err_3,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,15,,17]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.De)(PACKAGE_TEMPLATE_MODAL))];case 1:return _b.sent(),parcelTemplate=action.payload.formData,applyNewParcelTemplateOnParcelForm=action.payload.applyNewParcelTemplateOnParcelForm,response=void 0,parcelTemplate.objectId?[4,(0,redux_saga_effects_npm_proxy_esm.T1)([packages_service_namespaceObject,update],(0,ParcelTemplate.U2)(action.payload.formData),parcelTemplate.objectId)]:[3,3];case 2:return response=_b.sent(),[3,5];case 3:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)([packages_service_namespaceObject,create],(0,ParcelTemplate.U2)(action.payload.formData))];case 4:response=_b.sent(),_b.label=5;case 5:return(0,utils.mq)(action.payload.trackingReference,{isError:!1,message:void 0,status:response.status,url:response.config.url||""}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(parcel_template_actions_fetchParcelTemplates())];case 6:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(closeModal())];case 7:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.lM)(PACKAGE_TEMPLATE_MODAL))];case 8:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.cL)(PACKAGE_TEMPLATE_MODAL))];case 9:return _b.sent(),newParcelTemplate=(0,ParcelTemplate.rS)(response.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(savePackageTemplateSuccess(newParcelTemplate,action.payload.trackingReference,applyNewParcelTemplateOnParcelForm))];case 10:return _b.sent(),[4,selectState(parcel_template_selectors_getParcelTemplates)];case 11:return 0!==_b.sent().length?[3,14]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({eventName:"SET_FIRST_PACKAGE_TEMPLATE"}))];case 12:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("Set First Package Template"))];case 13:_b.sent(),_b.label=14;case 14:return[3,17];case 15:return err_3=_b.sent(),axios_default().isAxiosError(err_3)&&(0,utils.mq)(action.payload.trackingReference,{isError:!0,message:err_3.message,status:(null===(_a=err_3.response)||void 0===_a?void 0:_a.status)||-1,url:err_3.config.url||""}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.lM)(PACKAGE_TEMPLATE_MODAL))];case 16:return _b.sent(),[3,17];case 17:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.DELETE_PACKAGE_TEMPLATE,(function packages_sagas_deletePackageTemplate(action){var response,err_4,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,4,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)([packages_service_namespaceObject,del],action.payload.objectId)];case 1:return response=_b.sent(),(0,utils.mq)(action.payload.trackingReference,{isError:!1,message:void 0,status:response.status,url:response.config.url||""}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((objectId=action.payload.objectId,{payload:{objectId},type:constants.t.DELETE_PACKAGE_TEMPLATE_SUCCESS}))];case 2:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(closeModal())];case 3:case 5:return _b.sent(),[3,6];case 4:return err_4=_b.sent(),axios_default().isAxiosError(err_4)&&(0,utils.mq)(action.payload.trackingReference,{isError:!0,message:err_4.message,status:(null===(_a=err_4.response)||void 0===_a?void 0:_a.status)||-1,url:err_4.config.url||""}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({payload:{errorMessage},type:constants.t.DELETE_PACKAGE_TEMPLATE_ERROR})];case 6:return[2]}var errorMessage,objectId}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.SAVE_PACKAGE_TEMPLATE_SUCCESS,(function packages_sagas_savePackageTemplateSuccess(action){var _a,applyNewParcelTemplateOnParcelForm,parcelTemplate,formValues,parcel,orderAction,workingOrders,error_1;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,8,,9]),_a=action.payload,applyNewParcelTemplateOnParcelForm=_a.applyNewParcelTemplateOnParcelForm,parcelTemplate=_a.parcelTemplate,applyNewParcelTemplateOnParcelForm?[4,(0,redux_saga_effects_npm_proxy_esm.Lt)((0,getFormValues.A)(constants_form.n6))]:[3,7];case 1:return formValues=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,orders_actions.QT)(parcelTemplate))];case 2:return _b.sent(),parcel=(0,Parcel.uN)(parcelTemplate),[4,selectState(orders_selectors.f6)];case 3:return orderAction=_b.sent(),workingOrders={},!parcel.weight||"0"===parcel.weight||(null==formValues?void 0:formValues.useImportedOrderWeight)?[3,7]:("order-edit"===orderAction.kind&&(workingOrders=orderAction.orderSelection),Object.keys(workingOrders).length<1?[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Li)]:[3,5]);case 4:workingOrders=_b.sent(),_b.label=5;case 5:return workingOrders?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,orders_actions.$h)(workingOrders,parcel,action.payload.trackingReference))]:[3,7];case 6:_b.sent(),_b.label=7;case 7:return[3,9];case 8:return error_1=_b.sent(),newRelic_newRelic.S.noticeError("Failed to apply parcel template to order parcel form",{error:error_1}),[3,9];case 9:return[2]}}))}));var parcel_template_service_getParcelTemplates=function(){return services_api.YZ.request({method:"GET",url:"setting/parcel_templates"})},parcel_template_service_getCarrierParcelTemplates=function(limit){return void 0===limit&&(limit=250),services_api.Ay.request({method:"GET",url:"parcel_templates?results=".concat(limit)})},CarrierParcelTemplate=__webpack_require__("./app/types/CarrierParcelTemplate.ts");(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.PARCEL_TEMPLATE_FETCH,(function parcel_template_saga_fetchParcelTemplates(){var response,parcelTemplates,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(parcel_template_service_getParcelTemplates)];case 1:return response=_a.sent(),parcelTemplates=response.data.results.map((function(jsonParcelTemplate){return ParcelTemplate.rS(jsonParcelTemplate)})),payload={parcelTemplates},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchParcelTemplatesSuccess(payload))];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.PARCEL_TEMPLATE_FETCH_ERROR})];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CARRIER_PARCEL_TEMPLATE_FETCH,(function parcel_template_saga_fetchCarrierParcelTemplates(){var response,carrierParcelTemplates,carrierParcelTemplatesByCarrier,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(parcel_template_service_getCarrierParcelTemplates)];case 1:return response=_a.sent(),carrierParcelTemplates=response.data.results.map((function(jsonCarrierParcelTemplate){return CarrierParcelTemplate.rS(jsonCarrierParcelTemplate)})),carrierParcelTemplatesByCarrier=carrierParcelTemplates.reduce((function(hash,parcelTemplate){var _a;return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},hash),((_a={})[(0,Carrier.Z)(parcelTemplate.provider)]=(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(hash[(0,Carrier.Z)(parcelTemplate.provider)]||[]),!1),[parcelTemplate],!1),_a))}),{}),payload={carrierParcelTemplates:carrierParcelTemplatesByCarrier},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchCarrierParcelTemplatesSuccess(payload))];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.CARRIER_PARCEL_TEMPLATE_FETCH_ERROR})];case 5:return[2]}}))}));var pending_invoice_transactions_service_fetchPendingInvoiceTransactions=function(pageNumber,pageSize){return void 0===pageNumber&&(pageNumber=1),void 0===pageSize&&(pageSize=25),services_api.kC.request({method:"GET",url:"/v1/invoice_items?unbilled=True&page=".concat(pageNumber,"&results=").concat(pageSize)})},PendingInvoiceItem_fromJSON=function(jsonPendingInvoiceItem){return{amount:jsonPendingInvoiceItem.amount,carrierAccount:jsonPendingInvoiceItem.carrier_account,currency:jsonPendingInvoiceItem.currency,description:jsonPendingInvoiceItem.description,invoiceItemType:InvoiceItemTypeMap[jsonPendingInvoiceItem.invoice_item_type],objectCreated:moment_moment(jsonPendingInvoiceItem.object_created),objectPurpose:jsonPendingInvoiceItem.object_purpose,providerName:jsonPendingInvoiceItem.provider_name,servicelevelName:jsonPendingInvoiceItem.servicelevel_name,trackingNumber:jsonPendingInvoiceItem.tracking_number||null,transaction:jsonPendingInvoiceItem.transaction||null}};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.INVOICE_TRANSACTIONS_PENDING_FETCH,(function pending_invoice_transactions_saga_fetchPendingInvoiceTransactions(action){var _a,pageNumber,pageSize,_b,count,results,error_1;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,3,,5]),_a=action.payload,pageNumber=_a.pageNumber,pageSize=_a.pageSize,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(pending_invoice_transactions_service_fetchPendingInvoiceTransactions,pageNumber,pageSize)];case 1:return _b=_c.sent().data,count=_b.count,results=_b.results,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((transactionList=results.map(PendingInvoiceItem_fromJSON),pageCount=Math.ceil(count/(pageSize||25)),{payload:{pageCount,transactionList},type:constants.t.INVOICE_TRANSACTIONS_PENDING_FETCH_SUCCESS}))];case 2:return _c.sent(),[3,5];case 3:return error_1=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((error=error_1,{payload:{error},type:constants.t.INVOICE_TRANSACTIONS_PENDING_FETCH_ERROR}))];case 4:return _c.sent(),newRelic_newRelic.S.noticeError("Failed to fetch pending invoice transactions",{error:error_1}),[3,5];case 5:return[2]}var error,transactionList,pageCount}))}));var getTransactionsForCarrierSuccess=function(payload){return{payload,type:constants.t.PICKUPS_FETCH_TRANSACTIONS_SUCCESS}},getTransactionsForCarrierError=function(errorMessage){return{payload:{errorMessage},type:constants.t.PICKUPS_FETCH_TRANSACTIONS_ERROR}},getCarrierAccountIdSuccess=function(payload){return{payload,type:constants.t.PICKUPS_FETCH_CARRIER_ACCOUNT_ID_SUCCESS}},getCarrierAccountIdError=function(errorMessage){return{payload:{errorMessage},type:constants.t.PICKUPS_FETCH_CARRIER_ACCOUNT_ID_ERROR}},getCarrierBuildingLocationTypesSuccess=function(payload){return{payload,type:constants.t.PICKUPS_FETCH_CARRIER_BUILDING_LOCATION_TYPES_SUCCESS}},getCarrierBuildingLocationTypesError=function(errorMessage){return{payload:{errorMessage},type:constants.t.PICKUPS_FETCH_CARRIER_BUILDING_LOCATION_TYPES_ERROR}},sendPickupsRequestSuccess=function(payload){return{payload,type:constants.t.PICKUPS_SEND_PICKUPS_REQUEST_SUCCESS}},sendPickupsRequestError=function(errorMessage){return{payload:{errorMessage},type:constants.t.PICKUPS_SEND_PICKUPS_REQUEST_ERROR}},getTransactions=function(carrier,startDate,endDate,limit){void 0===limit&&(limit="1000");var params={expand:["rate","parcel"],filter:{carrier,end_date:endDate,start_date:startDate,status:"success"},page:{limit,number:"1"}};return services_api.Ay.request({baseURL:"https://service-dev-qa.shippodev.com",method:"GET",params,paramsSerializer:function(params){return lib.stringify(params,{arrayFormat:"brackets"})},url:"transactions/pickups/search"})},pickups_service_getCarrierAccounts=function(carrier){return services_api.Ay.request({baseURL:"https://service-dev-qa.shippodev.com",method:"GET",params:{carrier},url:"carrier_accounts"})},pickups_service_getCarrierBuildingLocationTypes=function(carrierId){return services_api.Ay.request({baseURL:"https://service-dev-qa.shippodev.com",method:"GET",params:{},url:"transactions/pickups/building_location_types/".concat(carrierId)})},pickups_service_sendPickupsRequest=function(payload){return services_api.YZ.request({data:payload,headers:{"Content-Type":"application/json"},method:"POST",url:"pickups/"})};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.PICKUPS_FETCH_TRANSACTIONS,(function pickups_saga_getTransactions(action){var result,totalTransactions,transactionObjectIds,serviceLevelInfo,errorMessage,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getTransactions,action.payload.carrier,action.payload.startDate,action.payload.endDate)];case 1:return result=_a.sent(),totalTransactions=result.data.count,transactionObjectIds=result.data.results.map((function(transaction){return transaction.object_id})),serviceLevelInfo=result.data.results.reduce((function(obj,transaction){var _a,_b,serviceLevelName=transaction.rate.servicelevel_name;return obj[serviceLevelName]?(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},obj),((_a={})[serviceLevelName]=obj[serviceLevelName]+1,_a)):(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},obj),((_b={})[serviceLevelName]=1,_b))}),{}),payload={serviceLevelInfo,totalTransactions,totalWeight:Math.round(100*Number(result.data.totals.total_weight))/100,transactionObjectIds},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(getTransactionsForCarrierSuccess(payload))];case 2:case 5:return _a.sent(),[3,6];case 3:return _a.sent(),payload={closeButtonText:"Close",messages:[errorMessage="There is an error from the carrier that requires investigation. Please contact support."]},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(getTransactionsForCarrierError(errorMessage))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(showDialog(payload,"error"))];case 6:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.PICKUPS_FETCH_CARRIER_ACCOUNT_ID,(function pickups_saga_getCarrierAccountId(action){var result,carrierAccountId,_a,_b,carrier,errorMessage,payload,e_1,_c;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:return _d.trys.push([0,3,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(pickups_service_getCarrierAccounts,action.payload.carrier)];case 1:result=_d.sent(),carrierAccountId=null;try{for(_a=(0,tslib_es6.Ju)(result.data.results),_b=_a.next();!_b.done;_b=_a.next())(carrier=_b.value).is_shippo_account&&(carrierAccountId=carrier.object_id)}catch(e_1_1){e_1={error:e_1_1}}finally{try{_b&&!_b.done&&(_c=_a.return)&&_c.call(_a)}finally{if(e_1)throw e_1.error}}return payload={carrierAccountId},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(getCarrierAccountIdSuccess(payload))];case 2:case 5:return _d.sent(),[3,6];case 3:return _d.sent(),payload={closeButtonText:"Close",messages:[errorMessage="There is an error from the carrier that requires investigation. Please contact support."]},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(getCarrierAccountIdError(errorMessage))];case 4:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(showDialog(payload,"error"))];case 6:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.PICKUPS_FETCH_CARRIER_BUILDING_LOCATION_TYPES,(function pickups_saga_getCarrierBuildingLocationTypes(action){var result,errorMessage,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(pickups_service_getCarrierBuildingLocationTypes,action.payload.carrier)];case 1:return result=_a.sent(),payload=result.data,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(getCarrierBuildingLocationTypesSuccess(payload))];case 2:case 5:return _a.sent(),[3,6];case 3:return _a.sent(),payload={closeButtonText:"Close",messages:[errorMessage="There is an error from the carrier that requires investigation. Please contact support."]},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(getCarrierBuildingLocationTypesError(errorMessage))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(showDialog(payload,"error"))];case 6:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.PICKUPS_SEND_PICKUPS_REQUEST,(function pickups_saga_sendPickupsRequest(action){var country,requestPayload,result,err_4,errorMessage,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,6]),country=action.payload.address.country?action.payload.address.country.iso2:"US",requestPayload={carrier_account:action.payload.carrierAccountId,is_test:!0,location:{address:{city:action.payload.address.city,company:action.payload.address.company,country,email:action.payload.address.email,name:action.payload.address.name,phone:action.payload.address.phone,state:action.payload.address.state,street1:action.payload.address.street1,street2:action.payload.address.street2,zip:action.payload.address.zip},building_location_type:action.payload.buildingLocationType.label,building_type:"",instructions:action.payload.buildingLocationType.label},metadata:"",requested_end_time:action.payload.endTime,requested_start_time:action.payload.startTime,timezone:action.payload.timeZone,transactions:action.payload.transactionObjectIds},[4,(0,redux_saga_effects_npm_proxy_esm.T1)(pickups_service_sendPickupsRequest,requestPayload)];case 1:return result=_a.sent(),payload={carrier:result.data.carrier,confirmationCode:result.data.confirmation_code,pickupDate:new Date(result.data.confirmed_end_time).toJSON().slice(0,10),pickupReadyByTime:result.data.confirmed_start_time,timeZone:result.data.timezone},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendPickupsRequestSuccess(payload))];case 2:case 5:return _a.sent(),[3,6];case 3:return err_4=_a.sent(),errorMessage="There is an error from the carrier that requires investigation. Please contact support.",err_4.response&&err_4.response.data&&err_4.response.data.messages&&err_4.response.data.messages.length>0&&(errorMessage=err_4.response.data.messages[0]),payload={closeButtonText:"Close",messages:[errorMessage]},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendPickupsRequestError(errorMessage))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(showDialog(payload,"error"))];case 6:return[2]}}))}));var BillingFrequency,fetchUserPlansSuccess=function(userPlans){return{payload:{userPlans},type:constants.t.FETCH_USER_PLANS_SUCCESS}},fetchPricingPlansSuccess=function(pricingPlans){return{payload:{pricingPlans},type:constants.t.FETCH_PRICING_PLANS_SUCCESS}},updateUserPlanSuccess=function(userPlan){return{payload:{userPlan},type:constants.t.UPDATE_USER_PLAN_SUCCESS}},closeAccountSuccess=function(closeStatus){return{payload:{closeStatus},type:constants.t.CLOSE_ACCOUNT_SUCCESS}},closeAccountError=function(errorMessage){return{payload:{errorMessage},type:constants.t.CLOSE_ACCOUNT_ERROR}},local_storage_keys=__webpack_require__("./app/constants/local-storage-keys.ts"),getUserPlans=function(){return services_api.Ay.request({url:"/billing/current-features/"})},getPricingPlans=function(){return services_api.Ay.request({url:"/billing/plans"})},setUserPlan=function(planName,isApiPlan){var devPlan=isApiPlan?{is_portal_user:!0}:{};return services_api.Ay.request({data:(0,tslib_es6.Cl)({plan:planName},devPlan),method:"POST",url:"/billing/plan-upgrade"})};!function(BillingFrequency){BillingFrequency.MONTHLY="MONTHLY",BillingFrequency.YEARLY="YEARLY"}(BillingFrequency||(BillingFrequency={}));var Plan_fromJSON=function(jsonPlan){return{billingFrequency:jsonPlan.frequency,displayName:jsonPlan.display_name,isFreeTrial:jsonPlan.is_free_trial,isFullAccess:jsonPlan.is_full_access,isPro:jsonPlan.is_pro,name:jsonPlan.name,numberOfLabelsIncluded:jsonPlan.number_of_labels_included,numberOfSeats:jsonPlan.number_of_seats,originalSubscriptionPrice:Number(jsonPlan.original_subscription_price),subscriptionPrice:Number(jsonPlan.subscription_price)}},userPlanFromJSON=function(jsonUserPlan){return{endDate:jsonUserPlan.end_date?moment_moment(jsonUserPlan.end_date):null,nextBillingDate:jsonUserPlan.next_billing_date?moment_moment(jsonUserPlan.next_billing_date):null,plan:Plan_fromJSON(jsonUserPlan.plan),startDate:moment_moment(jsonUserPlan.start_date)}},planToTrackingDetails=function(rawPlan){var _a,_b,planName;return{plan_cost:rawPlan.plan.subscriptionPrice,plan_display_name:rawPlan.plan.displayName,plan_end_date:null!==(_b=null===(_a=rawPlan.endDate)||void 0===_a?void 0:_a.toISOString())&&void 0!==_b?_b:null,plan_frequency:rawPlan.plan.billingFrequency,plan_label_estimate:rawPlan.plan.numberOfLabelsIncluded,plan_level:(planName=rawPlan.plan.displayName,planName.toLowerCase().includes("trial")?"trial":planName.toLowerCase().includes("pro")?"pro":planName.toLowerCase().includes("premier")?"premier":"basic"),plan_name:rawPlan.plan.name,plan_next_bill_date:null,plan_next_end_date:null,plan_start_date:rawPlan.startDate.toISOString()}};function plans_saga_fetchUserPlans(){var response,userPlans,e_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,4,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.qw())];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getUserPlans)];case 2:return response=_a.sent(),userPlans=response.data.results.map(userPlanFromJSON),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchUserPlansSuccess(userPlans))];case 3:case 5:return _a.sent(),[3,6];case 4:return e_1=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((errorMessage=e_1.toString(),{payload:{errorMessage},type:constants.t.FETCH_USER_PLANS_ERROR}))];case 6:return[2]}var errorMessage}))}(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_USER_PLANS,plans_saga_fetchUserPlans),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.UPDATE_USER_PLAN_SUCCESS,plans_saga_fetchUserPlans),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_USER_PLANS_SUCCESS,(function pushPlanToGTM(){var currentPlan,payload,gtmEvent;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(plans_selectors.P8)];case 1:return currentPlan=_a.sent(),payload={userIsPro:!1},currentPlan&&(payload.userIsPro=currentPlan.plan.isPro||currentPlan.plan.isFullAccess),gtmEvent={data:payload,eventName:"USER_PLAN_PUSHED_EVENT"},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent(gtmEvent))];case 2:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_PRICING_PLANS,(function plans_saga_fetchPricingPlans(){var response,pricingPlans,e_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getPricingPlans)];case 1:return response=_a.sent(),pricingPlans=response.data.results.map(Plan_fromJSON),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchPricingPlansSuccess(pricingPlans))];case 2:case 4:return _a.sent(),[3,5];case 3:return e_2=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((errorMessage=e_2.toString(),{payload:{errorMessage},type:constants.t.FETCH_PRICING_PLANS_ERROR}))];case 5:return[2]}var errorMessage}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.UPDATE_USER_PLAN,(function plans_saga_updateUserPlan(action){var currentPlan,response,userPlan,e_3,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,5,,7]),[4,selectState((function(state){return(0,plans_selectors.P8)(state)}))];case 1:return currentPlan=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(setUserPlan,action.payload.planName)];case 2:return response=_b.sent(),userPlan=userPlanFromJSON(response.data),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.u4,segment.sV.plan_updated,(0,tslib_es6.Cl)((0,tslib_es6.Cl)({operation:"started"},planToTrackingDetails(userPlan)),{entry_point:action.payload.entryPoint,previous_plan_name:null===(_a=null==currentPlan?void 0:currentPlan.plan)||void 0===_a?void 0:_a.displayName}))];case 3:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(updateUserPlanSuccess(userPlan))];case 4:case 6:return _b.sent(),[3,7];case 5:return e_3=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((errorMessage=e_3.toString(),{payload:{errorMessage},type:constants.t.UPDATE_USER_PLAN_ERROR}))];case 7:return[2]}var errorMessage}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CLOSE_WIX_PRO_PLAN_NOTIFICATION,(function plans_saga_closeWixProPlanNotification(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(local_storage.r,local_storage_keys.L$,"true")];case 1:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.SUBMIT_CLOSE_ACCOUNT_FORM,(function plans_saga_submitCloseAccountForm(action){var _a,reason,tellUsMore,payload,response,_b,_c;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:_a=action.payload,reason=_a.reason,tellUsMore=_a.tellUsMore,payload={churn_reason:reason},""!==tellUsMore&&(payload.extra_info=tellUsMore),_d.label=1;case 1:return _d.trys.push([1,13,,15]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)([settings_service,settings_service.closeAccount],payload)];case 2:return 200!==(null==(response=_d.sent())?void 0:response.status)?[3,4]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(closeAccountSuccess("full"))];case 3:return _d.sent(),[3,12];case 4:return 201!==(null==response?void 0:response.status)?[3,6]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(closeAccountSuccess("partial"))];case 5:return _d.sent(),[3,12];case 6:return"UNPAID_INVOICE"!==(null===(_b=null==response?void 0:response.data)||void 0===_b?void 0:_b.error_type)?[3,8]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(closeAccountError("account.plan.closeAccount.modal.unpaidInvoice"))];case 7:return _d.sent(),[3,12];case 8:return"NON_PRIMARY_USER"!==(null===(_c=null==response?void 0:response.data)||void 0===_c?void 0:_c.error_type)?[3,10]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(closeAccountError("account.plan.closeAccount.modal.nonAccountOwner"))];case 9:return _d.sent(),[3,12];case 10:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(closeAccountError("account.plan.closeAccount.form.apiError"))];case 11:_d.sent(),_d.label=12;case 12:return[3,15];case 13:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(closeAccountError("account.plan.closeAccount.form.apiError"))];case 14:return _d.sent(),[3,15];case 15:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CLOSE_ACCOUNT_SUCCESS,(function plans_saga_closeAccountSuccess(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,4]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)("/close?closeStatus=".concat(action.payload.closeStatus)))];case 1:case 3:return _a.sent(),[3,4];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(closeAccountError("account.plan.closeAccount.form.apiError"))];case 4:return[2]}}))}));const prod_analytics_service={heap:{addEventProperties:function(properties){var heap=window.heap;heap&&heap.addEventProperties(properties)},sendTrackEvent:function(name,properties){var heap=window.heap;heap&&heap.track(name,properties)}}};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.PROD_ANALYTICS_TRACK,(function prod_analytics_saga_sendTrackEvent(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(prod_analytics_service.heap.sendTrackEvent,action.name,action.properties)];case 1:return _a.sent(),[3,3];case 2:return _a.sent(),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.PROD_ANALYTICS_ADD_EVENT_PROPERTIES,(function prod_analytics_saga_addEventProperties(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(prod_analytics_service.heap.addEventProperties,action.properties)];case 1:return _a.sent(),[3,3];case 2:return _a.sent(),[3,3];case 3:return[2]}}))}));var applyOrReplacePromoCode=function(code,isReplacement){return{code,isReplacement,type:constants.t.PROMO_CODE_APPLY_OR_REPLACE}},applyPromoCode=function(code){return services_api.Ay.request({data:{code},method:"POST",url:"/apply_promo_code/"})},replacePromoCode=function(code){return services_api.Ay.request({data:{code},method:"POST",url:"/replace_promo_code/"})},Promo=__webpack_require__("./app/types/Promo.ts");(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.PROMO_CODE_APPLY_OR_REPLACE,(function promos_saga_applyOrReplacePromoCode(action){var promoCode,response,_a,err_1,errorMessage,_b,_c;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:return _d.trys.push([0,9,,11]),promoCode=action.code.toUpperCase(),action.isReplacement?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(replacePromoCode,promoCode)]:[3,2];case 1:return _a=_d.sent(),[3,4];case 2:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(applyPromoCode,promoCode)];case 3:_a=_d.sent(),_d.label=4;case 4:return response=_a,(0,Promo.yD)(response.data)?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.PROMO_CODE_APPLY_OR_REPLACE_SUCCESS})]:[3,8];case 5:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.$4())];case 6:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.u4,segment.sV.promo_code_add_replace)];case 7:_d.sent(),_d.label=8;case 8:return[3,11];case 9:return err_1=_d.sent(),errorMessage=(null===(_c=null===(_b=null==err_1?void 0:err_1.response)||void 0===_b?void 0:_b.data)||void 0===_c?void 0:_c.errors)?err_1.response.data.errors[0].code:"UNKNOWN",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((error=new Error(errorMessage),{error,type:constants.t.PROMO_CODE_APPLY_OR_REPLACE_ERROR}))];case 10:return _d.sent(),[3,11];case 11:return[2]}var error}))}));var TypeId,rates_at_checkout_actions=__webpack_require__("./app/actions/rates-at-checkout.actions.ts"),fetchShippingOptions=function(){return services_api.YZ.request({method:"GET",url:"service-groups"})},updateShippingOption=function(payload){return services_api.YZ.request({data:payload,method:"PUT",url:"service-groups"})},createShippingOption=function(payload){return services_api.YZ.request({data:payload,method:"POST",url:"service-groups"})},deleteShippingOption=function(id){return services_api.YZ.request({method:"DELETE",url:"service-groups/".concat(id,"/")})},getliveRatePackage=function(){return services_api.YZ.request({method:"GET",url:"live-rates/settings/parcel-template"})},updateLiveRatePackage=function(payload){return services_api.YZ.request({data:payload,method:"PUT",url:"live-rates/settings/parcel-template"})},fetchLiveRateSenderAddress=function(){return services_api.YZ.request({method:"GET",url:"live-rates/settings/address"})},updateLiveRateSenderAddress=function(liveRateAddressId){var payload={live_rates_address_id:liveRateAddressId};return services_api.YZ.request({data:payload,method:"PUT",url:"live-rates/settings/address"})},INTEGRATED_STORES=["wix"];!function(TypeId){TypeId.FLAT_RATE="FLAT_RATE",TypeId.FREE_SHIPPING="FREE_SHIPPING",TypeId.LIVE_RATE="LIVE_RATE"}(TypeId||(TypeId={}));var RatesAtCheckout_fromJSON=function(parcelTemplate){return{carrierTemplate:(template=parcelTemplate.template,template?(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},template),{apiToken:template.api_token,distanceUnit:template.distance_unit,isVariableDimensions:template.is_variable_dimensions,providerId:template.provider_id}):null),distanceUnit:parcelTemplate.distance_unit,height:Number(parcelTemplate.height),isDefault:parcelTemplate.is_default,length:Number(parcelTemplate.length),name:parcelTemplate.name,objectId:parcelTemplate.object_id,weight:Number(parcelTemplate.weight),weightUnit:parcelTemplate.weight_unit,width:Number(parcelTemplate.width)};var template},parseErrorObject=function(errorObj){var e_1,_a,errors=[];try{for(var _b=(0,tslib_es6.Ju)(Object.entries(errorObj)),_c=_b.next();!_c.done;_c=_b.next()){var _d=(0,tslib_es6.zs)(_c.value,2),errorKey=_d[0],errorMessage=_d[1];errorKey&&errorMessage&&errors.push("".concat(errorKey,": ").concat(errorMessage))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return errors},getShipmentDatasetById=function(shipmentId,shipmentDatasets){if(shipmentDatasets&&shipmentId)return shipmentDatasets.find((function(dataset){var _a;if((null===(_a=dataset.batchEntry)||void 0===_a?void 0:_a.shipmentObjectId)===shipmentId)return dataset}))},isIntegratedStore=function(dataset){var _a,_b;if(dataset){var storeName=null===(_b=null===(_a=dataset.order)||void 0===_a?void 0:_a.shopApp)||void 0===_b?void 0:_b.toLowerCase().trim();return INTEGRATED_STORES.includes(storeName)}},getMatchedShippingOption=function(shippingOptions,dataset){var _a,_b,shippingMethodName=null===(_b=null===(_a=null==dataset?void 0:dataset.order)||void 0===_a?void 0:_a.shippingMethod)||void 0===_b?void 0:_b.toLowerCase().trim();if(shippingMethodName&&0!==shippingOptions.length)return shippingOptions.find((function(option){var _a;return(null===(_a=null==option?void 0:option.name)||void 0===_a?void 0:_a.toLowerCase().trim())===shippingMethodName}))},findCheapestMatchedServiceLevelRate=function(matchedOptionServiceLevels,rates){var e_2,_a;if(matchedOptionServiceLevels&&0!==rates.length){var cheapestMatchedRate,_loop_1=function(serviceLevel){var matchedRate=rates.find((function(rate){var _a,_b,optionAccountId=null===(_a=serviceLevel.account_object_id)||void 0===_a?void 0:_a.replace(/-/g,""),optionToken=serviceLevel.service_level_token,isMatchedAccount=rate.carrierAccount===optionAccountId;return(null===(_b=rate.servicelevel)||void 0===_b?void 0:_b.token)===optionToken&&isMatchedAccount}));if(matchedRate)if(cheapestMatchedRate){var matchedRateAmount=parseFloat(matchedRate.amount),cheapestRateAmount=parseFloat(cheapestMatchedRate.amount);cheapestMatchedRate=matchedRateAmount<cheapestRateAmount?matchedRate:cheapestMatchedRate}else cheapestMatchedRate=matchedRate};try{for(var matchedOptionServiceLevels_1=(0,tslib_es6.Ju)(matchedOptionServiceLevels),matchedOptionServiceLevels_1_1=matchedOptionServiceLevels_1.next();!matchedOptionServiceLevels_1_1.done;matchedOptionServiceLevels_1_1=matchedOptionServiceLevels_1.next()){_loop_1(matchedOptionServiceLevels_1_1.value)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{matchedOptionServiceLevels_1_1&&!matchedOptionServiceLevels_1_1.done&&(_a=matchedOptionServiceLevels_1.return)&&_a.call(matchedOptionServiceLevels_1)}finally{if(e_2)throw e_2.error}}return cheapestMatchedRate}},errorDetail=function(err){var _a,_b,_c;return null!==(_c=null===(_b=null===(_a=null==err?void 0:err.response)||void 0===_a?void 0:_a.data)||void 0===_b?void 0:_b.detail)&&void 0!==_c?_c:"An error occurred. Please try again later."};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RATES_AT_CHECKOUT_FETCH_SHIPPING_OPTIONS,(function rates_at_checkout_sagas_fetchShippingOptions(){var response,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(fetchShippingOptions)];case 1:return response=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.ii(response))];case 2:case 4:return _a.sent(),[3,5];case 3:return err_1=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.zt(err_1.message))];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RATES_AT_CHECKOUT_CREATE_SHIPPING_OPTION,(function rates_at_checkout_sagas_createShippingOption(action){var response,updatedResp,err_2,errorArray;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,6,,8]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(createShippingOption,action.payload)];case 1:return response=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.XR(response))];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(fetchShippingOptions)];case 3:return updatedResp=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.ii(updatedResp))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.MI())];case 5:case 7:return _a.sent(),[3,8];case 6:return err_2=_a.sent(),errorArray=parseErrorObject(err_2.response.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.UZ(errorArray))];case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RATES_AT_CHECKOUT_UPDATE_SHIPPING_OPTION,(function rates_at_checkout_sagas_updateShippingOption(action){var response,updatedResp,err_3,errorArray;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,6,,8]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(updateShippingOption,action.payload)];case 1:return response=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.UU(response))];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(fetchShippingOptions)];case 3:return updatedResp=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.ii(updatedResp))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.MI())];case 5:case 7:return _a.sent(),[3,8];case 6:return err_3=_a.sent(),errorArray=parseErrorObject(err_3.response.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.Tk(errorArray))];case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RATES_AT_CHECKOUT_DELETE_SHIPPING_OPTION,(function rates_at_checkout_sagas_deleteShippingOption(action){var response,updatedResp,err_4;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,6,,8]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(deleteShippingOption,action.payload)];case 1:return response=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.At(response))];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(fetchShippingOptions)];case 3:return updatedResp=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.ii(updatedResp))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.MI())];case 5:case 7:return _a.sent(),[3,8];case 6:return err_4=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.Xn(errorDetail(err_4)))];case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RATES_AT_CHECKOUT_FETCH_LIVE_RATE_PACKAGE,(function fetchLiveRatePackage(){var response,formattedParcelTemplates,err_5;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getliveRatePackage)];case 1:return response=_a.sent(),formattedParcelTemplates=response,response.data.result&&(formattedParcelTemplates=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},response),{data:{result:RatesAtCheckout_fromJSON(response.data.result)}})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.aY(formattedParcelTemplates))];case 2:case 4:return _a.sent(),[3,5];case 3:return err_5=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.NK(errorDetail(err_5)))];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RATES_AT_CHECKOUT_UPDATE_LIVE_RATE_PACKAGE,(function rates_at_checkout_sagas_updateLiveRatePackage(action){var updateResp,response,formattedParcelTemplates,err_6;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,5,,7]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(updateLiveRatePackage,{object_id:action.payload})];case 1:return updateResp=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getliveRatePackage)];case 2:return response=_a.sent(),formattedParcelTemplates=response,response.data.result&&(formattedParcelTemplates=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},response),{data:{result:RatesAtCheckout_fromJSON(response.data.result)}})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.aY(formattedParcelTemplates))];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.zU(updateResp))];case 4:case 6:return _a.sent(),[3,7];case 5:return err_6=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.Qk(errorDetail(err_6)))];case 7:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RATES_AT_CHECKOUT_FETCH_LIVE_RATE_SENDER_ADDRESS,(function rates_at_checkout_sagas_fetchLiveRateSenderAddress(){var response,parsedResponseData,err_7;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(fetchLiveRateSenderAddress)];case 1:return response=_a.sent(),jsonAddress=null==response?void 0:response.data,parsedResponseData={addressId:jsonAddress.address_id,city:jsonAddress.city,company:jsonAddress.company,country:constants_countries.Xr[jsonAddress.country],email:jsonAddress.email,id:jsonAddress.id,isDefaultReturn:jsonAddress.is_default_return,isDefaultSender:jsonAddress.is_default_sender,name:jsonAddress.name,objectOwnerID:jsonAddress.object_owner_id,phone:jsonAddress.phone,state:jsonAddress.state,street1:jsonAddress.street1,street2:jsonAddress.street2,streetNumber:jsonAddress.street_no,zip:jsonAddress.zip},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.Fs(parsedResponseData))];case 2:case 4:return _a.sent(),[3,5];case 3:return err_7=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.wR(errorDetail(err_7)))];case 5:return[2]}var jsonAddress}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RATES_AT_CHECKOUT_UPDATE_LIVE_RATE_SENDER_ADDRESS,(function rates_at_checkout_sagas_updateLiveRateSenderAddress(action){var response,err_8;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(updateLiveRateSenderAddress,action.payload.liveRatesAddressId)];case 1:return response=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.A(response.data))];case 2:case 4:return _a.sent(),[3,5];case 3:return err_8=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.Rj(errorDetail(err_8)))];case 5:return[2]}}))}));function storeCurrentQueryParams(){var currentQS;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(getParsedQS)];case 1:return currentQS=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(local_storage.r,local_storage_keys.XC,JSON.stringify(currentQS))];case 2:return _a.sent(),[2]}}))}(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CHANGE_QUERY_PARAMS,(function changeQueryParams(action){var location,newQueryParams,queryString;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)((function(state){return state.router.location}))];case 1:return location=_a.sent(),newQueryParams=(0,tslib_es6.Cl)({},action.payload),queryString=lib.stringify(newQueryParams),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)("".concat(location.pathname,"?").concat(queryString)))];case 2:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.UPDATE_QUERY_PARAM,(function updateQueryParam(action){var location,currentQueryParams,newQueryParams,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)((function(state){return state.router.location}))];case 1:return location=_b.sent(),currentQueryParams=lib.parse(location.search.substring(1)),newQueryParams=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({order_by:"desc",sort_by:"_score"},currentQueryParams),((_a={})[action.payload.name]=action.payload.value,_a)),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)("".concat(location.pathname,"?").concat(lib.stringify(newQueryParams))))];case 2:return _b.sent(),[4,storeCurrentQueryParams()];case 3:return _b.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.UPDATE_QUERY_PARAMS,(function updateQueryParams(action){var location,currentQueryParams,newQueryParams,queryString;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)((function(state){return state.router.location}))];case 1:return location=_a.sent(),currentQueryParams=lib.parse(location.search.substring(1)),newQueryParams=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({order_by:"desc",sort_by:"_score"},currentQueryParams),action.payload),queryString=lib.stringify(newQueryParams),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)("".concat(location.pathname,"?").concat(queryString)))];case 2:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.STORE_CURRENT_QUERY_PARAMS,storeCurrentQueryParams),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RESTORE_QUERY_PARAMS,(function restoreQueryParams(){var storedQSString,storedQS,location_1,queryString;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return(storedQSString=(0,local_storage.X)(local_storage_keys.XC))?(storedQS=JSON.parse(storedQSString),Object.keys(storedQS).length>0?[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(getLocation)]:[3,3]):[3,3];case 1:return location_1=_a.sent(),queryString=lib.stringify(storedQS),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.HC)("".concat(location_1.pathname,"?").concat(queryString)))];case 2:_a.sent(),_a.label=3;case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.REMOVE_QUERY_PARAM,(function removeQueryParam(action){var location,currentQueryParams,newQueryParams;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)((function(state){return state.router.location}))];case 1:return location=_a.sent(),delete(currentQueryParams=lib.parse(location.search.substring(1)))[action.payload.name],newQueryParams=(0,tslib_es6.Cl)({},currentQueryParams),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)("".concat(location.pathname,"?").concat(lib.stringify(newQueryParams))))];case 2:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.REMOVE_QUERY_PARAMS,(function removeQueryParams(action){var location,currentQueryParams,newQueryParams;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)((function(state){return state.router.location}))];case 1:return location=_a.sent(),currentQueryParams=lib.parse(location.search.substring(1)),action.payload.name.forEach((function(param){return delete currentQueryParams[param]})),newQueryParams=(0,tslib_es6.Cl)({},currentQueryParams),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)("".concat(location.pathname,"?").concat(lib.stringify(newQueryParams))))];case 2:return _a.sent(),[2]}}))}));(0,redux_saga_effects_npm_proxy_esm.p8)([constants.t.ORDERS_GET_ALL_LABELS_SUCCESS,constants.t.ORDERS_GET_LABEL_SUCCESS],(function ordersDownloadLabel(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils.f0,"other",segment.sV.label_downloaded)];case 1:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_GET_PACKING_SLIP,(function ordersDownloadPackingSlip(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.u4,segment.sV.packing_slip_downloaded)];case 1:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)([constants.t.FETCH_CARRIER_ACCOUNTS_SUCCESS,constants.t.CREATE_CARRIER_ACCOUNT_SUCCESS],(function userCarrierAccountTraits(){var userId,userCarrierAccounts,localTraits,personalCarrierNames;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,selectState(user_selectors.F6)];case 1:return userId=_a.sent(),[4,selectState(carrier_accounts_selectors.sp)];case 2:return(userCarrierAccounts=_a.sent()).length?(localTraits=(0,segment.P0)(),personalCarrierNames=(0,uniq.A)(userCarrierAccounts.map((function(carrier){return carrier.carrier.name}))),localTraits&&!localTraits.personal_carriers||localTraits&&localTraits.personal_carriers&&Array.isArray(localTraits.personal_carriers)&&!(0,isEqual.A)(personalCarrierNames,localTraits.personal_carriers)?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.ls,userId||void 0,{personal_carriers:personalCarrierNames})]:[3,4]):[3,4];case 3:_a.sent(),_a.label=4;case 4:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)([constants.t.ADDRESSES_FETCH_SUCCESS,constants.t.APIADDRESS_CREATE,constants.t.APIADDRESS_EDIT,constants.t.APIADDRESS_DELETE],(function userAddressTraits(){var defaultSenderAddress,userId,_a,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return[4,selectState(address_selectors.dR)];case 1:return(defaultSenderAddress=_c.sent())?[4,selectState(user_selectors.F6)]:[2];case 2:return userId=_c.sent(),defaultSenderAddress.country&&((0,segment.Ok)("sender_address_city",defaultSenderAddress.city)||(0,segment.Ok)("sender_address_phone",defaultSenderAddress.phone)||(0,segment.Ok)("sender_address_state",defaultSenderAddress.state)||(0,segment.Ok)("sender_address_country_name",null===(_a=defaultSenderAddress.country)||void 0===_a?void 0:_a.name)||(0,segment.Ok)("email",defaultSenderAddress.email))?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.ls,userId||void 0,{master_account_available:(0,constants_countries.At)(defaultSenderAddress.country),sender_address_city:defaultSenderAddress.city,sender_address_company:defaultSenderAddress.company,sender_address_country_name:null===(_b=defaultSenderAddress.country)||void 0===_b?void 0:_b.name,sender_address_email:defaultSenderAddress.email,sender_address_name:defaultSenderAddress.name,sender_address_phone:defaultSenderAddress.phone,sender_address_state:defaultSenderAddress.state})]:[3,4];case 3:_c.sent(),_c.label=4;case 4:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_BATCH_CREATE_TRANSACTIONS_ERROR,(function sendLabelPurchaseFailedEvent(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.u4,segment.sV.label_purchase_failed,{error:action.payload.error})];case 1:return _a.sent(),[2]}}))}));var getRatesAtCheckoutStore=function(state){return state.ratesAtCheckout},getShippingOptions=((0,reselect_es.Mz)(getRatesAtCheckoutStore,(function(ratesAtCheckoutStore){return ratesAtCheckoutStore.addShippingOptionModalIsOpen})),(0,reselect_es.Mz)(getRatesAtCheckoutStore,(function(ratesAtCheckoutStore){return(0,fetchable.Vn)(ratesAtCheckoutStore.shippingOptions)||[]}))),getIsShippingOptionsRequestInitiated=((0,reselect_es.Mz)(getRatesAtCheckoutStore,(function(ratesAtCheckoutStore){return(0,fetchable.Vn)(ratesAtCheckoutStore.liveRatePackage)})),(0,reselect_es.Mz)(getRatesAtCheckoutStore,(function(ratesAtCheckoutStore){var e_1,_a,requestTypes=[ratesAtCheckoutStore.createShippingOptionStatus,ratesAtCheckoutStore.updateShippingOptionStatus,ratesAtCheckoutStore.deleteShippngOptionStatus],errors=[];try{for(var requestTypes_1=(0,tslib_es6.Ju)(requestTypes),requestTypes_1_1=requestTypes_1.next();!requestTypes_1_1.done;requestTypes_1_1=requestTypes_1.next()){var type=requestTypes_1_1.value;"failed"===type.kind&&errors.push.apply(errors,(0,tslib_es6.fX)([],(0,tslib_es6.zs)(type.error),!1))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{requestTypes_1_1&&!requestTypes_1_1.done&&(_a=requestTypes_1.return)&&_a.call(requestTypes_1)}finally{if(e_1)throw e_1.error}}return errors})),(0,reselect_es.Mz)(getRatesAtCheckoutStore,(function(providersStore){return(0,fetchable.ST)(providersStore.liveRatePackage)})),(0,reselect_es.Mz)(getRatesAtCheckoutStore,(function(providersStore){var request=providersStore.shippingOptions;return(0,fetchable.ST)(request)||(0,fetchable.Fd)(request)}))),getIsShippingOptionsRequestComplete=(0,reselect_es.Mz)(getRatesAtCheckoutStore,(function(providersStore){var request=providersStore.shippingOptions;return(0,fetchable.Zd)(request)||(0,fetchable.Fd)(request)})),getRates=((0,reselect_es.Mz)(getRatesAtCheckoutStore,(function(providersStore){return(0,fetchable.Vn)(providersStore.liveRateSenderAddress)})),(0,reselect_es.Mz)(getRatesAtCheckoutStore,(function(providersStore){var request=providersStore.liveRateSenderAddress;return(0,fetchable.Zd)(request)||(0,fetchable.Fd)(request)})),function(shipmentId){return services_api.Ay.request({method:"GET",url:"/shipments/".concat(shipmentId)})}),Shipment=__webpack_require__("./app/types/Shipment.ts"),FeatureFlagsProvider=__webpack_require__("./app/utils/featureflags/FeatureFlagsProvider.tsx"),redux_batched_subscribe_lib=__webpack_require__("./node_modules/redux-batched-subscribe/lib/index.js");const batch_state={notify:null};(0,redux_batched_subscribe_lib.a)((function(freshNotify){batch_state.notify=freshNotify}));var batchAction=function(action){return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},action),{meta:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},action.meta||{}),{batch:!0})})};function autoSelectRateHelper(shipment,trackingReference){var userTouchedRates,checkoutRateAfterPoll,autoCheckoutRateFound,userDefaultServiceLevel,rates,allServiceLevels,autoSelectedRate,batchEntries,batchEntryWithPreferredServiceLevelToken,token,ratesForServiceLevelToken,shipmentDatasets,shipmentDataset,shippingOptions,isShippingOptionsInitiated,isShippingOptionsRequestComplete,response,err_2,matchedShippingOption,cheapestMatchedRate,_a,bestOption,cheapestAndFastest,cheapestRates,_b,_c;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:return[4,selectState(rates_selectors.l0)];case 1:return userTouchedRates=_d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.qy)];case 2:return checkoutRateAfterPoll=_d.sent(),autoCheckoutRateFound=!1,userTouchedRates[shipment.objectId]?[2]:[4,selectState(user_selectors.Fh)];case 3:return userDefaultServiceLevel=_d.sent(),rates=shipment.rates,[4,selectState(providers_selectors.ig)];case 4:return allServiceLevels=_d.sent(),Object.keys(allServiceLevels).length>0&&(rates=rates.filter((function(rate){var _a,_b,_c,_d;return!(null==rate?void 0:rate.carrierAccount)||!(null===(_a=null==rate?void 0:rate.servicelevel)||void 0===_a?void 0:_a.token)||!(null===(_d=null===(_b=allServiceLevels[rate.carrierAccount])||void 0===_b?void 0:_b.serviceLevelsByToken[null!==(_c=rate.servicelevel.extended_token)&&void 0!==_c?_c:rate.servicelevel.token])||void 0===_d?void 0:_d.is_hidden)}))),0===rates.length?[2]:(checkoutRateAfterPoll&&(null===(_c=checkoutRateAfterPoll.currBatchEntry)||void 0===_c?void 0:_c.shipmentObjectId)===shipment.objectId&&(autoSelectedRate=rates.find((function(rate){return rate.servicelevel.token===checkoutRateAfterPoll.serviceLevelToken&&checkoutRateAfterPoll.carrierAccount===rate.carrierAccount})))&&(autoCheckoutRateFound=!0),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_selectors.zo)]);case 5:return batchEntries=_d.sent(),batchEntryWithPreferredServiceLevelToken=Object.values(batchEntries).find((function(batchEntry){return batchEntry.shipmentObjectId===shipment.objectId&&batchEntry.preferredServiceLevelToken})),(token=null==batchEntryWithPreferredServiceLevelToken?void 0:batchEntryWithPreferredServiceLevelToken.preferredServiceLevelToken)&&(ratesForServiceLevelToken=(0,Rate.RH)(rates,token,null==batchEntryWithPreferredServiceLevelToken?void 0:batchEntryWithPreferredServiceLevelToken.preferredAccountObjectID)).length>0&&(autoSelectedRate=ratesForServiceLevelToken[0]),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_composite_selectors.mh)];case 6:return shipmentDatasets=_d.sent(),shipmentDataset=getShipmentDatasetById(null==shipment?void 0:shipment.objectId,shipmentDatasets),isIntegratedStore(shipmentDataset)?[4,selectState(getShippingOptions)]:[3,17];case 7:return shippingOptions=_d.sent(),[4,selectState(getIsShippingOptionsRequestInitiated)];case 8:return isShippingOptionsInitiated=_d.sent(),[4,selectState(getIsShippingOptionsRequestComplete)];case 9:if(isShippingOptionsRequestComplete=_d.sent(),(0!==shippingOptions.length||isShippingOptionsInitiated)&&isShippingOptionsRequestComplete)return[3,16];_d.label=10;case 10:return _d.trys.push([10,14,,16]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(fetchShippingOptions)];case 11:return response=_d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.ii(response))];case 12:return _d.sent(),[4,selectState(getShippingOptions)];case 13:return shippingOptions=_d.sent(),[3,16];case 14:return err_2=_d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(rates_at_checkout_actions.zt(err_2.message))];case 15:return _d.sent(),[3,16];case 16:matchedShippingOption=getMatchedShippingOption(shippingOptions,shipmentDataset),(cheapestMatchedRate=findCheapestMatchedServiceLevelRate(null==matchedShippingOption?void 0:matchedShippingOption.service_levels,rates))&&!autoSelectedRate&&(autoSelectedRate=cheapestMatchedRate),_d.label=17;case 17:return _a=(0,Rate.jt)(rates),bestOption=_a.bestOption,cheapestAndFastest=_a.cheapestAndFastest,cheapestRates=_a.cheapestRates,userDefaultServiceLevel&&!autoSelectedRate&&(autoSelectedRate=rates.find((function(rate){return rate.servicelevel.token===userDefaultServiceLevel.token&&rate.carrierAccount===userDefaultServiceLevel.accountId}))),!autoSelectedRate&&bestOption&&(autoSelectedRate=bestOption[0]),!autoSelectedRate&&cheapestRates.length>0&&(autoSelectedRate=cheapestRates[0]),!autoSelectedRate&&cheapestAndFastest.length>0&&(autoSelectedRate=cheapestAndFastest[0]),autoSelectedRate||(utils_observability.O.errorEvent("AUTO_SELECT_RATES",{errorMessage:"No auto selected rates, choosing first item of list",force:!0,rates:rates.map((function(rate){return{amount:rate.amount,attributes:rate.attributes.join(","),provider:rate.provider,servicelevelName:rate.servicelevel.name}}))}),autoSelectedRate=rates[0]),autoSelectedRate?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(batchAction(selectRate(shipment.objectId,autoSelectedRate.objectId,!1,trackingReference)))]:[3,19];case 18:_d.sent(),_d.label=19;case 19:return checkoutRateAfterPoll&&checkoutRateAfterPoll.currBatchEntry&&autoCheckoutRateFound?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,orders_actions.dT)((_b={},_b[checkoutRateAfterPoll.currBatchEntry.orderObjectId]=[checkoutRateAfterPoll.currBatchEntry.id],_b)))]:[3,21];case 20:_d.sent(),_d.label=21;case 21:return[2]}}))}(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.SHIPMENT_FETCH,(function shipments_saga_fetchShipment(action){var shipmentId,trackingReference,response,shipment,ratesBestOptionFlag,isRatesBestOptionEnabled,payload,_a,_b,_c;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:return _d.trys.push([0,4,,6]),shipmentId=action.shipmentId,trackingReference=action.trackingReference,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getRates,shipmentId)];case 1:return response=_d.sent(),shipment=Shipment.r(response.data),ratesBestOptionFlag=FeatureFlagsProvider.U2.decide(featureflags.gH.RATES_BEST_OPTION.name),isRatesBestOptionEnabled="variant"===(null==ratesBestOptionFlag?void 0:ratesBestOptionFlag.variationKey),shipment.rates=isRatesBestOptionEnabled?function(rates){if(void 0===rates&&(rates=[]),0===rates.length)return[];var lowestRate=(0,tslib_es6.fX)([],(0,tslib_es6.zs)(rates),!1).sort((function(a,b){return Number(a.amount)-Number(b.amount)}))[0],upsGround=rates.find((function(rate){return"ups_ground"===rate.servicelevel.token})),uspsPriority=rates.find((function(rate){return"usps_priority"===rate.servicelevel.token})),bestOption=null;if(!(bestOption=upsGround&&uspsPriority?Number(upsGround.amount)<Number(uspsPriority.amount)?upsGround:uspsPriority:upsGround||uspsPriority||null))return rates;var target=1.5*Number(lowestRate.amount);return Number(bestOption.amount)<target&&(bestOption.attributes=[Rate.jf.BEST_OPTION]),rates}(shipment.rates):shipment.rates,payload={shipment},[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils.Rx,trackingReference,types.Fd.operations.GENERATED,{rateIds:null===(_b=null===(_a=payload.shipment)||void 0===_a?void 0:_a.rates)||void 0===_b?void 0:_b.map((function(rate){return rate.objectId})),shipmentId:null===(_c=payload.shipment)||void 0===_c?void 0:_c.objectId})];case 2:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(batchAction(fetchShipmentRatesSuccess(shipmentId,payload,trackingReference)))];case 3:case 5:return _d.sent(),[3,6];case 4:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((shipmentObjectId=action.shipmentId,{payload:{shipmentObjectId},type:constants.t.SHIPMENT_FETCH_ERROR}))];case 6:return[2]}var shipmentObjectId}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.SHIPMENT_FETCH_SUCCESS,(function autoSelectRate(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,autoSelectRateHelper(action.payload.shipment,action.trackingReference)];case 1:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.SHIPMENT_FETCH_SUCCESS,(function trackRateDisplayed(action){var shipment,trackingReference,isBulk,orderQuantity,rates,attributedRates,sortedRates,carrierAccounts,ratesBestOptionFlag,attributedRates_1,attributedRates_1_1,rate,eventData,e_1_1,e_1,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return shipment=action.payload.shipment,trackingReference=action.trackingReference,isBulk=trackingReference.isBulk,orderQuantity=trackingReference.orderQuantity,shipment.status!==Shipment.P.SUCCESS||isBulk||!orderQuantity?[2]:(rates=shipment.rates,attributedRates=(0,Rate.yF)(rates),sortedRates=(0,Rate.P2)(attributedRates),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(carrier_accounts_selectors.Pr)]);case 1:carrierAccounts=_b.sent(),ratesBestOptionFlag=FeatureFlagsProvider.U2.decide(featureflags.gH.RATES_BEST_OPTION.name),_b.label=2;case 2:_b.trys.push([2,7,8,9]),attributedRates_1=(0,tslib_es6.Ju)(attributedRates),attributedRates_1_1=attributedRates_1.next(),_b.label=3;case 3:return attributedRates_1_1.done?[3,6]:(rate=attributedRates_1_1.value,eventData=(0,utils.Mz)(rate,sortedRates,carrierAccounts,ratesBestOptionFlag),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils.me,trackingReference,types.N6.operations.DISPLAYED,eventData)]);case 4:_b.sent(),_b.label=5;case 5:return attributedRates_1_1=attributedRates_1.next(),[3,3];case 6:return[3,9];case 7:return e_1_1=_b.sent(),e_1={error:e_1_1},[3,9];case 8:try{attributedRates_1_1&&!attributedRates_1_1.done&&(_a=attributedRates_1.return)&&_a.call(attributedRates_1)}finally{if(e_1)throw e_1.error}return[7];case 9:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.RETRY_AUTO_SELECT_RATES,(function shipments_saga_retryAutoSelectRates(){var shipmentsData,trackingReference;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(shipments_selectors.Q6)];case 1:return shipmentsData=_a.sent(),trackingReference=TrackingHelper.U.getTrackingReference(types.Fd.name,"order_table",{rateIds:void 0}),[4,(0,redux_saga_effects_npm_proxy_esm.Q7)(Object.values(shipmentsData).map((function(shipment){return autoSelectRateHelper(shipment,trackingReference)})))];case 2:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.RATE_SELECT,(function shipments_saga_selectRate(action){var _a,accountObjectId,orderSelection,rateObjectId,serviceLevelToken,trackingReference,userTriggered;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _a=action.payload,accountObjectId=_a.accountObjectId,orderSelection=_a.orderSelection,rateObjectId=_a.rateObjectId,serviceLevelToken=_a.serviceLevelToken,trackingReference=_a.trackingReference,userTriggered=_a.userTriggered,(0,utils.Rx)(trackingReference,types.Fd.operations.SELECTED,{isAutoSelection:!userTriggered,rateId:rateObjectId}),userTriggered&&orderSelection&&serviceLevelToken?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,orders_actions.eW)(orderSelection,serviceLevelToken,accountObjectId))]:[3,2];case 1:_b.sent(),_b.label=2;case 2:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.MULTIPLE_RATE_SELECT,(function shipments_saga_selectRates(action){var _a,accountObjectId,orderSelection,serviceLevelToken,trackingReference;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _a=action.payload,accountObjectId=_a.accountObjectId,orderSelection=_a.orderSelection,serviceLevelToken=_a.serviceLevelToken,trackingReference=_a.trackingReference,orderSelection&&serviceLevelToken?((0,utils.Rx)(trackingReference,types.Fd.operations.SELECTED,{isAutoSelection:!1}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,orders_actions.eW)(orderSelection,serviceLevelToken,accountObjectId))]):[3,2];case 1:_b.sent(),_b.label=2;case 2:return[2]}}))}));var lodash_es_difference=__webpack_require__("./node_modules/lodash-es/difference.js"),stores_service=__webpack_require__("./app/services/stores.service.ts"),Store=__webpack_require__("./app/types/Store.ts");function checkAndTrackStoreConnectionBehavior(){var connectedStores,currentlyConnectedStoreNames,persistedStores,updateStoresCookie,parsedPersistedStores,storeName;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(stores_selectors.o$)];case 1:return connectedStores=_a.sent(),currentlyConnectedStoreNames=connectedStores.map((function(x){return x.storePlatform.name})),persistedStores=(0,local_storage.X)("stores"),updateStoresCookie=function(){return(0,local_storage.r)("stores",JSON.stringify(currentlyConnectedStoreNames))},persistedStores?(parsedPersistedStores=JSON.parse(persistedStores)).length===connectedStores.length?[3,7]:(storeName=(0,lodash_es_difference.A)(parsedPersistedStores,currentlyConnectedStoreNames),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("Store Connect Success",{Store:storeName}))]):[3,8];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({data:{store:storeName},eventName:CONNECTED_STORE_SUCCESS}))];case 3:return _a.sent(),0!==parsedPersistedStores.length||1!==connectedStores.length?[3,6]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({data:{store:storeName},eventName:FIRST_STORE_CONNECTED}))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("First Store Connected",{Store:storeName}))];case 5:_a.sent(),_a.label=6;case 6:updateStoresCookie(),_a.label=7;case 7:return[3,9];case 8:updateStoresCookie(),_a.label=9;case 9:return[2]}}))}(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.STORES_FETCH,(function fetchStores(){var response,stores,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,5,,7]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(stores_service.hO)];case 1:return response=_a.sent(),stores=response.data.results.map(Store.rS),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stores_actions.eo(stores))];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stores_actions.CF())];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(checkAndTrackStoreConnectionBehavior)];case 4:case 6:return _a.sent(),[3,7];case 5:return err_1=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stores_actions.de(err_1.toString()))];case 7:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.LEGACY_STORES_FETCH,(function fetchLegacyStores(){var connectedStores_1,response,stores,err_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,4,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(stores_selectors.o$)];case 1:return connectedStores_1=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(stores_service.CF)];case 2:return response=_a.sent(),stores=response.data.shops.map(Store.nJ).filter((function(store){return store})).filter((function(store){return!connectedStores_1.find((function(connectedStore){return connectedStore.storePlatform.name===store.storePlatform.name}))})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stores_actions.pO(stores))];case 3:case 5:return _a.sent(),[3,6];case 4:return err_2=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(stores_actions.QZ(err_2.toString()))];case 6:return[2]}}))}));var generateToken=function(isTest){return services_api.kC.request({data:{created:null,test:isTest,token:null},method:"POST",url:"/authentication_tokens/v2/"})},getToken=function(){return services_api.kC.request({url:"/authentication_tokens/v2/"})},deleteToken=function(objectId){return services_api.kC.request({method:"DELETE",url:"/authentication_tokens/v2/".concat(objectId)})},Token_fromJSON=function(token){return{created:token.created,objectId:token.object_id,test:token.test,token:token.token,user:token.user}};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.GENERATE_TOKEN,(function token_saga_generateToken(action){var response,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(generateToken,action.payload.isTest)];case 1:return response=_a.sent(),action.callback(response.data),[3,3];case 2:return err_1=_a.sent(),action.callback(err_1),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_TOKEN,(function token_saga_getToken(action){var response,err_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getToken)];case 1:return response=_a.sent(),action.callback(response.data.results.map(Token_fromJSON)),[3,3];case 2:return err_2=_a.sent(),action.callback(err_2),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.DELETE_TOKEN,(function token_saga_deleteToken(action){var response,err_3;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(deleteToken,action.payload.objectId)];case 1:return response=_a.sent(),action.callback(response.data.results.map(Token_fromJSON)),[3,3];case 2:return err_3=_a.sent(),action.callback(err_3),[3,3];case 3:return[2]}}))}));var ReturnPolicys,fetchTrackingConfigSuccess=function(data){return{payload:data,type:constants.t.FETCH_TRACKING_CONFIG_SUCCESS}},fetchTrackingConfigError=function(error){return{payload:{error},type:constants.t.FETCH_TRACKING_CONFIG_ERROR}},getTrackingSettingsStore=function(state){return state.trackingSettings},getTrackingConfig=(0,reselect_es.Mz)(getTrackingSettingsStore,(function(store){return(0,fetchable.Vn)(store.trackingConfig)||{recommendationTitle:null,recommendationTitleTracking:null,returnPolicySource:null,returnPolicyUrl:null,spotlightTitle:null}})),tracking_settings_service_fetchTrackingConfig=((0,reselect_es.Mz)(getTrackingSettingsStore,(function(store){return"requesting"===store.trackingConfig.kind})),(0,reselect_es.Mz)(getTrackingSettingsStore,(function(store){return store.trackingConfigUpdateRequest})),(0,reselect_es.Mz)(getTrackingSettingsStore,(function(store){return store.brandAndFooterUpdateRequest.kind})),function(){return services_api.YZ.request({method:"GET",url:"setting/tracking"})}),tracking_settings_service_updateTrackingConfig=function(payload){return services_api.YZ.request({data:payload,headers:{},method:"POST",url:"/setting/tracking"})},Company_toJSON=function(company){var _a,_b,_c;return{brand_primary_color:null!==(_a=company.brandPrimaryColor)&&void 0!==_a?_a:"",brand_secondary_color:null!==(_b=company.brandSecondaryColor)&&void 0!==_b?_b:"",company_name:company.companyName?company.companyName:"",email:company.email?company.email:"",facebook:company.facebook?extractHandler(company.facebook):"",instagram:company.instagram?extractHandler(company.instagram):"",reply_to_email:null!==(_c=company.replyToEmail)&&void 0!==_c?_c:"",twitter:company.twitter?extractHandler(company.twitter):"",website:company.website?company.website:""}},Company_fromJSON=function(data){return{brandPrimaryColor:data.brand_primary_color,brandSecondaryColor:data.brand_secondary_color,companyName:data.company_name,email:data.email,facebook:data.facebook,instagram:data.instagram,replyToEmail:data.reply_to_email,twitter:data.twitter,unsupportedStore:data.unsupported_store,website:data.website}},extractHandler=function(url){var splitted=url.split("/");return splitted.pop()||splitted.pop()};!function(ReturnPolicys){ReturnPolicys.External="EXTERNAL",ReturnPolicys.None="NONE",ReturnPolicys.StorePolicy="STORE_POLICY"}(ReturnPolicys||(ReturnPolicys={}));var TrackingSettings_fromJSON=function(jsonTrack){return{recommendationTitle:jsonTrack.recommendation_title,recommendationTitleTracking:jsonTrack.recommendation_title_tracking,returnPolicySource:jsonTrack.return_policy_source,returnPolicyUrl:jsonTrack.return_policy_url,spotlightTitle:jsonTrack.spotlight_title}},TrackingSettings_toJSON=function(jsonTrack){return{recommendation_title:jsonTrack.recommendationTitle||null,recommendation_title_tracking:jsonTrack.recommendationTitleTracking||null,return_policy_source:jsonTrack.returnPolicySource||ReturnPolicys.None,return_policy_url:jsonTrack.returnPolicySource===ReturnPolicys.External?jsonTrack.returnPolicyUrl:null,spotlight_title:jsonTrack.spotlightTitle||null}};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_TRACKING_CONFIG,(function tracking_settings_sagas_fetchTrackingConfig(){var data,err_1,axiosError,_a,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(tracking_settings_service_fetchTrackingConfig)];case 1:return data=_c.sent().data,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchTrackingConfigSuccess(TrackingSettings_fromJSON(data)))];case 2:case 4:return _c.sent(),[3,5];case 3:return err_1=_c.sent(),axiosError=err_1,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchTrackingConfigError(null===(_b=null===(_a=null==axiosError?void 0:axiosError.response)||void 0===_a?void 0:_a.data)||void 0===_b?void 0:_b.detail))];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.UPDATE_TRACKING_CONFIG,(function tracking_settings_sagas_updateTrackingConfig(action){var data,parsedData,err_2,axiosError,_a,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,4,,6]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(tracking_settings_service_updateTrackingConfig,TrackingSettings_toJSON(action.payload))];case 1:return data=_c.sent().data,parsedData=TrackingSettings_fromJSON(data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchTrackingConfigSuccess(parsedData))];case 2:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((payload=parsedData,{payload,type:constants.t.UPDATE_TRACKING_CONFIG_SUCCESS}))];case 3:case 5:return _c.sent(),[3,6];case 4:return err_2=_c.sent(),axiosError=err_2,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchTrackingConfigError(null===(_b=null===(_a=null==axiosError?void 0:axiosError.response)||void 0===_a?void 0:_a.data)||void 0===_b?void 0:_b.detail))];case 6:return[2]}var payload}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.UPDATE_BRAND_AND_FOOTER_SETTINGS,(function tracking_settings_sagas_updateBrandAndFooter(action){var company,companyJSON,companyRespData,parsedCompanyData,trackingConfig,trackingConfigPayload,trackingConfigJSON,trackingConfigRespData,parsedTrackingConfigData,err_3,axiosError,_a,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,8,,10]),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(user_selectors.t1)];case 1:return(company=_c.sent()).replyToEmail=action.payload.replyToEmail,companyJSON=Company_toJSON(company),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.JT,companyJSON)];case 2:return companyRespData=_c.sent().data,parsedCompanyData=Company_fromJSON(companyRespData),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.Iy(parsedCompanyData))];case 3:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(getTrackingConfig)];case 4:return trackingConfig=_c.sent(),trackingConfigPayload=function(trackingConfig,payload){return{recommendationTitle:payload.recommendationTitle,recommendationTitleTracking:trackingConfig.recommendationTitleTracking,returnPolicySource:payload.returnPolicySource,returnPolicyUrl:payload.returnPolicyUrl,spotlightTitle:payload.spotlightTitle}}(trackingConfig,action.payload),trackingConfigJSON=TrackingSettings_toJSON(trackingConfigPayload),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(tracking_settings_service_updateTrackingConfig,trackingConfigJSON)];case 5:return trackingConfigRespData=_c.sent().data,parsedTrackingConfigData=TrackingSettings_fromJSON(trackingConfigRespData),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchTrackingConfigSuccess(parsedTrackingConfigData))];case 6:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((payload=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},parsedTrackingConfigData),{replyToEmail:parsedCompanyData.replyToEmail}),{payload,type:constants.t.UPDATE_BRAND_AND_FOOTER_SETTINGS_SUCCESS}))];case 7:case 9:return _c.sent(),[3,10];case 8:return err_3=_c.sent(),axiosError=err_3,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((error=null===(_b=null===(_a=null==axiosError?void 0:axiosError.response)||void 0===_a?void 0:_a.data)||void 0===_b?void 0:_b.detail,{payload:{error},type:constants.t.UPDATE_BRAND_AND_FOOTER_SETTINGS_ERROR}))];case 10:return[2]}var error,payload}))}));(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.FETCH_TRANSACTION,(function transactions_saga_fetchTransaction(action){var result,parsedTransaction;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(transactions_service_get,action.payload.transactionId)];case 1:return result=_a.sent(),parsedTransaction=(0,Transaction.rS)(result.data),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((transaction=parsedTransaction,{payload:{transaction},type:constants.t.FETCH_TRANSACTION_SUCCESS}))];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.FETCH_TRANSACTION_ERROR})];case 5:return[2]}var transaction}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.SEND_EMAIL_NOTIFICATION,(function transactions_saga_sendEmailNotification(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(transactions_service_emailNotify,[action.payload.transactionId])];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.SEND_EMAIL_NOTIFICATION_SUCCESS})];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.SEND_EMAIL_NOTIFICATION_ERROR})];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.REFUND_TRANSACTION,(function transactions_saga_refundTransaction(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(refund,action.payload.transactionId)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.REFUND_TRANSACTION_SUCCESS})];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.REFUND_TRANSACTION_ERROR})];case 5:return[2]}}))}));var getEntitlements=function(){return services_api.Ay.request({method:"GET",url:"/entitlements"})},Asset=__webpack_require__("./app/types/Asset.ts"),getUserJWT=function(){return getCookie("jwt")},shouldAuthenticate=function(state){return!state.user.isAuthenticated};function refreshUser(){var response,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.HW)];case 1:return response=_a.sent(),payload={user:(0,User.rS)(response.data)},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.zi(payload))];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.Qu())];case 5:return[2]}}))}var isSameSession=function(){var jwt=getUserJWT(),copy=getCookie("spare");return!(!copy||jwt!==copy)||(setCookie("spare",jwt),!1)};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_FETCH,(function fetchUser(){var jwt,response,payload,properties,promocodeCookieValue,decodedCookieValue,cookieDomain;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,21,,23]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getUserJWT)];case 1:return jwt=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(services_api.kM,jwt)];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.HW)];case 3:return response=_a.sent(),payload={user:(0,User.rS)(response.data)},[4,selectState(shouldAuthenticate)];case 4:return _a.sent()?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,auth_actions.Sz)(payload))]:[3,6];case 5:_a.sent(),_a.label=6;case 6:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(pushToGTMDataLayer({group_jwt:response.data.group_jwt}))];case 7:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.zi(payload))];case 8:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.FETCH_AB_TEST_FEATURES})];case 9:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)({type:constants.t.FETCH_USER_PLANS})];case 10:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,orders_actions.vs)())];case 11:return _a.sent(),isSameSession()?[3,13]:(properties={"User Type":payload.user.hasPurchasedLabel?"Return Customer":"Return Visitor","Visit Type":"Login"},"customer",setCookie("customer","true"),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.R)(properties))]);case 12:_a.sent(),_a.label=13;case 13:return(promocodeCookieValue=js_cookie.get("shippo_apply_promo"))?(decodedCookieValue=decodeURIComponent(promocodeCookieValue),cookieDomain=getTopLevelDomain(window.location.href),payload.user.currentPromo&&payload.user.currentPromo.code!==decodedCookieValue?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(applyOrReplacePromoCode(decodedCookieValue,!0))]:[3,15]):[3,20];case 14:return _a.sent(),[3,17];case 15:return payload.user.currentPromo?[3,17]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(applyOrReplacePromoCode(decodedCookieValue,!1))];case 16:_a.sent(),_a.label=17;case 17:return js_cookie.remove("shippo_apply_promo",{domain:".".concat(cookieDomain)}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.$A())];case 18:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.$4())];case 19:_a.sent(),_a.label=20;case 20:return[3,23];case 21:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.Qu())];case 22:return _a.sent(),[3,23];case 23:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_ENTITLEMENTS_FETCH,(function fetchUserEntitlements(){var response,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getEntitlements)];case 1:return response=_a.sent(),json=response.data,payload=json.map((function(entitlement){switch(entitlement.entitlement_type){case"quantity":return{entitlementType:"quantity",isUnlimited:entitlement.is_unlimited,quantity:entitlement.quantity,token:entitlement.token};case"switch":return{entitlementType:"switch",token:entitlement.token};case"custom":return{entitlementType:"custom",token:entitlement.token,value:entitlement.value}}})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.Nf(payload))];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.Me())];case 5:return[2]}var json}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_ADD,(function addUser(action){var response,e_9,err,_a,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.nu,action.payload.email)];case 1:return response=_c.sent(),action.callback(camelizeKeys(response.data)),[3,3];case 2:return e_9=_c.sent(),err=e_9,action.callback({err:null!==(_b=null===(_a=null==err?void 0:err.response)||void 0===_a?void 0:_a.data)&&void 0!==_b?_b:"unknown_error"}),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.COMPANY_UPDATE,(function updateCompany(action){var response;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,6,,9]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.De)(constants_form.$o))];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.JT,Company_toJSON(action.payload))];case 2:return response=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.Iy(Company_fromJSON(response.data)))];case 3:case 7:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.lM)(constants_form.$o))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.Wv)(constants_form.$o))];case 5:case 8:return _a.sent(),[3,9];case 6:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.Z5())];case 9:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.COMPANY_FETCH,(function fetchCompany(){var response;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.uF)];case 1:return response=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.dw(Company_fromJSON(response.data)))];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.Ur())];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_REFRESH,refreshUser),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.REVOKE_AUTH,(function revokeAuth(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(js_cookie.remove,"jwt",{domain:".shippodev.com",path:"/"})];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(js_cookie.remove,"is_logged_in",{domain:".shippodev.com",path:"/"})];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.K())];case 3:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_ASSETS_FETCH,(function fetchAssets(){var response,assets;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.ES)];case 1:return response=_a.sent(),assets=response.data.results.map(Asset.rS),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.lU(assets))];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.OM("unknown_error"))];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.USER_ASSET_UPLOAD_DRAFT,(function uploadAssetDraft(action){var _a,assetType,rank,_b,asset,file,fullAsset,result,e_3,errCode;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:_a=action.payload,assetType=_a.assetType,rank=_a.rank,_c.label=1;case 1:return _c.trys.push([1,7,,9]),_b=action.payload,asset=_b.asset,file=_b.file,fullAsset=asset,asset?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.$o,{draftImageUrl:"",imageUrl:"",linkUrl:null,rank,title:null,type:assetType})];case 2:result=_c.sent(),fullAsset=Asset.rS(result.data),_c.label=3;case 3:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.Rh,null==fullAsset?void 0:fullAsset.objectId,file)];case 4:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.ES())];case 5:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.UG(assetType,rank))];case 6:return _c.sent(),[3,9];case 7:return e_3=_c.sent(),errCode=415===e_3.response.status?"invalid_file_type":"unknown_error",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.N1(assetType,rank,errCode))];case 8:return _c.sent(),[3,9];case 9:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.USER_ASSET_CLEAR_DRAFT,(function clearAssetDraft(action){var _a,asset,assetType,rank,fullAsset,result,e_4,err,errCode,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:_a=action.payload,asset=_a.asset,assetType=_a.assetType,rank=_a.rank,_c.label=1;case 1:return _c.trys.push([1,8,,10]),fullAsset=void 0,asset.objectId?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.$o,(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},asset),{rank,type:assetType}))];case 2:return result=_c.sent(),fullAsset=Asset.rS(result.data),[3,4];case 3:fullAsset=asset,_c.label=4;case 4:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.lw,fullAsset.objectId)];case 5:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.ES())];case 6:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.YL(assetType,rank))];case 7:return _c.sent(),[3,10];case 8:return e_4=_c.sent(),errCode=415===(null===(_b=null==(err=e_4)?void 0:err.response)||void 0===_b?void 0:_b.status)?"invalid_file_type":"unknown_error",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.NI(assetType,rank,errCode))];case 9:return _c.sent(),[3,10];case 10:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.USER_ASSET_REVERT_DRAFT,(function revertAssetDraft(action){var _a,asset,assetType,rank,fullAsset,result,e_5,err,errCode,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:_a=action.payload,asset=_a.asset,assetType=_a.assetType,rank=_a.rank,_c.label=1;case 1:return _c.trys.push([1,8,,10]),fullAsset=void 0,asset.objectId?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.$o,(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},asset),{rank,type:assetType}))];case 2:return result=_c.sent(),fullAsset=Asset.rS(result.data),[3,4];case 3:fullAsset=asset,_c.label=4;case 4:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.SK,fullAsset.objectId)];case 5:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.ES())];case 6:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.hD(assetType,rank))];case 7:return _c.sent(),[3,10];case 8:return e_5=_c.sent(),errCode=415===(null===(_b=null==(err=e_5)?void 0:err.response)||void 0===_b?void 0:_b.status)?"invalid_file_type":"unknown_error",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.yH(assetType,rank,errCode))];case 9:return _c.sent(),[3,10];case 10:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.USER_ASSET_PUBLISH,(function publishAsset(action){var _a,assetType,rank,asset,fullAsset,result,e_6,err,errCode,_b,_c,_d,_e;return(0,tslib_es6.YH)(this,(function(_f){switch(_f.label){case 0:_a=action.payload,assetType=_a.assetType,rank=_a.rank,_f.label=1;case 1:return _f.trys.push([1,10,,12]),asset=action.payload.asset,fullAsset=void 0,asset.objectId?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.$o,asset)];case 2:return result=_f.sent(),fullAsset=Asset.rS(result.data),[3,4];case 3:fullAsset=asset,_f.label=4;case 4:return fullAsset.draftImageUrl===fullAsset.imageUrl?[3,6]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.hV,fullAsset.objectId)];case 5:_f.sent(),_f.label=6;case 6:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.gT,fullAsset)];case 7:return _f.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.DE(assetType,rank))];case 8:return _f.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.ES())];case 9:return _f.sent(),[3,12];case 10:return e_6=_f.sent(),errCode=void 0,errCode=400===(null===(_b=null==(err=e_6)?void 0:err.response)||void 0===_b?void 0:_b.status)&&(null===(_d=null===(_c=null==err?void 0:err.response)||void 0===_c?void 0:_c.data)||void 0===_d?void 0:_d.link_url)?"invalid_link":415===(null===(_e=null==err?void 0:err.response)||void 0===_e?void 0:_e.status)?"invalid_file_type":"unknown_error",[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.GN(assetType,rank,errCode))];case 11:return _f.sent(),[3,12];case 12:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_INITIATE_ID_VERIFICATION,(function initiateIdVerification(){var selectedOrders,orders,currentPathname,urlString,ordersString,url,returnUrl,result;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,5,,7]),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Li)];case 1:return selectedOrders=_a.sent(),orders=Object.keys(selectedOrders),[4,selectState(router_selectors_getPathname)];case 2:return currentPathname=_a.sent(),urlString="".concat(currentPathname,"?").concat("id_verifying","=true"),orders.length&&(ordersString=orders.join(","),urlString=urlString+"&selected_orders="+ordersString),url=new URL(urlString,"https://WEB-3644.ui.shippodev.com/"),returnUrl=url.toString(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.um,returnUrl)];case 3:return result=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)([window.location,window.location.assign],result.data.redirect_url)];case 4:case 6:return _a.sent(),[3,7];case 5:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.hZ({errors:["error_processing_request"],state:IDVerification.p.VERIFICATION_FAILED_ALLOW_RETRY}))];case 7:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_ASSET_UPLOAD_AND_PUBLISH_LOGO,(function uploadAndPublishLogo(action){var file,e_7,err,errCode,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,5,,7]),file=action.payload.file,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.SU,Asset.PW.LOGO,file)];case 1:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.EO())];case 2:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("UPLOAD_BRAND_LOGO_SUCCESS"))];case 3:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.ES())];case 4:case 6:return _b.sent(),[3,7];case 5:return e_7=_b.sent(),errCode="unknown_error",(err=e_7).response&&400===err.response.status&&(null===(_a=err.response)||void 0===_a?void 0:_a.data.errors)&&(errCode=err.response.data.errors.reduce((function(acc,cur){return acc?[acc,cur.code].join(";"):cur.code}),"")),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.FX(errCode))];case 7:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_BRAND_UPDATE_COLORS,(function updateBrandColors(action){var updatedCompanySettings;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,6,,8]),[4,selectState(user_selectors.t1)];case 1:return(updatedCompanySettings=_a.sent()).brandPrimaryColor=action.payload.brandPrimaryColor,updatedCompanySettings.brandSecondaryColor=action.payload.brandSecondaryColor,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.JT,Company_toJSON(updatedCompanySettings))];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.Ep())];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("SAVE_BRAND_COLOR_SUCCESS"))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.uF())];case 5:case 7:return _a.sent(),[3,8];case 6:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.TD())];case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_ALL_FETCH,(function getLoginUsers(action){var response,err_7;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.qY)];case 1:return response=_a.sent(),action.callback(camelizeKeys(response.data)),[3,3];case 2:return err_7=_a.sent(),action.callback({err:err_7}),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_RESEND_INVITE,(function sendInvite(action){var response,e_10,err,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.kw,action.payload.userId)];case 1:return response=_b.sent(),action.callback(camelizeKeys(response.data)),[3,3];case 2:return e_10=_b.sent(),err=e_10,action.callback({err:(null===(_a=null==err?void 0:err.response)||void 0===_a?void 0:_a.data)||"unknown_error"}),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_DELETE,(function deleteUser(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.hG,action.payload.userId)];case 1:return _a.sent(),action.callback({success:!0}),[3,3];case 2:return _a.sent(),action.callback({success:!1}),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.MAYBE_SHOW_EMAIL_VERIFICATION_MODAL,(function maybeShowEmailVerificationModal(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,selectState(user_selectors.ux)];case 1:return _a.sent()?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.Yj(action.payload.nextModalAction))]:[3,3];case 2:return _a.sent(),[3,5];case 3:return action.payload.nextModalAction?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(action.payload.nextModalAction)]:[3,5];case 4:_a.sent(),_a.label=5;case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CHECK_REQUIRES_EMAIL_VERIFICATION,(function checkRequiresEmailVerification(action){var nextModalAction;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.$4())];case 1:return _a.sent(),[4,selectState(user_selectors.ux)];case 2:return _a.sent()?[3,7]:[4,selectState(user_selectors.lc)];case 3:return nextModalAction=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.DA())];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(action.payload.verifySuccessCallback)];case 5:return _a.sent(),nextModalAction?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(nextModalAction)]:[3,7];case 6:_a.sent(),_a.label=7;case 7:return[2]}}))}));var PaymentMethodType,getBillingStore=function(state){return state.billing},billing_selectors_getPaymentMethods=((0,reselect_es.Mz)(getBillingStore,(function(billingStore){return billingStore.showCreditCardModal})),(0,reselect_es.Mz)(getBillingStore,(function(billingStore){return billingStore.paymentMethods}))),PackingSlipFormat=((0,reselect_es.Mz)(getBillingStore,(function(billingStore){return billingStore.paymentMethods.billingFrequency})),(0,reselect_es.Mz)(getBillingStore,(function(billingStore){return billingStore.paymentMethods.paymentThreshold})),__webpack_require__("./app/types/PackingSlipFormat.ts")),getLabelSettingsStore=function(state){return state.labelSettings},label_settings_selectors_getLabelSettings=((0,reselect_es.Mz)(getLabelSettingsStore,(function(labelSettingsStore){return labelSettingsStore.data.defaultPackingSlipFormat||PackingSlipFormat.Ay.PSLIP_8X11_PDF})),(0,reselect_es.Mz)(getLabelSettingsStore,(function(labelSettingsStore){return labelSettingsStore.data.defaultLabelFormat})),(0,reselect_es.Mz)(getLabelSettingsStore,(function(labelSettingsStore){return labelSettingsStore.data}))),LabelPurchaseDrawer_utils=__webpack_require__("./app/pages/Orders/Blackbeard/Drawers/LabelPurchaseDrawer/utils.ts");!function(PaymentMethodType){PaymentMethodType.CreditCard="STRIPE"}(PaymentMethodType||(PaymentMethodType={}));var trackedOrderDetails_getTrackedOrderDetailsByShipmentFromOrders=function(_a){var batchEntries=_a.batchEntries,defaultParcelTemplate=_a.defaultParcelTemplate,defaultReturnAddress=_a.defaultReturnAddress,defaultSenderAddress=_a.defaultSenderAddress,insuranceSettings=_a.insuranceSettings,labelSettings=_a.labelSettings,ordersData=_a.ordersData,paymentType=_a.paymentType,ratesForOrders=_a.ratesForOrders,selectedOrders=_a.selectedOrders,stripeToken=_a.stripeToken,orderIds=Object.keys(selectedOrders),hasReturnOption=calculateHasReturnOption(selectedOrders,ordersData,batchEntries,defaultSenderAddress);return orderIds.reduce((function(acc,orderId){var batchEntryIds=selectedOrders[orderId],trackedOrderDetailsByShipment=getTrackedOrderDetailsByShipment({batchEntries,batchEntryIds,defaultParcelTemplate,defaultReturnAddress,defaultSenderAddress,hasReturnOption,insuranceSettings:insuranceSettings||void 0,labelSettings,paymentType,ratesForOrders,stripeToken});return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},acc),trackedOrderDetailsByShipment)}),{})},getTrackedOrderDetailsByShipment=function(_a){var batchEntries=_a.batchEntries,batchEntryIds=_a.batchEntryIds,defaultParcelTemplate=_a.defaultParcelTemplate,defaultReturnAddress=_a.defaultReturnAddress,defaultSenderAddress=_a.defaultSenderAddress,hasReturnOption=_a.hasReturnOption,insuranceSettings=_a.insuranceSettings,labelSettings=_a.labelSettings,paymentType=_a.paymentType,ratesForOrders=_a.ratesForOrders,stripeToken=_a.stripeToken,hasInsuranceOption=calculateHasInsuranceOption(batchEntryIds,batchEntries);return batchEntryIds.reduce((function(acc,batchEntryId){var _a,trackedOrderDetails=getTrackedOrderDetails({batchEntries,batchEntryId,defaultParcelTemplate,defaultReturnAddress,defaultSenderAddress,hasInsuranceOption,hasReturnOption,insuranceSettings:insuranceSettings||void 0,labelSettings,paymentType,ratesForOrders,stripeToken});return trackedOrderDetails?(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},acc),((_a={})[batchEntryId]=trackedOrderDetails,_a)):acc}),{})},getTrackedOrderDetails=function(_a){var _b,_c,_d,_e,_f,_g,_h,_j,_k,_l,batchEntries=_a.batchEntries,batchEntryId=_a.batchEntryId,defaultParcelTemplate=_a.defaultParcelTemplate,defaultReturnAddress=_a.defaultReturnAddress,defaultSenderAddress=_a.defaultSenderAddress,hasInsuranceOption=_a.hasInsuranceOption,hasReturnOption=_a.hasReturnOption,insuranceSettings=_a.insuranceSettings,labelSettings=_a.labelSettings,paymentType=_a.paymentType,ratesForOrders=_a.ratesForOrders,stripeToken=_a.stripeToken;if(batchEntries){var be=batchEntries[batchEntryId];if(be){var parcelDefaultSet=!!(null===(_b=be.parcel)||void 0===_b?void 0:_b.userParcelTemplate)&&be.parcel.userParcelTemplate.objectId===(null==defaultParcelTemplate?void 0:defaultParcelTemplate.objectId),rate=ratesForOrders.find((function(r){return r.shipment===be.shipmentObjectId})),paymentMethodDefaultSet=paymentType===PaymentMethodType.CreditCard,returnDefaultSet=null==labelSettings?void 0:labelSettings.isAutoCreateReturnLabels,serviceLevelDefault=null==labelSettings?void 0:labelSettings.outboundServiceLevel;return{addressRecipient:null===(_c=be.addressTo)||void 0===_c?void 0:_c.objectId,addressReturn:null===(_d=be.addressReturn)||void 0===_d?void 0:_d.objectId,addressReturnDefaultSet:isAddressSame(be.addressReturn,defaultReturnAddress),addressSender:null===(_e=be.addressFrom)||void 0===_e?void 0:_e.objectId,addressSenderDefaultSet:isAddressSame(be.addressFrom,defaultSenderAddress),carrier:null==rate?void 0:rate.provider,hasInsuranceOption,hasReturnOption,hasSignatureOption:!0,insuranceDefaultSet:null==insuranceSettings?void 0:insuranceSettings.is_auto_apply,parcel:serializeParcel(be.parcel),parcelCarrierTemplate:(null===(_f=be.parcel)||void 0===_f?void 0:_f.carrierParcelTemplate)?null===(_g=be.parcel)||void 0===_g?void 0:_g.carrierParcelTemplate.token:void 0,parcelDefaultSet,parcelUserTemplate:(null===(_h=be.parcel)||void 0===_h?void 0:_h.userParcelTemplate)?null===(_j=be.parcel)||void 0===_j?void 0:_j.userParcelTemplate.objectId:void 0,paymentMethod:stripeToken,paymentMethodDefaultSet,returnDefaultSet,serviceLevel:null==rate?void 0:rate.servicelevelName,serviceLevelDefault,signature:null===(_l=null===(_k=be.extras)||void 0===_k?void 0:_k.signatureConfirmation)||void 0===_l?void 0:_l.hasSignatureConfirmation}}}},trackedOrderDetails_getBatchEntryIds=function(ordersSelected){return Object.keys(ordersSelected).reduce((function(acc,orderId){return(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(acc),!1),(0,tslib_es6.zs)(ordersSelected[orderId]),!1)}),[])},isAddressSame=function(address1,address2){return(null==address1?void 0:address1.zip)===(null==address2?void 0:address2.zip)&&(null==address1?void 0:address1.state)===(null==address2?void 0:address2.state)&&(null==address1?void 0:address1.city)===(null==address2?void 0:address2.city)&&(null==address1?void 0:address1.street1)===(null==address2?void 0:address2.street1)&&(null==address1?void 0:address1.street2)===(null==address2?void 0:address2.street2)&&(null==address1?void 0:address1.streetNumber)===(null==address2?void 0:address2.streetNumber)&&(null==address1?void 0:address1.company)===(null==address2?void 0:address2.company)&&(null==address1?void 0:address1.phone)===(null==address2?void 0:address2.phone)&&(null==address1?void 0:address1.name)===(null==address2?void 0:address2.name)},serializeParcel=function(parcel){if(parcel){if(parcel.userParcelTemplate){var weight=(template=parcel.userParcelTemplate).weight||parcel.weight,weightUnit=template.weightUnit||parcel.weightUnit;return"".concat(template.length,"x").concat(template.width,"x").concat(template.height," ").concat(template.distanceUnit,", ").concat(weight," ").concat(weightUnit)}if(parcel.carrierParcelTemplate){var template=parcel.carrierParcelTemplate;weight=parcel.weight,weightUnit=parcel.weightUnit;return"".concat(template.length,"x").concat(template.width,"x").concat(template.height," ").concat(template.distanceUnit,", ").concat(weight," ").concat(weightUnit)}return"".concat(parcel.length,"x").concat(parcel.width,"x").concat(parcel.height," ").concat(parcel.distanceUnit,", ").concat(parcel.weight," ").concat(parcel.weightUnit)}},calculateHasReturnOption=function(selectedOrders,ordersData,batchEntries,defaultSenderAddress){if(!ordersData||!batchEntries)return!1;var hasMultipleCountries=Array.from(new Set(Object.keys(selectedOrders).map((function(orderId){var _a,_b,_c;return null===(_c=null===(_b=null===(_a=ordersData[orderId])||void 0===_a?void 0:_a.toAddress)||void 0===_b?void 0:_b.country)||void 0===_c?void 0:_c.iso2})).filter((function(countryCode){return!!countryCode})))).length>1,selBatchEntries=trackedOrderDetails_getBatchEntryIds(selectedOrders).map((function(beId){return batchEntries[beId]})).filter((function(be){return!!be})),orderRequiresCustoms=(0,LabelPurchaseDrawer_utils.Bc)(selBatchEntries,ordersData,selectedOrders,defaultSenderAddress||void 0);return!hasMultipleCountries&&!orderRequiresCustoms},calculateHasInsuranceOption=function(batchEntryIds,batchEntries){if(!batchEntries)return!1;var countries=batchEntryIds.map((function(beId){var _a,_b,_c;return null===(_c=null===(_b=null===(_a=batchEntries[beId])||void 0===_a?void 0:_a.addressFrom)||void 0===_b?void 0:_b.country)||void 0===_c?void 0:_c.iso2})).filter((function(country){return!!country}));return function(countries){return!!countries.length&&countries.every((function(country){return INSURANCE_AVAILABLE_IN_COUNTRIES[country]}))}(countries)},tracking=__webpack_require__("./app/utils/fullstory/tracking.ts"),registerSuccessCookie=function(){return js_cookie.get("user_register_success")||"false"};function getStoreConnectionSuccessCookie(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,js_cookie.get(STORE_CONNECTION_SUCCESS_COOKIE_NAME)||""];case 1:return _a.sent(),[2]}}))}(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_DID_AUTHENTICATE,(function sendRegisterSuccessEvent(){var userResponse,UTMCookies,marketingPayload,storeReferral,onboardingMonthlyVolume,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(registerSuccessCookie)];case 1:return"true"!==_b.sent()?[3,8]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({eventName:"USER_REGISTER_EVENT"}))];case 2:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.HW)];case 3:return userResponse=_b.sent(),UTMCookies=js_cookie.getJSON("shippoUTM"),marketingPayload=UTMCookies?extractMarketingPayloadFromCookie(UTMCookies):void 0,storeReferral=null!==(_a=localStorage.getItem("registration_store"))&&void 0!==_a?_a:void 0,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils_onboarding.zZ)];case 4:return onboardingMonthlyVolume=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(tracking.q,tracking.t.SIGNED_UP,{})];case 5:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.u4,segment.sV.registered,{email:null==userResponse?void 0:userResponse.data.email,first_name:null==userResponse?void 0:userResponse.data.first_name,last_name:null==userResponse?void 0:userResponse.data.last_name,monthly_shipment_volume:onboardingMonthlyVolume,registration_ad_param1:null==marketingPayload?void 0:marketingPayload.shAd1,registration_ad_param2:null==marketingPayload?void 0:marketingPayload.shAd2,registration_ad_param3:null==marketingPayload?void 0:marketingPayload.shAd3,registration_ad_param4:null==marketingPayload?void 0:marketingPayload.shAd4,registration_campaign:null==marketingPayload?void 0:marketingPayload.campaign,registration_click_identifier:null==marketingPayload?void 0:marketingPayload.attributionSnippet,registration_date:null==userResponse?void 0:userResponse.data.date_joined,registration_medium:null==marketingPayload?void 0:marketingPayload.medium,registration_method:null==marketingPayload?void 0:marketingPayload.regMethod,registration_source:null==marketingPayload?void 0:marketingPayload.source,store_referral:storeReferral,userId:null==userResponse?void 0:userResponse.data.id.toString(),userId_integer:null==userResponse?void 0:userResponse.data.id})];case 6:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(js_cookie.remove,"user_register_success",{domain:".shippodev.com"})];case 7:_b.sent(),_b.label=8;case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.USER_DID_AUTHENTICATE,(function sendStoreConnectionSuccessEvent(){var storeConnectionSuccessCookieValue,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getStoreConnectionSuccessCookie)];case 1:return(storeConnectionSuccessCookieValue=_a.sent())?(payload={data:{storeName:storeConnectionSuccessCookieValue},eventName:"STORE_CONNECTION_SUCCESS_EVENT"},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent(payload))]):[3,5];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.u4,segment.sV.store_connected,{store_name:storeConnectionSuccessCookieValue})];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(js_cookie.remove,STORE_CONNECTION_SUCCESS_COOKIE_NAME,{domain:".shippodev.com"})];case 4:_a.sent(),_a.label=5;case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.BATCH_CREATE_SUCCESS,(function sendInitiateBatchCreateFlowEvent(action){var payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return payload={data:{batchId:action.payload.batch.id},eventName:"BATCH_INITIATE_FLOW_EVENT"},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent(payload))];case 1:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_BATCH_CREATE_TRANSACTIONS_SUCCESS,(function sendBatchPurchasedEvent(){var getUserData,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,selectState(user_selectors.cv)];case 1:return getUserData=_a.sent(),payload={eventName:"BATCH_PURCHASED_EVENT"},!getUserData||getUserData.hasPurchasedLabel?[3,7]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.T$())];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({eventName:"FIRST_LABEL_PURCHASED"}))];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("First Label Purchased",{timestamp:getUserData.dateJoined}))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)([localStorage,localStorage.setItem],"has_purchased_first_label","true")];case 5:return _a.sent(),moment_moment().isBefore(moment_moment(getUserData.dateJoined).add(7,"d"))?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({eventName:"7DFLR"}))]:[3,7];case 6:_a.sent(),_a.label=7;case 7:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent(payload))];case 8:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("Purchase Success"))];case 9:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.APIADDRESS_CREATE_SUCCESS,(function sendAddressEvent(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({data:{isDefaultReturn:action.payload.address.isDefaultReturn,isDefaultSender:action.payload.address.isDefaultSender},eventName:"USER_ADDED_ADDRESS"}))];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.u4,segment.sV.address_created,{is_default_return:action.payload.address.isDefaultReturn,is_default_sender:action.payload.address.isDefaultSender})];case 2:return _a.sent(),(0,utils.Rk)(action.payload.trackingReference,types.eJ.operations.CREATED,{addressId:action.payload.address.id}),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CREATE_CARRIER_ACCOUNT_SUCCESS,(function sendCreateCarrierAccountEvent(action){var carrierAccount;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return carrierAccount=action.payload.carrierAccount,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({data:{carrierName:carrierAccount.carrier.name},eventName:"CARRIER_REGISTRATION_SUCCESS"}))];case 1:return _a.sent(),carrierAccount.carrier&&carrierAccount.carrier===carriers.$5&&carrierAccount.isShippoAccount?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({eventName:"UPS_MASTER_REGISTRATION_SUCCESS"}))]:[3,3];case 2:_a.sent(),_a.label=3;case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.CONNECT_CARRIER_ACCOUNT_SUCCESS,(function sendConnectCarrierAccountEvent(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({data:{carrierName:action.payload.carrierAccount.carrier.name},eventName:"CARRIER_CONNECT_SUCCESS"}))];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.u4,segment.sV.carrier_connected,{carrier_name:action.payload.carrierAccount.carrier.name})];case 2:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)([constants.t.ORDERS_FETCH_SUCCESS],(function sendOrderCount(){var ordersCount,userOrderCount,activationData,isLoading,userId;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Ld)];case 1:return ordersCount=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Oz)];case 2:return userOrderCount=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(user_selectors.hP)];case 3:return activationData=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.RQ)];case 4:return isLoading=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(user_selectors.F6)];case 5:return userId=_a.sent(),isLoading||ordersCount===activationData.ordersCount?[3,9]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({data:{ordersCount},eventName:"ORDERS_COUNT"}))];case 6:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.ee({ordersCount}))];case 7:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(segment.ls,userId,{orders_count:userOrderCount})];case 8:_a.sent(),_a.label=9;case 9:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)([constants.t.ORDERS_SELECT_ORDER,constants.t.ORDERS_SELECT_ALL_ORDERS,constants.t.ORDERS_CLEAR_SELECTED],(function trackOrderSelection(action){var selectedOrders,trackingReference,batchEntryIds,ordersData,batchEntries,ratesForOrders,defaultSenderAddress,defaultReturnAddress,defaultParcelTemplate,paymentMethods,labelSettings,_a,paymentType,stripeToken,trackedOrderDetailsByShipment,trackingReferenceWithOrderDetails,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return action.trackEvent?[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Li)]:[2];case 1:return selectedOrders=_c.sent(),void 0!==(trackingReference=TrackingHelper.U.amendTrackingReferenceOrderSelection(TrackingHelper.U.getTrackingReference(types.iB.name,"order_table",{}),selectedOrders)).orderQuantity?[3,5]:action.type!==constants.t.ORDERS_SELECT_ORDER&&action.type!==constants.t.ORDERS_SELECT_ALL_ORDERS?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils.Ro,TrackingHelper.U.amendTrackingReferenceOrders(trackingReference,Object.keys(action.payload)),types.iB.operations.DESELECTED,{})];case 2:_c.sent(),_c.label=3;case 3:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils.Ro,trackingReference,types.iB.operations.DESELECTED,{})];case 4:return _c.sent(),[3,15];case 5:return batchEntryIds=trackedOrderDetails_getBatchEntryIds(selectedOrders),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Sv)];case 6:return ordersData=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_selectors.zo)];case 7:return batchEntries=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_composite_selectors.Qt,{batchEntryIds})];case 8:return ratesForOrders=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(user_selectors.GA)];case 9:return defaultSenderAddress=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(user_selectors.kQ)];case 10:return defaultReturnAddress=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(user_selectors.ZC)];case 11:return defaultParcelTemplate=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(billing_selectors_getPaymentMethods)];case 12:return paymentMethods=_c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(label_settings_selectors_getLabelSettings)];case 13:return labelSettings=_c.sent(),paymentType=(_a=paymentMethods||{}).paymentType,stripeToken=_a.stripeToken,trackedOrderDetailsByShipment=trackedOrderDetails_getTrackedOrderDetailsByShipmentFromOrders({batchEntries,defaultParcelTemplate,defaultReturnAddress,defaultSenderAddress,insuranceSettings:null===(_b=trackingReference.userDetails)||void 0===_b?void 0:_b.defaultInsuranceSetings,labelSettings,ordersData,paymentType,ratesForOrders,selectedOrders,stripeToken}),trackingReferenceWithOrderDetails=TrackingHelper.U.amendTrackingReferenceTrackedOrderDetailsByShipment(trackingReference,trackedOrderDetailsByShipment),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils.Ro,trackingReferenceWithOrderDetails,types.iB.operations.VIEWED,{})];case 14:_c.sent(),_c.label=15;case 15:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.SHIPMENT_FETCH_SUCCESS,(function trackRateGenerated(action){var payload,trackingReference,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return payload=action.payload,trackingReference=action.trackingReference,"SUCCESS"!==(null===(_a=payload.shipment)||void 0===_a?void 0:_a.status)?[3,2]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils.mq,trackingReference,{isError:!1,message:void 0,status:200,url:"/shipments/".concat(payload.shipment.objectId)})];case 1:return _b.sent(),[3,4];case 2:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils.mq,trackingReference,{isError:!0,message:void 0,status:200,url:"/shipments/".concat(payload.shipment.objectId)})];case 3:_b.sent(),_b.label=4;case 4:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.LOGIN_SUCCESS,(function trackUserSignIn(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.s)(constants.t.USER_DID_AUTHENTICATE)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.s)(constants.t.USER_FETCH_SUCCESS)];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(sendGTMEvent({eventName:"USER_SIGNED_IN"}))];case 3:return _a.sent(),[2]}}))}));var getVersioning=function(){return services_api.kC.request({url:"/v1/ui/account/version"})},upgradeVersioning=function(){return services_api.kC.request({data:{update:!0},method:"POST",url:"v1/ui/account/version"})};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_VERSION,(function getVersion(action){var response,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getVersioning)];case 1:return response=_a.sent(),action.callback(camelizeKeys(response.data)),[3,3];case 2:return err_1=_a.sent(),action.callback(err_1),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.UPGRADE_VERSION,(function upgradeVersion(action){var response,err_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(upgradeVersioning)];case 1:return response=_a.sent(),action.callback(response.data),[3,3];case 2:return err_2=_a.sent(),action.callback(err_2),[3,3];case 3:return[2]}}))}));var editWebhook=function(data){return services_api.kC.request({data:{active:data.active,event:data.event,is_test:data.is_test,url:data.url},method:"PUT",url:"/webhooks/".concat(data.object_id)})},deleteWebhook=function(data){return services_api.kC.request({method:"DELETE",url:"/webhooks/".concat(data.object_id)})},saveWebhook=function(data){return services_api.kC.request({data:{active:data.active,event:data.event,is_test:data.is_test,url:data.url},method:"POST",url:"/webhooks/"})},testWebhook=function(data){return services_api.kC.request({data:{event:"*"===data.event?"track_updated":data.event},method:"POST",url:"/webhooks/".concat(data.object_id,"/test")})},getWebhooks=function(){return services_api.kC.request({url:"/webhooks"})};(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.FETCH_WEBHOOKS,(function webhooks_saga_getWebhooks(action){var response,err_5;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getWebhooks)];case 1:return response=_a.sent(),action.callback(camelizeKeys(response.data.results)),[3,3];case 2:return err_5=_a.sent(),action.callback(err_5),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.EDIT_WEBHOOK,(function webhooks_saga_editWebhook(action){var response,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(editWebhook,decamelizeKeys(action.payload.webhook))];case 1:return response=_a.sent(),action.callback(camelizeKeys(response.data)),[3,3];case 2:return err_1=_a.sent(),action.callback({error:err_1}),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.SAVE_WEBHOOK,(function webhooks_saga_saveWebhook(action){var response,err_3;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(saveWebhook,decamelizeKeys(action.payload.webhook))];case 1:return response=_a.sent(),action.callback(camelizeKeys(response.data)),[3,3];case 2:return err_3=_a.sent(),action.callback({error:err_3}),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.DELETE_WEBHOOK,(function webhooks_saga_deleteWebhook(action){var response,err_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(deleteWebhook,decamelizeKeys(action.payload.webhook))];case 1:return response=_a.sent(),action.callback(response),[3,3];case 2:return err_2=_a.sent(),action.callback({error:err_2}),[3,3];case 3:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.TEST_WEBHOOK,(function webhooks_saga_testWebhook(action){var err_4;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,3]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(testWebhook,decamelizeKeys(action.payload.webhook))];case 1:return _a.sent(),action.callback(!1),[3,3];case 2:return err_4=_a.sent(),action.callback(err_4),[3,3];case 3:return[2]}}))}));var selectState=function(selector){return(0,redux_saga_effects_npm_proxy_esm.Lt)(selector)};function createAPIAddress(action){var trackingReference,jsonAddress,response,address,isDefaultReturn,err_2,responseData,errorMessage;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:trackingReference=action.payload.trackingReference,_a.label=1;case 1:return _a.trys.push([1,10,,13]),jsonAddress=APIAddress.U2((0,Address.ko)(action.payload.address)),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(address_service.pC,jsonAddress)];case 2:return response=_a.sent(),(0,utils.mq)(trackingReference,{isError:response.status>=300,message:void 0,status:response.status,url:response.config.url||""}),address=APIAddress.rS(response.data),isDefaultReturn=address.isDefaultReturn,address.isDefaultSender?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.UZ({address}))]:[3,4];case 3:_a.sent(),_a.label=4;case 4:return isDefaultReturn?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.UI({address}))]:[3,6];case 5:_a.sent(),_a.label=6;case 6:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(address_actions._M({address,trackingReference}))];case 7:return _a.sent(),action.payload.key&&action.payload.addressBookName?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(address_actions.YK(action.payload.addressBookName,action.payload.key,address.id))]:[3,9];case 8:_a.sent(),_a.label=9;case 9:return[3,13];case 10:return err_2=_a.sent(),axios_default().isAxiosError(err_2)&&(0,utils.dj)(trackingReference,err_2),responseData=err_2.response.data,errorMessage="object"==typeof responseData?Object.values(responseData).join("\n"):Array.isArray(responseData)?responseData.join("\n"):responseData,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(address_actions.Tv({error:errorMessage}))];case 11:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(addSnackbarMessage({i18n:!0,message:"orders:address:errors:create",severity:"error"}))];case 12:return _a.sent(),[3,13];case 13:return[2]}}))}function editAPIAddress(action){var trackingReference,jsonAddress,address,isDefaultReturn,isDefaultSender,location_1,err_3,response,responseData,errorMessage,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:trackingReference=action.payload.trackingReference,_b.label=1;case 1:return _b.trys.push([1,11,,13]),jsonAddress=APIAddress.U2((0,Address.ko)(action.payload.address)),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(address_service.de,action.payload.id,jsonAddress)];case 2:return response=_b.sent(),trackingReference&&(0,utils.mq)(trackingReference,{isError:response.status>=300,message:void 0,status:response.status,url:response.config.url||""}),address=APIAddress.rS(response.data),isDefaultReturn=address.isDefaultReturn,isDefaultSender=address.isDefaultSender,[4,selectState(getLocation)];case 3:return location_1=_b.sent(),isDefaultSender?(null===(_a=location_1.search)||void 0===_a?void 0:_a.includes("progressMeter"))?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("Progress Meter - Add Saved Address Complete"))]:[3,5]:[3,7];case 4:_b.sent(),_b.label=5;case 5:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.UZ({address}))];case 6:_b.sent(),_b.label=7;case 7:return isDefaultReturn?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(user_actions.UI({address}))]:[3,9];case 8:_b.sent(),_b.label=9;case 9:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(address_actions.Yl({address,id:action.payload.id}))];case 10:return _b.sent(),[3,13];case 11:return err_3=_b.sent(),trackingReference&&axios_default().isAxiosError(err_3)&&err_3.response&&(response=err_3.response,(0,utils.mq)(trackingReference,{isError:response.status>=300,message:(0,utils.w$)(response.data)||err_3.message,status:response.status,url:response.config.url||""})),responseData=err_3.response.data,errorMessage="object"==typeof responseData?Object.values(responseData).join("\n"):Array.isArray(responseData)?responseData.join("\n"):responseData,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(address_actions.v7({error:errorMessage}))];case 12:return _b.sent(),[3,13];case 13:return[2]}}))}(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ADDRESSES_FETCH,(function fetchAddresses(){var response,parsedAddresses,err_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(address_service.fY)];case 1:return response=_a.sent(),parsedAddresses={addresses:response.data.results.map((function(a){return APIAddress.rS(a)}))},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(address_actions.Yj(parsedAddresses))];case 2:case 4:return _a.sent(),[3,5];case 3:return err_1=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(address_actions.NE({error:err_1.message}))];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.APIADDRESS_CREATE,createAPIAddress),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.APIADDRESS_EDIT,editAPIAddress),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.APIADDRESS_DELETE,(function deleteAPIAddress(action){var trackingReference,deleteResponse,addressBookInstances,_a,_b,_c,_i,addressBookName,err_4,_d,_e,_f;return(0,tslib_es6.YH)(this,(function(_g){switch(_g.label){case 0:trackingReference=action.payload.trackingReference,_g.label=1;case 1:return _g.trys.push([1,9,,11]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(address_service.Sr,action.payload.id)];case 2:return deleteResponse=_g.sent(),(0,utils.mq)(trackingReference,{isError:!1,message:void 0,status:deleteResponse.status,url:deleteResponse.config.url||""}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(address_actions.pM(action.payload.id))];case 3:return _g.sent(),action.payload.key?[4,selectState(address_selectors.kH)]:[3,8];case 4:for(_c in addressBookInstances=_g.sent(),_b=[],_a=addressBookInstances)_b.push(_c);_i=0,_g.label=5;case 5:return _i<_b.length?(_c=_b[_i])in _a?(addressBookName=_c,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(address_actions.Hp(addressBookName,action.payload.key))]):[3,7]:[3,8];case 6:_g.sent(),_g.label=7;case 7:return _i++,[3,5];case 8:return[3,11];case 9:return err_4=_g.sent(),axios_default().isAxiosError(err_4)&&err_4.response&&(0,utils.mq)(trackingReference,{isError:!0,message:(0,utils.w$)(null===(_d=err_4.response)||void 0===_d?void 0:_d.data)||err_4.message,status:null===(_e=err_4.response)||void 0===_e?void 0:_e.status,url:(null===(_f=err_4.response)||void 0===_f?void 0:_f.config.url)||""}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(address_actions.c9({error:err_4.message}))];case 10:return _g.sent(),[3,11];case 11:return[2]}}))}));var web_orders_service=__webpack_require__("./app/services/web-orders.service/index.ts"),BATCH_ENTRIES_POLL_TIMEOUT=6e4;function countOrders(){var response,lastOrderId,ordersCount,newLastOrderId;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,8,,10]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.nh)];case 1:return response=_b.sent(),[4,selectState(orders_selectors.Ub)];case 2:return lastOrderId=_b.sent(),(ordersCount=response.data.count)>0?(newLastOrderId=Order.rS(response.data.results[0]).objectId,lastOrderId?[3,4]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Tp(newLastOrderId))]):[3,6];case 3:return _b.sent(),[3,6];case 4:return lastOrderId===newLastOrderId?[3,6]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.I$(newLastOrderId))];case 5:_b.sent(),_b.label=6;case 6:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.HU(ordersCount))];case 7:return _b.sent(),[3,10];case 8:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.mR())];case 9:return _b.sent(),[3,10];case 10:return[2]}}))}function ordersPollWorker(){var POLL_WAIT_TIME;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return POLL_WAIT_TIME=3e5,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(countOrders)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.cb)(POLL_WAIT_TIME)];case 2:return _a.sent(),[3,0];case 3:return[2]}}))}function firstTimeSyncWorker(){var POLL_WAIT_TIME;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return POLL_WAIT_TIME=2e3,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.nh)];case 1:return _a.sent().data.results.length>0?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Gb("other",1,{},"",!1,"","","relevance","desc"))]:[3,5];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,stores_actions.hO)())];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Nx())];case 4:_a.sent(),_a.label=5;case 5:return[4,(0,redux_saga_effects_npm_proxy_esm.cb)(POLL_WAIT_TIME)];case 6:return _a.sent(),[3,0];case 7:return[2]}}))}var orders_saga_worker=null,ordersToPoll={},shipmentsToPoll={};function getBatchEntries(orderObjectIDs){var batchEntries,missingOrders,response,orderBatchEntriesMap_1,response_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:batchEntries=[],missingOrders=[],_a.label=1;case 1:return _a.trys.push([1,5,,7]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Zs,missingOrders.length?missingOrders:orderObjectIDs,!0)];case 2:return response=_a.sent(),batchEntries=(0,tslib_es6.fX)([],(0,tslib_es6.zs)(response.data.results.map(OrderBatchEntry.kc)),!1),orderBatchEntriesMap_1=batchEntries.reduce((function(map,be){return map[be.orderObjectId]?map[be.orderObjectId].push(be):map[be.orderObjectId]=[be],map}),{}),(missingOrders=orderObjectIDs.filter((function(objectId){return!orderBatchEntriesMap_1[objectId]}))).length>0?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.NX,missingOrders,[])]:[3,4];case 3:response_1=_a.sent(),batchEntries=(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(batchEntries),!1),(0,tslib_es6.zs)(response_1.data.results.map(OrderBatchEntry.kc)),!1),_a.label=4;case 4:return[3,7];case 5:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.n$(missingOrders||orderObjectIDs))];case 6:return _a.sent(),[3,7];case 7:return[2,batchEntries]}}))}function batchEntriesWorker(ordersToPoll,shipmentsToPoll){var _loop_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:_loop_1=function(){var orderObjectIds,completedBatchEntries_1,batchEntries,batchEntriesByOrderId_1,shipmentObjectIds,shipmentsData,shipmentObjectIds_1,shipmentObjectIds_1_1,shipmentObjectId,trackingReference,shipment,e_7_1,error_4,e_7,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,22,,24]),(orderObjectIds=Object.keys(ordersToPoll)).length>0?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.bp(orderObjectIds))]:[3,4];case 1:return _c.sent(),completedBatchEntries_1=[],[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getBatchEntries,orderObjectIds)];case 2:return batchEntries=_c.sent(),batchEntriesByOrderId_1=batchEntries.reduce((function(map,batch){return map[batch.orderObjectId]||(map[batch.orderObjectId]=[]),map[batch.orderObjectId].push(batch.id),map}),{}),batchEntries.forEach((function(batch){[OrdersBatch.DO.COMPLETE_TRANSACTION,OrdersBatch.DO.INVALID_ORDER,OrdersBatch.DO.PENDING,OrdersBatch.DO.SHIPMENT_REQUEST_FAILED,OrdersBatch.DO.TRANSACTION_REQUEST_FAILED].includes(batch.objectStatus)&&(batchEntriesByOrderId_1[batch.orderObjectId]=batchEntriesByOrderId_1[batch.orderObjectId].filter((function(id){return id!==batch.id})),completedBatchEntries_1.push(batch)),batch.shipmentObjectId&&batch.objectStatus===OrdersBatch.DO.COMPLETE_SHIPMENT&&(shipmentsToPoll[batch.shipmentObjectId]=(new Date).getTime(),batchEntriesByOrderId_1[batch.orderObjectId]=batchEntriesByOrderId_1[batch.orderObjectId].filter((function(id){return id!==batch.id})),completedBatchEntries_1.push(batch)),batchEntriesByOrderId_1[batch.orderObjectId].length||delete ordersToPoll[batch.orderObjectId]})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(completedBatchEntries_1))];case 3:_c.sent(),_c.label=4;case 4:return(shipmentObjectIds=Object.keys(shipmentsToPoll)).length>0?[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(shipments_selectors.Q6)]:[3,17];case 5:shipmentsData=_c.sent(),_c.label=6;case 6:_c.trys.push([6,15,16,17]),e_7=void 0,shipmentObjectIds_1=(0,tslib_es6.Ju)(shipmentObjectIds),shipmentObjectIds_1_1=shipmentObjectIds_1.next(),_c.label=7;case 7:return shipmentObjectIds_1_1.done?[3,14]:(shipmentObjectId=shipmentObjectIds_1_1.value,trackingReference=TrackingHelper.U.getTrackingReference(types.Fd.name,"other",{rateIds:void 0}),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(shipments_selectors.Tm,{shipmentId:shipmentObjectId})]);case 8:return _c.sent()?[3,13]:(shipment=shipmentsData[shipmentObjectId])?[3,10]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(batchAction(fetchShipment(shipmentObjectId,trackingReference)))];case 9:return _c.sent(),shipmentsToPoll[shipmentObjectId]=(new Date).getTime(),[3,13];case 10:return[Shipment.P.ERROR,Shipment.P.SUCCESS].includes(shipment.status)?(delete shipmentsToPoll[shipment.objectId],[3,13]):[3,11];case 11:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(fetchShipment(shipmentObjectId,trackingReference))];case 12:_c.sent(),_c.label=13;case 13:return shipmentObjectIds_1_1=shipmentObjectIds_1.next(),[3,7];case 14:return[3,17];case 15:return e_7_1=_c.sent(),e_7={error:e_7_1},[3,17];case 16:try{shipmentObjectIds_1_1&&!shipmentObjectIds_1_1.done&&(_b=shipmentObjectIds_1.return)&&_b.call(shipmentObjectIds_1)}finally{if(e_7)throw e_7.error}return[7];case 17:return 0!==Object.keys(ordersToPoll).length||0!==Object.keys(shipmentsToPoll).length?[3,19]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Og())];case 18:return _c.sent(),[3,21];case 19:return[4,(0,redux_saga_effects_npm_proxy_esm.cb)(750)];case 20:_c.sent(),_c.label=21;case 21:return[3,24];case 22:return error_4=_c.sent(),newRelic_newRelic.S.noticeError("Failed to poll",{error:error_4}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Og())];case 23:return _c.sent(),[3,24];case 24:return[2]}}))},_a.label=1;case 1:return[5,_loop_1()];case 2:return"break"===_a.sent()?[3,3]:[3,1];case 3:return[2]}}))}function batchEntriesPollRace(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.O4)({cancel:(0,redux_saga_effects_npm_proxy_esm.s)([constants.t.ORDERS_BATCH_ENTRIES_POLL_END]),task:(0,redux_saga_effects_npm_proxy_esm.T1)(batchEntriesWorker,ordersToPoll,shipmentsToPoll),timeout:(0,redux_saga_effects_npm_proxy_esm.cb)(BATCH_ENTRIES_POLL_TIMEOUT,!0)})];case 1:return _a.sent().timeout&&(ordersToPoll={}),orders_saga_worker=null,[2]}}))}function toggleCheckoutModal(orders){var preCheckoutQueue,hasValidBilling,isBillingBlocked,isHighFraudRisk,registrationStatuses,carrierAccountsMap,hasValidSenderAddress,requiresEmailVerification,_a,_b,_c,carrierAccountObjectId,regStatus,carrierAccount,accountCountry,e_9,_d;return(0,tslib_es6.YH)(this,(function(_e){switch(_e.label){case 0:return preCheckoutQueue=[],[4,selectState(user_selectors.VX)];case 1:return hasValidBilling=_e.sent(),[4,selectState(user_selectors.ni)];case 2:return isBillingBlocked=_e.sent(),[4,selectState(user_selectors.Lu)];case 3:return isHighFraudRisk=_e.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_composite_selectors.yu,{batchEntryIds:(0,lodash_es_flatten.A)(Object.values(orders))})];case 4:return registrationStatuses=_e.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(carrier_accounts_selectors.Nf)];case 5:return carrierAccountsMap=_e.sent(),[4,selectState(user_selectors.Oz)];case 6:return hasValidSenderAddress=_e.sent(),[4,selectState(user_selectors.ux)];case 7:requiresEmailVerification=_e.sent(),isBillingBlocked&&isHighFraudRisk&&preCheckoutQueue.push({kind:"account-alert"});try{for(_a=(0,tslib_es6.Ju)(Object.entries(registrationStatuses)),_b=_a.next();!_b.done;_b=_a.next())switch(_c=(0,tslib_es6.zs)(_b.value,2),carrierAccountObjectId=_c[0],regStatus=_c[1],(carrierAccount=carrierAccountsMap[carrierAccountObjectId]).carrier.id){case carriers.$5.id:accountCountry=void 0,carrierAccount.metadata&&constants_countries.Xr[carrierAccount.metadata]&&(accountCountry=constants_countries.Xr[carrierAccount.metadata].iso2),preCheckoutQueue.push({accountCountry,kind:"ups-activation",showFullForm:!(regStatus===CarrierAccountRegStatus.n.PENDING_TERMS&&hasValidSenderAddress)});break;case carriers.i3.id:preCheckoutQueue.push({kind:"canada_post-activation",showFullForm:!0});break;case carriers.y6.id:preCheckoutQueue.push({kind:"dhl_express-activation"})}}catch(e_9_1){e_9={error:e_9_1}}finally{try{_b&&!_b.done&&(_d=_a.return)&&_d.call(_a)}finally{if(e_9)throw e_9.error}}return hasValidBilling||(requiresEmailVerification&&preCheckoutQueue.push({kind:"email-verification"}),preCheckoutQueue.push({kind:"credit-card-info"})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.oG(orders,preCheckoutQueue))];case 8:return _e.sent(),[2]}}))}(function ordersPollWatcher(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.s)(constants.t.ORDERS_POLL_START)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.O4)({cancel:(0,redux_saga_effects_npm_proxy_esm.s)(constants.t.ORDERS_NEW_ORDERS_FOUND),task:(0,redux_saga_effects_npm_proxy_esm.T1)(ordersPollWorker)})];case 2:return _a.sent(),[3,0];case 3:return[2]}}))})(),function batchEntriesPollWatcher(){var action,orderObjectIds,orderObjectIds_1,orderObjectIds_1_1,orderObjectId,e_8,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.s)([constants.t.ORDERS_BATCH_ENTRIES_POLL_START,constants.t.ORDERS_FETCH_SUCCESS])];case 1:switch(action=_b.sent(),!1,orderObjectIds=[],action.type){case constants.t.ORDERS_BATCH_ENTRIES_POLL_START:orderObjectIds=action.payload.orderObjectIds;break;case constants.t.ORDERS_FETCH_SUCCESS:orderObjectIds=action.payload.orders.map((function(order){return order.objectId}))}try{for(e_8=void 0,orderObjectIds_1=(0,tslib_es6.Ju)(orderObjectIds),orderObjectIds_1_1=orderObjectIds_1.next();!orderObjectIds_1_1.done;orderObjectIds_1_1=orderObjectIds_1.next())orderObjectId=orderObjectIds_1_1.value,ordersToPoll[orderObjectId]=(new Date).getTime()}catch(e_8_1){e_8={error:e_8_1}}finally{try{orderObjectIds_1_1&&!orderObjectIds_1_1.done&&(_a=orderObjectIds_1.return)&&_a.call(orderObjectIds_1)}finally{if(e_8)throw e_8.error}}return orders_saga_worker?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.Zy)(batchEntriesPollRace)];case 2:orders_saga_worker=_b.sent(),_b.label=3;case 3:return[3,0];case 4:return[2]}}))}(),function firstTimeSyncWatcher(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.s)(constants.t.ORDERS_FIRST_TIME_SYNC_POLL_START)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.O4)({cancel:(0,redux_saga_effects_npm_proxy_esm.s)(constants.t.ORDERS_FIRST_TIME_SYNC_POLL_END),task:(0,redux_saga_effects_npm_proxy_esm.T1)(firstTimeSyncWorker)})];case 2:return _a.sent(),[3,0];case 3:return[2]}}))}(),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.ORDER_FETCH,(function fetchOrder(action){var orderId,response,payload;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),orderId=action.orderId,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.we,orderId)];case 1:return response=_a.sent(),payload={order:Order.rS(response.data)},[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.us(payload))];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.PF())];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_FETCH,(function fetchOrders(action){var filters,transformedFilters,response,parsedOrders,totalOrderCount,error_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,5,,7]),filters=action.payload.filters,transformedFilters=function(filters,orderStatus){if(!filters)return{};var tag=filters.tag,rest=(0,tslib_es6.Tt)(filters,["tag"]);return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},rest),{order_status:"pending"===orderStatus?[Order.Re.PAID,Order.Re.UNKNOWN,Order.Re.AWAITPAY,Order.Re.PARTIALLY_FULFILLED]:"fulfilled"===orderStatus?[Order.Re.SHIPPED]:"cancelled"===orderStatus?[Order.Re.CANCELLED]:[],tag_id:tag})}(filters,action.payload.orderStatus),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.UK,action.payload.page,transformedFilters,action.payload.fetchCount,action.payload.showOnlyHidden,action.payload.sort,action.payload.sortBy,action.payload.orderBy)];case 1:return response=_a.sent(),parsedOrders=response.data.results.map(Order.rS),totalOrderCount=response.data.count,function(filters){return filters.order_status.length>0||Object.keys(filters).length>1}(transformedFilters)?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils.f0,action.payload.appLocation,segment.sV.order_search_completed,{filters:transformedFilters,orderCount:totalOrderCount})]:[3,3];case 2:_a.sent(),_a.label=3;case 3:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.bL(parsedOrders,response.data.count))];case 4:return _a.sent(),[3,7];case 5:return error_1=_a.sent(),newRelic_newRelic.S.noticeError("Failed to fetch orders",{error:error_1}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.dI())];case 6:return _a.sent(),[3,7];case 7:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_SYNC,(function syncOrders(action){var userFirstStoreConnected,totalOrdersInStore,queryParams,hidden,order_by,order_status,page,results,sort,sort_by,filters;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,selectState(stores_selectors.RT)];case 1:return userFirstStoreConnected=_a.sent(),[4,selectState(orders_selectors.SP)];case 2:totalOrdersInStore=_a.sent(),_a.label=3;case 3:return _a.trys.push([3,10,,12]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.jy)];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(countOrders)];case 5:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.cu())];case 6:return _a.sent(),userFirstStoreConnected&&0===totalOrdersInStore?[4,selectState(getParsedQS)]:[3,9];case 7:return queryParams=_a.sent(),hidden=queryParams.hidden,order_by=queryParams.order_by,order_status=queryParams.order_status,page=queryParams.page,results=queryParams.results,sort=queryParams.sort,sort_by=queryParams.sort_by,filters=(0,tslib_es6.Tt)(queryParams,["hidden","order_by","order_status","page","results","sort","sort_by"]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Gb(action.payload.appLocation,page||1,filters,results||"25",hidden||!1,order_status||"",sort||"",sort_by||"_score",order_by||"desc"))];case 8:_a.sent(),_a.label=9;case 9:return[3,12];case 10:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.ZT())];case 11:return _a.sent(),[3,12];case 12:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_GET_ALL_LABELS,(function getAllLabels(action){var orderObjectIds,batchEntryIds,response,err_4;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,8]),orderObjectIds=Object.keys(action.payload.orderSelection),batchEntryIds=Object.values(action.payload.orderSelection).reduce((function(l,v){return(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(l),!1),(0,tslib_es6.zs)(v),!1)}),[]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.fn,orderObjectIds,batchEntryIds)];case 1:return response=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.kB(response.data.url))];case 2:return _a.sent(),[3,8];case 3:return err_4=_a.sent(),axios_default().isAxiosError(err_4)&&err_4.response&&err_4.response.data?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.FO(err_4.response.data))]:[3,5];case 4:return _a.sent(),[3,7];case 5:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.FO("We hit an unexpected error. Please try again."))];case 6:_a.sent(),_a.label=7;case 7:return[3,8];case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_GET_LABEL,(function orders_saga_getLabel(action){var response;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.p9,action.payload.transactionIds,action.payload.fileFormat)];case 1:return response=_a.sent(),action.payload.windowRef.location.assign(response.data.url),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.m3())];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Vf())];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.IJ)(constants.t.ORDERS_GET_PACKING_SLIP,(function getOrderPackingSlip(action){var _a,batchEntryIds,orderObjectIds,response;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,3,,5]),_a=Order.Hl(action.payload.orderSelection),batchEntryIds=_a.batchEntryIds,orderObjectIds=_a.orderObjectIds,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Em,orderObjectIds,batchEntryIds)];case 1:return response=_b.sent(),action.payload.windowRef.location.assign(response.data.slip_url),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(utils.MH,action.payload.appLocation,"packing_slip",action.payload.orderSelection)];case 2:case 4:return _b.sent(),[3,5];case 3:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.i2())];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_SEND_EMAIL_NOTIFICATION,(function orders_saga_sendEmailNotification(action){var transactionsToEmail;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.PJ,{orderObjectIds:action.payload.ids})];case 1:return(transactionsToEmail=_a.sent())?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.an())];case 2:return _a.sent(),[2];case 3:return _a.trys.push([3,6,,8]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(transactions_service_emailNotify,transactionsToEmail)];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.HE())];case 5:case 7:return _a.sent(),[3,8];case 6:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.an())];case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.BATCH_CREATE,(function createBatch(action){var batchEntries,_a,_b,orderObjectId,batchEntry,e_1_1,response,e_1,_c;return(0,tslib_es6.YH)(this,(function(_d){switch(_d.label){case 0:_d.trys.push([0,11,,13]),batchEntries=[],_d.label=1;case 1:_d.trys.push([1,6,7,8]),_a=(0,tslib_es6.Ju)(action.payload.ids),_b=_a.next(),_d.label=2;case 2:return _b.done?[3,5]:(orderObjectId=_b.value,[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_selectors.o0,{orderObjectId})]);case 3:(batchEntry=_d.sent())&&batchEntries.push(batchEntry),_d.label=4;case 4:return _b=_a.next(),[3,2];case 5:return[3,8];case 6:return e_1_1=_d.sent(),e_1={error:e_1_1},[3,8];case 7:try{_b&&!_b.done&&(_c=_a.return)&&_c.call(_a)}finally{if(e_1)throw e_1.error}return[7];case 8:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Xm,action.payload.ids,batchEntries.filter((function(batchEntry){return batchEntry})))];case 9:return response=_d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.WV(OrdersBatch.rS(response.data)))];case 10:return _d.sent(),[3,13];case 11:return _d.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.nM())];case 12:return _d.sent(),[3,13];case 13:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.ORDER_HIDE,(function hideOrder(action){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.f0,action.payload.ids)];case 1:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.w())];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.hz("We hit an unexpected error. Please try again."))];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.ORDERS_UPDATE_PARCEL,(function updateParcel(action){var jsonParcel,batchEntriesIdsToUpdate,updatedBatchEntriesResult,batchEntryOrderIds,ordersMap_2,ordersWithInvalidOrProcessingBatchEntryStatus,ordersWithoutSenderAddress,ordersToFetch,ordersToFetch_2,ordersToFetch_2_1,orderId,e_3_1,orderHasAddressToMap_2,responseOrderObjectIds,error_3,batchEntries,shipmentIds,e_3,_a,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,16,,20]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.De)(constants_form.n6))];case 1:return _c.sent(),jsonParcel=Parcel.U2(action.payload.parcel),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getBatchEntriesIdsToUpdate,action.payload.orderSelection)];case 2:return batchEntriesIdsToUpdate=_c.sent().batchEntriesIdsToUpdate,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.pC,batchEntriesIdsToUpdate,jsonParcel)];case 3:return updatedBatchEntriesResult=_c.sent(),(0,utils.mq)(action.payload.trackingReference,{isError:!1,message:void 0,status:updatedBatchEntriesResult.status,url:updatedBatchEntriesResult.config.url||""}),batchEntries=updatedBatchEntriesResult.data.map(OrderBatchEntry.kc),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.i0(batchEntries))];case 4:return _c.sent(),batchEntryOrderIds=batchEntries.map((function(batchEntry){return batchEntry.orderObjectId})),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Sv)];case 5:ordersMap_2=_c.sent(),ordersWithInvalidOrProcessingBatchEntryStatus=batchEntries.filter((function(batchEntry){return[OrdersBatch.DO.INVALID_ORDER,OrdersBatch.DO.PROCESSING_SHIPMENT].includes(batchEntry.objectStatus)})).map((function(batchEntry){return batchEntry.orderObjectId})),ordersWithoutSenderAddress=batchEntryOrderIds.filter((function(orderId){return!ordersMap_2[orderId].addressFrom})),ordersToFetch=(0,uniq.A)(ordersWithInvalidOrProcessingBatchEntryStatus.concat(ordersWithoutSenderAddress)),_c.label=6;case 6:_c.trys.push([6,11,12,13]),ordersToFetch_2=(0,tslib_es6.Ju)(ordersToFetch),ordersToFetch_2_1=ordersToFetch_2.next(),_c.label=7;case 7:return ordersToFetch_2_1.done?[3,10]:(orderId=ordersToFetch_2_1.value,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(orderId))]);case 8:_c.sent(),_c.label=9;case 9:return ordersToFetch_2_1=ordersToFetch_2.next(),[3,7];case 10:return[3,13];case 11:return e_3_1=_c.sent(),e_3={error:e_3_1},[3,13];case 12:try{ordersToFetch_2_1&&!ordersToFetch_2_1.done&&(_a=ordersToFetch_2.return)&&_a.call(ordersToFetch_2)}finally{if(e_3)throw e_3.error}return[7];case 13:return orderHasAddressToMap_2=batchEntries.reduce((function(map,batchEntry){return map[batchEntry.orderObjectId]=!!batchEntry.addressTo,map}),{}),responseOrderObjectIds=batchEntryOrderIds.filter((function(orderId){return!!ordersMap_2[orderId].toAddress||orderHasAddressToMap_2[orderId]})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj(responseOrderObjectIds))];case 14:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.uj)(constants_form.n6))];case 15:return _c.sent(),[3,20];case 16:return error_3=_c.sent(),newRelic_newRelic.S.noticeError("Failed to update parcel",{error:error_3}),axios_default().isAxiosError(error_3)&&(0,utils.mq)(action.payload.trackingReference,{isError:!0,message:error_3.message,status:(null===(_b=error_3.response)||void 0===_b?void 0:_b.status)||-1,url:error_3.config.url||""}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.$D(error_3))];case 17:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_selectors.dM,{orderObjectIds:Object.keys(action.payload.orderSelection)})];case 18:return batchEntries=_c.sent(),shipmentIds=batchEntries.map((function(batchEntry){return batchEntry.shipmentObjectId})).filter((function(shipmentId){return null!==shipmentId})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(clearRates(shipmentIds))];case 19:return _c.sent(),[3,20];case 20:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.FETCH_ORDER_TRANSACTIONS,(function fetchOrderTransactions(action){var result,parsedTransactions;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Mf,action.payload.orderObjectId)];case 1:return result=_a.sent(),parsedTransactions=result.data.results.map(Transaction.p9),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.$2(action.payload.orderObjectId,parsedTransactions))];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.cy())];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.ORDER_BATCH_ENTRY_FETCH,(function fetchOrderBatchEntry(action){var response,batchEntriesExtended;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.dS,action.payload.orderObjectId,!0)];case 1:return response=_a.sent(),batchEntriesExtended=response.data.map(OrderBatchEntry.kc),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(batchEntriesExtended))];case 2:case 4:return _a.sent(),[3,5];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Zq(action.payload.orderObjectId))];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.ORDERS_COUNT_FETCH,countOrders),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_PATCH_BATCH_ENTRIES,(function patchBatchEntries(action){var batchEntriesIdsToUpdate,patchResult,batchEntries,batchEntryOrderIds,ordersMap_1,ordersWithInvalidOrProcessingBatchEntryStatus,ordersWithoutSenderAddress,ordersToFetch,ordersToFetch_1,ordersToFetch_1_1,orderId,e_2_1,responseOrderObjectIds,orderHasAddressToMap_1,err_11,e_2,_a,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,18,,22]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getBatchEntriesIdsToUpdate,action.payload.orderSelection)];case 1:return batchEntriesIdsToUpdate=_c.sent().batchEntriesIdsToUpdate,action.payload.parcel||action.payload.extras?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.nr("orders:errors:patchBatchEntry:zeroOptionalArgs"))];case 2:return _c.sent(),[2];case 3:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.xC,batchEntriesIdsToUpdate,action.payload.parcel,action.payload.extras)];case 4:return patchResult=_c.sent(),(0,utils.mq)(action.payload.trackingReference,{isError:!1,message:void 0,status:patchResult.status,url:patchResult.config.url||""}),action.payload.extras?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("ADDITIONAL_SERVICES_SAVE",{batchEntries:batchEntriesIdsToUpdate,payload:action.payload.extras}))]:[3,6];case 5:_c.sent(),_c.label=6;case 6:return batchEntries=patchResult.data.map(OrderBatchEntry.kc),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.SM(batchEntries))];case 7:return _c.sent(),batchEntryOrderIds=batchEntries.map((function(batchEntry){return batchEntry.orderObjectId})),[4,selectState(orders_selectors.Sv)];case 8:ordersMap_1=_c.sent(),ordersWithInvalidOrProcessingBatchEntryStatus=batchEntries.filter((function(batchEntry){return(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(action.payload.parcel?[OrdersBatch.DO.PROCESSING_SHIPMENT]:[]),!1),[OrdersBatch.DO.INVALID_ORDER],!1).includes(batchEntry.objectStatus)})).map((function(batchEntry){return batchEntry.orderObjectId})),ordersWithoutSenderAddress=batchEntryOrderIds.filter((function(orderId){return!ordersMap_1[orderId].addressFrom})),ordersToFetch=(0,uniq.A)(ordersWithInvalidOrProcessingBatchEntryStatus.concat(ordersWithoutSenderAddress)),_c.label=9;case 9:_c.trys.push([9,14,15,16]),ordersToFetch_1=(0,tslib_es6.Ju)(ordersToFetch),ordersToFetch_1_1=ordersToFetch_1.next(),_c.label=10;case 10:return ordersToFetch_1_1.done?[3,13]:(orderId=ordersToFetch_1_1.value,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(orderId))]);case 11:_c.sent(),_c.label=12;case 12:return ordersToFetch_1_1=ordersToFetch_1.next(),[3,10];case 13:return[3,16];case 14:return e_2_1=_c.sent(),e_2={error:e_2_1},[3,16];case 15:try{ordersToFetch_1_1&&!ordersToFetch_1_1.done&&(_a=ordersToFetch_1.return)&&_a.call(ordersToFetch_1)}finally{if(e_2)throw e_2.error}return[7];case 16:return responseOrderObjectIds=void 0,action.payload.parcel?(orderHasAddressToMap_1=batchEntries.reduce((function(map,batchEntry){return map[batchEntry.orderObjectId]=!!batchEntry.addressTo,map}),{}),responseOrderObjectIds=batchEntryOrderIds.filter((function(orderId){return!!ordersMap_1[orderId].toAddress||orderHasAddressToMap_1[orderId]}))):responseOrderObjectIds=batchEntryOrderIds.filter((function(orderId){return!!ordersMap_1[orderId].parcel})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj(responseOrderObjectIds))];case 17:return _c.sent(),[3,22];case 18:return err_11=_c.sent(),axios_default().isAxiosError(err_11)&&(0,utils.mq)(action.payload.trackingReference,{isError:!0,message:err_11.message,status:(null===(_b=err_11.response)||void 0===_b?void 0:_b.status)||-1,url:err_11.config.url||""}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.nr(err_11))];case 19:return _c.sent(),action.payload.extras?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("ADDITIONAL_SERVICES_SAVE_FAILED",{err:err_11}))]:[3,21];case 20:_c.sent(),_c.label=21;case 21:return[3,22];case 22:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_UPDATE_BATCH_ENTRIES_EXTRAS,(function updateBatchEntriesExtras(action){var batchEntriesIdsToUpdate,result,batchEntries,batchEntryOrderIds,ordersMap_3,batchEntriesWithInvalidOrder,ordersWithoutSenderAddress,ordersToFetch,ordersToFetch_3,ordersToFetch_3_1,orderId,e_4_1,responseOrderObjectIds,err_12,e_4,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,17,,20]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.De)(action.payload.form))];case 1:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getBatchEntriesIdsToUpdate,action.payload.orderSelection)];case 2:return batchEntriesIdsToUpdate=_b.sent().batchEntriesIdsToUpdate,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Nr,batchEntriesIdsToUpdate,action.payload.extras)];case 3:return result=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("ADDITIONAL_SERVICES_SAVE",{batchEntries:batchEntriesIdsToUpdate,payload:action.payload.extras}))];case 4:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.uj)(action.payload.form))];case 5:return _b.sent(),batchEntries=result.data.map(OrderBatchEntry.kc),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Ay(batchEntries))];case 6:return _b.sent(),batchEntryOrderIds=batchEntries.map((function(batchEntry){return batchEntry.orderObjectId})),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Sv)];case 7:ordersMap_3=_b.sent(),batchEntriesWithInvalidOrder=batchEntries.filter((function(batchEntry){return batchEntry.objectStatus===OrdersBatch.DO.INVALID_ORDER})).map((function(batchEntry){return batchEntry.orderObjectId})),ordersWithoutSenderAddress=batchEntryOrderIds.filter((function(orderId){return!ordersMap_3[orderId].addressFrom})),ordersToFetch=(0,uniq.A)(batchEntriesWithInvalidOrder.concat(ordersWithoutSenderAddress)),_b.label=8;case 8:_b.trys.push([8,13,14,15]),ordersToFetch_3=(0,tslib_es6.Ju)(ordersToFetch),ordersToFetch_3_1=ordersToFetch_3.next(),_b.label=9;case 9:return ordersToFetch_3_1.done?[3,12]:(orderId=ordersToFetch_3_1.value,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(orderId))]);case 10:_b.sent(),_b.label=11;case 11:return ordersToFetch_3_1=ordersToFetch_3.next(),[3,9];case 12:return[3,15];case 13:return e_4_1=_b.sent(),e_4={error:e_4_1},[3,15];case 14:try{ordersToFetch_3_1&&!ordersToFetch_3_1.done&&(_a=ordersToFetch_3.return)&&_a.call(ordersToFetch_3)}finally{if(e_4)throw e_4.error}return[7];case 15:return responseOrderObjectIds=batchEntryOrderIds.filter((function(orderId){return!!ordersMap_3[orderId].parcel})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj(responseOrderObjectIds))];case 16:return _b.sent(),[3,20];case 17:return err_12=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.uj)(action.payload.form))];case 18:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("ADDITIONAL_SERVICES_SAVE_FAILED",{err:err_12}))];case 19:return _b.sent(),[3,20];case 20:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_PATCH_UPDATE_BATCH_ENTRIES_EXTRAS,(function orders_saga_patchUpdateBatchEntriesExtras(action){var batchEntriesIdsToUpdate,result,batchEntries,batchEntryOrderIds,ordersMap_4,batchEntriesWithInvalidOrder,ordersWithoutSenderAddress,ordersToFetch,ordersToFetch_4,ordersToFetch_4_1,orderId,e_5_1,responseOrderObjectIds,err_13,e_5,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,15,,18]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getBatchEntriesIdsToUpdate,action.payload.orderSelection)];case 1:return batchEntriesIdsToUpdate=_b.sent().batchEntriesIdsToUpdate,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Nl,batchEntriesIdsToUpdate,action.payload.extras)];case 2:return result=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("ADDITIONAL_SERVICES_SAVE",{batchEntries:batchEntriesIdsToUpdate,payload:action.payload.extras}))];case 3:return _b.sent(),batchEntries=result.data.map(OrderBatchEntry.kc),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.I2(batchEntries))];case 4:return _b.sent(),batchEntryOrderIds=batchEntries.map((function(batchEntry){return batchEntry.orderObjectId})),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Sv)];case 5:ordersMap_4=_b.sent(),batchEntriesWithInvalidOrder=batchEntries.filter((function(batchEntry){return batchEntry.objectStatus===OrdersBatch.DO.INVALID_ORDER})).map((function(batchEntry){return batchEntry.orderObjectId})),ordersWithoutSenderAddress=batchEntryOrderIds.filter((function(orderId){return!ordersMap_4[orderId].addressFrom})),ordersToFetch=(0,uniq.A)(batchEntriesWithInvalidOrder.concat(ordersWithoutSenderAddress)),_b.label=6;case 6:_b.trys.push([6,11,12,13]),ordersToFetch_4=(0,tslib_es6.Ju)(ordersToFetch),ordersToFetch_4_1=ordersToFetch_4.next(),_b.label=7;case 7:return ordersToFetch_4_1.done?[3,10]:(orderId=ordersToFetch_4_1.value,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(orderId))]);case 8:_b.sent(),_b.label=9;case 9:return ordersToFetch_4_1=ordersToFetch_4.next(),[3,7];case 10:return[3,13];case 11:return e_5_1=_b.sent(),e_5={error:e_5_1},[3,13];case 12:try{ordersToFetch_4_1&&!ordersToFetch_4_1.done&&(_a=ordersToFetch_4.return)&&_a.call(ordersToFetch_4)}finally{if(e_5)throw e_5.error}return[7];case 13:return responseOrderObjectIds=batchEntryOrderIds.filter((function(orderId){return!!ordersMap_4[orderId].parcel})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj(responseOrderObjectIds))];case 14:return _b.sent(),action.payload.callback&&action.payload.callback(),[3,18];case 15:return err_13=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.vm((0,utils_utils.XJ)(err_13)))];case 16:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("ADDITIONAL_SERVICES_SAVE_FAILED",{err:err_13}))];case 17:return _b.sent(),[3,18];case 18:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_PATCH_UPDATE_BATCH_ENTRIES_EXTRAS_PACKING_SLIP_NOTE,(function patchUpdateBatchEntriesExtrasPackingSlipNote(action){var batchEntryIds,batchEntriesIdsToUpdate,extras,result,batchEntries,batchEntryOrderIds,ordersMap_5,batchEntriesWithInvalidOrder,ordersWithoutSenderAddress,ordersToFetch,ordersToFetch_5,ordersToFetch_5_1,orderId,e_6_1,responseOrderObjectIds,err_14,e_6,_a;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,17,,21]),batchEntryIds=action.payload.batchEntryIds||[],action.payload.batchEntryIds?[3,2]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getBatchEntriesIdsToUpdate,action.payload.orderSelection)];case 1:batchEntriesIdsToUpdate=_b.sent().batchEntriesIdsToUpdate,batchEntryIds=batchEntriesIdsToUpdate,_b.label=2;case 2:return extras={packingSlipText:action.payload.packingSlipText},[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Nl,batchEntryIds,extras)];case 3:return result=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("ADDITIONAL_SERVICES_SAVE",{batchEntries:batchEntryIds,payload:extras}))];case 4:return _b.sent(),batchEntries=result.data.map(OrderBatchEntry.kc),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.I2(batchEntries))];case 5:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(addSnackbarMessage({i18n:!0,message:"orders:drawers:packingSlip:update:success",severity:"success"}))];case 6:return _b.sent(),batchEntryOrderIds=batchEntries.map((function(batchEntry){return batchEntry.orderObjectId})),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Sv)];case 7:if(ordersMap_5=_b.sent(),batchEntriesWithInvalidOrder=batchEntries.filter((function(batchEntry){return batchEntry.objectStatus===OrdersBatch.DO.INVALID_ORDER})).map((function(batchEntry){return batchEntry.orderObjectId})),!Object.values(ordersMap_5).length)return[2];ordersWithoutSenderAddress=batchEntryOrderIds.filter((function(orderId){return!ordersMap_5[orderId].addressFrom})),ordersToFetch=(0,uniq.A)(batchEntriesWithInvalidOrder.concat(ordersWithoutSenderAddress)),_b.label=8;case 8:_b.trys.push([8,13,14,15]),ordersToFetch_5=(0,tslib_es6.Ju)(ordersToFetch),ordersToFetch_5_1=ordersToFetch_5.next(),_b.label=9;case 9:return ordersToFetch_5_1.done?[3,12]:(orderId=ordersToFetch_5_1.value,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.XD(orderId))]);case 10:_b.sent(),_b.label=11;case 11:return ordersToFetch_5_1=ordersToFetch_5.next(),[3,9];case 12:return[3,15];case 13:return e_6_1=_b.sent(),e_6={error:e_6_1},[3,15];case 14:try{ordersToFetch_5_1&&!ordersToFetch_5_1.done&&(_a=ordersToFetch_5.return)&&_a.call(ordersToFetch_5)}finally{if(e_6)throw e_6.error}return[7];case 15:return responseOrderObjectIds=batchEntryOrderIds.filter((function(orderId){return!!ordersMap_5[orderId].parcel})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj(responseOrderObjectIds))];case 16:return _b.sent(),[3,21];case 17:return err_14=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.vm((0,utils_utils.XJ)(err_14)))];case 18:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("ADDITIONAL_SERVICES_SAVE_FAILED",{err:err_14}))];case 19:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(addSnackbarMessage({i18n:!0,message:"orders:drawers:packingSlip:update:error",severity:"error"}))];case 20:return _b.sent(),[3,21];case 21:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.ORDERS_UPDATE_BATCH_ENTRIES_ADDRESS,(function updateBatchEntriesAddress(_a){var batchEntryCount,batchEntriesIdsToUpdate,address,result,parsedBatchEntries,err_15,_b,_c,_d=_a.payload,originalAddress=_d.address,addressBookAddress=_d.addressBookAddress,addressType=_d.addressType,combineSenderReturnAddresses=_d.combineSenderReturnAddresses,createUserAddress=_d.createUserAddress,orderSelection=_d.orderSelection,source=_d.source,trackingReference=_d.trackingReference,updateUserAddress=_d.updateUserAddress;return(0,tslib_es6.YH)(this,(function(_e){switch(_e.label){case 0:batchEntryCount=Object.values(orderSelection).reduce((function(count,batchEntryIds){return count+(batchEntryIds.length||1)}),0),_e.label=1;case 1:return _e.trys.push([1,11,,13]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getBatchEntriesIdsToUpdate,orderSelection)];case 2:return batchEntriesIdsToUpdate=_e.sent().batchEntriesIdsToUpdate,address=(0,tslib_es6.Cl)({},originalAddress),[addressBook.lj,addressBook.y9].includes(addressType)&&!combineSenderReturnAddresses&&createUserAddress&&address.id&&delete address.id,[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.EZ,(0,Address.ko)(address),addressType,(0,uniq.A)(batchEntriesIdsToUpdate))];case 3:if(result=_e.sent(),"function"!=typeof(null===(_b=null==result?void 0:result.data)||void 0===_b?void 0:_b.map))throw(0,utils.mq)(trackingReference,{isError:!0,message:"updateBatchEntryAddress got unexpected result",status:result.status,url:result.config.url||""}),new Error("updateBatchEntryAddress got unexpected result: ".concat(result.data));return(0,utils.mq)(trackingReference,{isError:!1,message:void 0,status:result.status,url:result.config.url||""}),createUserAddress?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(createAPIAddress,address_actions.TF({address,trackingReference}))]:[3,5];case 4:return _e.sent(),[3,7];case 5:return updateUserAddress&&addressBookAddress?[4,(0,redux_saga_effects_npm_proxy_esm.T1)(editAPIAddress,address_actions.h_({address:addressBookAddress,id:addressBookAddress.id,trackingReference}))]:[3,7];case 6:_e.sent(),_e.label=7;case 7:return parsedBatchEntries=result.data.map(OrderBatchEntry.kc).filter((function(batchEntry){return!batchEntry.transactionObjectId})),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(parsedBatchEntries))];case 8:return _e.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj(parsedBatchEntries.map((function(batchEntry){return batchEntry.orderObjectId}))))];case 9:return _e.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Iu(batchEntryCount,"orders:success:batch:".concat(addressType),parsedBatchEntries,source))];case 10:return _e.sent(),[3,13];case 11:return err_15=_e.sent(),axios_default().isAxiosError(err_15)&&(0,utils.mq)(trackingReference,{isError:!0,message:err_15.message,status:(null===(_c=err_15.response)||void 0===_c?void 0:_c.status)||-1,url:err_15.config.url||""}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.ES(batchEntryCount,"orders:errors:batch:".concat(addressType),source))];case 12:return _e.sent(),[3,13];case 13:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.jP)(constants.t.ORDERS_CREATE_ANOTHER_LABEL,(function batchEntriesRegen(action){var orderSelection,orderObjectIDs_1,batchEntryIDs_1,initialBatchEntries,results,parsedBatchEntries,resetBatchEntries,location_1;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,9,,10]),orderSelection=action.payload.orderSelection,orderObjectIDs_1=[],batchEntryIDs_1=[],[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orderSelectionToBatchEntries,orderSelection)];case 1:return initialBatchEntries=_a.sent(),Object.entries(orderSelection).forEach((function(_a){var _b=(0,tslib_es6.zs)(_a,2),orderObjectId=_b[0],orderBatchEntryIDs=_b[1];orderObjectIDs_1.push(orderObjectId),(null==orderBatchEntryIDs?void 0:orderBatchEntryIDs.length)>0&&batchEntryIDs_1.push.apply(batchEntryIDs_1,(0,tslib_es6.fX)([],(0,tslib_es6.zs)(orderBatchEntryIDs),!1))})),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.NX,orderObjectIDs_1,batchEntryIDs_1)];case 2:return results=_a.sent(),parsedBatchEntries=results.data.map(OrderBatchEntry.kc),resetBatchEntries=findResetBatchEntries(initialBatchEntries,parsedBatchEntries),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.iZ(initialBatchEntries,resetBatchEntries))];case 3:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(parsedBatchEntries))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj(resetBatchEntries.map((function(batchEntry){return batchEntry.orderObjectId}))))];case 5:return _a.sent(),1!==parsedBatchEntries.length?[3,8]:[4,selectState(getLocation)];case 6:return location_1=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)("/orders/".concat(parsedBatchEntries[0].orderObjectId,"/shipments/").concat(parsedBatchEntries[0].id).concat(location_1.search)))];case 7:_a.sent(),_a.label=8;case 8:return[3,10];case 9:return _a.sent(),[3,10];case 10:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_BATCH_ENTRY_RETRY_SHIPMENT,(function retryShipment(action){var orderSelection,batchEntryIDs_2,results,parsedBatchEntries,location_2;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,7,,8]),orderSelection=action.payload.orderSelection,batchEntryIDs_2=[],Object.entries(orderSelection).forEach((function(_a){var orderBatchEntryIDs=(0,tslib_es6.zs)(_a,2)[1];(null==orderBatchEntryIDs?void 0:orderBatchEntryIDs.length)>0&&batchEntryIDs_2.push.apply(batchEntryIDs_2,(0,tslib_es6.fX)([],(0,tslib_es6.zs)(orderBatchEntryIDs),!1))})),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.ie,batchEntryIDs_2)];case 1:return results=_a.sent(),parsedBatchEntries=results.data.map(OrderBatchEntry.kc),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(parsedBatchEntries))];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj(parsedBatchEntries.map((function(batchEntry){return batchEntry.orderObjectId}))))];case 3:return _a.sent(),1!==parsedBatchEntries.length||batchEntryIDs_2[0]===parsedBatchEntries[0].id?[3,6]:[4,selectState(getLocation)];case 4:return location_2=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.VC)("/orders/".concat(parsedBatchEntries[0].orderObjectId,"/shipments/").concat(parsedBatchEntries[0].id).concat(location_2.search)))];case 5:_a.sent(),_a.label=6;case 6:return[3,8];case 7:return _a.sent(),[3,8];case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_CHECKOUT_SEND_EMAIL_NOTIFICATIONS,(function checkoutSendEmailNotification(action){var transactionsToEmail,batchEntries,orderBatchEntries,pickTransactionIDs,batchEntryTransactionIds,batchEntryTransactions;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.x4,{orderObjectIds:action.payload.orderObjectIds})];case 1:return(transactionsToEmail=_a.sent())?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.nw("We hit an unexpected problem, please try again."))];case 2:return _a.sent(),[2];case 3:return[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_selectors.uq,{batchEntryIds:action.payload.batchEntryIds})];case 4:batchEntries=_a.sent(),orderBatchEntries=batchEntries.reduce((function(acc,batchEntry){var _a,orderId=batchEntry.orderObjectId,orderBatchEntries=acc[orderId]||[];return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},acc),((_a={})[orderId]=(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(orderBatchEntries),!1),[batchEntry],!1),_a))}),{}),pickTransactionIDs=function(orderId){var batchEntries=orderBatchEntries[orderId],outgoingBatchEntries=batchEntries.filter((function(batchEntry){return!1===batchEntry.isReturn})),returnBatchEntries=batchEntries.filter((function(batchEntry){return!0===batchEntry.isReturn}));return outgoingBatchEntries.length>0&&returnBatchEntries.length>0?outgoingBatchEntries:batchEntries},batchEntryTransactionIds=Object.keys(orderBatchEntries).reduce((function(acc,orderId){var txnIds=pickTransactionIDs(orderId).map((function(batchEntry){return batchEntry.transactionObjectId}));return(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(acc),!1),(0,tslib_es6.zs)(txnIds),!1)}),[]),batchEntryTransactions=transactionsToEmail.filter((function(transactionId){return batchEntryTransactionIds.includes(transactionId)})),_a.label=5;case 5:return _a.trys.push([5,8,,10]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(transactions_service_emailNotify,batchEntryTransactions)];case 6:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.uP())];case 7:return _a.sent(),[3,10];case 8:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.nw("We hit an unexpected problem, please try again."))];case 9:return _a.sent(),[3,10];case 10:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_UPDATE_BATCH_ENTRIES_SHIPMENT_DATE,(function updateBatchEntriesShipmentDate(action){var orderObjectIds,_a,orderSelection,shipmentDate,batchEntriesIdsToUpdate,result,parsedBatchEntries;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,6,8,11]),_a=action.payload,orderSelection=_a.orderSelection,shipmentDate=_a.shipmentDate,orderObjectIds=Object.keys(orderSelection),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getBatchEntriesIdsToUpdate,orderSelection)];case 1:return batchEntriesIdsToUpdate=_b.sent().batchEntriesIdsToUpdate,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.HI(batchEntriesIdsToUpdate,shipmentDate))];case 2:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.su,shipmentDate,(0,uniq.A)(batchEntriesIdsToUpdate))];case 3:return result=_b.sent(),parsedBatchEntries=result.data.map(OrderBatchEntry.kc),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.CK(parsedBatchEntries))];case 4:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.LZ())];case 5:return _b.sent(),[3,11];case 6:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.yc())];case 7:return _b.sent(),[3,11];case 8:return orderObjectIds?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.Wj(orderObjectIds))]:[3,10];case 9:_b.sent(),_b.label=10;case 10:return[7];case 11:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_UPDATE_BATCH_ENTRIES_SERVICE_LEVEL_TOKEN,(function updateBatchEntriesServiceLevelToken(action){var _a,accountObjectId,orderSelection,preferredServiceLevelToken,batchEntryIdsToUpdate,result,parsedBatchEntries;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,3,,5]),_a=action.payload,accountObjectId=_a.accountObjectId,orderSelection=_a.orderSelection,preferredServiceLevelToken=_a.preferredServiceLevelToken,batchEntryIdsToUpdate=(0,compact.A)((0,lodash_es_flatten.A)(Object.values(orderSelection))).map((function(idString){return Number(idString)})),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.Et,preferredServiceLevelToken,batchEntryIdsToUpdate,accountObjectId)];case 1:return result=_b.sent(),parsedBatchEntries=result.data.map(OrderBatchEntry.kc),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.ND(parsedBatchEntries))];case 2:case 4:return _b.sent(),[3,5];case 3:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.kw())];case 5:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDER_UPDATE_WITH_BATCH_ENTRY,(function updateOrderWithBatchEntry(action){var _a,accountObjectId,closePopover,objectID,serviceLevelToken,results,parsedBatchEntries,orderSelection,trackingReference,_b,_c,_d;return(0,tslib_es6.YH)(this,(function(_e){switch(_e.label){case 0:_a=action.payload,accountObjectId=_a.accountObjectId,closePopover=_a.closePopover,objectID=_a.objectID,serviceLevelToken=_a.serviceLevelToken,_e.label=1;case 1:return _e.trys.push([1,6,,8]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.NX,[objectID],[])];case 2:return results=_e.sent(),closePopover&&closePopover(),(parsedBatchEntries=results.data.map(OrderBatchEntry.kc))&&0!==(null==parsedBatchEntries?void 0:parsedBatchEntries.length)?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.FF(parsedBatchEntries))]:[3,5];case 3:return _e.sent(),(_b={})[null===(_c=parsedBatchEntries[0])||void 0===_c?void 0:_c.orderObjectId]=[null===(_d=results.data[0])||void 0===_d?void 0:_d.id],orderSelection=_b,trackingReference=TrackingHelper.U.getTrackingReference(types.Fd.name,"other",{rateIds:[objectID]}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(selectRate(objectID,"",!0,trackingReference,orderSelection,serviceLevelToken,accountObjectId))];case 4:_e.sent(),_e.label=5;case 5:return[3,8];case 6:return _e.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.kw())];case 7:return _e.sent(),[3,8];case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.BATCH_ENTRY_RULES_FETCH,(function fetchBatchEntryRules(action){var response,rule,err_23;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,5,,7]),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.SJ,action.payload.batchEntryId)];case 1:return 0!==(response=_a.sent()).data.length?[3,3]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.x_(action.payload.batchEntryId))];case 2:return _a.sent(),[2];case 3:return rule=(0,businessRules.rJ)(response.data.map((function(batchEntryRule){return null==batchEntryRule?void 0:batchEntryRule.rule}))),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.pC(action.payload.batchEntryId,rule.businessRules))];case 4:case 6:return _a.sent(),[3,7];case 5:return err_23=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.kV((0,utils_utils.XJ)(err_23)))];case 7:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDER_UNDO_SPLIT,(function undoSplitOrder(action){var orderObjectId,ordersData,orderData,originalShipments,response,orderWithPartialFulfillmentRequests,orderNumber;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,5,,7]),orderObjectId=action.payload.orderObjectId,[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Sv)];case 1:return ordersData=_a.sent(),(orderData=ordersData[orderObjectId])?(originalShipments=[orderData.lineItems.map((function(lineItem){return{lineItem:lineItem.objectId,quantity:lineItem.quantity||0}}))],[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.uR,orderObjectId,originalShipments.map((function(contents){return contents.map(OrderBatchEntry.ZX)})))]):[2];case 2:return response=_a.sent(),orderWithPartialFulfillmentRequests=Order.rS(response.data[0]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.$$({isUndo:!0,order:orderWithPartialFulfillmentRequests}))];case 3:return _a.sent(),orderNumber=null==orderData?void 0:orderData.orderNumber,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(addSnackbarMessage({i18n:!0,i18nValues:{orderNumber},message:"orders:splitOrder:form:result:undo:success".concat(orderNumber?"WithNumber":""),severity:"success"}))];case 4:case 6:return _a.sent(),[3,7];case 5:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(addSnackbarMessage({i18n:!0,message:"orders:splitOrder:form:result:undo:error",severity:"error"}))];case 7:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDER_CREATE_PARTIAL_FULFILLMENT_REQUESTS,(function createPartialFulfillmentRequests(action){var _a,orderObjectId,partialFulfillments,ordersData,orderData,orderLineItemsCount,orderLineItemsQuantity,response,orderWithPartialFulfillmentRequests_1,pathName,batchEntryId,batchEntry_1,_b,isPreSplit,qs_1,currentWorkingBatchEntry,orderNumber,err_24,_c,_d;return(0,tslib_es6.YH)(this,(function(_e){switch(_e.label){case 0:return _a=action.payload,orderObjectId=_a.orderObjectId,partialFulfillments=_a.partialFulfillments,[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Sv)];case 1:ordersData=_e.sent(),orderData=ordersData[orderObjectId],orderLineItemsCount=(null===(_c=null==orderData?void 0:orderData.lineItems)||void 0===_c?void 0:_c.length)||0,orderLineItemsQuantity=((null==orderData?void 0:orderData.lineItems)||[]).reduce((function(acc,curr){return acc+curr.quantity}),0),_e.label=2;case 2:return _e.trys.push([2,17,,20]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("SPLIT_ORDER_MODAL_SAVED",{numberOfShipments:null!==(_d=partialFulfillments.length)&&void 0!==_d?_d:0}))];case 3:return _e.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(orders_service.uR,orderObjectId,partialFulfillments.map((function(contents){return contents.map(OrderBatchEntry.ZX)})))];case 4:return response=_e.sent(),orderWithPartialFulfillmentRequests_1=Order.rS(response.data[0]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.$$({order:orderWithPartialFulfillmentRequests_1}))];case 5:return _e.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.w5())];case 6:return _e.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(router_selectors_getPathname)];case 7:return pathName=_e.sent(),batchEntryId=Number(pathName.slice(pathName.lastIndexOf("/")+1,pathName.length)),isNaN(batchEntryId)?[3,9]:[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_selectors.fu,{batchEntryId})];case 8:return _b=_e.sent(),[3,10];case 9:_b=null,_e.label=10;case 10:return batchEntry_1=_b,isPreSplit=pathName==="/orders/".concat(orderWithPartialFulfillmentRequests_1.objectId),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(getQS)];case 11:return qs_1=_e.sent(),batchEntry_1||isPreSplit?(currentWorkingBatchEntry=orderWithPartialFulfillmentRequests_1.partialFulfillmentRequests.find((function(be){if(!batchEntry_1)return!0;var isSingleBatchEntryToSplit=0===batchEntry_1.partialFulfillmentRank&&1===be.partialFulfillmentRank,isExistingSplit=be.partialFulfillmentRank===batchEntry_1.partialFulfillmentRank,isDeletedSplit=batchEntry_1.partialFulfillmentRank>orderWithPartialFulfillmentRequests_1.partialFulfillmentRequests.length;return!!(isSingleBatchEntryToSplit||isExistingSplit||isDeletedSplit)||void 0})))?[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.HC)("/orders/".concat(orderWithPartialFulfillmentRequests_1.objectId,"/shipments/").concat(currentWorkingBatchEntry.id).concat(qs_1)))]:[3,13]:[3,15];case 12:return _e.sent(),[3,15];case 13:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,actions.HC)("/orders/".concat(orderWithPartialFulfillmentRequests_1.objectId).concat(qs_1)))];case 14:_e.sent(),_e.label=15;case 15:return utils_observability.O.successEvent("SPLIT_ORDER_DIALOG_SUBMIT",{lineItemCount:orderLineItemsCount,lineItemsQuantity:orderLineItemsQuantity,shipmentsCount:partialFulfillments.length}),orderNumber=null==orderData?void 0:orderData.orderNumber,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(addSnackbarMessage({i18n:!0,i18nValues:{orderNumber},message:"orders:splitOrder:form:result:success".concat(orderNumber?"WithNumber":""),severity:"success"}))];case 16:return _e.sent(),[3,20];case 17:return err_24=_e.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(addSnackbarMessage({i18n:!0,message:"orders:splitOrder:form:result:error",severity:"error"}))];case 18:return _e.sent(),utils_observability.O.errorEvent("SPLIT_ORDER_DIALOG_SUBMIT",{errorMessage:err_24.message||"Unknown",lineItemCount:orderLineItemsCount,lineItemsQuantity:orderLineItemsQuantity,shipmentsCount:partialFulfillments.length}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.SG({error:"network error",orderObjectId}))];case 19:return _e.sent(),[3,20];case 20:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_START_CHECKOUT,(function orders_saga_startCheckout(action){var isSplitOrder,result,verification;return(0,tslib_es6.YH)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,13,,15]),[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(batch_entry_selectors.id,{batchEntryIds:(0,lodash_es_flatten.A)(Object.values(action.payload.orders))})];case 1:return isSplitOrder=_b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("ORDER_CHECKOUT_STARTED",{"Is Split Order":isSplitOrder}))];case 2:return _b.sent(),[4,selectState(user_selectors.$H)];case 3:return _b.sent()?[3,5]:[4,(0,redux_saga_effects_npm_proxy_esm.T1)(toggleCheckoutModal,action.payload.orders)];case 4:return[2,_b.sent()];case 5:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(user_service.ut)];case 6:switch(result=_b.sent(),verification=IDVerification.r(result.data),verification.state){case IDVerification.p.NO_VERIFICATION_NEEDED:case IDVerification.p.VERIFICATION_SUCCEEDED:return[3,7]}return[3,10];case 7:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(refreshUser)];case 8:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(toggleCheckoutModal,action.payload.orders)];case 9:return[2,_b.sent()];case 10:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,user_actions.hZ)(verification))];case 11:_b.sent(),_b.label=12;case 12:return[3,15];case 13:return _b.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,user_actions.hZ)({errors:["error_processing_request"],state:IDVerification.p.VERIFICATION_FAILED_NO_RETRY}))];case 14:return _b.sent(),[3,15];case 15:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_RESTART_CHECKOUT,(function reStartCheckout(){var transactions,selectedOrders_1,transactionsForRerun,orderSelection,newSelectedOrder,error_8;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,7,,8]),[4,selectState(transactions_selectors.M_)];case 1:return transactions=_a.sent(),[4,selectState(orders_selectors.Li)];case 2:return selectedOrders_1=_a.sent(),(transactionsForRerun=Object.values(transactions).filter((function(transaction){return transaction.status===Transaction.x8.ERROR&&transaction.order&&selectedOrders_1[transaction.order]}))).length?(orderSelection=transactionsForRerun.reduce((function(newOrders,transaction){return transaction.order&&(newOrders[transaction.order]=selectedOrders_1[transaction.order]),newOrders}),{}),[4,(0,redux_saga_effects_npm_proxy_esm.T1)(getBatchEntriesIdsToUpdate,orderSelection)]):[3,6];case 3:return newSelectedOrder=_a.sent().newSelectedOrder,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.lN(newSelectedOrder))];case 4:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.dT(newSelectedOrder,!0))];case 5:_a.sent(),_a.label=6;case 6:return[3,8];case 7:return error_8=_a.sent(),newRelic_newRelic.S.noticeError("Failed to restart checkout",{error:error_8}),[3,8];case 8:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.IJ)(constants.t.ORDER_SPLIT_MODAL_OPEN,(function openOrderSplitModal(action){var orderObjectId;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return orderObjectId=action.payload.orderObjectId,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("SPLIT_ORDER_MODAL_OPENED",{orderObjectId}))];case 1:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.IJ)(constants.t.ORDER_SPLIT_MODAL_CLOSE,(function closeOrderSplitModal(){return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,prod_analytics_actions.o)("SPLIT_ORDER_MODAL_CLOSED"))];case 1:return _a.sent(),[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDER_APPLY_PARCEL_TEMPLATE_TO_PARCEL_FORM,(function applyParcelTemplateToOrderParcelForm(action){var parcelTemplate,formValues,error_6;return(0,tslib_es6.YH)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,6,,7]),parcelTemplate=action.payload.parcelTemplate,[4,(0,redux_saga_effects_npm_proxy_esm.Lt)((0,getFormValues.A)(constants_form.n6))];case 1:return formValues=_a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.Zg)(constants_form.n6,"parcelTemplate",parcelTemplate))];case 2:return _a.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.Zg)(constants_form.n6,"extras",(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},formValues.extras),{isUsingCustomDimensions:!1})))];case 3:return _a.sent(),!parcelTemplate.weight||0===parcelTemplate.weight||formValues.useImportedOrderWeight?[3,5]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,redux_form_es.Zg)(constants_form.n6,"weight",parcelTemplate.weight))];case 4:_a.sent(),_a.label=5;case 5:return[3,7];case 6:return error_6=_a.sent(),newRelic_newRelic.S.noticeError("Failed to apply parcel template",{error:error_6}),[3,7];case 7:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDERS_FETCH_SUCCESS,(function fetchOrderTags(){var ordersData,orderIds,response,ordersWithTags,error_2,_a,_b;return(0,tslib_es6.YH)(this,(function(_c){switch(_c.label){case 0:return _c.trys.push([0,8,,10]),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.qW())];case 1:return _c.sent(),[4,selectState(orders_selectors.WF)];case 2:return ordersData=_c.sent(),orderIds=ordersData.map((function(_a){return _a.objectId})),0!==orderIds.length?[3,4]:[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.iN())];case 3:return _c.sent(),[2];case 4:return[4,(0,redux_saga_effects_npm_proxy_esm.T1)(web_orders_service.WF,{id:orderIds})];case 5:if(response=_c.sent(),!(ordersWithTags=null===(_b=null===(_a=response.data)||void 0===_a?void 0:_a.results)||void 0===_b?void 0:_b.reduce((function(orderTags,order){var _a;return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},orderTags),((_a={})[order.object_id]=order.tags||[],_a))}),{}))||0===Object.keys(ordersWithTags).length)throw new Error("No tags found for orders");return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.eY(ordersWithTags))];case 6:return _c.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.nk())];case 7:case 9:return _c.sent(),[3,10];case 8:return error_2=_c.sent(),newRelic_newRelic.S.noticeError("Failed to fetch order tags",{error:error_2}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.iN())];case 10:return[2]}}))})),(0,redux_saga_effects_npm_proxy_esm.p8)(constants.t.ORDER_CREATE_RETURN_LABEL,(function createReturnLabel(action){var _a,orderObjectId,shipment,parsedBatch,ordersData,partialFulfillmentRequestsWithoutReturns,orderWithReturnLabel,orderToBatchEntry,trackingReference,error_9,_b,_c,_d,_e,_f;return(0,tslib_es6.YH)(this,(function(_g){switch(_g.label){case 0:return _g.trys.push([0,10,,12]),_a=action.payload,orderObjectId=_a.orderObjectId,shipment=_a.shipment,(parsedBatch=(0,OrderBatchEntry.kc)(shipment)).returnOfID=action.payload.returnOfID,[4,(0,redux_saga_effects_npm_proxy_esm.Lt)(orders_selectors.Sv)];case 1:return ordersData=_g.sent(),partialFulfillmentRequestsWithoutReturns=(null===(_e=ordersData[orderObjectId])||void 0===_e?void 0:_e.partialFulfillmentRequests.filter((function(_a){return!_a.isReturn})))||[],orderWithReturnLabel=(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},ordersData[orderObjectId]),{partialFulfillmentRequests:(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(partialFulfillmentRequestsWithoutReturns),!1),[parsedBatch],!1)}),(_b={})[orderObjectId]=parsedBatch.id,orderToBatchEntry=_b,[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.$$({isReturn:!0,order:orderWithReturnLabel}))];case 2:return _g.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.bp([orderObjectId]))];case 3:return _g.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.uF(!0))];case 4:return _g.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.PE((_c={},_c[orderObjectId]=[parsedBatch.id],_c),!0))];case 5:return _g.sent(),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions._Q(orderToBatchEntry))];case 6:return _g.sent(),(null===(_f=shipment.parcels)||void 0===_f?void 0:_f.length)?(trackingReference=TrackingHelper.U.getTrackingReference(types.yf.name,"other",{}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)((0,orders_actions.kR)({address:parsedBatch.addressFrom,addressType:addressBook.y9,combineSenderReturnAddresses:!1,createUserAddress:!1,orderSelection:(_d={},_d[orderObjectId]=[parsedBatch.id],_d),source:"",trackingReference}))]):[3,8];case 7:_g.sent(),_g.label=8;case 8:return[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions._g())];case 9:return _g.sent(),[3,12];case 10:return error_9=_g.sent(),utils_observability.O.errorEvent("RETURN_WORKFLOW_DRAWER_OPEN",{errorMessage:"Something went wrong, please refresh and try again"}),[4,(0,redux_saga_effects_npm_proxy_esm.yJ)(orders_actions.HJ())];case 11:return _g.sent(),newRelic_newRelic.S.noticeError("Failed to create return label",{error:error_9}),[3,12];case 12:return[2]}}))}));var RateLoadingWithTimer=function(_a){var hasTimedoutOrders=_a.hasTimedoutOrders,selectedOrders=_a.selectedOrders,setHasTimedoutOrders=_a.setHasTimedoutOrders,t=_a.t,handleRefresh=(0,hooks_useRefreshRates.A)(selectedOrders).handleRefresh,timeoutIdRef=(0,react.useRef)(void 0);(0,react.useEffect)((function(){return timeoutIdRef.current=setTimeout((function(){return setHasTimedoutOrders(!0)}),BATCH_ENTRIES_POLL_TIMEOUT),function(){clearTimeout(timeoutIdRef.current),setHasTimedoutOrders(!1)}}),[]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack.A,(0,tslib_es6.Cl)({spacing:shippoTheme.A.spacing(2),sx:{placeItems:"center"}},{children:hasTimedoutOrders?(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({spacing:shippoTheme.A.spacing(1),sx:{backgroundColor:styles_colors.T.backgroundDeemphasized,borderRadius:shippoTheme.A.spacing(1),p:shippoTheme.A.spacing(2)}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"body"},{children:t("orders:carrierRatesCard:timedoutAlertMsg")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({color:"secondary",onClick:function(e){setHasTimedoutOrders(!1),timeoutIdRef.current=setTimeout((function(){setHasTimedoutOrders(!0)}),BATCH_ENTRIES_POLL_TIMEOUT),handleRefresh(e)},size:"small",startIcon:(0,emotion_react_jsx_runtime_browser_esm.Y)(Refresh.A,{}),variant:"text"},{children:t("orders:carrierRatesCard:tryAgain")}))]})):(0,emotion_react_jsx_runtime_browser_esm.Y)(Box.A,(0,tslib_es6.Cl)({sx:{p:shippoTheme.A.spacing(2)}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CircularProgress.A,{size:"large",thickness:5})}))}))},Chip=__webpack_require__("./node_modules/@goshippo/components/esm/Chip/Chip.js"),RatingErrors_util=__webpack_require__("./app/pages/Orders/All/OrderDetailsPage/RatingErrors/util.ts"),esm_Card_Card=__webpack_require__("./node_modules/@goshippo/components/esm/Card/Card.js"),elevations=__webpack_require__("./node_modules/@goshippo/components/esm/styles/elevations.js"),Card_styled=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/Card/Card.styled.tsx"),StyledCard=(0,styled.Ay)((function(_a){_a.isSelected;var props=(0,tslib_es6.Tt)(_a,["isSelected"]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(esm_Card_Card.A,(0,tslib_es6.Cl)({},props))}))(Card_SelectableCard_templateObject_1||(Card_SelectableCard_templateObject_1=(0,tslib_es6.ue)(["\n  ",";\n  cursor: pointer;\n  &:hover {\n    box-shadow: ",";\n  }\n  &:focus {\n    box-shadow: 0px 0px 0px 4px ",";\n  }\n  &:focus-visible {\n    box-shadow: 0px 0px 0px 4px ",";\n    outline: none;\n  }\n"],["\n  ",";\n  cursor: pointer;\n  &:hover {\n    box-shadow: ",";\n  }\n  &:focus {\n    box-shadow: 0px 0px 0px 4px ",";\n  }\n  &:focus-visible {\n    box-shadow: 0px 0px 0px 4px ",";\n    outline: none;\n  }\n"])),(function(props){return props.isSelected?"":{backgroundColor:styles_colors.T.accent.background.success,borderColor:styles_colors.T.accent.foreground.success,borderWidth:2}}),elevations.$[2],styles_colors.T.borderFocus,styles_colors.T.borderFocus);const Card_SelectableCard=function(_a){var children=_a.children,handleKeyboardEvents=_a.handleKeyboardEvents,isSelected=_a.isSelected,rate=_a.rate,cardProps=(0,tslib_es6.Tt)(_a,["children","handleKeyboardEvents","isSelected","rate"]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(StyledCard,(0,tslib_es6.Cl)({isSelected:!isSelected,onKeyDown:function(e){handleKeyboardEvents&&rate&&handleKeyboardEvents(e,rate)},tabIndex:0},cardProps,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Card_styled.k1,{children})}))};var Card_SelectableCard_templateObject_1,CarrierIconMui=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/CarrierIconMui.tsx"),modules_utils=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/utils.ts");const CarrierRatesCard_AnalyticsWrapper=function(_a){var children=_a.children,className=_a.className,dataAnalytics=_a.dataAnalytics,dataCarrier=_a.dataCarrier,dataE2E=_a.dataE2E,isTestRate=_a.isTestRate;return(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className,"data-analytics":dataAnalytics,"data-carrier":dataCarrier,"data-e2e":dataE2E,"data-type":isTestRate?"test-rate":"live-rate"},{children}))};var ExpandLess=__webpack_require__("./node_modules/@mui/icons-material/esm/ExpandLess.js"),ExpandMore=__webpack_require__("./node_modules/@mui/icons-material/esm/ExpandMore.js"),Warning=__webpack_require__("./node_modules/@mui/icons-material/esm/Warning.js"),RetailRateContainerMui=(0,styled.Ay)(Stack.A,{shouldForwardProp:function(prop){return"clickable"!==prop}})(RateDetailExpandable_templateObject_1||(RateDetailExpandable_templateObject_1=(0,tslib_es6.ue)(["\n  flex-direction: row;\n  justify-content: space-between;\n  background-color: ",";\n  margin: 0.5rem -1rem -1rem;\n  padding: "," ",";\n  border-top: 1px solid ",";\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n\n  ","\n"],["\n  flex-direction: row;\n  justify-content: space-between;\n  background-color: ",";\n  margin: 0.5rem -1rem -1rem;\n  padding: "," ",";\n  border-top: 1px solid ",";\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n\n  ","\n"])),styles_colors.T.white,shippoTheme.A.spacing(1),shippoTheme.A.spacing(2),styles_colors.T.borders,(function(_a){return _a.clickable?"\n      &:hover {\n        background-color: ".concat(styles_colors.T.accent.background.success,";\n      }\n    "):""}));const CarrierRatesCard_RateDetailExpandable=function(_a){var UPSWarning=_a.UPSWarning,handleShowRateDetails=_a.handleShowRateDetails,showDetails=_a.showDetails,showMoreDetailsSection=_a.showMoreDetailsSection,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(RetailRateContainerMui,(0,tslib_es6.Cl)({clickable:!!showMoreDetailsSection,"data-testid":"rate-detail-expandable",onClick:showMoreDetailsSection?handleShowRateDetails:void 0},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",sx:{display:"flex"},variant:"body"},{children:showMoreDetailsSection?showDetails?(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[t("orders:calculateRates:rates:lessDetails"),(0,emotion_react_jsx_runtime_browser_esm.Y)(ExpandLess.A,{})]}):(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[t("orders:calculateRates:rates:moreDetails"),(0,emotion_react_jsx_runtime_browser_esm.Y)(ExpandMore.A,{})]}):""})),!!UPSWarning&&(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({direction:"row",spacing:1},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"body"},{children:UPSWarning})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Warning.A,{fontSize:"small",style:{color:styles_colors.T.accent.foreground.warning}})]}))]}))};var RateDetailExpandable_templateObject_1,RateWarningConstants=__webpack_require__("./app/pages/Orders/All/OrderDetailsPage/RatingErrors/RateWarningConstants.ts");const CarrierRatesCard_RateDetailsTerm=function(_a){var breakdown=_a.breakdown,currency=_a.currency,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",sx:{textAlign:"right"},variant:"body"},{children:(null==breakdown?void 0:breakdown.shouldTranslate)?t(breakdown.copy):breakdown.copy})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",sx:{textAlign:"right"},variant:"bodyEmphasized"},{children:t("translations:currency",{value:{currency_iso:(currency||constants_currency.q.USD).iso,value:breakdown.value}})}))]})};var renderableTerms=function(data){return Object.entries(data).filter((function(record){return"currency"!==record[0]}))};const CarrierRatesCard_RateDetails=function(_a){var noTrackingCopy=_a.noTrackingCopy,showTrackingUnavailable=_a.showTrackingUnavailable,surcharges=_a.surcharges,t=_a.t,warnings=_a.warnings;return(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({justifyItems:"flex-start",sx:{backgroundColor:"white",borderTop:"1px solid ".concat(styles_colors.T.borders),margin:"1rem -1rem -1rem",padding:"1rem"}},{children:[showTrackingUnavailable&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"div",variant:"bodyItalic"},{children:noTrackingCopy})),!!surcharges&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack.A,(0,tslib_es6.Cl)({sx:{columnGap:2,display:"inline-grid",gridTemplateColumns:"auto min-content",rowGap:1}},{children:renderableTerms(surcharges).map((function(_a,i){var _b=(0,tslib_es6.zs)(_a,2),breakdown=(_b[0],_b[1]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierRatesCard_RateDetailsTerm,{breakdown,currency:surcharges.currency||void 0,t},i)}))})),!!warnings.length&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack.A,{children:warnings.map((function(warning,idx){return function(warning,key){var linkCopy=warning.linkCopy,linkURL=warning.linkURL,message=warning.message,messageArgs=warning.messageArgs,title=t("orders:table:errors:warningTitle");return warning.kind!==RateWarningConstants.zt&&warning.kind!==RateWarningConstants.pn||(title=t("orders:table:errors:warningTitleUPS")),(0,emotion_react_jsx_runtime_browser_esm.FD)(react.Fragment,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({className:"mb-2",direction:"row"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Warning.A,{className:"mr-2",fontSize:"small",style:{color:styles_constants.Tj.macaroni600}}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"caption"},{children:title}))]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"body"},{children:[t(message,messageArgs)," ",!(!linkURL||!linkCopy)&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Link_Link.A,(0,tslib_es6.Cl)({color:"primary",href:linkURL,rel:"noopener",target:"_blank"},{children:t(linkCopy)}))]}))]},key)}(warning,idx.toString())}))})]}))};var ComposedCalculatedRateItem=(0,react.memo)((function(_a){var serviceLevelTerms,carrierAccount=_a.carrierAccount,dataAnalyticsContext=_a.dataAnalyticsContext,handleKeyboardEvents=_a.handleKeyboardEvents,isSelected=_a.isSelected,isUntrackable=_a.isUntrackable,rate=_a.rate,selectRate=_a.selectRate,shipmentId=_a.shipmentId,t=_a.t,warnings=_a.warnings,UPSWarnings=(0,RatingErrors_util.Lj)(warnings||[]).UPSWarnings,hasUPSWarning=!!UPSWarnings.length,upsWarningCardExpandableHeader=hasUPSWarning?(0,RatingErrors_util.KF)(t,UPSWarnings[0].kind||""):"",_b=(0,tslib_es6.zs)((0,react.useState)(!1),2),showDetails=_b[0],setShowDetails=_b[1],handleShowRateDetails=(0,react.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),setShowDetails(!showDetails)}),[showDetails]),amount=rate.amount,currency=rate.currency,estimatedDays=rate.estimatedDays,includedInsurancePrice=rate.includedInsurancePrice,provider=rate.provider,servicelevel=rate.servicelevel,test=rate.test,onClick=(0,react.useCallback)((function(){selectRate(shipmentId,rate)}),[shipmentId,rate,selectRate]),hasSurcharges=!!(serviceLevelTerms=servicelevel.terms)&&"string"!=typeof serviceLevelTerms,serviceLabelText=(0,Rate.$O)(rate),estimatedDaysTranslated=(0,modules_utils.gG)(estimatedDays,t),rateValueTranslatedNoInsurance=(0,modules_utils.WM)(String(Number(amount)-Number(includedInsurancePrice)),currency,t),noTrackingCopy=(0,Rate.CC)(rate)?t("orders:calculateRates:rates:info:noTracking",{provider:rate.provider}):"",showTrackingUnavailable=function(_a){var hasTrackingCopy=_a.hasTrackingCopy,isUntrackable=_a.isUntrackable;return hasTrackingCopy&&isUntrackable}({hasTrackingCopy:!!noTrackingCopy,isUntrackable:!!isUntrackable}),showMoreDetailsSection=function(_a){var hasSurcharges=_a.hasSurcharges,hasUPSWarning=_a.hasUPSWarning,showTrackingUnavailable=_a.showTrackingUnavailable;return hasSurcharges||showTrackingUnavailable||hasUPSWarning}({hasSurcharges,hasUPSWarning,showTrackingUnavailable}),showDetailBar=function(_a){var isSelected=_a.isSelected,showMoreDetailsSection=_a.showMoreDetailsSection;return isSelected&&showMoreDetailsSection}({isSelected:!!isSelected,showMoreDetailsSection}),surcharges=(0,react.useMemo)((function(){if("string"!=typeof servicelevel.terms)return servicelevel.terms}),[servicelevel]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(Card_SelectableCard,(0,tslib_es6.Cl)({"data-key":rate.objectId,"data-testid":"calculated-rates-list-item",handleKeyboardEvents,id:"".concat(rate.servicelevel.token,"-rate-card"),isSelected,onClick,rate},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(CarrierRatesCard_AnalyticsWrapper,(0,tslib_es6.Cl)({"data-pendo":"orders-rate-select",dataAnalytics:"".concat(dataAnalyticsContext,"-click-item"),dataCarrier:provider.toLowerCase(),dataE2E:"calculated-rate",isTestRate:test},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({direction:"row",justifyContent:"space-between"},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({alignItems:"center",direction:"row",gap:1,overflow:"hidden"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierIconMui.A,{provider,size:32}),(0,emotion_react_jsx_runtime_browser_esm.FD)(Box.A,(0,tslib_es6.Cl)({overflow:"hidden"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"body"},{children:serviceLabelText})),carrierAccount&&!carrierAccount.isShippoAccount&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Chip.A,{color:"info",iconVariant:null,label:carrierAccount.metadata||t("orders:carrierRatesCard:carrierNickname",{carrier:carrierAccount.carrier.name})}),test&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Chip.A,{color:"info","data-testid":"calculated-rates-item-test-chip",iconVariant:null,label:t("orders:table:testChipMessage")})]}))]})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({align:"right",component:"p",variant:"bodyEmphasized"},{children:rateValueTranslatedNoInsurance})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({align:"right",component:"p",variant:"body"},{children:estimatedDaysTranslated}))]})]})),showDetailBar&&(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierRatesCard_RateDetailExpandable,{UPSWarning:upsWarningCardExpandableHeader,handleShowRateDetails,showDetails,showMoreDetailsSection,t}),showDetails&&isSelected&&(0,emotion_react_jsx_runtime_browser_esm.Y)(CarrierRatesCard_RateDetails,{noTrackingCopy,showTrackingUnavailable,surcharges,t,warnings})]}))}))}));const CalculatedRatesItem=ComposedCalculatedRateItem;const RateList_RateList=function(_a){var attributeText=_a.attributeText,carrierAccountsMap=_a.carrierAccountsMap,dataAnalyticsContext=_a.dataAnalyticsContext,handleKeyboardEvents=_a.handleKeyboardEvents,isUntrackable=_a.isUntrackable,onSelectRate=_a.onSelectRate,rates=_a.rates,selectedRate=_a.selectedRate,shipment=_a.shipment,t=_a.t,warnings=_a.warnings;return rates.length&&shipment&&selectedRate?(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({"data-testid":"order-details-calculated-rates-list",gap:1},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"primary",component:"h3",variant:"h3"},{children:attributeText})),rates.map((function(rate){return(0,emotion_react_jsx_runtime_browser_esm.Y)(CalculatedRatesItem,{carrierAccount:carrierAccountsMap[rate.carrierAccount],dataAnalyticsContext,handleKeyboardEvents,isSelected:selectedRate.objectId===rate.objectId,isUntrackable,rate,selectRate:onSelectRate,shipmentId:shipment.objectId,t,warnings},rate.objectId)}))]})):null},OrderDetailsPage_RateList=RateList_RateList;var ComposedRateWarnings=(0,redux.Zz)(components_withAddressBook({appLocation:"order_details",name:addressBook.MQ}),(0,utils_translate.Tl)("orders"))((function(props){var addressFrom=props.addressFrom,addressTo=props.addressTo,batchEntryID=props.batchEntryID,orderID=props.orderID,t=props.t,warnings=props.warnings,addressBookContext=react.useContext(context.o);react.useEffect((function(){addressBookContext.initSelectedAddresses({sender:addressFrom,to:addressTo})}),[]);var handleOpenRecipientAddress=react.useCallback((function(){var _a;addressTo&&addressBookContext.selectAddress(addressBook.i1,addressTo),addressFrom&&addressBookContext.selectAddress(addressBook.y9,addressFrom);var orderSelection=((_a={})[orderID]=batchEntryID?[batchEntryID]:[],_a);addressBookContext.openEditAddress(addressBook.i1,orderSelection)}),[addressTo,addressFrom]),dedupedWarnings=(0,RatingErrors_util.Gz)(warnings),renderWarning=function(warning){var kind=warning.kind,linkCopy=warning.linkCopy,message=warning.message,messageArgs=warning.messageArgs;return kind===RateWarningConstants.pp?(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[t(message,messageArgs)," ",(0,emotion_react_jsx_runtime_browser_esm.Y)(Link_Link.A,(0,tslib_es6.Cl)({color:"secondary",onClick:handleOpenRecipientAddress,sx:{color:styles_colors.T.primary}},{children:t(linkCopy)}))]}):t(message,messageArgs)};return(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack.A,(0,tslib_es6.Cl)({gap:1,mb:1},{children:dedupedWarnings.map((function(warning){return(0,emotion_react_jsx_runtime_browser_esm.Y)(Alert.A,(0,tslib_es6.Cl)({severity:"warning"},{children:renderWarning(warning)}),(0,index_browser.Ak)())}))}))}));const RatingErrors_RateWarnings=ComposedRateWarnings;var RatingErrors_styles_templateObject_1,RatingErrors_styles_templateObject_2,hasRatingErrors=__webpack_require__("./app/pages/Orders/All/OrderDetailsPage/RatingErrors/hasRatingErrors.ts"),ErrorCTA=(0,emotion_styled_browser_esm.A)("div")(RatingErrors_styles_templateObject_1||(RatingErrors_styles_templateObject_1=(0,tslib_es6.ue)(["\n  font-weight: ",";\n  margin-top: 0.75rem;\n"],["\n  font-weight: ",";\n  margin-top: 0.75rem;\n"])),styles_constants.Wy.medium),ErrorList=(0,emotion_styled_browser_esm.A)("ul")(RatingErrors_styles_templateObject_2||(RatingErrors_styles_templateObject_2=(0,tslib_es6.ue)(["\n  list-style: disc;\n  padding-left: 1.25rem;\n  margin-top: 0.5rem;\n"],["\n  list-style: disc;\n  padding-left: 1.25rem;\n  margin-top: 0.5rem;\n"]))),RatingErrorsSwitch=function(_a){var batchEntry=_a.batchEntry,hasValidSenderAddress=_a.hasValidSenderAddress,history=_a.history,order=_a.order,rates=_a.rates,shipment=_a.shipment,t=_a.t,transaction=_a.transaction,_b=(0,hasRatingErrors.A)(order,batchEntry,shipment,transaction,rates,hasValidSenderAddress),hasExceededPackageWeightError=_b.hasExceededPackageWeightError,hasParcelWeightErrors=_b.hasParcelWeightErrors,hasPhoneNumberRequiredError=_b.hasPhoneNumberRequiredError,hasShipmentErrors=_b.hasShipmentErrors,showParcelError=_b.showParcelError,showRecipientAddressError=_b.showRecipientAddressError,showSenderAddressError=_b.showSenderAddressError;return _b.transactionHasErrors?(0,emotion_react_jsx_runtime_browser_esm.Y)(TransactionErrors,{t,transaction}):hasExceededPackageWeightError?(0,emotion_react_jsx_runtime_browser_esm.Y)(ExceededPackageWeightError,{batchEntryId:null==batchEntry?void 0:batchEntry.id,history,orderId:order.objectId}):(0,emotion_react_jsx_runtime_browser_esm.Y)(Errors,{hasParcelWeightErrors,hasPhoneNumberRequiredError,hasRates:rates.length>0,hasShipmentErrors,shipment,showParcelError,showRecipientAddressError,showSenderAddressError,t})},TransactionErrors=function(_a){var messages,t=_a.t,transaction=_a.transaction;return messages=transaction&&transaction.messages.length>0?transaction.messages.map((function(message){return message.text})):[t("orders:calculateRates:rates:errors:transactionFailure")],(0,react.useEffect)((function(){utils_observability.O.errorEvent("RATE_REFRESH_ORDER_DETAILS",{errorMessage:messages.join(", ")})}),[messages]),(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:messages.map((function(message){return(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorList,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({color:"primary",component:"li",variant:"body"},{children:[t("orders:table:errors:transactionFailedTitle"),". ",message]}))},message)}))})},ExceededPackageWeightError=function(_a){var batchEntryId=_a.batchEntryId,history=_a.history,orderId=_a.orderId;(0,react.useEffect)((function(){utils_observability.O.errorEvent("RATE_REFRESH_ORDER_DETAILS",{orderWeightExceeded:1})}),[]);var batchEntryUri=batchEntryId?"/shipments/".concat(batchEntryId):"";return(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorList,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"primary",component:"li",variant:"body"},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(utils_translate.x6,(0,tslib_es6.Cl)({i18nKey:"orders:calculateRates:rates:errors:order_weight_exceeded"},{children:["We cannot generate rates because the total order item weight is heavier than the total package weight. Please check your order items, and then update your"," ",(0,emotion_react_jsx_runtime_browser_esm.Y)(react_router_dom.N_,(0,tslib_es6.Cl)({to:"/orders/".concat(orderId).concat(batchEntryUri).concat(history.location.search)},{children:"package info"})),"."]}))}))})},Errors=function(_a){var hasParcelWeightErrors=_a.hasParcelWeightErrors,hasPhoneNumberRequiredError=_a.hasPhoneNumberRequiredError,hasRates=_a.hasRates,hasShipmentErrors=_a.hasShipmentErrors,shipment=_a.shipment,showParcelError=_a.showParcelError,showRecipientAddressError=_a.showRecipientAddressError,showSenderAddressError=_a.showSenderAddressError,t=_a.t;return(0,react.useEffect)((function(){utils_observability.O.errorEvent("RATE_REFRESH_ORDER_DETAILS",{parcelErrors:showParcelError?1:0,parcelWeightErrors:hasParcelWeightErrors?1:0,phoneNumberRequiredError:hasPhoneNumberRequiredError?1:0,recipientAddressErrors:showRecipientAddressError?1:0,senderAddressErrors:showSenderAddressError?1:0,shipmentErrorMessages:null==shipment?void 0:shipment.messages.map((function(message){return message.text})).join(", "),shipmentErrors:hasShipmentErrors?null==shipment?void 0:shipment.messages.length:0})}),[hasParcelWeightErrors,hasPhoneNumberRequiredError,hasShipmentErrors,shipment,showParcelError,showRecipientAddressError,showSenderAddressError]),(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorCTA,{children:hasShipmentErrors&&!hasRates?"There is an issue with your package":t("orders:calculateRates:rates:errors:title")}),(0,emotion_react_jsx_runtime_browser_esm.FD)(ErrorList,{children:[showRecipientAddressError&&(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({color:"primary",component:"li",variant:"body"},{children:[t("orders:calculateRates:rates:errors:recipient")," ",(0,emotion_react_jsx_runtime_browser_esm.Y)(Link_Link.A,(0,tslib_es6.Cl)({color:"primary",href:"#addressCard"},{children:t("orders:actions:single:jumpToError")}))]})),showParcelError&&(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({color:"primary",component:"li",variant:"body"},{children:[t("orders:calculateRates:rates:errors:parcel")," ",(0,emotion_react_jsx_runtime_browser_esm.Y)(Link_Link.A,(0,tslib_es6.Cl)({color:"primary",href:"#packageCard"},{children:t("orders:actions:single:jumpToError")}))]})),hasParcelWeightErrors&&(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({color:"primary",component:"li",variant:"body"},{children:[t("orders:calculateRates:rates:errors:parcelWeight")," ",(0,emotion_react_jsx_runtime_browser_esm.Y)(Link_Link.A,(0,tslib_es6.Cl)({color:"primary",href:"#packageCard"},{children:t("orders:actions:single:jumpToError")}))]})),showSenderAddressError&&(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({color:"primary",component:"li",variant:"body"},{children:[t("orders:calculateRates:rates:errors:sender")," ",(0,emotion_react_jsx_runtime_browser_esm.Y)(Link_Link.A,(0,tslib_es6.Cl)({color:"primary",href:"#addressCard"},{children:t("orders:actions:single:jumpToError")}))]})),hasPhoneNumberRequiredError&&(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({color:"primary",component:"li",variant:"body"},{children:[t("orders:calculateRates:rates:errors:senderPhoneNumber")," ",(0,emotion_react_jsx_runtime_browser_esm.Y)(Link_Link.A,(0,tslib_es6.Cl)({color:"primary",href:"#addressCard"},{children:t("orders:actions:single:jumpToError")}))]})),hasShipmentErrors&&!hasRates&&shipment&&shipment.messages.map((function(_a){var text=_a.text;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"primary",component:"li",variant:"body"},{children:text}),text)}))]})]})};const RatingErrors_RatingErrors=function(props){var batchEntry=props.batchEntry,hasValidSenderAddress=props.hasValidSenderAddress,order=props.order,rates=props.rates,shipment=props.shipment,t=props.t,transaction=props.transaction;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Alert.A,(0,tslib_es6.Cl)({severity:"warning",title:t("orders:table:errors:ratesUnavailable")},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(RatingErrorsSwitch,{batchEntry,hasValidSenderAddress,history:props.history,order,rates,shipment,t,transaction})}))};const RatingErrors_container=(0,redux.Zz)((0,es.Ng)((function(){var getOrderById=(0,orders_selectors.H4)(),getBatchEntryById=(0,batch_entry_selectors.Xv)(),getBatchEntryTransactionFromOrder=(0,batch_entry_composite_selectors.B6)();return function(state,ownProps){var batchEntryId=ownProps.batchEntryId,props={batchEntryId};return{batchEntry:batchEntryId?getBatchEntryById(state,props):null,hasValidSenderAddress:(0,user_selectors.Oz)(state),order:getOrderById(state,ownProps),rates:batchEntryId?(0,batch_entry_composite_selectors.jl)(state,props):[],shipment:batchEntryId?(0,batch_entry_composite_selectors.Qb)(state,props):null,transaction:batchEntryId?getBatchEntryTransactionFromOrder(state,props):null}}})),(0,utils_translate.Tl)("orders"),react_router.y)(RatingErrors_RatingErrors);var getRateWarnings=__webpack_require__("./app/pages/Orders/All/OrderDetailsPage/RatingErrors/getRateWarnings.ts"),LoadingRates=function(_a){var hasTimedoutOrders=_a.hasTimedoutOrders,selectedOrders=_a.selectedOrders,setHasTimedoutOrders=_a.setHasTimedoutOrders,t=_a.t;return(0,react.useEffect)((function(){utils_observability.O.startEvent("RATE_REFRESH_ORDER_DETAILS")}),[]),"boolean"==typeof hasTimedoutOrders&&setHasTimedoutOrders?(0,emotion_react_jsx_runtime_browser_esm.Y)(RateLoadingWithTimer,{hasTimedoutOrders,selectedOrders,setHasTimedoutOrders,t}):(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"flex flex-col items-center leading-2 pt-2"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Spinner.hQ,{})}))},ComposedCalculatedRates=(0,redux.Zz)((0,es.Ng)((function(){var getOrderById=(0,orders_selectors.H4)(),getBatchEntryById=(0,batch_entry_selectors.Xv)(),getIsBatchEntryProcessingShipment=(0,batch_entry_selectors.o1)(),getShipmentIsLoadingFromBatchEntry=(0,batch_entry_composite_selectors.Fu)(),getBatchEntryIsCompleted=(0,batch_entry_selectors.ku)(),getBatchEntryTransactionFromOrder=(0,batch_entry_composite_selectors.B6)();return function(state,ownProps){var batchEntryId=ownProps.batchEntryId,props={batchEntryId},isLoading=!(0,providers_selectors.X7)(state)||!getBatchEntryIsCompleted(state,props)&&!(0,batch_entry_selectors.lm)(state,props)&&(getIsBatchEntryProcessingShipment(state,props)||getShipmentIsLoadingFromBatchEntry(state,props));return{batchEntry:batchEntryId?getBatchEntryById(state,props):null,carrierAccountsMap:(0,carrier_accounts_selectors.Nf)(state),hasValidSenderAddress:(0,user_selectors.Oz)(state),isLoading,order:getOrderById(state,ownProps),registrationStatus:(0,batch_entry_composite_selectors.yu)(state,{batchEntryIds:[batchEntryId]}),transaction:batchEntryId?getBatchEntryTransactionFromOrder(state,props):null}}}),(function(dispatch){return{retryShipment:function(orderSelection){return dispatch((0,orders_actions.lN)(orderSelection))}}})),(0,utils_translate.Tl)("orders"),react_router.y)((function(props){var _a,_b,batchEntry=props.batchEntry,carrierAccountsMap=props.carrierAccountsMap,dataAnalytics=props.dataAnalytics,hasTimedoutOrders=props.hasTimedoutOrders,hasValidSenderAddress=props.hasValidSenderAddress,isLoading=props.isLoading,isUntrackable=props.isUntrackable,order=props.order,setHasTimedoutOrders=props.setHasTimedoutOrders,t=props.t,transaction=props.transaction,_c=hooks_useSingleCarrierRates(props.selectRate,null==batchEntry?void 0:batchEntry.id),rates=_c.rates,selectRateWithAccountCheck=_c.selectRateWithAccountCheck,selectedRate=_c.selectedRate,shipment=_c.shipment,calculatedRatesRef=(0,react.useRef)(null),handleKeyboardEvents=function(parentElementRef,selectRate,shipmentObjectId){var getCardArray=(0,react.useCallback)((function(parentElementRef){var cardNodelist=parentElementRef.querySelectorAll('[data-testid="calculated-rates-list-item"]');return Array.from(cardNodelist)}),[]),getFocusCardIndex=(0,react.useCallback)((function(e,cards){return cards.findIndex((function(card){return card.dataset.key===e.currentTarget.dataset.key}))}),[]),focusNextCard=(0,react.useCallback)((function(cards,focusCardIndex){focusCardIndex<cards.length-1&&cards[focusCardIndex+1].focus()}),[]),focusPreviousElement=(0,react.useCallback)((function(cards,focusCardIndex){focusCardIndex>0&&cards[focusCardIndex-1].focus()}),[]);return{handleKeyboardEvents:(0,react.useCallback)((function(e,rate){if("keydown"===e.type&&shipmentObjectId&&rate&&parentElementRef.current){var cards=getCardArray(parentElementRef.current),focusCardIndex=getFocusCardIndex(e,cards);switch(e.code){case"Enter":case"Space":e.preventDefault(),selectRate(shipmentObjectId,rate);break;case"ArrowDown":e.preventDefault(),focusNextCard(cards,focusCardIndex);break;case"ArrowUp":e.preventDefault(),focusPreviousElement(cards,focusCardIndex)}}}),[shipmentObjectId,parentElementRef])}}(calculatedRatesRef,selectRateWithAccountCheck,null==shipment?void 0:shipment.objectId).handleKeyboardEvents,orderID=order.objectId,batchEntryID=(null==batchEntry?void 0:batchEntry.id)||null,hasErrors=(0,hasRatingErrors.A)(order,batchEntry,shipment,transaction,rates,hasValidSenderAddress).hasErrors,_d=(0,Address.tS)(order,batchEntry),addressFrom=_d.addressFrom,addressTo=_d.addressTo,eelPfcEnabled=(0,useEELPFCRollout.y)(),warnings=(0,getRateWarnings.Ay)(order,batchEntry,selectedRate,eelPfcEnabled),nonUPSSurchargeWarnings=(0,RatingErrors_util.Lj)(warnings).nonUPSSurchargeWarnings,dataAnalyticsContext="".concat(dataAnalytics,"ServiceLevel"),batchEntryIds=props.batchEntry?[props.batchEntry.id]:[],orderSelection=((_a={})[props.order.objectId]=batchEntryIds,_a);(0,react.useEffect)((function(){hasErrors||(null==batchEntry?void 0:batchEntry.objectStatus)!==OrdersBatch.DO.PENDING||props.retryShipment(orderSelection)}),[null==batchEntry?void 0:batchEntry.objectStatus,hasErrors]),hooks_useTrackRateSelect(selectedRate,hasErrors,dataAnalytics);var sendTrackEvent=hooks_useSendTrackEvent();(0,react.useEffect)((function(){hasErrors||sendTrackEvent("App - All Rates Viewed",{areSavingsShown:!1,rateRequestLocation:dataAnalytics||""})}),[hasErrors]);var ratesToDisplay=(0,Rate.P2)(rates),hasWarnings=rates.length>0&&shipment,warningMessages=(0,react.useMemo)((function(){return(null==shipment?void 0:shipment.messages.filter(APIMessage.OR))||[]}),[shipment]);if((0,react.useEffect)((function(){isLoading||hasErrors||utils_observability.O.successEvent("RATE_REFRESH_ORDER_DETAILS",{resultsCount:rates.length,warningSourcesCount:hasWarnings?warningMessages.map((function(message){return message.source})).reduce((function(acc,cur){return acc[cur]?acc[cur]++:acc[cur]=1,acc}),{}):{}})}),[hasErrors,hasWarnings,isLoading,rates.length,warningMessages]),(0,react.useEffect)((function(){return function(){utils_observability.O.cancelEvent("RATE_REFRESH_ORDER_DETAILS")}}),[]),!hasErrors&&props.batchEntry){if(props.batchEntry.objectStatus===OrdersBatch.DO.PENDING)return null;if(props.batchEntry.objectStatus===OrdersBatch.DO.COMPLETE_TRANSACTION)return null;if(null===(_b=props.transaction)||void 0===_b?void 0:_b.trackingNumber)return null}var rateListProps={carrierAccountsMap,dataAnalyticsContext,handleKeyboardEvents,isUntrackable,onSelectRate:selectRateWithAccountCheck,selectedRate,shipment,t,warnings};return(0,emotion_react_jsx_runtime_browser_esm.Y)(ManualErrorBoundary.A,(0,tslib_es6.Cl)({onError:function(){utils_observability.O.errorEvent("RATE_REFRESH_ORDER_DETAILS",{errorMessage:"An error occurred. Please refresh the page.",requestFailed:!0})}},{children:hasErrors&&(0,emotion_react_jsx_runtime_browser_esm.Y)(RatingErrors_container,{batchEntryId:batchEntryID,orderId:orderID})||(0,emotion_react_jsx_runtime_browser_esm.Y)(components_GradientWrapper,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({"data-testid":"order-details-calculated-rates",gap:1},{children:[!!nonUPSSurchargeWarnings.length&&(0,emotion_react_jsx_runtime_browser_esm.Y)(RatingErrors_RateWarnings,{addressFrom,addressTo,batchEntryID,orderID,warnings:nonUPSSurchargeWarnings}),0===nonUPSSurchargeWarnings.length&&0===rates.length&&!isLoading&&(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"flex flex-col items-center leading-4 py-4"},{children:t("orders:table:errors:noRates")})),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({ref:calculatedRatesRef},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack.A,(0,tslib_es6.Cl)({gap:3},{children:ratesToDisplay.map((function(_a){var displayAttribute=_a.displayAttribute,rates=_a.rates;return(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderDetailsPage_RateList,(0,tslib_es6.Cl)({attributeText:t("orders:calculateRates:rates:attributes:".concat(displayAttribute)),rates},rateListProps),displayAttribute)}))}))})),isLoading&&(0,emotion_react_jsx_runtime_browser_esm.Y)(LoadingRates,{hasTimedoutOrders,selectedOrders:orderSelection,setHasTimedoutOrders,t}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentErrors,{messages:warningMessages,t})]}))})}))}));const OrderDetailsPage_CalculatedRates=ComposedCalculatedRates;var RatesCell_CaretIcon=(0,emotion_styled_browser_esm.A)("img")(RatesCell_templateObject_1||(RatesCell_templateObject_1=(0,tslib_es6.ue)(["\n  ","\n"],["\n  ","\n"])),(function(_a){return _a.isOpen?"transform: rotate(180deg)":"opacity: 0.2"})),ServiceIconContainer=(0,emotion_styled_browser_esm.A)("div")(RatesCell_templateObject_2||(RatesCell_templateObject_2=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),ProviderIcon=(0,emotion_styled_browser_esm.A)("img")(RatesCell_templateObject_3||(RatesCell_templateObject_3=(0,tslib_es6.ue)(["\n  height: 1.25rem;\n  width: 1.25rem;\n"],["\n  height: 1.25rem;\n  width: 1.25rem;\n"]))),SelectedRateButton=(0,emotion_styled_browser_esm.A)("button")(RatesCell_templateObject_4||(RatesCell_templateObject_4=(0,tslib_es6.ue)(["\n  ",";\n"],["\n  ",";\n"])),(function(_a){if(_a.isOpen)return"background-color: ".concat(styles_constants.Tj.sea50)})),RatesCell_ButtonContent=(0,emotion_styled_browser_esm.A)("span")(RatesCell_templateObject_5||(RatesCell_templateObject_5=(0,tslib_es6.ue)(["\n  grid-template-columns: 1.5rem 1fr 1.5rem;\n  gap: 0.5rem;\n"],["\n  grid-template-columns: 1.5rem 1fr 1.5rem;\n  gap: 0.5rem;\n"]))),NoRates=(0,emotion_styled_browser_esm.A)("div")(RatesCell_templateObject_6||(RatesCell_templateObject_6=(0,tslib_es6.ue)(["\n  padding: 0.875rem 0.5rem;\n  font-size: 0.8125rem;\n  line-height: 1.5rem;\n"],["\n  padding: 0.875rem 0.5rem;\n  font-size: 0.8125rem;\n  line-height: 1.5rem;\n"]))),LoadingRateContainer=(0,emotion_styled_browser_esm.A)("div")(RatesCell_templateObject_7||(RatesCell_templateObject_7=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),SelectedRateContainer=(0,emotion_styled_browser_esm.A)("div")(RatesCell_templateObject_8||(RatesCell_templateObject_8=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n  font-size: 0.8125rem;\n"],["\n  display: flex;\n  align-items: center;\n  font-size: 0.8125rem;\n"]))),LoadingRate=(0,emotion_styled_browser_esm.A)("div")(RatesCell_templateObject_9||(RatesCell_templateObject_9=(0,tslib_es6.ue)(["\n  padding-left: 0.3125rem;\n"],["\n  padding-left: 0.3125rem;\n"]))),SelectedRateContent=(0,emotion_styled_browser_esm.A)("div")(RatesCell_templateObject_10||(RatesCell_templateObject_10=(0,tslib_es6.ue)(["\n  color: ",";\n  font-size: 0.8125rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n  overflow: hidden;\n"],["\n  color: ",";\n  font-size: 0.8125rem;\n  line-height: 1.25rem;\n  font-weight: ",";\n  overflow: hidden;\n"])),styles_constants.Tj.fontColor,styles_constants.Wy.medium),RateTitle=(0,emotion_styled_browser_esm.A)("div")(RatesCell_templateObject_11||(RatesCell_templateObject_11=(0,tslib_es6.ue)(["\n  font-size: 0.875rem;\n  line-height: 1.5rem;\n  color: ",";\n"],["\n  font-size: 0.875rem;\n  line-height: 1.5rem;\n  color: ",";\n"])),styles_constants.Tj.gray1000),RatesSubtitle=(0,emotion_styled_browser_esm.A)("div")(RatesCell_templateObject_12||(RatesCell_templateObject_12=(0,tslib_es6.ue)(["\n  width: 100%;\n  margin-top: -0.5rem;\n  margin-bottom: 0.5rem;\n  color: ",";\n  font-size: 0.875rem;\n"],["\n  width: 100%;\n  margin-top: -0.5rem;\n  margin-bottom: 0.5rem;\n  color: ",";\n  font-size: 0.875rem;\n"])),styles_constants.Tj.gray500),RatesCell_RateDetails=(0,emotion_styled_browser_esm.A)("div")(RatesCell_templateObject_13||(RatesCell_templateObject_13=(0,tslib_es6.ue)(["\n  color: ",";\n  font-weight: ",";\n"],["\n  color: ",";\n  font-weight: ",";\n"])),styles_constants.Tj.gray700,styles_constants.Wy.normal),EstimatedDays=(0,emotion_styled_browser_esm.A)("span")(RatesCell_templateObject_14||(RatesCell_templateObject_14=(0,tslib_es6.ue)(["\n  margin-left: 0.5rem;\n  white-space: nowrap;\n"],["\n  margin-left: 0.5rem;\n  white-space: nowrap;\n"]))),WarningIconContainer=(0,emotion_styled_browser_esm.A)("img")(RatesCell_templateObject_15||(RatesCell_templateObject_15=(0,tslib_es6.ue)(["\n  margin-right: 0.5rem;\n"],["\n  margin-right: 0.5rem;\n"]))),CardContainer=(0,emotion_styled_browser_esm.A)("div")(RatesCell_templateObject_16||(RatesCell_templateObject_16=(0,tslib_es6.ue)(["\n  max-height: 440px;\n  overflow-y: auto;\n  max-width: 21.25rem;\n\n  /* hide scrollbar for different browsers */\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"],["\n  max-height: 440px;\n  overflow-y: auto;\n  max-width: 21.25rem;\n\n  /* hide scrollbar for different browsers */\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n  &::-webkit-scrollbar {\n    display: none;\n  }\n"])));const RatesCell_RatesCell=(0,redux.Zz)((0,es.Ng)((function(state,ownProps){if(!ownProps.batchEntry)return{};var batchEntry=ownProps.batchEntry;return{isUntrackable:(0,OrderBatchEntry.p2)(batchEntry)&&!!batchEntry.addressTo&&(0,Address.tQ)(batchEntry.addressTo),rates:(0,batch_entry_composite_selectors.jl)(state,{batchEntryId:ownProps.batchEntry.id}),selectedRate:(0,batch_entry_composite_selectors.aq)(state,{batchEntryId:ownProps.batchEntry.id})}}),(function(dispatch,ownProps){return{selectRate:function(rateObjectId,serviceLevelToken,shipmentObjectId,accountObjectId){var _a,orderSelection=((_a={})[ownProps.batchEntry.orderObjectId]=[ownProps.batchEntry.id],_a),trackingReference=TrackingHelper.U.getTrackingReference(types.Fd.name,"order_table",{rateIds:[rateObjectId]});dispatch(selectRate(shipmentObjectId,rateObjectId,!0,trackingReference,orderSelection,serviceLevelToken,accountObjectId))}}})),(0,utils_translate.Tl)(),react_router.y)((function(props){var _a,batchEntry=props.batchEntry,defaultServiceProvider=props.defaultServiceProvider,defaultServiceTitle=props.defaultServiceTitle,isLoading=props.isLoading,isUntrackable=props.isUntrackable,order=props.order,preferredServiceTitle=props.preferredServiceTitle,rates=props.rates,selectRate=props.selectRate,selectedRate=props.selectedRate,t=props.t,cost=order.shippingCost,currency=order.shippingCostCurrency,method=order.shippingMethod,_b=(0,tslib_es6.zs)(react.useState(!1),2),isRateSelectOpen=_b[0],setIsRateSelectOpen=_b[1];if(!isLoading&&rates&&0===rates.length)return(0,emotion_react_jsx_runtime_browser_esm.Y)(NoRates,{children:t("orders:table:noRates")});var warnings=(0,getRateWarnings.Ay)(order,batchEntry,selectedRate),selectedRateProvider=selectedRate?carriers.Ps[(0,Carrier.Z)(selectedRate.provider)]:defaultServiceProvider&&batchEntry?carriers.Ps[(0,Carrier.Z)(defaultServiceProvider)]:void 0,serviceLevelTitle=selectedRate?(0,Rate.$O)(selectedRate):preferredServiceTitle||(defaultServiceTitle&&batchEntry?defaultServiceTitle:void 0),buttonBackgroundReset=isRateSelectOpen?"":"bg-transparent";return(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({on:"click",onClose:function(){setIsRateSelectOpen(!1)},open:isRateSelectOpen,position:"bottom center",style:{margin:0,padding:0},trigger:(0,emotion_react_jsx_runtime_browser_esm.Y)(SelectedRateButton,(0,tslib_es6.Cl)({className:"h-full w-full border-none cursor-pointer rounded-none p-2 ".concat(buttonBackgroundReset),"data-analytics":"".concat("orders_table","ServiceLevel-click-button"),"data-pendo":"orders-rate-toggle",isOpen:isRateSelectOpen,onClick:function(){setIsRateSelectOpen(!isRateSelectOpen)}},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(RatesCell_ButtonContent,(0,tslib_es6.Cl)({className:"h-full w-full grid items-center text-left"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ServiceIconContainer,{children:!isLoading&&selectedRateProvider&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ProviderIcon,{alt:selectedRateProvider.name,src:selectedRateProvider.icon})}),(0,emotion_react_jsx_runtime_browser_esm.FD)(SelectedRateContent,(0,tslib_es6.Cl)({title:serviceLevelTitle},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(RateTitle,(0,tslib_es6.Cl)({className:styles_constants.xW.fulfilledOrderText},{children:!isLoading&&serviceLevelTitle})),(0,emotion_react_jsx_runtime_browser_esm.Y)(RatesCell_RateDetails,{children:function(){if(selectedRate){var estimatedDays=selectedRate.estimatedDays,ratePrice=t("translations:currency",{value:{currency_iso:selectedRate.currency,value:Number(selectedRate.amount)}}),estimatedDaysTranslated=estimatedDays?t("translations:day",{count:estimatedDays}):t("orders:calculateRates:rates:info:etaUnavailable");return(0,emotion_react_jsx_runtime_browser_esm.FD)(SelectedRateContainer,{children:[warnings.length>0&&(0,emotion_react_jsx_runtime_browser_esm.Y)(WarningIconContainer,{alt:"error",src:question_circle_yellow}),(0,emotion_react_jsx_runtime_browser_esm.Y)("span",{children:ratePrice}),(0,emotion_react_jsx_runtime_browser_esm.Y)(EstimatedDays,{children:estimatedDaysTranslated})]})}return(0,emotion_react_jsx_runtime_browser_esm.FD)(LoadingRateContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Spinner.hQ,{}),(0,emotion_react_jsx_runtime_browser_esm.Y)(LoadingRate,{children:t("orders:table:loadingRate")})]})}()}),(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomerShippingMethod.q,{shippingCost:cost,shippingCostCurrency:currency,shippingMethod:method})]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(RatesCell_CaretIcon,{isOpen:isRateSelectOpen,src:icons.jH})]}))})),wrapperClassName:"w-full h-full"},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(CardContainer,(0,tslib_es6.Cl)({className:"p-4"},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Tabs_ShipmentInfoCardTitle,(0,tslib_es6.Cl)({insideTable:!0},{children:[t("orders:calculateRates:rates:chooseRates"),rates&&!!rates.length&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Addons_RefreshRatesButton,{dataAnalytics:"".concat("orders_table","-refresh-rates-popup"),isLoading,orderSelection:(_a={},_a[order.objectId]=batchEntry?[batchEntry.id]:[],_a)})]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(RatesSubtitle,{children:t("orders:calculateRates:rates:transitTimeEstimated")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_OrderDetails,{orderId:order.objectId}),batchEntry&&(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderDetailsPage_CalculatedRates,{batchEntryId:batchEntry.id,dataAnalytics:"orders_table",isUntrackable,orderId:batchEntry.orderObjectId,selectRate:function(_a){var accountObjectId=_a.accountObjectId,rateObjectId=_a.rateObjectId,serviceLevelToken=_a.serviceLevelToken,shipmentObjectId=_a.shipmentObjectId;return selectRate(rateObjectId,serviceLevelToken,shipmentObjectId,accountObjectId)},shipmentId:batchEntry.shipmentObjectId})]}))}))}));var RatesCell_templateObject_1,RatesCell_templateObject_2,RatesCell_templateObject_3,RatesCell_templateObject_4,RatesCell_templateObject_5,RatesCell_templateObject_6,RatesCell_templateObject_7,RatesCell_templateObject_8,RatesCell_templateObject_9,RatesCell_templateObject_10,RatesCell_templateObject_11,RatesCell_templateObject_12,RatesCell_templateObject_13,RatesCell_templateObject_14,RatesCell_templateObject_15,RatesCell_templateObject_16,ErrorPreviewList=(0,emotion_styled_browser_esm.A)("ul")(ErrorsCellErrorList_templateObject_1||(ErrorsCellErrorList_templateObject_1=(0,tslib_es6.ue)(["\n  color: ",";\n  margin: 0;\n  padding: 0 0 5px;\n  font-weight: ",";\n"],["\n  color: ",";\n  margin: 0;\n  padding: 0 0 5px;\n  font-weight: ",";\n"])),styles_constants.Tj.gray700,styles_constants.Wy.normal),ErrorPreview=(0,emotion_styled_browser_esm.A)("li")(ErrorsCellErrorList_templateObject_2||(ErrorsCellErrorList_templateObject_2=(0,tslib_es6.ue)(["\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"],["\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"]))),ErrorsCellErrorList_ErrorList=(0,emotion_styled_browser_esm.A)("ul")(ErrorsCellErrorList_templateObject_3||(ErrorsCellErrorList_templateObject_3=(0,tslib_es6.ue)(["\n  list-style: disc;\n  padding-left: 24px;\n  margin-top: 8px;\n"],["\n  list-style: disc;\n  padding-left: 24px;\n  margin-top: 8px;\n"])));const ErrorsCell_ErrorsCellErrorList=(0,redux.Zz)((0,utils_translate.Tl)("orders"),react_router.y)((function(props){var errorList,addressFrom=props.addressFrom,addressTo=props.addressTo,batchEntry=props.batchEntry,editParcelOverlayIsOpen=props.editParcelOverlayIsOpen,errors=props.errors,i18n=props.i18n,isPreview=props.isPreview,order=props.order,setEditParcelOverlayIsOpen=props.setEditParcelOverlayIsOpen,t=props.t,addressBookContext=react.useContext(context.o),handleOpenCreateAddressModal=react.useCallback((function(evt){var _a;evt.stopPropagation(),evt.preventDefault();var orderSelection=((_a={})[order.objectId]=batchEntry?[batchEntry.id]:[],_a);addressBookContext.openCreateAddress(addressBook.i1,orderSelection)}),[order,batchEntry]),handleOpenEditAddressModal=react.useCallback((function(evt){var _a;evt.stopPropagation(),evt.preventDefault(),addressFrom&&addressBookContext.selectAddress(addressBook.y9,addressFrom),addressTo&&addressBookContext.selectAddress(addressBook.i1,addressTo);var orderSelection=((_a={})[order.objectId]=batchEntry?[batchEntry.id]:[],_a);addressBookContext.openEditAddress(addressBook.y9,orderSelection)}),[addressFrom,addressTo,order,batchEntry]),onOpenOverlay=function(){setEditParcelOverlayIsOpen(!0)},onCloseOverlay=function(){setEditParcelOverlayIsOpen(!1)},getErrorLink=function(error){return error===t("orders:table:errors:missingParcelInfo")?(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({on:"click",onClose:onCloseOverlay,onOpen:onOpenOverlay,open:editParcelOverlayIsOpen,position:"bottom center",style:{margin:0,padding:0},trigger:(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.tp,(0,tslib_es6.Cl)({onClick:onOpenOverlay},{children:t("orders:table:parcelNeeded")})),wrapperClassName:"w-full h-full inline"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(All_EditParcelOverlayPanel,{batchEntry,dataAnalyticsContext:"orders_table",onCancel:onCloseOverlay,onSave:onCloseOverlay,onSubmitForm:onCloseOverlay,order})})):error===t("orders:table:errors:missingRecipientAddress")?(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.tp,(0,tslib_es6.Cl)({onClick:handleOpenCreateAddressModal},{children:t("orders:table:addRecipient")})):error===t("orders:calculateRates:rates:errors:senderPhoneNumber")?(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.tp,(0,tslib_es6.Cl)({onClick:handleOpenEditAddressModal},{children:t("orders:table:editSender")})):void 0},renderErrors=function(){return errors.map((function(error){return function(error){var ListItem=isPreview?ErrorPreview:"li";if("string"==typeof error)return(0,emotion_react_jsx_runtime_browser_esm.FD)(ListItem,{children:[error," ",!isPreview&&getErrorLink(error)]},"".concat(error));if(error.hasOwnProperty("code")){var nonJSXError=error,translatePath="orders:calculateRates:rates:errors:".concat(nonJSXError.code),errorText=i18n.exists(translatePath)?t("orders:table:errors:packageWeight"):function(error){switch(error.kind){case"APIError":return error.message;case"APIMessage":return error.text}}(nonJSXError);return(0,emotion_react_jsx_runtime_browser_esm.Y)(ListItem,{children:errorText},"".concat(nonJSXError.code))}return(0,emotion_react_jsx_runtime_browser_esm.Y)(ListItem,{children:error},"JSX-".concat(error))}(error)}))};return(0,emotion_react_jsx_runtime_browser_esm.Y)(react.Fragment,{children:isPreview?(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorPreviewList,{children:(errorList=[],errors.length<3?errorList=renderErrors():(errorList.push(renderErrors()[0]),errorList.push((0,emotion_react_jsx_runtime_browser_esm.Y)("li",{children:t("orders:table:errors:plusMore",{count:errors.length-1})},"plus-1"))),errorList)}):(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorsCellErrorList_ErrorList,{children:renderErrors()})})}));var ErrorsCellErrorList_templateObject_1,ErrorsCellErrorList_templateObject_2,ErrorsCellErrorList_templateObject_3,ErrorsCell_ServiceIconContainer=(0,emotion_styled_browser_esm.A)("div")(ErrorsCell_templateObject_1||(ErrorsCell_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  align-items: center;\n"],["\n  display: flex;\n  align-items: center;\n"]))),ErrorsCell_RateTitle=(0,emotion_styled_browser_esm.A)("div")(ErrorsCell_templateObject_2||(ErrorsCell_templateObject_2=(0,tslib_es6.ue)(["\n  color: ",";\n  font-weight: ",";\n  font-size: 0.875rem;\n  line-height: 1.5rem;\n"],["\n  color: ",";\n  font-weight: ",";\n  font-size: 0.875rem;\n  line-height: 1.5rem;\n"])),styles_constants.Tj.gray1000,styles_constants.Wy.medium),ErrorsCell_IconContainer=(0,emotion_styled_browser_esm.A)("img")(ErrorsCell_templateObject_3||(ErrorsCell_templateObject_3=(0,tslib_es6.ue)(["\n  width: 1.5rem;\n  height: 1rem;\n"],["\n  width: 1.5rem;\n  height: 1rem;\n"]))),ErrorTitle=(0,emotion_styled_browser_esm.A)("div")(ErrorsCell_templateObject_4||(ErrorsCell_templateObject_4=(0,tslib_es6.ue)(["\n  font-weight: ",";\n"],["\n  font-weight: ",";\n"])),styles_constants.Wy.medium),ErrorContainer=(0,emotion_styled_browser_esm.A)("div")(ErrorsCell_templateObject_5||(ErrorsCell_templateObject_5=(0,tslib_es6.ue)(["\n  padding: 0 0.5rem;\n"],["\n  padding: 0 0.5rem;\n"]))),RateContentContainer=(0,emotion_styled_browser_esm.A)("div")(ErrorsCell_templateObject_6||(ErrorsCell_templateObject_6=(0,tslib_es6.ue)([""],[""]))),RateContent=(0,emotion_styled_browser_esm.A)("div")(ErrorsCell_templateObject_7||(ErrorsCell_templateObject_7=(0,tslib_es6.ue)(["\n  display: flex;\n"],["\n  display: flex;\n"]))),ErrorsCell_ProviderIcon=(0,emotion_styled_browser_esm.A)("img")(ErrorsCell_templateObject_8||(ErrorsCell_templateObject_8=(0,tslib_es6.ue)(["\n  height: 1.25rem;\n  width: 1.25rem;\n"],["\n  height: 1.25rem;\n  width: 1.25rem;\n"]))),WarningMessageContainer=(0,emotion_styled_browser_esm.A)("div")(ErrorsCell_templateObject_9||(ErrorsCell_templateObject_9=(0,tslib_es6.ue)(["\n  display: grid;\n  grid-template-columns: 30px 1fr;\n  align-items: center;\n"],["\n  display: grid;\n  grid-template-columns: 30px 1fr;\n  align-items: center;\n"])));const ErrorsCell_ErrorsCell=(0,redux.Zz)((0,es.Ng)(null,(function(dispatch){return{fetchOrders:function(page,filters,fetchCount,showOnlyHidden,orderStatus,sort,sortBy,orderBy){return dispatch((0,orders_actions.Gb)("order_table",page,filters,fetchCount,showOnlyHidden,orderStatus,sort,sortBy,orderBy))}}})),(0,utils_translate.Tl)("orders"),react_router.y)((function(props){var _a,batchEntry=props.batchEntry,children=props.children,defaultCarrierHashMap=props.defaultCarrierHashMap,errors=props.errors,history=props.history,order=props.order,t=props.t,title=props.title,_b=(0,Address.eu)(order,batchEntry||void 0),addressFrom=_b.addressFrom,addressTo=_b.addressTo,_c=(0,tslib_es6.zs)(react.useState(!1),2),isRateSelectOpen=_c[0],setIsRateSelectOpen=_c[1],_d=(0,tslib_es6.zs)(react.useState(!1),2),editParcelOverlayIsOpen=_d[0],setEditParcelOverlayIsOpen=_d[1],mappedServiceLevelsByToken=(0,es.d4)(providers_selectors.cW),userDefaultServiceLevel=(0,es.d4)(user_selectors.Fh),onClosePopover=function(){setIsRateSelectOpen(!1)},openOrderScreen=function(){var url="/orders/".concat(order.objectId);batchEntry&&(url="".concat(url,"/shipments/").concat(batchEntry.id)),history.push("".concat(url).concat(history.location.search))},serviceLevelAccount=function(){if(0!==Object.keys(mappedServiceLevelsByToken).length){if(null==batchEntry?void 0:batchEntry.preferredServiceLevelToken)return function(dataSet){if(null==dataSet?void 0:dataSet.provider_name){var hashMap=carriers.Ps[(0,Carrier.Z)(null==dataSet?void 0:dataSet.provider_name)];return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},hashMap),{title:null==dataSet?void 0:dataSet.name})}}((0,types_ServiceLevel.Zd)({accountId:null==batchEntry?void 0:batchEntry.preferredAccountObjectID,mappedServiceLevels:mappedServiceLevelsByToken,token:null==batchEntry?void 0:batchEntry.preferredServiceLevelToken}));if(defaultCarrierHashMap&&userDefaultServiceLevel){var defaultServiceLevelAccount=(0,types_ServiceLevel.Zd)({accountId:null==userDefaultServiceLevel?void 0:userDefaultServiceLevel.accountId,mappedServiceLevels:mappedServiceLevelsByToken,token:null==userDefaultServiceLevel?void 0:userDefaultServiceLevel.token});return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},defaultCarrierHashMap),{title:defaultServiceLevelAccount?null==defaultServiceLevelAccount?void 0:defaultServiceLevelAccount.name:""})}}}(),buttonBackgroundReset=isRateSelectOpen?"":"bg-transparent";return(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({on:"click",onClose:onClosePopover,onOpen:function(){setIsRateSelectOpen(!0)},open:isRateSelectOpen||editParcelOverlayIsOpen,position:"bottom center",trigger:(0,emotion_react_jsx_runtime_browser_esm.Y)(SelectedRateButton,(0,tslib_es6.Cl)({className:"h-full w-full border-none cursor-pointer rounded-none p-2 ".concat(buttonBackgroundReset),isOpen:isRateSelectOpen,onClick:function(){setIsRateSelectOpen(!isRateSelectOpen)}},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(RatesCell_ButtonContent,(0,tslib_es6.Cl)({className:"h-full w-full grid items-center text-left"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorsCell_ServiceIconContainer,{children:serviceLevelAccount?(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorsCell_ProviderIcon,{alt:null==serviceLevelAccount?void 0:serviceLevelAccount.name,src:null==serviceLevelAccount?void 0:serviceLevelAccount.icon}):(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorsCell_IconContainer,{alt:"error",src:question_circle_gray})}),(0,emotion_react_jsx_runtime_browser_esm.FD)(RateContentContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorsCell_RateTitle,{children:(null==serviceLevelAccount?void 0:serviceLevelAccount.title)||title}),(0,emotion_react_jsx_runtime_browser_esm.FD)(RateContent,{children:[!serviceLevelAccount||(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorsCell_IconContainer,{alt:"error",src:question_circle_gray}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorsCell_ErrorsCellErrorList,{addressFrom,addressTo,batchEntry,errors,isPreview:!0,order,setEditParcelOverlayIsOpen})]}),children,(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomerShippingMethod.q,{shippingCost:order.shippingCost,shippingCostCurrency:order.shippingCostCurrency,shippingMethod:order.shippingMethod})]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(RatesCell_CaretIcon,{isOpen:isRateSelectOpen,src:icons.jH})]}))})),wrapperClassName:"w-full h-full"},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(CardContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(FlexContainer.Ay,(0,tslib_es6.Cl)({flexDirection:FlexContainer.bo.Row,horizontalAlign:FlexContainer.wq.SpaceBetween},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorTitle,{children:t("orders:calculateRates:rates:chooseService")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Addons_RefreshRatesButton,{dataAnalytics:"".concat("orders_table","-refresh-rates-popup"),isLoading:!1,orderSelection:(_a={},_a[order.objectId]=batchEntry?[batchEntry.id]:[],_a)})]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Message._j,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(WarningMessageContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorsCell_IconContainer,{alt:"error",src:question_circle_yellow}),(0,emotion_react_jsx_runtime_browser_esm.FD)(ErrorContainer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorTitle,{children:t("orders:table:errors:ratesUnavailableBecause")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ErrorsCell_ErrorsCellErrorList,{addressFrom,addressTo,batchEntry,editParcelOverlayIsOpen,errors,isPreview:!1,order,setEditParcelOverlayIsOpen})]})]})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ServiceLevel_ServiceLevelNoRate,{batchEntry,closePopover:onClosePopover,order}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Tabs_OrderDetails,{orderId:order.objectId}),!serviceLevelAccount&&(0,emotion_react_jsx_runtime_browser_esm.Y)(FlexContainer.Ay,(0,tslib_es6.Cl)({flexDirection:FlexContainer.bo.Row,horizontalAlign:FlexContainer.wq.FlexEnd},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(components_Button.jn,(0,tslib_es6.Cl)({dataPendo:"package-save",onClick:function(evt){evt.stopPropagation(),openOrderScreen()}},{children:t("orders:actions:single:viewOrder")}))}))]})}))}));var ErrorsCell_templateObject_1,ErrorsCell_templateObject_2,ErrorsCell_templateObject_3,ErrorsCell_templateObject_4,ErrorsCell_templateObject_5,ErrorsCell_templateObject_6,ErrorsCell_templateObject_7,ErrorsCell_templateObject_8,ErrorsCell_templateObject_9;const BatchEntryCell_ErrorsCell=ErrorsCell_ErrorsCell,BatchEntryCell_RatesCell=RatesCell_RatesCell;var TrackingInfo=(0,emotion_styled_browser_esm.A)("div")(TrackingCell_templateObject_1||(TrackingCell_templateObject_1=(0,tslib_es6.ue)(["\n  line-height: 1.1875rem;\n  color: ",";\n  font-size: 0.875rem;\n  font-weight: ",";\n"],["\n  line-height: 1.1875rem;\n  color: ",";\n  font-size: 0.875rem;\n  font-weight: ",";\n"])),styles_constants.Tj.gray700,styles_constants.Wy.normal),TrackingCell_ProviderIcon=(0,emotion_styled_browser_esm.A)("img")(TrackingCell_templateObject_2||(TrackingCell_templateObject_2=(0,tslib_es6.ue)(["\n  width: 1.25rem;\n  height: 1.25rem;\n  margin-right: 0.75rem;\n"],["\n  width: 1.25rem;\n  height: 1.25rem;\n  margin-right: 0.75rem;\n"]))),CopyIcon=(0,emotion_styled_browser_esm.A)("img")(TrackingCell_templateObject_3||(TrackingCell_templateObject_3=(0,tslib_es6.ue)(["\n  width: 1rem;\n  height: 1rem;\n  margin-left: 0.5rem;\n  cursor: pointer;\n"],["\n  width: 1rem;\n  height: 1rem;\n  margin-left: 0.5rem;\n  cursor: pointer;\n"]))),TrackingNumber=(0,emotion_styled_browser_esm.A)("div")(TrackingCell_templateObject_4||(TrackingCell_templateObject_4=(0,tslib_es6.ue)(["\n  margin-top: 0.25rem;\n  word-break: break-word;\n"],["\n  margin-top: 0.25rem;\n  word-break: break-word;\n"]))),TrackingCell=function(_super){function TrackingCell(props){var _this=_super.call(this,props)||this;return _this.handleCopy=function(){var _a,_b,_c,trackingNumber=_this.trackingNumberRef.current;trackingNumber.contentEditable="true",trackingNumber.focus(),document.execCommand("selectAll"),document.execCommand("copy"),trackingNumber.contentEditable="false",null===(_a=getSelection())||void 0===_a||_a.empty(),_this.setState({showCopySuccess:!0}),setTimeout((function(){_this.setState({showCopySuccess:!1})}),3e3),(0,segment.u4)(segment.sV.tracking_status_viewed,{carrier:null===(_b=_this.props.rate)||void 0===_b?void 0:_b.provider,shipment_id:null===(_c=_this.props.rate)||void 0===_c?void 0:_c.shipment})},_this.trackingNumberRef=react.createRef(),_this.state={showCopySuccess:!1},_this}return(0,tslib_es6.C6)(TrackingCell,_super),TrackingCell.prototype.render=function(){var _a,_b=this.props,rate=_b.rate,t=_b.t,trackingNumber=_b.trackingNumber,showCopySuccess=this.state.showCopySuccess,icon=(null==rate?void 0:rate.provider)&&(null===(_a=carriers.Ay.find((function(x){return x.name===rate.provider})))||void 0===_a?void 0:_a.icon);return(0,emotion_react_jsx_runtime_browser_esm.Y)("button",(0,tslib_es6.Cl)({className:"flex items-center h-full cursor-pointer bg-transparent border-none text-left m-0 p-0",onClick:this.handleCopy},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Popup.A,(0,tslib_es6.Cl)({inverted:!0,open:showCopySuccess,position:"top center",size:"mini",trigger:(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"flex flex-row items-center mx-0.5 p-2"},{children:[rate&&rate.providerImage200&&(0,emotion_react_jsx_runtime_browser_esm.Y)(TrackingCell_ProviderIcon,{className:"self-center",src:icon||rate.providerImage200}),(0,emotion_react_jsx_runtime_browser_esm.FD)(TrackingInfo,(0,tslib_es6.Cl)({className:"flex flex-col"},{children:[rate&&(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:[rate.provider," Tracking"]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(TrackingNumber,(0,tslib_es6.Cl)({ref:this.trackingNumberRef},{children:trackingNumber}))]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(CopyIcon,{alt:"Click to copy tracking number to your clipboard",className:"self-center",src:icons.nJ})]}))},{children:t("table.clipboard")}))}))},TrackingCell}(react.PureComponent);var TrackingCell_templateObject_1,TrackingCell_templateObject_2,TrackingCell_templateObject_3,TrackingCell_templateObject_4;const BatchEntryCell_TrackingCell=(0,utils_translate.Tl)("orders")(TrackingCell);var BatchEntryCell_common_templateObject_1,ImageContainer=(0,emotion_styled_browser_esm.A)("div")(BatchEntryCell_common_templateObject_1||(BatchEntryCell_common_templateObject_1=(0,tslib_es6.ue)(["\n  width: 2rem;\n"],["\n  width: 2rem;\n"]))),BatchEntryCell_IconContainer=(0,emotion_styled_browser_esm.A)("div")(BatchEntryCell_templateObject_1||(BatchEntryCell_templateObject_1=(0,tslib_es6.ue)(["\n  height: 1.25rem;\n  width: 1.25rem;\n  background-color: ",";\n  box-shadow: 0 2px 4px 0 ",";\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  border-radius: 50%;\n  margin-right: 0.75rem;\n"],["\n  height: 1.25rem;\n  width: 1.25rem;\n  background-color: ",";\n  box-shadow: 0 2px 4px 0 ",";\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  border-radius: 50%;\n  margin-right: 0.75rem;\n"])),styles_constants.Tj.white,styles_constants.Tj.gray50),FulfilledText=(0,emotion_styled_browser_esm.A)("div")(BatchEntryCell_templateObject_2||(BatchEntryCell_templateObject_2=(0,tslib_es6.ue)(["\n  font-size: 0.875rem;\n  line-height: 1.5rem;\n"],["\n  font-size: 0.875rem;\n  line-height: 1.5rem;\n"]))),BatchEntryCellComponent=function(_super){function BatchEntryCellComponent(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.getDefaultServiceLevel=function(){var _a=_this.props,mappedServiceLevelsByToken=_a.mappedServiceLevelsByToken,userDefaultServiceLevel=_a.userDefaultServiceLevel;if(null==userDefaultServiceLevel?void 0:userDefaultServiceLevel.token){var serviceLevelAccount=(0,types_ServiceLevel.Zd)({accountId:null==userDefaultServiceLevel?void 0:userDefaultServiceLevel.accountId,mappedServiceLevels:mappedServiceLevelsByToken,token:null==userDefaultServiceLevel?void 0:userDefaultServiceLevel.token});return null==serviceLevelAccount?void 0:serviceLevelAccount.name}},_this.getErrors=function(transaction){var t=_this.props.t;return transaction.messages.length>0?transaction.messages:[t("orders:table:errors:transactionFailedMessage")]},_this.getPreferredServiceLevel=function(){var _a=_this.props,batchEntry=_a.batchEntry,mappedServiceLevelsByToken=_a.mappedServiceLevelsByToken;if(null==batchEntry?void 0:batchEntry.preferredServiceLevelToken){var serviceLevel=(0,types_ServiceLevel.Zd)({accountId:null==batchEntry?void 0:batchEntry.preferredAccountObjectID,mappedServiceLevels:mappedServiceLevelsByToken,token:null==batchEntry?void 0:batchEntry.preferredServiceLevelToken});return null==serviceLevel?void 0:serviceLevel.name}},_this.renderFulfilledExternally=function(){var t=_this.props.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({className:"h-full w-full flex justify-start items-center cursor-pointer p-2"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ImageContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(BatchEntryCell_IconContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"",src:icon_check_gray})})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(FulfilledText,{children:t("orders:table:fulfilledOutside")})]}))},_this}return(0,tslib_es6.C6)(BatchEntryCellComponent,_super),BatchEntryCellComponent.prototype.render=function(){var _a,_b=this.props,batchEntry=_b.batchEntry,hasValidSenderAddress=_b.hasValidSenderAddress,isLoading=_b.isLoading,needNewRates=_b.needNewRates,order=_b.order,shipment=_b.shipment,t=_b.t,transaction=_b.transaction,userDefaultServiceLevel=_b.userDefaultServiceLevel,rates=order.rates,errors=(0,orderValidation.u)(order,batchEntry||void 0),_c=(0,Address.tS)(order,batchEntry),addressFrom=_c.addressFrom,addressTo=_c.addressTo,hasPhoneNumberRequiredError=(0,CustomsDeclaration.e8)({addressFrom,addressTo}).hasPhoneNumberRequiredError,defaultServiceTitle=this.getDefaultServiceLevel(),preferredServiceTitle=this.getPreferredServiceLevel(),defaultCarrierHashMap=userDefaultServiceLevel?carriers.Ps[(0,Carrier.Z)(userDefaultServiceLevel.provider)]:void 0;if((0,Order.Gy)(order))return this.renderFulfilledExternally();if((0,batchEntryRendering.lo)(order,batchEntry||void 0)){var transactions=order.transactions;if(!transactions)return null;var oldExperienceTransaction_1=(0,batchEntryRendering.GE)(transactions,batchEntry||void 0);if(!oldExperienceTransaction_1)return null;if(oldExperienceTransaction_1.status===Transaction.x8.ERROR)return(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"h-full w-full flex justify-start items-center p-2"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(BatchEntryCell_ErrorsCell,{batchEntry,errors:this.getErrors(oldExperienceTransaction_1),isLoading,order,title:t("orders:table:errors:transactionFailedTitle")})}));var rate=rates.find((function(x){return x.objectId===oldExperienceTransaction_1.rate}));return(0,emotion_react_jsx_runtime_browser_esm.Y)(BatchEntryCell_TrackingCell,{rate,trackingNumber:oldExperienceTransaction_1.trackingNumber})}var packageErrors=(0,orderValidation.c)(t,hasValidSenderAddress,hasPhoneNumberRequiredError,order,batchEntry||void 0,addressFrom);if(errors.push.apply(errors,(0,tslib_es6.fX)([],(0,tslib_es6.zs)(packageErrors),!1)),errors.length>0)return(0,emotion_react_jsx_runtime_browser_esm.Y)(BatchEntryCell_ErrorsCell,{batchEntry,defaultCarrierHashMap,errors,isLoading,order,orderObjectId:order.objectId,title:t("orders:table:errors:noRates")});if(!batchEntry&&!isLoading)return null;if(needNewRates)return(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"h-full w-full flex justify-start items-center p-2",role:"button"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Addons_RefreshRatesButton,(0,tslib_es6.Cl)({dataAnalytics:"".concat("orders_table","-refresh-rates-stale"),isLoading,orderSelection:(_a={},_a[order.objectId]=batchEntry?[batchEntry.id]:[],_a)},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomerShippingMethod.q,{shippingCost:order.shippingCost,shippingCostCurrency:order.shippingCostCurrency,shippingMethod:order.shippingMethod})}))}));if(batchEntry&&transaction){if(transaction.status===Transaction.x8.ERROR)return(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"h-full w-full flex justify-start items-center p-2"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(BatchEntryCell_ErrorsCell,{batchEntry,errors:this.getErrors(transaction),isLoading,order,title:t("orders:table:errors:transactionFailedTitle")})}));rate=rates.find((function(x){return x.objectId===transaction.rate}));if(transaction.trackingNumber)return(0,emotion_react_jsx_runtime_browser_esm.Y)(BatchEntryCell_TrackingCell,{rate,trackingNumber:transaction.trackingNumber})}return(0,batchEntryRendering.MY)(batchEntry,shipment)?(0,emotion_react_jsx_runtime_browser_esm.Y)(BatchEntryCell_ErrorsCell,{batchEntry,errors:shipment.messages,isLoading,order,title:t("orders:table:errors:noRates")}):(0,emotion_react_jsx_runtime_browser_esm.Y)(BatchEntryCell_RatesCell,{batchEntry,defaultServiceProvider:null==userDefaultServiceLevel?void 0:userDefaultServiceLevel.provider,defaultServiceTitle,isLoading,order,preferredServiceTitle})},BatchEntryCellComponent}(react.PureComponent);var BatchEntryCell_templateObject_1,BatchEntryCell_templateObject_2;const OrdersTable_BatchEntryCell=(0,redux.Zz)((0,es.Ng)((function(){var getDoesBatchEntryNeedNewRates=(0,batch_entry_selectors.Vw)(),getBatchEntryTransactionFromOrder=(0,batch_entry_composite_selectors.B6)();return function(state,ownProps){var batchEntry=ownProps.batchEntry,shippingLoadingStates=(0,shipments_selectors.Rm)(state);return{batchEntry,defaultSenderAddress:(0,user_selectors.GA)(state),hasValidSenderAddress:(0,user_selectors.Oz)(state),isLoading:!batchEntry||!(0,batch_entry_selectors.GX)(batchEntry||void 0)&&((0,batch_entry_selectors.Kk)(batchEntry||void 0)||(0,batch_entry_composite_selectors.D9)(shippingLoadingStates,batchEntry)),mappedServiceLevelsByToken:(0,providers_selectors.cW)(state),needNewRates:batchEntry&&getDoesBatchEntryNeedNewRates(state,{batchEntryId:batchEntry.id}),rates:(null==batchEntry?void 0:batchEntry.id)?(0,batch_entry_composite_selectors.jl)(state,{batchEntryId:batchEntry.id}):[],shipment:(null==batchEntry?void 0:batchEntry.shipmentObjectId)?(0,shipments_selectors.Zb)(state,{shipmentId:batchEntry.shipmentObjectId}):null,transaction:batchEntry?getBatchEntryTransactionFromOrder(state,{batchEntryId:batchEntry.id}):null,userDefaultServiceLevel:(0,user_selectors.Fh)(state)}}}),(function(dispatch){return{retryShipment:function(orderSelection){return dispatch((0,orders_actions.lN)(orderSelection))}}})),(0,utils_translate.Tl)("orders"),react_router.y)(BatchEntryCellComponent);var baseRowStyle=(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_1||(OrdersTable_templateObject_1=(0,tslib_es6.ue)(["\n  height: 100%;\n  min-height: ",";\n  max-height: 5.5rem;\n"],["\n  height: 100%;\n  min-height: ",";\n  max-height: 5.5rem;\n"])),styles_constants.df),CellContent=(0,emotion_styled_browser_esm.A)("div")(OrdersTable_templateObject_2||(OrdersTable_templateObject_2=(0,tslib_es6.ue)(["\n  min-height: ",";\n"],["\n  min-height: ",";\n"])),styles_constants.df),HeaderCheckboxLabel=(0,emotion_styled_browser_esm.A)("label")(OrdersTable_templateObject_3||(OrdersTable_templateObject_3=(0,tslib_es6.ue)(["\n  min-height: 3rem;\n"],["\n  min-height: 3rem;\n"]))),CellCheckboxLabel=(0,emotion_styled_browser_esm.A)("label")(OrdersTable_templateObject_4||(OrdersTable_templateObject_4=(0,tslib_es6.ue)(["\n  min-height: ",";\n"],["\n  min-height: ",";\n"])),styles_constants.df),rowBorder=(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_5||(OrdersTable_templateObject_5=(0,tslib_es6.ue)(["\n  border-bottom: 1px solid ",";\n"],["\n  border-bottom: 1px solid ",";\n"])),styles_constants.Tj.gray400),borderTop=(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_6||(OrdersTable_templateObject_6=(0,tslib_es6.ue)(["\n  border-top: 1px solid ",";\n"],["\n  border-top: 1px solid ",";\n"])),styles_constants.Tj.gray400),rowNoBorder=(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_7||(OrdersTable_templateObject_7=(0,tslib_es6.ue)(["\n  border-bottom: 0;\n"],["\n  border-bottom: 0;\n"]))),fulfilledOrderRow=(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_8||(OrdersTable_templateObject_8=(0,tslib_es6.ue)(["\n  background-color: ",";\n  /* overrides specific to make all text gray and lighter */\n  ."," {\n    font-size: 0.875rem;\n    font-weight: ",";\n    color: ",";\n  }\n"],["\n  background-color: ",";\n  /* overrides specific to make all text gray and lighter */\n  ."," {\n    font-size: 0.875rem;\n    font-weight: ",";\n    color: ",";\n  }\n"])),styles_colors.T.backgroundDeemphasized,styles_constants.xW.fulfilledOrderText,styles_constants.Wy.normal,styles_constants.Tj.gray700),orderCheckboxBaseCellCss=(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_9||(OrdersTable_templateObject_9=(0,tslib_es6.ue)(["\n  /* we can remove this !important when the table cell's :first-of-type is removed */\n  padding-left: 0 !important;\n  width: 1.5rem;\n"],["\n  /* we can remove this !important when the table cell's :first-of-type is removed */\n  padding-left: 0 !important;\n  width: 1.5rem;\n"]))),orderCheckboxHeaderCss=(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_10||(OrdersTable_templateObject_10=(0,tslib_es6.ue)(["\n  ",";\n  padding: 0;\n"],["\n  ",";\n  padding: 0;\n"])),orderCheckboxBaseCellCss),orderCheckboxCellCss=(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_11||(OrdersTable_templateObject_11=(0,tslib_es6.ue)(["\n  ",";\n"],["\n  ",";\n"])),orderCheckboxBaseCellCss),splitChildCheckbox=(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_12||(OrdersTable_templateObject_12=(0,tslib_es6.ue)(["\n  ",";\n  background: "," !important;\n"],["\n  ",";\n  background: "," !important;\n"])),orderCheckboxBaseCellCss,styles_constants.Tj.gray100),invalidRowCss=(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_13||(OrdersTable_templateObject_13=(0,tslib_es6.ue)(["\n  /* we can remove these !important declarations when the table row's styling isn't embedded in the table row element */\n  background-color: "," !important;\n"],["\n  /* we can remove these !important declarations when the table row's styling isn't embedded in the table row element */\n  background-color: "," !important;\n"])),styles_constants.Tj.form.warningBackground),splitParentCheckbox=(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_14||(OrdersTable_templateObject_14=(0,tslib_es6.ue)(["\n  ",";\n"],["\n  ",";\n"])),splitChildCheckbox),OrdersTable=function(_super){function OrdersTable(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.isRowSelected=function(index,selectedOrders,tableData,orderIdToBatchEntryIdMap){var data=tableData[index];switch(data.kind){case"single":return!!selectedOrders[data.order.objectId];case"partial-parent":return(selectedOrders[data.order.objectId]||[]).length===(orderIdToBatchEntryIdMap[data.order.objectId]||[]).length;case"partial-child":return(selectedOrders[data.order.objectId]||[]).includes(data.batchEntry.id)}},_this.checkFulfilledRow=function(customStyle,ordersRenderData,rowIndex){var _a=_this.props,orderHasValidBatchEntryToBuyObject=_a.orderHasValidBatchEntryToBuyObject,orderIdToBatchEntryIdMap=_a.orderIdToBatchEntryIdMap,selectedOrders=_a.selectedOrders,tableData=_a.tableData,validBatchEntriesObject=_a.validBatchEntriesObject,batchEntry=ordersRenderData.batchEntry,order=ordersRenderData.order,isSelected=_this.isRowSelected(rowIndex,selectedOrders,tableData,orderIdToBatchEntryIdMap),isInvalidForPurchase=!1;"partial-parent"===ordersRenderData.kind&&isSelected?isInvalidForPurchase=!orderHasValidBatchEntryToBuyObject[order.objectId]:isSelected&&(isInvalidForPurchase=!batchEntry||batchEntry&&!validBatchEntriesObject[batchEntry.id]);var invalidStyle=isInvalidForPurchase?invalidRowCss:"",isEntryFulfilled=(0,batchEntryRendering.WO)(order,(0,batchEntryRendering.s0)(ordersRenderData),batchEntry||void 0),borderTopStyle="single"===ordersRenderData.kind&&isEntryFulfilled?borderTop:"";return isEntryFulfilled?(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_15||(OrdersTable_templateObject_15=(0,tslib_es6.ue)(["\n        ","\n        ","\n        ","\n        ","\n        ","\n      "],["\n        ","\n        ","\n        ","\n        ","\n        ","\n      "])),baseRowStyle,customStyle,fulfilledOrderRow,borderTopStyle,invalidStyle):(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_16||(OrdersTable_templateObject_16=(0,tslib_es6.ue)(["\n      ","\n      ","\n      ","\n    "],["\n      ","\n      ","\n      ","\n    "])),baseRowStyle,customStyle,invalidStyle)},_this.getCustomRowStyles=function(_a){var _b,data=_a.data,rowIndex=_a.rowIndex;switch(data.kind){case"partial-parent":return _this.checkFulfilledRow(rowNoBorder,data,rowIndex);case"partial-child":if((null===(_b=data.batchEntry)||void 0===_b?void 0:_b.partialFulfillmentRank)<data.order.totalPartialFulfillments)return _this.checkFulfilledRow(rowNoBorder,data,rowIndex)}return _this.checkFulfilledRow(rowBorder,data,rowIndex)},_this.getParentOrderObjectIndexFromRowIndex=function(index){var data=_this.props.tableData[index];switch(data.kind){case"single":case"partial-parent":return index;case"partial-child":return index-data.batchEntry.partialFulfillmentRank}},_this.getSelectedIndexes=function(tableData,selectedOrders,orderIdToBatchEntryIdMap){return tableData.reduce((function(list,_,index){return _this.isRowSelected(index,selectedOrders,tableData,orderIdToBatchEntryIdMap)?(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(list),!1),[index],!1):list}),[])},_this.getTableColumns=function(isOldExpChosen){return isOldExpChosen?_this.ordersTableColumns:_this.newExperienceColumns},_this.handleCheckboxSelect=function(index){return function(){_this.handleSelectOrder(index)}},_this.handleRowClick=function(rowIndex){return _this.openOrderScreen(rowIndex)},_this.handleSelectOrder=function(index){var _a,_b,_c,_d=_this.props,orderIdToBatchEntryIdMap=_d.orderIdToBatchEntryIdMap,data=_d.tableData[index];switch(data.kind){case"single":return _this.props.selectOrder(((_a={})[data.order.objectId]=orderIdToBatchEntryIdMap[data.order.objectId]||[],_a));case"partial-parent":return _this.props.selectOrder(((_b={})[data.order.objectId]=orderIdToBatchEntryIdMap[data.order.objectId]||[],_b));case"partial-child":return _this.props.selectOrder(((_c={})[data.order.objectId]=[data.batchEntry.id],_c))}},_this.handleSplitOrderCheckboxClick=function(event){event.stopPropagation()},_this.newExperienceColumns=[{cell:function(_a){var _b=_a.data,kind=_b.kind,order=_b.order,rowIndex=_a.rowIndex,objectId=order.objectId,checkboxID="orders-table-row-checkbox-".concat(rowIndex);return"partial-child"===kind?(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"h-full flex items-center justify-center cursor-pointer"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("img",{alt:"",src:icon_splitment_arrow})})):(0,emotion_react_jsx_runtime_browser_esm.Y)(CellCheckboxLabel,(0,tslib_es6.Cl)({className:"flex items-center justify-center cursor-pointer",htmlFor:checkboxID},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderCheckbox_container,{dataPendo:"orders-select-row",id:checkboxID,onChange:_this.handleCheckboxSelect(rowIndex),orderObjectId:objectId})}))},customCellStyles:function(_a){switch(_a.data.kind){case"partial-parent":return splitParentCheckbox;case"partial-child":return splitChildCheckbox;default:return orderCheckboxCellCss}},customHeaderStyles:orderCheckboxHeaderCss,header:function(){var checkboxID="orders-table-select-all-checkbox";return(0,emotion_react_jsx_runtime_browser_esm.Y)(HeaderCheckboxLabel,(0,tslib_es6.Cl)({className:"flex items-center justify-center cursor-pointer pl-1 pr-1",htmlFor:checkboxID},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(SelectAllOrders_container,{dataPendo:"orders-select-all",id:checkboxID})}))},noPadding:!0,onCellClick:noop.A},{cell:function(_a){var data=_a.data,rowIndex=_a.rowIndex;return(0,emotion_react_jsx_runtime_browser_esm.Y)(cells_OrderInfoCell,{data,onSplitOrderCheckboxChange:_this.handleCheckboxSelect,onSplitOrderCheckboxClick:_this.handleSplitOrderCheckboxClick,rowIndex})},header:function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:_this.props.t("orders:table:headers:order")})},minWidth:"9rem",noPadding:!0},{cell:function(_a){var _b,_c=_a.data,batchEntry=_c.batchEntry,kind=_c.kind,order=_c.order;switch(kind){case"single":case"partial-child":var addressTo=(0,Address.tS)(order,batchEntry).addressTo;return!(0,Order.Gy)(order)||batchEntry||addressTo?(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomerInfo,{address:addressTo,orderSelection:(_b={},_b[order.objectId]=batchEntry?[batchEntry.id]:[],_b),shortenedAddress:!0}):null;case"partial-parent":return null}},customCellStyles:(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_17||(OrdersTable_templateObject_17=(0,tslib_es6.ue)(["\n        &:hover {\n          a:first-of-type {\n            text-decoration: underline;\n          }\n        }\n      "],["\n        &:hover {\n          a:first-of-type {\n            text-decoration: underline;\n          }\n        }\n      "]))),header:_this.props.t("orders:table:headers:customer"),minWidth:"10.5rem",noPadding:!0},{cell:function(_a){var data=_a.data;return"partial-parent"===data.kind?null:(0,emotion_react_jsx_runtime_browser_esm.Y)(LineItemsNew,{batchEntry:data.batchEntry,order:data.order})},header:_this.props.t("orders:table:headers:items"),minWidth:"8.5rem",noPadding:!0},{cell:function(_a){var data=_a.data;return"partial-parent"===data.kind||(0,Order.Gy)(data.order)&&!data.batchEntry?null:(0,Order.Pt)(data.order)&&!data.batchEntry?(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({className:"p-2  h-full flex items-center"},{children:"No package details"})):(0,emotion_react_jsx_runtime_browser_esm.Y)(cells_OrderParcelInfo,{batchEntry:data.batchEntry,order:data.order})},header:_this.props.t("orders:table:headers:parcelInfo"),minWidth:"11.5rem",noPadding:!0},{cell:function(_a){var data=_a.data;return"partial-parent"===data.kind?null:(0,emotion_react_jsx_runtime_browser_esm.Y)(ManualErrorBoundary.A,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CellContent,(0,tslib_es6.Cl)({className:"flex h-full justify-start items-center"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(OrdersTable_BatchEntryCell,{batchEntry:data.batchEntry,order:data.order})}))})},cursor:"auto",header:_this.props.t("orders:table:headers:rates"),minWidth:"14.5rem",noPadding:!0,onCellClick:noop.A},{cell:function(_a){var data=_a.data;return"partial-parent"===data.kind?(0,emotion_react_jsx_runtime_browser_esm.Y)(CellContent,(0,tslib_es6.Cl)({className:"flex h-full items-center"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(All_ParentOrderActionMenu,{hideOrder:_this.props.hideOrder,kind:data.kind,openTransactionModal:_this.props.openTransactionModal,order:data.order,toggleInvalidAddressModal:_this.props.toggleInvalidAddressModal})})):(0,emotion_react_jsx_runtime_browser_esm.Y)(CellContent,(0,tslib_es6.Cl)({className:"flex h-full items-center"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(All_OrderActionMenu,{hideOrder:_this.props.hideOrder,openOrderNoteModal:_this.props.openOrderNoteModal,openTransactionModal:_this.props.openTransactionModal,ordersRenderData:data,toggleInvalidAddressModal:_this.props.toggleInvalidAddressModal})}))},customCellStyles:(0,emotion_react_browser_esm.AH)(OrdersTable_templateObject_18||(OrdersTable_templateObject_18=(0,tslib_es6.ue)(["\n        padding-left: 4px !important;\n      "],["\n        padding-left: 4px !important;\n      "]))),header:All_LabelHeader,minWidth:"10rem",noPadding:!0}],_this.openOrderScreen=function(index){var _a=_this.props,history=_a.history,orderIdToBatchEntryIdMap=_a.orderIdToBatchEntryIdMap,data=_a.tableData[index],orderId=data.order.objectId,orderDetailScreenPath="/orders/".concat(orderId);switch(data.kind){case"single":(batchEntryId=orderIdToBatchEntryIdMap[orderId][0])&&(orderDetailScreenPath+="/shipments/".concat(batchEntryId));break;case"partial-parent":var batchEntryId=orderIdToBatchEntryIdMap[orderId][0];orderDetailScreenPath+="/shipments/".concat(batchEntryId);break;case"partial-child":orderDetailScreenPath+="/shipments/".concat(data.batchEntry.id)}history.push(orderDetailScreenPath)},_this.ordersTableColumns=[{cell:function(_a){var order=_a.data.order,rowIndex=_a.rowIndex;return(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderCheckbox_container,{dataPendo:"orders-select-row",onChange:_this.handleCheckboxSelect(rowIndex),orderObjectId:order.objectId})},header:function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(SelectAllOrders_container,{dataPendo:"orders-select-all"})},onCellClick:_this.handleSelectOrder,width:"20px"},{cell:function(_a){var order=_a.data.order;return(0,emotion_react_jsx_runtime_browser_esm.Y)(OrderNumberWithImage,{order})},header:_this.props.t("orders:table:headers:number"),noRightPadding:!0,width:"50px"},{cell:function(_a){var order=_a.data.order;return(0,emotion_react_jsx_runtime_browser_esm.Y)(react.Fragment,{children:order.placedAt.format("L")})},header:function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:_this.props.t("orders:table:headers:date")})},width:"70px"},{cell:function(_a){var order=_a.data.order;return order.toAddress&&order.toAddress.country?(0,emotion_react_jsx_runtime_browser_esm.Y)(CountryFlag.A,{country:order.toAddress.country.iso2}):null},header:"",noRightPadding:!0,width:"10px"},{cell:function(_a){var order=_a.data.order;return(0,emotion_react_jsx_runtime_browser_esm.Y)(CustomerInfo,{address:order.toAddress,shortenedAddress:!0})},header:_this.props.t("orders:table:headers:customer"),width:"115px"},{cell:function(_a){var order=_a.data.order;return(0,emotion_react_jsx_runtime_browser_esm.Y)(LineItems,{currency:order.currency||"USD",data:order.lineItems,total:(0,Order.Mp)(order)?parseFloat(order.totalPrice):void 0})},header:_this.props.t("orders:table:headers:items"),width:"20%"},{cell:function(_a){var order=_a.data.order;return(0,emotion_react_jsx_runtime_browser_esm.Y)(cells_ShippingMethod,{data:order})},header:_this.props.t("orders:table:headers:shipping"),width:"20%"},{cell:function(_a){var order=_a.data.order;return(0,emotion_react_jsx_runtime_browser_esm.Y)(cells_OrderNotes,{notes:order.notes})},header:"",noRightPadding:!0,width:"25px"},{cell:function(_a){var order=_a.data.order;return(0,emotion_react_jsx_runtime_browser_esm.Y)(cells_OrderPaymentStatus,{order})},header:"",noLeftPadding:!0,noRightPadding:!0,width:"25px"},{cell:function(_a){var order=_a.data.order;return(0,emotion_react_jsx_runtime_browser_esm.Y)(cells_OrderFulfillmentStatus,{order})},header:"",noLeftPadding:!0,noRightPadding:!0,width:"25px"},{cell:function(_a){var order=_a.data.order;return(0,emotion_react_jsx_runtime_browser_esm.Y)(cells_OrderError,{onErrorClick:_this.props.onOrderErrorClick,order})},header:"",noLeftPadding:!0,width:"27px"},{cell:function(_a){var order=_a.data.order;return(0,emotion_react_jsx_runtime_browser_esm.Y)(All_SingleOrderActions,{hideOrder:_this.props.hideOrder,openTransactionModal:_this.props.openTransactionModal,order,toggleInvalidAddressModal:_this.props.toggleInvalidAddressModal})},header:function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(All_LabelHeader,{label:_this.props.t("orders:table:headers:label")})},width:"150px"}],_this}return(0,tslib_es6.C6)(OrdersTable,_super),OrdersTable.prototype.componentDidMount=function(){var _a=this.props,handleFetchServiceLevelsByAccount=_a.handleFetchServiceLevelsByAccount,isServiceLevelsRequestInitiated=_a.isServiceLevelsRequestInitiated;this.context.initSelectedAddresses({to:null}),isServiceLevelsRequestInitiated||handleFetchServiceLevelsByAccount()},OrdersTable.prototype.render=function(){var tableColumns=this.getTableColumns(!1),selectedIndexes=this.getSelectedIndexes(this.props.tableData,this.props.selectedOrders,this.props.orderIdToBatchEntryIdMap);return(0,emotion_react_jsx_runtime_browser_esm.Y)(Table_Table,{columnVerticalAlignment:"middle",columns:tableColumns,customRowStyles:this.getCustomRowStyles,data:this.props.tableData,message:this.props.tableMessage,messageTag:"orders-fetch-new",onMessageClick:this.props.onMessageClick,onRowClick:this.handleRowClick,rowClickTag:"orders-select-row-click",selectedIndexes})},OrdersTable.contextType=context.o,OrdersTable}(react.PureComponent);(0,redux.Zz)((0,es.Ng)((function(state){return{allOrderIds:(0,orders_selectors.zF)(state),getOrdersLoading:(0,orders_selectors.RQ)(state),isServiceLevelsRequestInitiated:(0,providers_selectors.Hk)(state),orderHasValidBatchEntryToBuyObject:(0,batch_entry_composite_selectors.Tl)(state),orderIdToBatchEntryIdMap:(0,batch_entry_selectors.jU)(state),selectedOrders:(0,orders_selectors.Li)(state),tableData:(0,batch_entry_composite_selectors.mh)(state),validBatchEntriesObject:(0,batch_entry_composite_selectors.do)(state)}}),(function(dispatch){return{handleFetchServiceLevelsByAccount:function(){return dispatch(fetchServiceLevelsByAccount())},selectOrder:function(selection){return dispatch((0,orders_actions.PE)(selection,!0))}}})),(0,utils_translate.Tl)("orders"),react_router.y,components_withAddressBook({appLocation:"order_table",name:"orders-table"}))(OrdersTable);var OrdersTable_templateObject_1,OrdersTable_templateObject_2,OrdersTable_templateObject_3,OrdersTable_templateObject_4,OrdersTable_templateObject_5,OrdersTable_templateObject_6,OrdersTable_templateObject_7,OrdersTable_templateObject_8,OrdersTable_templateObject_9,OrdersTable_templateObject_10,OrdersTable_templateObject_11,OrdersTable_templateObject_12,OrdersTable_templateObject_13,OrdersTable_templateObject_14,OrdersTable_templateObject_15,OrdersTable_templateObject_16,OrdersTable_templateObject_17,OrdersTable_templateObject_18,orderErrors=__webpack_require__("./app/pages/Orders/Blackbeard/Drawers/LabelPurchaseDrawer/orderErrors.ts"),useLabelPurchaseAddresses=function(){var _a=useAddressBook("orders-table"),addresses=_a.addresses,clearAddress=_a.clearAddress,initializeAddressBook=_a.initializeAddressBook,onAddressBookConsumerMounted=_a.onAddressBookConsumerMounted,_b=function(initSelectedAddresses,addresses,clearAddress,selectAddress){var selectedCount=(0,es.d4)(orders_selectors.BE),selectedOrders=(0,es.d4)(orders_selectors.Li),addressesFromOrderSelection=(0,es.d4)(batch_entry_composite_selectors.DC),isMultipleSenderAddressesSelected=(0,es.d4)(batch_entry_composite_selectors.Lc),isMultipleReturnAddressesSelected=(0,es.d4)(batch_entry_composite_selectors._7),isMultipleSenderAddressesSelectedRef=(0,react.useRef)(isMultipleSenderAddressesSelected),isMultipleReturnAddressesSelectedRef=(0,react.useRef)(isMultipleReturnAddressesSelected);return(0,react.useEffect)((function(){initSelectedAddresses({return:getAddressFromAddressBook(addressesFromOrderSelection.returnAddresses[0],addresses),sender:getAddressFromAddressBook(addressesFromOrderSelection.senderAddresses[0],addresses)},!1)}),[]),(0,react.useEffect)((function(){isMultipleSenderAddressesSelectedRef.current!==isMultipleSenderAddressesSelected&&(isMultipleSenderAddressesSelected?clearAddress(addressBook.y9):selectAddress(addressBook.y9,getAddressFromAddressBook(addressesFromOrderSelection.senderAddresses[0],addresses)),isMultipleSenderAddressesSelectedRef.current=isMultipleSenderAddressesSelected)}),[isMultipleSenderAddressesSelected]),(0,react.useEffect)((function(){isMultipleReturnAddressesSelectedRef.current!==isMultipleReturnAddressesSelected&&(isMultipleReturnAddressesSelected?clearAddress(addressBook.lj):selectAddress(addressBook.lj,getAddressFromAddressBook(addressesFromOrderSelection.returnAddresses[0],addresses)),isMultipleReturnAddressesSelectedRef.current=isMultipleReturnAddressesSelected)}),[isMultipleReturnAddressesSelected]),{addressesFromOrderSelection,isMultipleReturnAddressesSelected,isMultipleSenderAddressesSelected,selectedCount,selectedOrders}}(initializeAddressBook,addresses,clearAddress,_a.selectAddress),addressesFromOrderSelection=_b.addressesFromOrderSelection,isMultipleReturnAddressesSelected=_b.isMultipleReturnAddressesSelected,isMultipleSenderAddressesSelected=_b.isMultipleSenderAddressesSelected;return(0,react.useEffect)(onAddressBookConsumerMounted,[]),{addressesFromOrderSelection,isMultipleReturnAddressesSelected,isMultipleSenderAddressesSelected}},useConditionalFieldsFlags=function(_a){var batchEntryId=_a.batchEntryId,recipient=_a.recipient,sender=_a.sender,eelPfcEnabled=(0,useEELPFCRollout.y)(),selectedRate=(0,es.d4)((function(state){return batchEntryId?(0,batch_entry_composite_selectors.aq)(state,{batchEntryId}):null}));return{requireEELPFC:eelPfcEnabled&&"USPS"===(null==selectedRate?void 0:selectedRate.provider),showB13A:isSenderAddressCA(sender),showEELPFC:isSenderAddressUS(sender),showEORI:isSenderOrRecipientUKorEU({recipient,sender})}},isSenderAddressUS=function(sender){var address=sender.batchEntryAddress||sender.orderAddress;return!!address&&(address.country===constants_countries.Xr.US.iso2||address&&address.country===constants_countries.Xr.US.iso2&&(0,states.B2)(address.state))},isSenderOrRecipientUKorEU=function(_a){var recipient=_a.recipient,sender=_a.sender,senderAddress=sender.batchEntryAddress||sender.orderAddress,recipientAddress=recipient.batchEntryAddress||recipient.orderAddress;return!(!senderAddress&&!recipientAddress)&&(countries.R$.includes(null==senderAddress?void 0:senderAddress.country)||(null==senderAddress?void 0:senderAddress.country)===constants_countries.Xr.GB.iso2||countries.R$.includes(null==recipientAddress?void 0:recipientAddress.country)||(null==recipientAddress?void 0:recipientAddress.country)===constants_countries.Xr.GB.iso2)},isSenderAddressCA=function(sender){var address=sender.batchEntryAddress||sender.orderAddress;return!!address&&(address.country===constants_countries.Xr.CA.iso2&&!!states.OB[address.state])},useSingleOrderAndBatchEntry=function(selectedOrders){var isBulk=(0,react.useMemo)((function(){return Object.keys(selectedOrders).length>1||!!Object.values(selectedOrders).find((function(batchEntryIds){return batchEntryIds.length>1}))}),[selectedOrders]),getOrderById=(0,orders_selectors.H4)(),orderIdObject=(0,react.useMemo)((function(){if(isBulk)return{orderId:"-1"};var orderIds=Object.keys(selectedOrders);return orderIds&&orderIds[0]?{orderId:orderIds[0]}:{orderId:"-1"}}),[isBulk,selectedOrders]),firstOrder=(0,es.d4)((function(state){return getOrderById(state,orderIdObject)})),getBatchEntryById=(0,batch_entry_selectors.Xv)(),batchEntryIdSelector=(0,react.useMemo)((function(){if(isBulk||!firstOrder)return{batchEntryId:-1};var batchEntryIds=Object.values(selectedOrders);return batchEntryIds[0]?{batchEntryId:batchEntryIds[0][0]||-1}:{batchEntryId:-1}}),[firstOrder,isBulk,selectedOrders]),firstBatchEntry=(0,es.d4)((function(state){return getBatchEntryById(state,batchEntryIdSelector)})),batchEntry=(0,react.useMemo)((function(){if(!isBulk&&firstBatchEntry)return firstBatchEntry.parcel?(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},firstBatchEntry),{parcel:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},firstBatchEntry.parcel),{useImportedOrderWeight:firstBatchEntry.useImportedWeight})}):firstBatchEntry}),[isBulk,firstBatchEntry]),order=(0,react.useMemo)((function(){if(!isBulk)return firstOrder&&firstOrder.parcel&&batchEntry?(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},firstOrder),{parcel:(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},firstOrder.parcel),{useImportedOrderWeight:batchEntry.useImportedWeight})}):firstOrder}),[batchEntry,firstOrder,isBulk]),batchEntryIsCompleted=(0,es.d4)((function(state){return(0,batch_entry_selectors.Uv)(state,batchEntryIdSelector)})),batchEntryHasTransactionRequestFailed=(0,es.d4)((function(state){return(0,batch_entry_selectors.lm)(state,batchEntryIdSelector)})),batchEntryIsLoading=function(batchEntry,batchEntryIsCompleted,batchEntryHasTransactionRequestFailed,batchEntryIdSelector){var batchEntryIsProcessingShipment=(0,es.d4)((function(state){return(0,batch_entry_selectors.Kl)(state,batchEntryIdSelector)})),shipmentIsLoadingFromBatchEntry=(0,es.d4)((function(state){return(0,batch_entry_composite_selectors.vc)(state,batchEntryIdSelector)})),isLoadingOrder=(0,es.d4)(orders_selectors.JF),isServiceLevelsRequestComplete=(0,es.d4)(providers_selectors.X7);return(0,react.useMemo)((function(){return batchEntry&&!batchEntryIsCompleted&&!batchEntryHasTransactionRequestFailed&&(batchEntryIsProcessingShipment||shipmentIsLoadingFromBatchEntry)||isLoadingOrder||!isServiceLevelsRequestComplete}),[batchEntry,batchEntryIsCompleted,batchEntryHasTransactionRequestFailed,batchEntryIsProcessingShipment,shipmentIsLoadingFromBatchEntry,isLoadingOrder,isServiceLevelsRequestComplete])}(batchEntry,batchEntryIsCompleted,batchEntryHasTransactionRequestFailed,batchEntryIdSelector);return{batchEntry,batchEntryIsLoading,isBulk,order}},AddressBookList=__webpack_require__("./app/pages/Orders/Blackbeard/Drawers/AddressDrawer/AddressBookList.tsx"),AddressDrawerForm=__webpack_require__("./app/pages/Orders/Blackbeard/Drawers/AddressDrawer/AddressDrawerForm.tsx"),useAddressFromAddressBook=__webpack_require__("./app/pages/Orders/Blackbeard/Drawers/AddressDrawer/useAddressFromAddressBook.ts"),idFromAddressInfo=function(addressInfo,editingAddressType){var startingAddress=addressInfo[editingAddressType];return startingAddress&&!(0,lodash.isArray)(startingAddress)&&startingAddress.hasOwnProperty("id")?startingAddress.id:void 0};const AddressDrawer_AddressMultiselectDrawer=function(_a){var addressInfo=_a.addressInfo,addresses=_a.addresses,areAllSenderReturnAddressesEqual=_a.areAllSenderReturnAddressesEqual,combineSenderReturnAddresses=_a.combineSenderReturnAddresses,editingAddress=_a.editingAddress,editingAddressType=_a.editingAddressType,hasRecipientPhoneRequireError=_a.hasRecipientPhoneRequireError,_b=_a.hasReturnBatchEntry,hasReturnBatchEntry=void 0!==_b&&_b,_c=_a.isRecipientInvalid,isRecipientInvalid=void 0!==_c&&_c,isSelectedReturnInSavedAddresses=_a.isSelectedReturnInSavedAddresses,isSelectedSenderInSavedAddresses=_a.isSelectedSenderInSavedAddresses,onCancel=_a.onCancel,onClearEditingAddress=_a.onClearEditingAddress,onClose=_a.onClose,onEditAddress=_a.onEditAddress,onSubmitEditAddressBookAddress=_a.onSubmitEditAddressBookAddress,onSubmitEditedAddress=_a.onSubmitEditedAddress,onSubmitSelectedAddress=_a.onSubmitSelectedAddress,persistent=_a.persistent,t=_a.t,_d=(0,tslib_es6.zs)((0,react.useState)(!1),2),newAddressForm=_d[0],setNewAddressForm=_d[1],_e=(0,tslib_es6.zs)((0,react.useState)(!1),2),isAddingNewAddress=_e[0],setIsAddingNewAddress=_e[1],selectedOrders=(0,es.d4)(orders_selectors.Li),selectedThingsCount=Object.entries(selectedOrders).reduce((function(count,_a){var _b=(0,tslib_es6.zs)(_a,2);_b[0];return count+(_b[1].length||1)}),0),addressInfoForForm=(0,react.useMemo)((function(){var _a;return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},addressInfo),((_a={})[editingAddressType]=editingAddress||null,_a))}),[addressInfo,editingAddress,editingAddressType]),addressFromAddressBook=(0,useAddressFromAddressBook.V)({addresses,selectedAddresses:addressInfoForForm[editingAddressType]}).addressFromAddressBook,handleTrackAddressUpdate=(0,react.useCallback)((function(trackingReference){(0,utils.Rk)(trackingReference,types.eJ.operations.SAVE_ATTEMPTED,{});var action=addressInfo[editingAddressType]?types.eJ.operations.UPDATED:types.eJ.operations.ADDED;(0,utils.Rk)(trackingReference,action,{address_type:editingAddressType,orders_selected:selectedThingsCount})}),[addressInfo,editingAddressType,selectedThingsCount]),onSubmit=(0,react.useCallback)((function(address,senderAndReturnAreSame){var addressId=idFromAddressInfo(addressInfo,editingAddressType),trackingReference=TrackingHelper.U.getTrackingReference(types.eJ.name,"side_panel",{addressId,addressType:editingAddressType});onSubmitSelectedAddress(address,senderAndReturnAreSame,trackingReference),handleTrackAddressUpdate(trackingReference)}),[addressInfo,editingAddressType,handleTrackAddressUpdate,onSubmitSelectedAddress]),onClickAddNewAddress=(0,react.useCallback)((function(){setIsAddingNewAddress(!0),setNewAddressForm(!0)}),[]),onCloseForm=(0,react.useCallback)((function(){setNewAddressForm(!1),setIsAddingNewAddress(!1),onClearEditingAddress()}),[onClearEditingAddress]),onUpdateAddress=(0,react.useCallback)((function(newAddress,meta){var addressId=idFromAddressInfo(addressInfo,editingAddressType),trackingReference=TrackingHelper.U.getTrackingReference(types.eJ.name,"side_panel",{addressId,addressType:editingAddressType});if(onSubmitEditedAddress(newAddress,editingAddressType,meta,trackingReference),handleTrackAddressUpdate(trackingReference),meta.applyToSavedAddress&&addressFromAddressBook){var address=function(address,addressFromAddressBook){return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},addressFromAddressBook),{city:address.city,company:address.company,country:address.country,email:address.email,name:address.name,phone:address.phone,state:address.state,street1:address.street1,street2:address.street2,streetNumber:address.streetNumber,zip:address.zip})}(newAddress,addressFromAddressBook);onSubmitEditAddressBookAddress({address,id:address.id})}}),[addressInfo,editingAddressType,handleTrackAddressUpdate,onSubmitEditedAddress,addressFromAddressBook,onSubmitEditAddressBookAddress]),onEdit=(0,react.useCallback)((function(address){onEditAddress(editingAddressType,address),setNewAddressForm(!0)}),[onEditAddress,editingAddressType]),onFormFirstLoad=(0,react.useCallback)((function(){var addressId=idFromAddressInfo(addressInfo,editingAddressType);(0,utils.Rk)(TrackingHelper.U.getTrackingReference(types.eJ.name,"side_panel",{addressId,addressType:editingAddressType}),types.eJ.operations.VIEWED,{})}),[addressInfo,editingAddressType]),_f=function(defaultUserAddress){var _a,selectedOrders=(0,es.d4)(orders_selectors.Li),ordersData=(0,es.d4)(orders_selectors.Sv),selectedOrdersData=(0,es.d4)(orders_selectors.ZN),batchEntryIds=(0,react.useMemo)((function(){return(0,lodash_es_flatten.A)(Object.values(selectedOrders))}),[selectedOrders]),addressesFromOrderSelection=useLabelPurchaseAddresses().addressesFromOrderSelection,batchEntryData=(0,es.d4)(batch_entry_selectors.zo),batchEntries=(0,react.useMemo)((function(){return(0,batch_entry_selectors.mS)(batchEntryData,batchEntryIds)}),[batchEntryData,batchEntryIds]),returnBatchEntryId=null===(_a=batchEntries.find((function(_a){return _a.isReturn})))||void 0===_a?void 0:_a.id,selectedOrdersCount=(0,es.d4)(orders_selectors.BE),selectedFulfilledOrders=(0,react.useMemo)((function(){return(0,LabelPurchaseDrawer_utils.Yt)(batchEntryIds,selectedOrdersData,batchEntryData)}),[batchEntryIds,selectedOrdersData,batchEntryData]),mostCommonShipmentDate=(0,es.d4)(batch_entry_composite_selectors.vm),ratesByShipmentObjectID=(0,es.d4)(rates_selectors.Qo),selectedOrdersErrors=(0,react.useMemo)((function(){return(0,orderErrors.uF)(selectedOrders,batchEntries,ordersData,mostCommonShipmentDate,addressesFromOrderSelection,defaultUserAddress,ratesByShipmentObjectID)}),[batchEntries,defaultUserAddress,mostCommonShipmentDate,ordersData,selectedOrders,addressesFromOrderSelection]);if(returnBatchEntryId){var filteredBatchEntries=batchEntries.filter((function(_a){return _a.id===returnBatchEntryId})),filteredSelectedOrders=Object.keys(selectedOrders).reduce((function(filteredOrders,orderId){var _a;return(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},filteredOrders),((_a={})[orderId]=selectedOrders[orderId].filter((function(id){return id===returnBatchEntryId})),_a))}),{}),filteredBatchEntryIds=batchEntryIds.filter((function(id){return id===returnBatchEntryId})),filteredSelectedOrdersCount=filteredBatchEntryIds.length,filteredSelectedFullfilledOrders=(0,LabelPurchaseDrawer_utils.Yt)(filteredBatchEntryIds,selectedOrdersData,batchEntryData),filteredSelectedOrdersErrors=(0,orderErrors.uF)(filteredSelectedOrders,filteredBatchEntries,ordersData,mostCommonShipmentDate,addressesFromOrderSelection,defaultUserAddress,ratesByShipmentObjectID);return{batchEntries:filteredBatchEntries,batchEntryData,batchEntryIds:filteredBatchEntryIds,hasReturnBatchEntry:!0,mostCommonShipmentDate,ordersData,selectedFulfilledOrders:filteredSelectedFullfilledOrders,selectedOrders:filteredSelectedOrders,selectedOrdersCount:filteredSelectedOrdersCount,selectedOrdersData,selectedOrdersErrors:filteredSelectedOrdersErrors}}return{batchEntries,batchEntryData,batchEntryIds,hasReturnBatchEntry:!1,mostCommonShipmentDate,ordersData,selectedFulfilledOrders,selectedOrders,selectedOrdersCount,selectedOrdersData,selectedOrdersErrors}}(void 0),batchEntryIds=_f.batchEntryIds,selectedOrdersCount=_f.selectedOrdersCount,order=useSingleOrderAndBatchEntry(selectedOrders).order,validBatchEntriesToBuyCount=(0,es.d4)((function(state){return(0,batch_entry_composite_selectors.Pf)(state,{batchEntryIds})})),_g=(0,DrawerProvider.g)(),_h=_g.footerOptions,explicitFooterObject=_h.explicitFooterObject,footerButtonPrimary=_h.footerButtonPrimary,setFooterOptions=_g.setFooterOptions,showForm=newAddressForm||!!editingAddress,returnsEditAddressTitle=editingAddressType===addressBook.lj?t("orders:manualLabel:returnAddressNames:editReturnTo"):t("orders:manualLabel:returnAddressNames:editSender"),outbountEditAddressSubtitle=1===selectedOrdersCount?(0,LabelPurchaseDrawer_utils.ut)(t,(null==order?void 0:order.orderNumber)||""):(0,LabelPurchaseDrawer_utils.GZ)(selectedOrdersCount,validBatchEntriesToBuyCount,t);return(0,emotion_react_jsx_runtime_browser_esm.Y)(MobileAndDesktopDrawer.A,(0,tslib_es6.Cl)({drawerProps:{transitionDuration:0},explicitFooterObject,footerButtonPrimary,fullHeight:!0,fullWidth:!0,onBack:newAddressForm?onCloseForm:onCancel,onClose,open:!0,paperBoxShadow:"none",persistent,subtitle:hasReturnBatchEntry?void 0:outbountEditAddressSubtitle,title:hasReturnBatchEntry?returnsEditAddressTitle:t("orders:manualLabel:editAddress",{count:selectedOrdersCount})},{children:showForm?(0,emotion_react_jsx_runtime_browser_esm.Y)(AddressDrawerForm.A,{addressFromAddressBook,addressInfoForForm,areAllSenderReturnAddressesEqual,editingAddressType,hasFooterOptions:!0,hasRecipientPhoneRequireError,hasReturnBatchEntry,initialCombineSenderReturn:combineSenderReturnAddresses,isAddingNewAddress,isRecipientInvalid,isSelectedReturnInSavedAddresses,isSelectedSenderInSavedAddresses,onCancel:newAddressForm?onCloseForm:onCancel,onFirstLoad:onFormFirstLoad,onUpdateAddress,setFooterOptions,t}):(0,emotion_react_jsx_runtime_browser_esm.Y)(AddressBookList._,{addressInfo,addresses,canSelectInternationalAddress:!hasReturnBatchEntry,editingAddressType,onClickAddNewAddress,onEditAddress:onEdit,onUpdateAddress:onSubmit,t})}))},AddressMultiselectDrawer_stories={argTypes:{setSearchBarQuery:{action:"set-query"}},component:AddressDrawer_AddressMultiselectDrawer,parameters:{layout:"centered"},title:"Order V2 / Drawers / AddressMultiselectDrawer"};var AddressMultiselectDrawerWithTranslate=(0,utils_translate.Tl)("orders")(AddressDrawer_AddressMultiselectDrawer),apiAddresses=[{city:"Minneapolis",company:"Shippo",country:{iso2:"US",name:"United States"},email:"joshn.doe@shippo.com",id:1232,name:"John Doe",phone:"+12220200301",state:"MN",street1:"2611 Pleasent Ave",street2:"APT 112",streetNumber:"2611",zip:"55415"},(0,mocks.$8)({seed:12345}),(0,mocks.$8)({seed:12346}),(0,mocks.$8)({seed:12347}),(0,mocks.$8)({seed:12348}),(0,mocks.$8)({seed:12349}),(0,mocks.$8)({seed:12340})],addresses=[{city:"Minneapolis",company:"Shippo",country:{iso2:"US",name:"United States"},email:"joshn.doe@shippo.com",id:1232,ip:"",isResidential:!1,messages:[],metadata:"",name:"John Doe",objectCreated:new Date,objectId:"1232",objectOwner:"1234",objectPurpose:"",objectSource:"",objectState:"",objectUpdated:new Date,phone:"+12220200301",state:"MN",street1:"2611 Pleasent Ave",street2:"APT 112",street3:"Pleasent Ave",streetNumber:"2611",test:!1,zip:"55415"}],Regular=function(args){return(0,emotion_react_jsx_runtime_browser_esm.Y)(es.Kq,(0,tslib_es6.Cl)({store:(0,redux.y$)((0,redux.HY)(reducers.A))},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(AddressMultiselectDrawerWithTranslate,(0,tslib_es6.Cl)({},args))}))}.bind({});Regular.args={addressInfo:{return:addresses[0],sender:addresses[0],to:addresses[0]},addresses:apiAddresses,editingAddressType:"sender"},Regular.parameters={...Regular.parameters,docs:{...Regular.parameters?.docs,source:{originalSource:"(args: AddressMultiselectDrawerProps) => <Provider store={createStore(combineReducers(reducers))}>\n    <AddressMultiselectDrawerWithTranslate {...args} />\n  </Provider>",...Regular.parameters?.docs?.source}}}},"?4f7e":()=>{}}]);