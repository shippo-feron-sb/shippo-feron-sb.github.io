"use strict";(self.webpackChunk_shippo_feron=self.webpackChunk_shippo_feron||[]).push([[3005],{"./app/blackbeard/components/DesktopMenuMobileDrawer/hooks.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>useDesktopMenuMobileDrawer});var tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_utils_observability__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/utils/observability/index.ts"),_utils_tableFiltersTracking__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/utils/tableFiltersTracking.ts"),useDesktopMenuMobileDrawer=function(trackingSourceName,filterName){var _a=(0,tslib__WEBPACK_IMPORTED_MODULE_3__.zs)((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),2),anchor=_a[0],setAnchor=_a[1],onOpenMenu=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){setAnchor(e.currentTarget),trackingSourceName&&filterName&&_utils_observability__WEBPACK_IMPORTED_MODULE_1__.O.singleEvent(trackingSourceName,{filter:(0,_utils_tableFiltersTracking__WEBPACK_IMPORTED_MODULE_2__.Z)(filterName)})}),[filterName,trackingSourceName]);return{anchor,onCloseMenu:(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){setAnchor(null)}),[]),onOpenMenu}}},"./app/blackbeard/components/Search/Filters/GenericFilterTab.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@mui/icons-material/esm/Sort.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mui/icons-material/esm/KeyboardArrowUp.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@mui/icons-material/esm/KeyboardArrowDown.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@goshippo/components/esm/Tab/Tab.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@goshippo/components/esm/Typography/Typography.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@goshippo/components/esm/styles/colors.js");const __WEBPACK_DEFAULT_EXPORT__=function(_a){var dirty=_a.dirty,_b=_a.endIcon,endIcon=void 0===_b||_b,label=_a.label,open=_a.open,_c=_a.startIcon,startIcon=void 0!==_c&&_c,tabProps=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Tt)(_a,["dirty","endIcon","label","open","startIcon"]),icon=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return startIcon?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_3__.A,{}):endIcon&&open?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_4__.A,{}):endIcon?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_5__.A,{}):void 0}),[endIcon,open,startIcon]),filteredTabProps=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){var duped=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cl)({},tabProps);return delete duped.textColor,duped}),[tabProps]);return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_6__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cl)({},filteredTabProps,{disableFocusRipple:!0,disableTouchRipple:!0,icon,iconPosition:startIcon?"start":"end",label:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Y)(_goshippo_components__WEBPACK_IMPORTED_MODULE_7__.A,(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cl)({color:_goshippo_components__WEBPACK_IMPORTED_MODULE_8__.T.secondary,component:"h4",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},variant:"bodyEmphasized"},{children:label})),sx:{backgroundColor:dirty?_goshippo_components__WEBPACK_IMPORTED_MODULE_8__.T.secondaryHover:"inherit",borderRadius:"0.5rem",minHeight:"40px",opacity:1,px:1,py:0,textTransform:"none"}}))}},"./app/utils/tableFiltersTracking.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>getFilterTrackingObject,Z:()=>getFilterTrackingName});var tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),moment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/moment/moment.js"),getFilterTrackingName=function(filter){var filtersTrackingNames={carrierFilter:"Carrier",createdByFilter:"Created by",dateFilter:"Date",isInternational:"Destinations",itemFilter:"Items",labelStatusFilter:"Label status",labelTypeFilter:"Label type",orderStatus:"Order type",orderTagsFilter:"Tags",shippingMethodsFilter:"Shipping methods",sortField:"Sort",storeFilter:"Stores",trackingStatus:"Tracking status",weightFilter:"Weight"};return filtersTrackingNames[filter]?filtersTrackingNames[filter]:filter},getFilterTrackingObject=function(filter,value){var filtersTrackingLogic={dateFilter:function(){var dateFrom=value[0]?value[0]:"",dateTo=value[1]?value[1]:"",filterType=dateFrom&&dateTo?"range":dateFrom?"after date":dateTo?"before date":"clear",todayDate=moment__WEBPACK_IMPORTED_MODULE_0__(),daysRange=dateFrom&&dateTo?{daysRange:dateTo.diff(dateFrom,"days")}:dateFrom?{daysRange:todayDate.diff(dateFrom,"days")}:{};return(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cl)({dateFrom:dateFrom?dateFrom.format("L"):"",dateTo:dateTo?dateTo.format("L"):""},daysRange),{filterType})},isInternational:function(){return{value:""===value?"all destinations":"true"===value?"international":"domestic"}},itemFilter:function(){var items=value;return{itemQty:items.length,items}},orderTagsFilter:function(){return{includeUntagged:value.untagged,tagQty:value.tags.length}},shippingMethodsFilter:function(){var shippingMethods=value;return{shippingMethodQty:shippingMethods.length,shippingMethods}},sortField:function(){return{value:"-created_at"===value?"newest":"created_at"===value?"oldest":"most relevant"}},weightFilter:function(){var minWeight=value.minWeight||"",maxWeight=value.maxWeight||"";return{filterType:minWeight&&maxWeight?"range":minWeight?"min":maxWeight?"max":"clear",maxWeight,minWeight,weightUnit:value.weightUnit||""}}},filterTrackingObject=filtersTrackingLogic[filter]?filtersTrackingLogic[filter]():void 0;return filterTrackingObject?(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cl)({filter:getFilterTrackingName(filter)},filterTrackingObject):{filter:getFilterTrackingName(filter),value}}},"./app/blackbeard/components/Search/Filters/ShippingMethodsFilterTab.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LongOptions:()=>LongOptions,LotOfOptions:()=>LotOfOptions,Regular:()=>Regular,default:()=>ShippingMethodsFilterTab_stories});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),translate=__webpack_require__("./app/utils/translate.ts"),react=__webpack_require__("./node_modules/react/index.js"),MenuItem=__webpack_require__("./node_modules/@goshippo/components/esm/MenuItem/MenuItem.js"),Checkbox=__webpack_require__("./node_modules/@goshippo/components/esm/Checkbox/Checkbox.js"),useMediaQuery=__webpack_require__("./node_modules/@mui/material/useMediaQuery/useMediaQuery.js"),shippoTheme=__webpack_require__("./node_modules/@goshippo/components/esm/styles/shippoTheme.js"),Box=__webpack_require__("./node_modules/@goshippo/components/esm/Box/Box.js"),Divider=__webpack_require__("./node_modules/@goshippo/components/esm/Divider/Divider.js"),Tooltip=__webpack_require__("./node_modules/@goshippo/components/esm/Tooltip/Tooltip.js"),Grid=__webpack_require__("./node_modules/@goshippo/components/esm/Grid/Grid.js"),Button=__webpack_require__("./node_modules/@goshippo/components/esm/Button/Button.js"),segment=__webpack_require__("./app/utils/segment/index.ts"),Drawer=__webpack_require__("./node_modules/@goshippo/components/esm/Drawer/Drawer.js"),Typography=__webpack_require__("./node_modules/@goshippo/components/esm/Typography/Typography.js"),Menu=__webpack_require__("./node_modules/@goshippo/components/esm/Menu/Menu.js");const components_DesktopMenuMobileDrawer=function(_a){var anchor=_a.anchor,children=_a.children,drawerTitle=_a.drawerTitle,onClose=_a.onClose,sx=_a.sx;return(0,useMediaQuery.A)(shippoTheme.A.breakpoints.down("sm"))?(0,emotion_react_jsx_runtime_browser_esm.FD)(Drawer.A,(0,tslib_es6.Cl)({PaperProps:{sx:{maxHeight:"65vh"}},anchor:"bottom",onClose,open:!!anchor},{children:[drawerTitle&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({color:"secondary",component:"h3",sx:{display:"inline-block",pb:3,pl:2,pr:0,pt:3},variant:"h3"},{children:drawerTitle})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Divider.A,{}),children]})):(0,emotion_react_jsx_runtime_browser_esm.Y)(Menu.A,(0,tslib_es6.Cl)({PaperProps:{sx:(0,tslib_es6.Cl)({minWidth:"12rem"},sx)},anchorEl:anchor,onClose,open:!!anchor},{children}))};var hooks=__webpack_require__("./app/blackbeard/components/DesktopMenuMobileDrawer/hooks.ts"),GenericFilterTab=__webpack_require__("./app/blackbeard/components/Search/Filters/GenericFilterTab.tsx"),SelectAllMenuItem=function(_a){var interimFilter=_a.interimFilter,onClick=_a.onClick,shippingMethods=_a.shippingMethods,t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(MenuItem.A,(0,tslib_es6.Cl)({"data-value":"select-all",onClick},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Checkbox.A,{checked:interimFilter.length===shippingMethods.length,"data-testid":"shipment-methods-option-select-all",indeterminate:!!interimFilter.length&&interimFilter.length<shippingMethods.length}),t("orders:shippingMethod:selectAll")]}),"shipping-method-option-".concat(1))};const Filters_ShippingMethodsFilterTab=function(_a){var setShippingMethodsFilter=_a.setShippingMethodsFilter,shippingMethods=_a.shippingMethods,shippingMethodsFilter=_a.shippingMethodsFilter,t=_a.t,trackingSourceName=_a.trackingSourceName,_b=(0,tslib_es6.zs)((0,react.useState)(shippingMethodsFilter),2),interimFilter=_b[0],setInterimFilter=_b[1],_c=(0,hooks.G)(trackingSourceName,"shippingMethodsFilter"),anchor=_c.anchor,onCloseMenu=_c.onCloseMenu,onOpenMenu=_c.onOpenMenu,isSmallScreen=(0,useMediaQuery.A)(shippoTheme.A.breakpoints.down("sm"));(0,react.useEffect)((function(){var concattedArray=(0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(shippingMethodsFilter),!1),(0,tslib_es6.zs)(interimFilter),!1),uniqueShippingMethodsSet=new Set(concattedArray);setInterimFilter(Array.from(uniqueShippingMethodsSet))}),[shippingMethodsFilter]);var hasScroll=(0,react.useMemo)((function(){var maxMenuItemsWithoutScrollForDesktop=Math.floor(8);return!!(isSmallScreen&&shippingMethods.length>2)||shippingMethods.length>maxMenuItemsWithoutScrollForDesktop}),[shippingMethods,isSmallScreen]),dividerStyle=hasScroll?{marginLeft:"-".concat(shippoTheme.A.spacing(1)),width:"calc(100% + ".concat(shippoTheme.A.spacing(2),")")}:{},onClick=(0,react.useCallback)((function(event){var value=event.currentTarget.dataset.value;if(value){if("select-all"===value)return interimFilter.length===shippingMethods.length?void setInterimFilter([]):void setInterimFilter(shippingMethods);interimFilter.includes(value)?setInterimFilter(interimFilter.filter((function(item){return item!==value}))):setInterimFilter((0,tslib_es6.fX)((0,tslib_es6.fX)([],(0,tslib_es6.zs)(interimFilter),!1),[value],!1))}}),[setInterimFilter,shippingMethods,interimFilter]),onClearAll=(0,react.useCallback)((function(){setShippingMethodsFilter&&setShippingMethodsFilter([]),setInterimFilter([])}),[setShippingMethodsFilter]),onClickApply=(0,react.useCallback)((function(){setShippingMethodsFilter&&setShippingMethodsFilter(interimFilter),(0,segment.u4)("Order List Filtered",{carrier:interimFilter}),onCloseMenu()}),[setShippingMethodsFilter,interimFilter,onCloseMenu]),tabLabel=(0,react.useMemo)((function(){return 0===shippingMethodsFilter.length?t("orders:shippingMethod:shippingMethod"):shippingMethodsFilter.length>1?"".concat(shippingMethodsFilter[0]," +").concat(shippingMethodsFilter.length-1):shippingMethodsFilter[0]}),[shippingMethodsFilter,t]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(GenericFilterTab.A,{"data-testid":"shipment-methods-filter-button",dirty:shippingMethodsFilter&&shippingMethodsFilter.length>0,disabled:0===shippingMethods.length,label:tabLabel,onClick:onOpenMenu,open:!!anchor}),(0,emotion_react_jsx_runtime_browser_esm.Y)(components_DesktopMenuMobileDrawer,(0,tslib_es6.Cl)({anchor,drawerTitle:t("orders:shippingMethod:shippingMethod"),onClose:onCloseMenu,sx:{width:shippoTheme.A.spacing(35)}},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(Box.A,(0,tslib_es6.Cl)({sx:{overflow:"hidden",p:1}},{children:[hasScroll&&(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(SelectAllMenuItem,{interimFilter,onClick,shippingMethods,t}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Divider.A,{sx:(0,tslib_es6.Cl)({my:2},dividerStyle)})]}),(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({style:{maxHeight:"calc(65vh - ".concat(shippoTheme.A.spacing(isSmallScreen?29:17),")"),overflowY:"auto"}},{children:[!hasScroll&&(0,emotion_react_jsx_runtime_browser_esm.Y)(SelectAllMenuItem,{interimFilter,onClick,shippingMethods,t}),shippingMethods.map((function(shippingMethodOption,index){return(0,emotion_react_jsx_runtime_browser_esm.FD)(MenuItem.A,(0,tslib_es6.Cl)({"data-value":shippingMethodOption,onClick},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Checkbox.A,{checked:interimFilter.includes(shippingMethodOption),"data-testid":"shipment-methods-option-".concat(shippingMethodOption)}),(0,emotion_react_jsx_runtime_browser_esm.Y)("div",(0,tslib_es6.Cl)({style:{WebkitBoxOrient:"vertical",WebkitLineClamp:1,display:"-webkit-box",overflow:"hidden",whiteSpace:"normal",width:"100%"}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Tooltip.A,(0,tslib_es6.Cl)({placement:"right-end",title:shippingMethodOption,variant:"secondary"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("span",{children:shippingMethodOption})}))}))]}),"shipping-method-option-".concat(index+2))}))]})),(0,emotion_react_jsx_runtime_browser_esm.FD)("div",{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Divider.A,{sx:(0,tslib_es6.Cl)({my:2},dividerStyle)}),(0,emotion_react_jsx_runtime_browser_esm.FD)(Grid.A,(0,tslib_es6.Cl)({container:!0,sx:{justifyContent:"space-between"}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({color:"secondary","data-testid":"shipping-methods-filter-clear",onClick:onClearAll,size:"medium",variant:"text"},{children:t("orders:shippingMethod:clear")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Button.A,(0,tslib_es6.Cl)({"data-testid":"shipping-methods-filter-apply",onClick:onClickApply,size:"medium"},{children:t("orders:shippingMethod:apply")}))]}))]})]}))}))]})},ShippingMethodsFilterTab_stories={argTypes:{setShippingMethodsFilter:{action:"setShippingMethodsFilter"}},component:Filters_ShippingMethodsFilterTab,title:"Order Table / Filter / Shipping Methods"};var ShippingMethodsFilterTabWithTranslate=(0,translate.Tl)("orders")(Filters_ShippingMethodsFilterTab),Template=function(args){return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(ShippingMethodsFilterTabWithTranslate,(0,tslib_es6.Cl)({},args))})},Regular=Template.bind({});Regular.args={shippingMethods:["DHL","FedEx","UPS","USPS"],shippingMethodsFilter:[],t:function(key){return key},trackingSourceName:"ORDERS_TABLE_FILTER_CLICKED"};var LongOptions=Template.bind({});LongOptions.args={shippingMethods:["This is a one liner","This is a option that fits in two lines","This is a very long option that does not fit in two lines and goes beyond that"],shippingMethodsFilter:[],t:function(key){return key},trackingSourceName:"ORDERS_TABLE_FILTER_CLICKED"};var LotOfOptions=Template.bind({});LotOfOptions.args={shippingMethods:["DHL","FedEx","UPS","USPS","Canada Post","Purolator","Royal Mail","DHL Express","DHL eCommerce","DHL Express Worldwide","DHL Express 12:00","DHL Express 9:00","This is a one liner","This is a option that fits in two lines","This is a very long option that does not fit in two lines and goes beyond that"],shippingMethodsFilter:[],t:function(key){return key},trackingSourceName:"ORDERS_TABLE_FILTER_CLICKED"},Regular.parameters={...Regular.parameters,docs:{...Regular.parameters?.docs,source:{originalSource:"args => <>\n    <ShippingMethodsFilterTabWithTranslate {...args} />\n  </>",...Regular.parameters?.docs?.source}}},LongOptions.parameters={...LongOptions.parameters,docs:{...LongOptions.parameters?.docs,source:{originalSource:"args => <>\n    <ShippingMethodsFilterTabWithTranslate {...args} />\n  </>",...LongOptions.parameters?.docs?.source}}},LotOfOptions.parameters={...LotOfOptions.parameters,docs:{...LotOfOptions.parameters?.docs,source:{originalSource:"args => <>\n    <ShippingMethodsFilterTabWithTranslate {...args} />\n  </>",...LotOfOptions.parameters?.docs?.source}}}}}]);