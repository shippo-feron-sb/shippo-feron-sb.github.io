"use strict";(self.webpackChunk_shippo_feron=self.webpackChunk_shippo_feron||[]).push([[7612],{"./app/components/Link/Link.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,Oc:()=>DeepBlueBoldLink,Ot:()=>GreyLink,ec:()=>SupportEmailLink,ic:()=>GreenLink,k0:()=>DangerLink,oJ:()=>LearnMoreLink,tp:()=>DeepBlueLink,zN:()=>BlueLink});var tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),_emotion_styled__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),_styles_constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/styles/constants.ts"),LinkComponent=(0,_emotion_styled__WEBPACK_IMPORTED_MODULE_0__.A)("a")(templateObject_1||(templateObject_1=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.ue)(["\n  font-size: inherit;\n  cursor: pointer;\n  text-decoration: ",";\n  ","\n"],["\n  font-size: inherit;\n  cursor: pointer;\n  text-decoration: ",";\n  ","\n"])),(function(props){return props.hideUnderline?"none":"normal"}),(function(props){return props.disabled?"color: ".concat(_styles_constants__WEBPACK_IMPORTED_MODULE_1__.Tj.gray400," !important;\n    cursor: not-allowed;\n    text-decoration: none !important;"):""})),Link=function(props){var children=props.children,className=props.className,dataAnalytics=props.dataAnalytics,dataPendo=props.dataPendo,href=props.href,target=props.target,id=props.id,onClick=props.onClick,disabled=props.disabled,hideUnderline=props.hideUnderline,dataE2E=props.dataE2E,dataHeap=props.dataHeap,rel=props.rel,tabIndex=props.tabIndex,elementProps={href,target,id,rel};return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Y)(LinkComponent,(0,tslib__WEBPACK_IMPORTED_MODULE_2__.Cl)({},elementProps,{className,"data-pendo":dataPendo,"data-heap-event":dataAnalytics,"data-analytics":dataAnalytics,"data-testid":dataAnalytics,"data-e2e":dataE2E,"data-heap":dataHeap,onClick,disabled,hideUnderline,tabIndex},{children}))};const __WEBPACK_DEFAULT_EXPORT__=Link;var templateObject_1,templateObject_2,templateObject_3,templateObject_4,templateObject_5,templateObject_6,templateObject_7,templateObject_8,templateObject_9,templateObject_10,GreenLink=(0,_emotion_styled__WEBPACK_IMPORTED_MODULE_0__.A)(Link)(templateObject_2||(templateObject_2=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.ue)(["\n  color: ",";\n"],["\n  color: ",";\n"])),_styles_constants__WEBPACK_IMPORTED_MODULE_1__.Tj.primary),BlueLink=(0,_emotion_styled__WEBPACK_IMPORTED_MODULE_0__.A)(Link)(templateObject_3||(templateObject_3=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.ue)(["\n  color: ",";\n"],["\n  color: ",";\n"])),_styles_constants__WEBPACK_IMPORTED_MODULE_1__.Tj.aqua),DeepBlueLink=(0,_emotion_styled__WEBPACK_IMPORTED_MODULE_0__.A)(Link)(templateObject_4||(templateObject_4=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.ue)(["\n  color: ",";\n  text-decoration: none;\n\n  &:hover {\n    text-decoration: underline;\n  }\n\n  &:active {\n    text-decoration: underline;\n  }\n"],["\n  color: ",";\n  text-decoration: none;\n\n  &:hover {\n    text-decoration: underline;\n  }\n\n  &:active {\n    text-decoration: underline;\n  }\n"])),_styles_constants__WEBPACK_IMPORTED_MODULE_1__.Tj.forest700),DeepBlueBoldLink=(0,_emotion_styled__WEBPACK_IMPORTED_MODULE_0__.A)(DeepBlueLink)(templateObject_5||(templateObject_5=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.ue)(["\n  font-size: 0.875rem;\n  font-weight: ",";\n"],["\n  font-size: 0.875rem;\n  font-weight: ",";\n"])),_styles_constants__WEBPACK_IMPORTED_MODULE_1__.Wy.medium),GreyLink=(0,_emotion_styled__WEBPACK_IMPORTED_MODULE_0__.A)(Link)(templateObject_6||(templateObject_6=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.ue)(["\n  color: ",";\n"],["\n  color: ",";\n"])),_styles_constants__WEBPACK_IMPORTED_MODULE_1__.Tj.secondary),LearnMoreLink=((0,_emotion_styled__WEBPACK_IMPORTED_MODULE_0__.A)(GreyLink)(templateObject_7||(templateObject_7=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.ue)(["\n  font-weight: ",";\n  text-decoration: underline;\n"],["\n  font-weight: ",";\n  text-decoration: underline;\n"])),_styles_constants__WEBPACK_IMPORTED_MODULE_1__.Wy.normal),(0,_emotion_styled__WEBPACK_IMPORTED_MODULE_0__.A)(Link)(templateObject_8||(templateObject_8=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.ue)(["\n  color: ",";\n"],["\n  color: ",";\n"])),_styles_constants__WEBPACK_IMPORTED_MODULE_1__.Tj.primaryAlternative)),SupportEmailLink=(0,_emotion_styled__WEBPACK_IMPORTED_MODULE_0__.A)(Link)(templateObject_9||(templateObject_9=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.ue)(["\n  color: ",";\n"],["\n  color: ",";\n"])),_styles_constants__WEBPACK_IMPORTED_MODULE_1__.Tj.primaryAlternative),DangerLink=(0,_emotion_styled__WEBPACK_IMPORTED_MODULE_0__.A)(Link)(templateObject_10||(templateObject_10=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.ue)(["\n  color: ",";\n"],["\n  color: ",";\n"])),_styles_constants__WEBPACK_IMPORTED_MODULE_1__.Tj.ruby700)},"./app/components/Link/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,Oc:()=>_components_Link_Link__WEBPACK_IMPORTED_MODULE_0__.Oc,Ot:()=>_components_Link_Link__WEBPACK_IMPORTED_MODULE_0__.Ot,ic:()=>_components_Link_Link__WEBPACK_IMPORTED_MODULE_0__.ic,k0:()=>_components_Link_Link__WEBPACK_IMPORTED_MODULE_0__.k0,tp:()=>_components_Link_Link__WEBPACK_IMPORTED_MODULE_0__.tp,zN:()=>_components_Link_Link__WEBPACK_IMPORTED_MODULE_0__.zN});var _components_Link_Link__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/components/Link/Link.tsx");const __WEBPACK_DEFAULT_EXPORT__=_components_Link_Link__WEBPACK_IMPORTED_MODULE_0__.Ay},"./app/components/Spinner/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{hQ:()=>GreenSpinner,p9:()=>WhiteSpinner});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),emotion_styled_browser_esm=__webpack_require__("./node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),constants=__webpack_require__("./app/styles/constants.ts"),SpinnerSvg=(0,emotion_styled_browser_esm.A)("svg")(templateObject_1||(templateObject_1=(0,tslib_es6.ue)(["\n  height: ",";\n  vertical-align: middle;\n\n  & > path {\n    fill: black;\n  }\n\n  animation: spin 600ms infinite;\n\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg) translateZ(0px);\n    }\n    100% {\n      transform: rotate(360deg) translateZ(0px);\n    }\n  }\n"],["\n  height: ",";\n  vertical-align: middle;\n\n  & > path {\n    fill: black;\n  }\n\n  animation: spin 600ms infinite;\n\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg) translateZ(0px);\n    }\n    100% {\n      transform: rotate(360deg) translateZ(0px);\n    }\n  }\n"])),(function(props){return"".concat(props.size,"px")})),Spinner_Spinner=function(props){return(0,emotion_react_jsx_runtime_browser_esm.Y)(SpinnerSvg,(0,tslib_es6.Cl)({viewBox:"0 0 50 50",className:"".concat(props.className||""," spinner"),size:props.size},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("path",{d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z"})}))};Spinner_Spinner.defaultProps={size:30};var GreenSpinner=(0,emotion_styled_browser_esm.A)(Spinner_Spinner)(templateObject_2||(templateObject_2=(0,tslib_es6.ue)(["\n  & > path {\n    fill: ",";\n  }\n"],["\n  & > path {\n    fill: ",";\n  }\n"])),constants.Tj.primary),WhiteSpinner=(0,emotion_styled_browser_esm.A)(Spinner_Spinner)(templateObject_3||(templateObject_3=(0,tslib_es6.ue)(["\n  & > path {\n    fill: white;\n  }\n"],["\n  & > path {\n    fill: white;\n  }\n"])));(0,emotion_styled_browser_esm.A)(Spinner_Spinner)(templateObject_4||(templateObject_4=(0,tslib_es6.ue)(["\n  & path {\n    fill: ",";\n  }\n"],["\n  & path {\n    fill: ",";\n  }\n"])),constants.Tj.sea700);var templateObject_1,templateObject_2,templateObject_3,templateObject_4},"./app/hooks/useStackablePortal.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,z:()=>isTopOfStack});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),isTopOfStack=function(key){return window.stackables[window.stackables.length-1]===key};const __WEBPACK_DEFAULT_EXPORT__=function(isOpen){var key=react__WEBPACK_IMPORTED_MODULE_0__.useRef(Symbol());return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){return isOpen&&window.stackables.push(key.current),function(){if(isOpen){var toRemove=window.stackables.indexOf(key.current);window.stackables.splice(toRemove,1)}}}),[isOpen]),key.current}},"./app/selectors/orders.selectors.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$m:()=>getIsUpdatingOrder,BE:()=>getSelectedCount,Bq:()=>getPackingSlipUrl,Cd:()=>getSelectedOrdersTags,H4:()=>makeGetOrderById,JF:()=>getIsOrderLoading,Ld:()=>getOrdersCount,Li:()=>getSelectedOrders,MO:()=>getAreAllOrdersSelected,Oz:()=>getAllOrdersCount,PJ:()=>getOrderFirstSuccessfulTransactionIds,RQ:()=>getIsLoading,SP:()=>getTotalOrders,Sv:()=>getOrdersData,Ub:()=>getLastOrderId,WF:()=>getOrders,YC:()=>makeGetIsOrderPartiallyFulfilled,Yo:()=>hasNewOrders,Z:()=>getOrdersRemainingForLabelDownload,ZN:()=>getSelectedOrdersData,bL:()=>getPatchBatchEntriesExtrasRequest,f6:()=>getOrderAction,kA:()=>getIsSidePanelCheckout,pP:()=>getSelectedOrderTagsByOrderId,q2:()=>getIsOrderSelected,qf:()=>getIsBatchEntrySelected,qy:()=>getCheckoutRateAfterPoll,x4:()=>getOrderSuccessfulTransactionIds,yD:()=>getOrderByObjectId,zF:()=>getOrdersAllIds});var tslib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),reselect__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/reselect/es/index.js"),_types_Order__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/types/Order.ts"),_types_Transaction__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/types/Transaction.ts"),_utils_fetchable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/utils/fetchable.ts"),EMPTY_ORDER={partialFulfillmentRequests:[]},getOrdersStore=function(state){return state.orders},getOrderIdFromProps=function(_,props){return props.orderId},getOrderObjectIdFromProps=function(_,props){return props.orderObjectId},getOrderAction=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.orderAction})),hasNewOrders=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isSyncingOrders})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.hasNewOrders}))),getOrdersCount=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(orderStore){return orderStore.totalOrders})),getOrdersAllIds=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.allIds})),getOrdersData=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.data})),getOrders=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersAllIds,getOrdersData,(function(allIds,ordersData){return allIds.map((function(id){return ordersData[id]})).filter((function(v){return v}))})),getTotalOrders=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.totalOrders})),getAllOrdersCount=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.allOrdersCount})),getIsOrderLoading=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isLoadingOrdersCount})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.fetchOrderHasError})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isLoadingOrder}))),getIsLoading=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isLoading})),getPackingSlipUrl=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrderAction,(function(orderAction){return"hide"===orderAction.kind&&(0,_utils_fetchable__WEBPACK_IMPORTED_MODULE_3__.A7)((function(){return!1}),(function(){return!0}),(function(){return!1}),(function(){return!1}))(orderAction.request)})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isCreatingReturnBatchEntry})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.createReturnBatchEntryHasError})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.returnLabelCreatedSuccessfully})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.transactions})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.packingSlipUrl}))),getLastOrderId=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.labelDownloadUrl})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.labelDownloadErrMsg})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isDownloadingLabels})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.notificationsLoading})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.notificationsSent})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.lastOrderId}))),getSelectedOrders=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.selectedOrders})),getOrdersRemainingForLabelDownload=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.checkedOrders})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.rowModelBeingEdited})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.ordersRemainingLabelDownload}))),getCheckoutRateAfterPoll=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.checkoutRateAfterPoll})),getSelectedOrdersData=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getSelectedOrders,getOrdersData,(function(ordersSelection,ordersData){return Object.keys(ordersSelection||{}).map((function(id){return ordersData[id]})).filter((function(v){return v}))})),getSelectedOrdersTags=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getSelectedOrdersData,(function(selectedOrdersData){return selectedOrdersData.reduce((function(acc,order){return acc.concat(order.tags||[])}),[])})),getSelectedOrderTagsByOrderId=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getSelectedOrdersData,(function(selectedOrdersData){return selectedOrdersData.reduce((function(acc,order){return acc[order.objectId]=order.tags||[],acc}),{})})),makeGetOrderById=function(){return(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersData,getOrderIdFromProps,(function(ordersData,orderId){return ordersData[orderId]}))},getOrderByObjectId=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersData,getOrderObjectIdFromProps,(function(ordersData,orderObjectId){return ordersData[orderObjectId]||EMPTY_ORDER})),makeGetIsOrderPartiallyFulfilled=function(){return(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrderByObjectId,(function(order){var e_1,_a,_b;if(!order.partialFulfillmentRequests||!order.totalPartialFulfillments)return!1;var hasFulfilledOrder=!1,hasUnfulfilledOrder=!1,_loop_1=function(request){request.transactionObjectId?(null===(_b=order.transactions.find((function(transaction){return transaction.objectId===request.transactionObjectId})))||void 0===_b?void 0:_b.status)===_types_Transaction__WEBPACK_IMPORTED_MODULE_1__.x8.SUCCESS?hasFulfilledOrder=!0:hasUnfulfilledOrder=!0:hasUnfulfilledOrder=!0;if(hasFulfilledOrder&&hasUnfulfilledOrder)return{value:!0}};try{for(var _c=(0,tslib__WEBPACK_IMPORTED_MODULE_4__.Ju)(order.partialFulfillmentRequests),_d=_c.next();!_d.done;_d=_c.next()){var state_1=_loop_1(_d.value);if("object"==typeof state_1)return state_1.value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}return!1}))},getIsUpdatingOrder=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersData,getOrderIdFromProps,(function(ordersData,orderId){return ordersData[orderId]})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getSelectedOrdersData,(function(selectedOrdersData){return selectedOrdersData.some((function(order){return(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.vz)(order)}))})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getSelectedOrdersData,(function(selectedOrdersData){return selectedOrdersData.every((function(order){return(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.vz)(order)}))})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isUpdatingBatchEntry}))),getIsOrderSelected=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isSingleOrderMode})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getSelectedOrders,getOrderObjectIdFromProps,(function(selectedOrders,orderObjectId){return!!selectedOrders[orderObjectId]}))),getAreAllOrdersSelected=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getSelectedOrders,getOrdersAllIds,(function(selectedOrders,allIds){return Object.keys(selectedOrders).length===allIds.length})),getIsBatchEntrySelected=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getSelectedOrders,(function(_,props){return props}),(function(selectedOrders,props){return(selectedOrders[props.orderObjectId]||[]).includes(props.batchEntryId)})),getSelectedCount=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getSelectedOrders,(function(selectedOrders){return Object.values(selectedOrders).reduce((function(count,currVal){return currVal.length?count+currVal.length:count+1}),0)})),getPatchBatchEntriesExtrasRequest=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.batchEntryEditNotificationState})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(orderStore){return orderStore.patchBatchEntriesExtrasRequest}))),getOrdersDataByObjectIds=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersData,(function(_,props){return props.orderObjectIds}),(function(ordersData,orderObjectIds){return orderObjectIds.map((function(objectId){return ordersData[objectId]}))})),getOrderSuccessfulTransactionIds=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersDataByObjectIds,(function(ordersData){return ordersData.filter((function(order){var _a;return null===(_a=null==order?void 0:order.transactions)||void 0===_a?void 0:_a.some((function(transaction){return"SUCCESS"===transaction.status}))})).reduce((function(txnIds,order){var orderTxns=order.transactions.filter((function(t){return"SUCCESS"===t.status})).map((function(t){return t.objectId}));return(0,tslib__WEBPACK_IMPORTED_MODULE_4__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_4__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_4__.zs)(txnIds),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_4__.zs)(orderTxns),!1)}),[])})),getOrderFirstSuccessfulTransactionIds=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersDataByObjectIds,(function(ordersData){return ordersData.filter((function(order){var _a;return null===(_a=null==order?void 0:order.transactions)||void 0===_a?void 0:_a.some((function(transaction){return"SUCCESS"===transaction.status}))})).map((function(order){return order.transactions.filter((function(t){return"SUCCESS"===t.status})).map((function(t){return t.objectId}))[0]}),[])})),getIsSidePanelCheckout=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isUpdatingCustomsItems})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isCreatingCustomsItems})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isSidePanelCheckout})));(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isUpdatingParcel})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.isLoadingOrderTags})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.Mz)(getOrdersStore,(function(ordersStore){return ordersStore.orderTagsBeingUpdated}))},"./app/utils/translate.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{In:()=>react_i18next__WEBPACK_IMPORTED_MODULE_0__.In,Tl:()=>react_i18next__WEBPACK_IMPORTED_MODULE_0__.Tl,x6:()=>react_i18next__WEBPACK_IMPORTED_MODULE_0__.x6});var react_i18next__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js")},"./app/pages/Orders/Blackbeard/LabelPurchase/modules/ShipmentInsuranceCard/ShipmentInsuranceCard.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultState:()=>DefaultState,InsuranceAndSignature:()=>InsuranceAndSignature,OverFiveHundred:()=>OverFiveHundred,default:()=>ShipmentInsuranceCard_stories});var templateObject_1,templateObject_2,templateObject_3,templateObject_4,types_templateObject_1,types_templateObject_2,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),translate=__webpack_require__("./app/utils/translate.ts"),react=__webpack_require__("./node_modules/react/index.js"),Card_styled=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/Card/Card.styled.tsx"),ReturnLabelWarning=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/ShipmentExtrasCard/ReturnLabelWarning.tsx"),utils=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/ShipmentExtrasCard/utils.ts"),modules_utils=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/utils.ts"),styled=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),Box=__webpack_require__("./node_modules/@goshippo/components/esm/Box/Box.js"),colors=__webpack_require__("./node_modules/@goshippo/components/esm/styles/colors.js"),Typography=__webpack_require__("./node_modules/@goshippo/components/esm/Typography/Typography.js"),Button=__webpack_require__("./node_modules/@goshippo/components/esm/Button/Button.js"),ContentContainer=(0,styled.Ay)(Box.A)((function(){return{padding:"1rem",color:colors.T.text.primary.black}})),InsuranceHeader=(0,styled.Ay)(Typography.A)(templateObject_1||(templateObject_1=(0,tslib_es6.ue)(["\n  color: ",";\n  padding-bottom: 0.5rem;\n"],["\n  color: ",";\n  padding-bottom: 0.5rem;\n"])),colors.T.text.primary.black),InsuranceRecommend=(0,styled.Ay)(Typography.A)(templateObject_2||(templateObject_2=(0,tslib_es6.ue)(["\n  color: ",";\n  padding-bottom: 0.25rem;\n"],["\n  color: ",";\n  padding-bottom: 0.25rem;\n"])),colors.T.text.primary.black),CardBlock=(0,styled.Ay)(Box.A)(templateObject_3||(templateObject_3=(0,tslib_es6.ue)(["\n  padding: 0.5rem 0;\n  border-bottom: 1px solid ",";\n  &:last-of-type {\n    border-bottom: 0px;\n    padding-bottom: 0;\n  }\n"],["\n  padding: 0.5rem 0;\n  border-bottom: 1px solid ",";\n  &:last-of-type {\n    border-bottom: 0px;\n    padding-bottom: 0;\n  }\n"])),colors.T.gray30),AddEditButton=(0,styled.Ay)(Button.A)(templateObject_4||(templateObject_4=(0,tslib_es6.ue)(["\n  background-color: transparent;\n  color: ",";\n  box-shadow: none;\n\n  &:hover {\n    color: ",";\n    background-color: ",";\n  }\n"],["\n  background-color: transparent;\n  color: ",";\n  box-shadow: none;\n\n  &:hover {\n    color: ",";\n    background-color: ",";\n  }\n"])),colors.T.accent.foreground.success,colors.T.primaryButtonHover,colors.T.accent.background.success),CircularProgress=__webpack_require__("./node_modules/@goshippo/components/esm/CircularProgress/CircularProgress.js"),ShipmentExtraContainer=(0,styled.Ay)("div")(types_templateObject_1||(types_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  flex-direction: column;\n"],["\n  display: flex;\n  flex-direction: column;\n"]))),ShipmentExtrasSpacer=(0,styled.Ay)(Box.A)(types_templateObject_2||(types_templateObject_2=(0,tslib_es6.ue)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"],["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),Stack=__webpack_require__("./node_modules/@goshippo/components/esm/Stack/Stack.js"),Tooltip=__webpack_require__("./node_modules/@goshippo/components/esm/Tooltip/Tooltip.js"),IconButton=__webpack_require__("./node_modules/@goshippo/components/esm/IconButton/IconButton.js"),Close=__webpack_require__("./node_modules/@mui/icons-material/esm/Close.js"),segment=__webpack_require__("./app/utils/segment/index.ts"),hooks=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/ShipmentExtrasCard/hooks.ts"),MobileAndDesktopDrawer=__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/shared/MobileAndDesktopDrawer/index.js"),SimplifiedInsuranceView=__webpack_require__("./app/pages/Orders/All/OrderDetailsPage/Tabs/ShipmentExtrasCard/Insurance/SimplifiedInsuranceModal/SimplifiedInsuranceView.tsx");const ShipmentInsuranceCard_ShipmentInsuranceSimplifiedView=function(_a){var onClose=_a.onClose,onSubmitToParent=_a.onSubmit,t=_a.t,userInsuranceRate=_a.userInsuranceRate,defaultValues=_a.defaultValues,addOrEditInsurance=_a.addOrEditInsurance,mixedSelection=_a.mixedSelection,insuredItems=_a.insuredItems,lineItemsCost=_a.lineItemsCost,rateCostOnly=_a.rateCostOnly,insuranceModalState=(0,hooks.hp)(defaultValues,onSubmitToParent),_b=(0,tslib_es6.zs)((0,react.useState)(insuranceModalState.insured?insuranceModalState.insuredValue!==String(lineItemsCost)?"custom":"hasInsurance":"noAddedInsurance"),2),insuranceValueType=_b[0],setInsuranceValueType=_b[1],showItemValueTotal=(0,react.useMemo)((function(){return lineItemsCost&&0!==lineItemsCost?String(lineItemsCost):void 0}),[lineItemsCost]),insuranceCost=(0,react.useMemo)((function(){var selectedPriceToCalculate="hasInsurance"===insuranceValueType?showItemValueTotal:insuranceModalState.insuredValue,selectedPriceNum=selectedPriceToCalculate?Number(selectedPriceToCalculate.replace(/,/g,"")):0;return(0,utils.kB)(userInsuranceRate,selectedPriceNum,rateCostOnly,mixedSelection.numberSelected)}),[insuranceValueType,showItemValueTotal,insuranceModalState.insuredValue,rateCostOnly,userInsuranceRate,mixedSelection.numberSelected]),onInsuranceValueTypeChange=(0,react.useCallback)((function(event){"keep"===event.target.value?insuranceModalState.onKeepSelection():setInsuranceValueType(event.target.value)}),[insuranceModalState]);(0,react.useEffect)((function(){"noAddedInsurance"===insuranceValueType?insuranceModalState.onDisableInsured():insuranceModalState.onEnableInsured(),"hasInsurance"===insuranceValueType&&showItemValueTotal&&insuranceModalState.setValue("amount",showItemValueTotal)}),[insuranceValueType]);var buttonText="noAddedInsurance"===insuranceValueType||"keep"===insuranceModalState.insured?t("orders:phrases:continue"):"".concat(t("orders:shipmentExtras:addFor")," ").concat(t("translations:currency",{value:{value:insuranceCost,currency_iso:insuranceModalState.currency.iso}})),handleUpdateInsurance=(0,react.useCallback)((function(){(0,segment.u4)(segment.sV.new_insurance_updated,{total_value_of_order:insuranceModalState.insuredValue,insurance_price:(0,utils.kB)(userInsuranceRate,Number(insuranceModalState.insuredValue)),insurance_option:insuranceValueType}),insuranceModalState.onClickSubmit()}),[insuranceModalState,insuredItems,insuranceValueType,userInsuranceRate]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:addOrEditInsurance&&(0,emotion_react_jsx_runtime_browser_esm.Y)(MobileAndDesktopDrawer.A,(0,tslib_es6.Cl)({drawerContentTestId:"shipment-extras-card-insurance-drawer",drawerProps:{transitionDuration:0},title:t("insurance.basicHeadline"),subtitle:1===mixedSelection.numberSelected?"1 ".concat(t("orders:itemsCard:order")):mixedSelection.numberSelected>1?"".concat(mixedSelection.numberSelected," ").concat(t("orders:itemsCard:orderPlural")):"",open:!0,onBack:onClose,onClose,fullWidth:!0,fullHeight:!0,footerButtonPrimary:{text:buttonText,action:handleUpdateInsurance},footerButtonSecondary:{text:t("orders:phrases:cancel"),action:onClose},paperBoxShadow:"none"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(SimplifiedInsuranceView.w,(0,tslib_es6.Cl)({},insuranceModalState,{t,onInsuranceValueTypeChange,showItemValueTotal,insuranceValueType,mixedSelection,addInsuranceButtonName:buttonText,isBatch:!0}))}))})};var constants_currency=__webpack_require__("./app/constants/currency.ts"),util=__webpack_require__("./app/pages/Orders/All/OrderDetailsPage/Tabs/ShipmentExtrasCard/util.ts");const ShipmentInsuranceRow=function(_a){var t=_a.t,extrasInsurance=_a.extrasInsurance,extrasSignature=_a.extrasSignature,onSubmit=_a.onSubmit,userInsuranceRate=_a.userInsuranceRate,mixedSelection=_a.mixedSelection,insuredItems=_a.insuredItems,defaultModalContent=_a.defaultModalContent,lineItemsCost=_a.lineItemsCost,rateCostOnly=_a.rateCostOnly,isBatch=_a.isBatch,isConfirmationDrawer=_a.isConfirmationDrawer,_b=(0,hooks.s5)(),addOrEditInsurance=_b.addOrEditInsurance,onClickAddOrEditInsurance=_b.onClickAddOrEditInsurance,onClickCancelInsurance=_b.onClickCancelInsurance,handleAddEditInsuranceClick=function(onClickAddOrEditInsurance){return(0,react.useCallback)((function(){onClickAddOrEditInsurance(),(0,segment.u4)(segment.sV.insurance_details_opened)}),[onClickAddOrEditInsurance,segment.u4])}(onClickAddOrEditInsurance),handleSaveInsurance=function(onSubmitExtras,onClickCancelInsurance){return(0,react.useCallback)((function(newInsuranceValues){if("keep"!==newInsuranceValues.hasInsurance){var options=(0,util.E)(newInsuranceValues);onSubmitExtras(options),onClickCancelInsurance()}else onClickCancelInsurance()}),[onSubmitExtras,onClickCancelInsurance])}(onSubmit,onClickCancelInsurance),removeInsurance=(0,react.useCallback)((function(){onSubmit({insurance:null}),(0,segment.u4)(segment.sV.insurance_removed_sidebar)}),[onSubmit,extrasInsurance,extrasSignature]),currency=defaultModalContent.currency,insuranceAmount=defaultModalContent.amount,hasInsurance=extrasInsurance||isBatch&&mixedSelection.numberWithInsurance>0,shipmentInsuranceDescription=(0,react.useMemo)((function(){if(isBatch){if(mixedSelection.numberWithInsurance>0)return t("insurance.numOfInsured",{numInsured:mixedSelection.numberWithInsurance,numOrders:mixedSelection.numberSelected});if(mixedSelection.totalInsuranceCost>0)return"".concat(isConfirmationDrawer?"":t("shipmentExtras.insuranceTotalCost")+":"," ").concat(t("translations:currency",{value:{value:isConfirmationDrawer?mixedSelection.totalCoverage:mixedSelection.totalInsuranceCost,currency_iso:mixedSelection.currency?mixedSelection.currency.iso:constants_currency.q.USD.iso}}))}if(extrasInsurance)return"".concat(isConfirmationDrawer?"":t("shipmentExtras.insuranceTotalCost")+":"," ").concat(t("translations:currency",{value:{value:isConfirmationDrawer?insuranceAmount:(0,utils.kB)(userInsuranceRate,parseFloat(insuranceAmount)),currency_iso:currency.iso}}))}),[isBatch,extrasInsurance,t,mixedSelection.totalInsuranceCost,mixedSelection.totalCoverage,mixedSelection.currency,mixedSelection.numberWithInsurance,mixedSelection.numberSelected,userInsuranceRate,insuranceAmount,currency.iso,isConfirmationDrawer]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CardBlock,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack.A,(0,tslib_es6.Cl)({direction:"column",spacing:2},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(ShipmentExtrasSpacer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack.A,(0,tslib_es6.Cl)({direction:"row",alignItems:"center",justifyContent:"flex-start",spacing:1},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"bodyEmphasized"},{children:t("blackbeard.coverageValue")}))})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({direction:"row",alignItems:"center",justifyContent:"flex-start",spacing:1},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"body","data-testid":"insurance-description",color:colors.T.gray80},{children:hasInsurance?shipmentInsuranceDescription:t("blackbeard.noCoverage")})),hasInsurance&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Tooltip.A,(0,tslib_es6.Cl)({variant:"secondary",title:t("shipmentExtras.insuranceRemove")},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(IconButton.A,(0,tslib_es6.Cl)({size:"small","aria-label":t("shipmentExtras.insuranceRemove"),onClick:removeInsurance,sx:{color:colors.T.gray80,ml:.5},"data-e2e":"remove-insurance-button"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Close.A,{})}))})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(AddEditButton,(0,tslib_es6.Cl)({variant:"text",color:"primary",onClick:handleAddEditInsuranceClick,"data-testid":"shipment-extras-insurance-drawer-open-link"},{children:t(hasInsurance?"shipmentExtras.edit":"actions.single.add")}))]}))]})}))}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceCard_ShipmentInsuranceSimplifiedView,{onSubmit:handleSaveInsurance,onClose:onClickCancelInsurance,hasSignatureConfirmation:!!(null==extrasSignature?void 0:extrasSignature.hasSignatureConfirmation),t,userInsuranceRate,defaultValues:defaultModalContent,useImportedAmount:!1,addOrEditInsurance,mixedSelection,insuredItems,lineItemsCost,rateCostOnly})]})};var Alert=__webpack_require__("./node_modules/@goshippo/components/esm/Alert/Alert.js"),MobileStyles=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/ShipmentExtrasCard/ExtrasModal/MobileStyles.tsx"),Form=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/ShipmentExtrasCard/VerticalSignatureConfirmationView/Form.tsx"),SignatureConfirmationInformation=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/ShipmentExtrasCard/VerticalSignatureConfirmationView/SignatureConfirmationInformation.tsx");const ShipmentExtrasCard_VerticalSignatureConfirmationView=function(_a){var t=_a.t,hasSignatureConfirmation=_a.hasSignatureConfirmation,signatureConfirmationType=_a.signatureConfirmationType,onChangeHasSignatureConfirmation=_a.onChangeHasSignatureConfirmation,onChangeSignatureConfirmationType=_a.onChangeSignatureConfirmationType,mixedSelection=_a.mixedSelection;return(0,emotion_react_jsx_runtime_browser_esm.FD)(MobileStyles.A.MobileContentBodyContent,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(MobileStyles.A.MobileSectionTitle,{children:t("shipmentExtras.signatureConfirmation")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack.A,(0,tslib_es6.Cl)({sx:{placeItems:"center",gap:"1rem",flexDirection:"column"}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Form.A,{fullScreen:!0,handleSignatureConfirmationChanged:onChangeHasSignatureConfirmation,handleSignatureConfirmationTypeChanged:onChangeSignatureConfirmationType,hasSignatureConfirmation,signatureConfirmationType,mixedSelection,t})})),(0,emotion_react_jsx_runtime_browser_esm.FD)(MobileStyles.A.MobileModalSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(MobileStyles.A.MobileSectionTitle,{children:t("shipmentExtras.signatureConfirmation")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SignatureConfirmationInformation.A,{t})]})]})};var VerticalSignatureConfirmationView_hooks=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/ShipmentExtrasCard/VerticalSignatureConfirmationView/hooks.ts");const ShipmentInsuranceCard_SignatureConfirmationSimplifiedView=function(_a){var defaultValues=_a.defaultValues,insuredValue=_a.insuredValue,onClose=_a.onClose,onClickSubmitParent=_a.onClickSubmit,editSignatureDrawer=_a.editSignatureDrawer,batchEntryCount=_a.batchEntryCount,mixedSelection=_a.mixedSelection,t=_a.t,isRequired=_a.isRequired,_b=(0,VerticalSignatureConfirmationView_hooks.Z)(defaultValues,onClickSubmitParent,onClose),hasSignatureConfirmation=_b.hasSignatureConfirmation,signatureConfirmationType=_b.signatureConfirmationType,onSubmit=_b.onSubmit,setHasSignatureConfirmation=_b.setHasSignatureConfirmation,setSignatureConfirmationType=_b.setSignatureConfirmationType,handleSubmit=(0,react.useCallback)((function(){(0,segment.u4)(segment.sV.signature_updated,{type_of_signature:signatureConfirmationType,is_required:isRequired}),onSubmit()}),[signatureConfirmationType,mixedSelection.totalSignatureCost,mixedSelection.numberSelected,onSubmit]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:editSignatureDrawer&&(0,emotion_react_jsx_runtime_browser_esm.Y)(MobileAndDesktopDrawer.A,(0,tslib_es6.Cl)({drawerProps:{transitionDuration:0},title:t("shipmentExtras.signatureConfirmation"),subtitle:1===batchEntryCount?"1 ".concat(t("orders:itemsCard:order")):batchEntryCount>1?"".concat(batchEntryCount," ").concat(t("orders:itemsCard:orderPlural")):"",open:!0,onBack:onClose,onClose,footerButtonPrimary:{text:t("shipmentExtras.update"),action:handleSubmit},footerButtonSecondary:{text:t("shipmentExtras.cancel"),action:onClose},fullWidth:!0,fullHeight:!0,paperBoxShadow:"none",footerDataTestId:"signature-footer"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentExtrasCard_VerticalSignatureConfirmationView,{hasSignatureConfirmation,signatureConfirmationType,insuredValue,onChangeHasSignatureConfirmation:setHasSignatureConfirmation,onChangeSignatureConfirmationType:setSignatureConfirmationType,mixedSelection,t})}))})};var orders_selectors=__webpack_require__("./app/selectors/orders.selectors.ts"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),batch_entry_selectors=__webpack_require__("./app/selectors/batch-entry.selectors.ts"),signature=__webpack_require__("./app/utils/signature.ts");const ShipmentInsuranceCard_ShipmentSignatureRow=function(_a){var t=_a.t,extrasInsurance=_a.extrasInsurance,extrasSignature=_a.extrasSignature,onSubmitParent=_a.onSubmit,mixedSelection=_a.mixedSelection,defaultModalContent=_a.defaultModalContent,isInsuranceAvailable=_a.isInsuranceAvailable,isBatch=_a.isBatch,hasSignatureError=_a.hasSignatureError,signatureErrorSource=_a.signatureErrorSource,orderSelection=(0,es.d4)(orders_selectors.Li),batchEntryData=(0,es.d4)(batch_entry_selectors.zo),_b=(0,tslib_es6.zs)((0,react.useState)(!1),2),editSignatureDrawer=_b[0],setEditSignatureDrawer=_b[1],baseDefaultSignatureContent=(0,hooks.kK)(extrasSignature).defaultSignatureContent,defaultEditSignatureContent=(0,react.useMemo)((function(){return mixedSelection.numberSelected>1&&mixedSelection.numberWithSignature>0?{hasSignatureConfirmation:!0,signatureConfirmationType:"KEEP"}:baseDefaultSignatureContent}),[baseDefaultSignatureContent,mixedSelection]),onSubmitSignature=(0,hooks.$V)(onSubmitParent,setEditSignatureDrawer).onSubmitSignature,onClickEditSignatureDrawer=(0,react.useCallback)((function(){setEditSignatureDrawer(!0),(0,segment.u4)(segment.sV.signature_details_opened)}),[]),onCloseEditSignatureDrawer=(0,react.useCallback)((function(){setEditSignatureDrawer(!1)}),[]),disableRemoveSignature=(0,signature.q)(orderSelection,batchEntryData),removeSignature=(0,react.useCallback)((function(){onSubmitParent({signatureConfirmation:null}),(0,segment.u4)(segment.sV.signature_removed_sidebar)}),[onSubmitParent]),baseSignatureConfirmationDescription=(0,hooks.vE)(defaultEditSignatureContent,!!isBatch,t,mixedSelection).signatureConfirmationDescription,batchEntryCount=mixedSelection.numberSelected;return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(CardBlock,(0,tslib_es6.Cl)({sx:isInsuranceAvailable?null:{":first-of-type":{borderTop:"none",paddingTop:0}}},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(ShipmentExtrasSpacer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack.A,(0,tslib_es6.Cl)({direction:"row",alignItems:"center",justifyContent:"flex-start",spacing:1},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"bodyEmphasized"},{children:t("blackbeard.signature")}))})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack.A,(0,tslib_es6.Cl)({direction:"row",alignItems:"center",justifyContent:"flex-start",spacing:1},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"body","data-testid":"extra-signature-type",color:colors.T.gray80},{children:defaultEditSignatureContent.hasSignatureConfirmation?baseSignatureConfirmationDescription:t("blackbeard.notRequired")})),defaultEditSignatureContent.hasSignatureConfirmation&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Tooltip.A,(0,tslib_es6.Cl)({variant:"secondary",title:t("shipmentExtras.signatureRemove")},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(IconButton.A,(0,tslib_es6.Cl)({size:"small","aria-label":t("shipmentExtras.signatureRemove"),disabled:disableRemoveSignature,onClick:removeSignature,sx:{color:colors.T.gray80,ml:.5},"data-e2e":"remove-signature-button"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Close.A,{})}))})})),(0,emotion_react_jsx_runtime_browser_esm.Y)(AddEditButton,(0,tslib_es6.Cl)({variant:"text",color:"primary",onClick:onClickEditSignatureDrawer,"data-testid":"extra-signature-drawer-open",disabled:hasSignatureError||disableRemoveSignature},{children:defaultEditSignatureContent.hasSignatureConfirmation?t("shipmentExtras.edit"):t("actions.single.add")}))]}))]}),hasSignatureError?(0,emotion_react_jsx_runtime_browser_esm.Y)(Alert.A,(0,tslib_es6.Cl)({severity:"error","data-testid":"signature-error"},{children:t("orders:shipmentExtras:signatureErrorMsg",{source:signatureErrorSource})})):null]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceCard_SignatureConfirmationSimplifiedView,{defaultValues:defaultEditSignatureContent,insuredValue:parseFloat((null==extrasInsurance?void 0:extrasInsurance.amount)||"0")||0,onClose:onCloseEditSignatureDrawer,onClickSubmit:onSubmitSignature,t,editSignatureDrawer,batchEntryCount,mixedSelection,isRequired:parseFloat(defaultModalContent.amount)>=500})]})};const ShipmentInsuranceCard_ShipmentInsuranceCardContent=function(props){return props.isLoading?(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentExtraContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CircularProgress.A,{})}):(0,emotion_react_jsx_runtime_browser_esm.FD)(ShipmentExtraContainer,{children:[props.isInsuranceAvailable&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceRow,(0,tslib_es6.Cl)({},props)),(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceCard_ShipmentSignatureRow,(0,tslib_es6.Cl)({},props))]})};var useShippingRiskAssessment=__webpack_require__("./app/modules/shippingRiskAssessment/hooks/useShippingRiskAssessment.tsx"),ShippingRiskAssessmentAlert=__webpack_require__("./app/modules/shippingRiskAssessment/components/ShippingRiskAssessmentAlert.tsx"),tracking=__webpack_require__("./app/utils/fullstory/tracking.ts");const ShipmentInsuranceCard_ShipmentInsuranceHeader=function(_a){var mixedSelection=_a.mixedSelection,insuranceCost=_a.insuranceCost,currency=_a.currency,_b=_a.lineItemsCost,lineItemsCost=void 0===_b?0:_b,t=_a.t,orderAddress=_a.orderAddress,_c=(0,useShippingRiskAssessment.t)(orderAddress),isLoadingShippingRisk=_c.isLoadingShippingRisk,shippingRiskAssessment=_c.shippingRiskAssessment,isEnabled=_c.isEnabled,isSingleOrderWithoutInsurance=1===mixedSelection.numberSelected&&0===mixedSelection.numberWithInsurance,shouldBeConsideredForShippingRisk="MEDIUM"===(null==shippingRiskAssessment?void 0:shippingRiskAssessment.risk_level)&&isSingleOrderWithoutInsurance&&isEnabled,hasInsurance=mixedSelection&&mixedSelection.numberWithInsurance===mixedSelection.numberSelected,isMixedInsurance=mixedSelection&&mixedSelection.numberWithInsurance>0&&mixedSelection.numberWithInsurance<mixedSelection.numberSelected,highValueItemsCurrency=(0,react.useMemo)((function(){return{amount:t("translations:currency",{value:{value:lineItemsCost,currency_iso:currency.iso,minimumFractionDigits:lineItemsCost%1!=0?2:0}})}}),[t,lineItemsCost,currency.iso]),insuranceCostRecommendation=(0,react.useMemo)((function(){return t("translations:currency",{value:{value:insuranceCost,currency_iso:currency.iso}})}),[t,insuranceCost,currency.iso]),insuranceHeaderTitle=(0,react.useMemo)((function(){return isMixedInsurance?t("orders:blackbeard.shipmentMixedInsured"):hasInsurance?t("orders:blackbeard.shipmentInsuredVariant",{count:mixedSelection.numberSelected}):lineItemsCost&&lineItemsCost>=500&&1===mixedSelection.numberSelected?t("orders:shipmentExtras.notInsuredAmountTitleVariant",highValueItemsCurrency):t("orders:blackbeard.shipmentNotInsuredVariant",{count:mixedSelection.numberSelected})}),[isMixedInsurance,hasInsurance,lineItemsCost,mixedSelection.numberSelected,t,highValueItemsCurrency]);return(0,react.useEffect)((function(){!hasInsurance&&shouldBeConsideredForShippingRisk&&(0,tracking.q)(tracking.t.USER_SHOWN_INSURANCE_RISK_SCORE_CALLOUT,{})}),[hasInsurance,shouldBeConsideredForShippingRisk]),(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(InsuranceHeader,(0,tslib_es6.Cl)({"data-testid":"shipment-insurance-accordion-header",component:"h2",variant:"h2"},{children:insuranceHeaderTitle})),!hasInsurance&&(isLoadingShippingRisk&&isEnabled?(0,emotion_react_jsx_runtime_browser_esm.Y)(Box.A,(0,tslib_es6.Cl)({display:"flex",justifyContent:"center",alignItems:"center"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CircularProgress.A,{size:"large"})})):shouldBeConsideredForShippingRisk?(0,emotion_react_jsx_runtime_browser_esm.Y)(ShippingRiskAssessmentAlert.w,{t,insuranceCost,currency}):(0,emotion_react_jsx_runtime_browser_esm.Y)(InsuranceRecommend,(0,tslib_es6.Cl)({component:"p",variant:"body"},{children:lineItemsCost?(0,emotion_react_jsx_runtime_browser_esm.Y)(translate.In,{i18nKey:"shipmentExtras.xcoverRecommendItems",value:(0,emotion_react_jsx_runtime_browser_esm.Y)("strong",{children:insuranceCostRecommendation})}):t("shipmentExtras.xcoverRecommend")})))]})};const ShipmentInsuranceCard_ShipmentInsuranceCard=function(_a){var batchEntryLineItems=_a.batchEntryLineItems,insuranceExtra=_a.insuranceExtra,signatureConfirmation=_a.signatureConfirmation,isBatch=_a.isBulk,isLoading=_a.isLoading,mixedSelection=_a.mixedSelection,order=_a.order,onSubmitExtras=_a.onSubmitExtras,t=_a.t,userInsuranceRate=_a.userInsuranceRate,insuredItems=_a.insuredItems,hasReturn=_a.hasReturn,isInsuranceAvailable=_a.isInsuranceAvailable,isConfirmationDrawer=_a.isConfirmationDrawer,hasSignatureError=_a.hasSignatureError,signatureErrorSource=_a.signatureErrorSource,rateCostOnly=_a.rateCostOnly,batchEntryAddress=_a.batchEntryAddress,partialOrderLineItems=(0,react.useMemo)((function(){return(0,utils.Eo)(null==order?void 0:order.lineItems,batchEntryLineItems)}),[order,batchEntryLineItems]),defaultModalContent=(0,react.useMemo)((function(){var content=(0,utils.dc)(insuranceExtra,order,partialOrderLineItems);return(0,modules_utils.WW)(mixedSelection)?(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},content),{hasInsurance:"keep"}):content}),[insuranceExtra,mixedSelection,order,partialOrderLineItems]),insuranceCost=(0,utils.kB)(userInsuranceRate,+defaultModalContent.amount,rateCostOnly,mixedSelection.numberSelected),lineItemsCost=(0,utils.jX)(null==order?void 0:order.lineItems),showReturnInsuranceSignatureWarning=hasReturn&&!!(null==insuranceExtra?void 0:insuranceExtra.amount)&&!!lineItemsCost&&lineItemsCost>=500&&(null==signatureConfirmation?void 0:signatureConfirmation.hasSignatureConfirmation);return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Card_styled.Q_,(0,tslib_es6.Cl)({"data-testid":"insurance-card-container",sx:{marginBottom:"0.5rem"}},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(ContentContainer,{children:[isInsuranceAvailable&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceCard_ShipmentInsuranceHeader,{mixedSelection,t,insuranceCost,currency:defaultModalContent.currency,lineItemsCost,orderAddress:batchEntryAddress}),isInsuranceAvailable&&showReturnInsuranceSignatureWarning&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ReturnLabelWarning.A,{t,isSidePanel:!0}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceCard_ShipmentInsuranceCardContent,{batchEntryLineItems,isBatch,isLoading,extrasInsurance:insuranceExtra,extrasSignature:signatureConfirmation,onSubmit:onSubmitExtras,t,userInsuranceRate,mixedSelection,defaultModalContent,insuredItems,lineItemsCost,rateCostOnly,isInsuranceAvailable,isConfirmationDrawer,hasSignatureError,signatureErrorSource})]})}))})})};var weight=__webpack_require__("./app/constants/weight.ts"),countries=__webpack_require__("./app/constants/countries.ts"),moment=__webpack_require__("./node_modules/moment/moment.js"),Order=__webpack_require__("./app/types/Order.ts"),mocks=__webpack_require__("./app/tests/mocks/index.ts");const ShipmentInsuranceCard_stories={title:"ShipmentInsuranceCard",component:ShipmentInsuranceCard_ShipmentInsuranceCard,parameters:{layout:"centered"},argTypes:{}};var ShipmentInsuranceCardWithTranslate=(0,translate.Tl)("orders")(ShipmentInsuranceCard_ShipmentInsuranceCard),Template=function(args){return(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceCardWithTranslate,(0,tslib_es6.Cl)({},args))},DefaultState=Template.bind({}),InsuranceAndSignature=Template.bind({}),OverFiveHundred=Template.bind({}),onSubmitExtras=function(){};DefaultState.args={batchEntryLineItems:[{objectId:"123456",quantity:1}],insuranceExtra:void 0,isBulk:!1,isLoading:!1,mixedSelection:{numberSelected:0,numberWithInsurance:0,totalCoverage:0,totalInsuranceCost:0,numberWithSignature:0,totalSignatureCost:0,currency:{iso:"USD",symbol:"$"}},order:{toAddress:mocks.ch,subtotalPrice:"25",totalPrice:"27",objectId:"7673a6958e3341929580299a8d842979",orderNumber:"#4092",orderStatus:Order.Re.PAID,objectOwner:"malcolm_fdv@shippo.com",validationStatus:Order.cY.VALID,placedAt:moment("2018-03-27T22:13:55.184Z"),errors:[],shopApp:"Bigcommerce",weight:"2.00",weightUnit:"lb",transactions:[],rates:[],totalTax:"0.00",currency:"USD",shippingMethod:"None",shippingCost:"0.00",shippingCostCurrency:"USD",notes:null,items:[],hidden:!1,partialFulfillmentRequests:[],totalPartialFulfillments:0,lineItems:[{objectId:"098765",quantity:1,title:"T-Shirt",sku:"82828282",totalAmount:"90",totalWeight:"4",weightUnit:weight.VV.LB,id:12345,product:"cc2202c14d5e45c791fc887ac2bdec2b",variant:"af6b14340c8b46cda326de80b5f37416",appId:"1312327532638",isFulfilled:!1,unitAmount:"6.00",unitWeight:"1.00",manufactureCountry:null,maxShipTime:null,maxDeliveryTime:null,hsCode:null,variantTitle:"",countryOfOrigin:countries.Xr.US,currency:{iso:"USD",symbol:"$"}}]},onSubmitExtras,signatureConfirmation:{hasSignatureConfirmation:!1,signatureConfirmationType:null},t:function(key){return key},userInsuranceRate:.0125,insuredItems:["T-Shirt"]},InsuranceAndSignature.args={batchEntryLineItems:[{objectId:"123456",quantity:1}],insuranceExtra:{amount:"1.25",currency:{iso:"USD",symbol:"$"},useImportedAmount:!1},isBulk:!1,isLoading:!1,mixedSelection:{numberSelected:1,numberWithInsurance:1,totalCoverage:125,totalInsuranceCost:1.25,numberWithSignature:1,totalSignatureCost:3,currency:{iso:"USD",symbol:"$"}},order:{toAddress:mocks.ch,subtotalPrice:"25",totalPrice:"27",objectId:"7673a6958e3341929580299a8d842979",orderNumber:"#4092",orderStatus:Order.Re.PAID,objectOwner:"malcolm_fdv@shippo.com",validationStatus:Order.cY.VALID,placedAt:moment("2018-03-27T22:13:55.184Z"),errors:[],shopApp:"Bigcommerce",weight:"2.00",weightUnit:"lb",transactions:[],rates:[],totalTax:"0.00",currency:"USD",shippingMethod:"None",shippingCost:"0.00",shippingCostCurrency:"USD",notes:null,items:[],hidden:!1,partialFulfillmentRequests:[],totalPartialFulfillments:0,lineItems:[{objectId:"098765",quantity:1,title:"T-Shirt",sku:"82828282",totalAmount:"90",totalWeight:"4",weightUnit:weight.VV.LB,id:12345,product:"cc2202c14d5e45c791fc887ac2bdec2b",variant:"af6b14340c8b46cda326de80b5f37416",appId:"1312327532638",isFulfilled:!1,unitAmount:"6.00",unitWeight:"1.00",manufactureCountry:null,maxShipTime:null,maxDeliveryTime:null,hsCode:null,variantTitle:"",countryOfOrigin:countries.Xr.US,currency:{iso:"USD",symbol:"$"}}]},onSubmitExtras,signatureConfirmation:{hasSignatureConfirmation:!0,signatureConfirmationType:"STANDARD"},t:function(key){return key},userInsuranceRate:.0125,insuredItems:["T-Shirt"]},OverFiveHundred.args={batchEntryLineItems:[{objectId:"123456",quantity:1}],insuranceExtra:{amount:"510",currency:{iso:"USD",symbol:"$"},useImportedAmount:!1},isBulk:!1,isLoading:!1,mixedSelection:{numberSelected:1,numberWithInsurance:1,totalCoverage:510,totalInsuranceCost:5.1,numberWithSignature:1,totalSignatureCost:3,currency:{iso:"USD",symbol:"$"}},order:{toAddress:mocks.ch,subtotalPrice:"25",totalPrice:"27",objectId:"7673a6958e3341929580299a8d842979",orderNumber:"#4092",orderStatus:Order.Re.PAID,objectOwner:"malcolm_fdv@shippo.com",validationStatus:Order.cY.VALID,placedAt:moment("2018-03-27T22:13:55.184Z"),errors:[],shopApp:"Bigcommerce",weight:"2.00",weightUnit:"lb",transactions:[],rates:[],totalTax:"0.00",currency:"USD",shippingMethod:"None",shippingCost:"0.00",shippingCostCurrency:"USD",notes:null,items:[],hidden:!1,partialFulfillmentRequests:[],totalPartialFulfillments:0,lineItems:[{objectId:"098765",quantity:1,title:"T-Shirt",sku:"82828282",totalAmount:"90",totalWeight:"4",weightUnit:weight.VV.LB,id:12345,product:"cc2202c14d5e45c791fc887ac2bdec2b",variant:"af6b14340c8b46cda326de80b5f37416",appId:"1312327532638",isFulfilled:!1,unitAmount:"6.00",unitWeight:"1.00",manufactureCountry:null,maxShipTime:null,maxDeliveryTime:null,hsCode:null,variantTitle:"",countryOfOrigin:countries.Xr.US,currency:{iso:"USD",symbol:"$"}}]},onSubmitExtras,signatureConfirmation:{hasSignatureConfirmation:!0,signatureConfirmationType:"STANDARD"},t:function(key){return key},userInsuranceRate:.0125,insuredItems:["T-Shirt"]},DefaultState.parameters={...DefaultState.parameters,docs:{...DefaultState.parameters?.docs,source:{originalSource:"(args: ShipmentInsuranceCardProps) => <ShipmentInsuranceCardWithTranslate {...args} />",...DefaultState.parameters?.docs?.source}}},InsuranceAndSignature.parameters={...InsuranceAndSignature.parameters,docs:{...InsuranceAndSignature.parameters?.docs,source:{originalSource:"(args: ShipmentInsuranceCardProps) => <ShipmentInsuranceCardWithTranslate {...args} />",...InsuranceAndSignature.parameters?.docs?.source}}},OverFiveHundred.parameters={...OverFiveHundred.parameters,docs:{...OverFiveHundred.parameters?.docs,source:{originalSource:"(args: ShipmentInsuranceCardProps) => <ShipmentInsuranceCardWithTranslate {...args} />",...OverFiveHundred.parameters?.docs?.source}}}}}]);