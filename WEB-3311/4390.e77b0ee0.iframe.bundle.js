"use strict";(self.webpackChunk_shippo_feron=self.webpackChunk_shippo_feron||[]).push([[4390],{"./app/types/APIMessage.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function fromJSON(jsonAPIMessage){return{kind:"APIMessage",code:jsonAPIMessage.code,source:jsonAPIMessage.source,text:jsonAPIMessage.text}}__webpack_require__.d(__webpack_exports__,{OR:()=>messageIsVisible,rS:()=>fromJSON});var hiddenCarrierMessages={DHLExpress:new Set(["Shippo's DHL Express master account doesn't support shipments to inside of the US"]),ShippoCommon:new Set(["Shipment origin or destination state is out of the service area for LSO."]),UPS:new Set(["RatedShipmentAlert: Ship To Address Classification is changed from Commercial to Residential","Shipment origin is out of service area for UPS Master account from CA","RatedShipmentAlert: Your invoice may vary from the displayed reference rates"])},messageIsVisible=function(message){return!function(message){var _a;return!!(null===(_a=hiddenCarrierMessages[message.source])||void 0===_a?void 0:_a.has(message.text))}(message)}},"./app/types/LineItem.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{WG:()=>totalQuantity,X8:()=>getLineItemsTotalWeight,_:()=>getLineItemsTotalValue,_g:()=>lineItemHasWeight,di:()=>sort,eL:()=>payloadToJSON,iD:()=>isLineItemValid,rS:()=>fromJSON,wY:()=>isCustomsReady});var _constants_countries__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/constants/countries.ts"),_constants_currency__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/constants/currency.ts"),moment__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/moment/moment.js");function fromJSON(jsonLineItem){return{objectId:jsonLineItem.object_id,id:jsonLineItem.id,product:jsonLineItem.product,variant:jsonLineItem.variant,appId:jsonLineItem.app_id,title:jsonLineItem.title,sku:jsonLineItem.sku,parcel:jsonLineItem.parcel,quantity:jsonLineItem.quantity,isFulfilled:jsonLineItem.is_fulfilled,totalAmount:jsonLineItem.total_amount,unitAmount:jsonLineItem.unit_amount,currency:jsonLineItem.currency&&Object.values(_constants_currency__WEBPACK_IMPORTED_MODULE_1__.q).find((function(currency){return currency.iso===jsonLineItem.currency.toUpperCase()}))||_constants_currency__WEBPACK_IMPORTED_MODULE_1__.q.USD,totalWeight:jsonLineItem.total_weight,unitWeight:jsonLineItem.unit_weight,weightUnit:jsonLineItem.weight_unit?jsonLineItem.weight_unit:null,manufactureCountry:jsonLineItem.manufacture_country,maxShipTime:jsonLineItem.max_ship_time?moment__WEBPACK_IMPORTED_MODULE_2__(jsonLineItem.max_ship_time):null,maxDeliveryTime:jsonLineItem.max_delivery_time?moment__WEBPACK_IMPORTED_MODULE_2__(jsonLineItem.max_delivery_time):null,hsCode:jsonLineItem.hs_code,variantTitle:jsonLineItem.variant_title,countryOfOrigin:jsonLineItem.country_of_origin?_constants_countries__WEBPACK_IMPORTED_MODULE_0__.Xr[jsonLineItem.country_of_origin.toUpperCase()]:null}}function lineItemHasWeight(lineItem){return null!==lineItem.weightUnit&&0!==lineItem.quantity&&!!lineItem.totalWeight&&0!==parseFloat(lineItem.totalWeight)}function isLineItemValid(lineItem){return[lineItem.quantity,lineItem.title,lineItem.weightUnit,lineItem.unitAmount,lineItem.unitWeight].every(Boolean)}function isCustomsReady(lineItem){return isLineItemValid(lineItem)&&!!lineItem.countryOfOrigin}function payloadToJSON(lineItemPayload){return{title:lineItemPayload.title,quantity:Number(lineItemPayload.quantity),unit_weight:lineItemPayload.unitWeight,weight_unit:lineItemPayload.weightUnit.value,unit_amount:lineItemPayload.unitAmount,currency:lineItemPayload.currency.value,country_of_origin:lineItemPayload.countryOfOrigin.iso2,sku:lineItemPayload.sku}}function getTotalValue(total,lineItem){var parsedValue=parseFloat(lineItem.totalAmount);return isNaN(parsedValue)?total:total+parsedValue}function getTotalWeight(total,lineItem){var parsedWeight=parseFloat(lineItem.totalWeight);return isNaN(parsedWeight)?total:total+parsedWeight}function getLineItemsTotalValue(lineItems){return lineItems.reduce(getTotalValue,0)}function getLineItemsTotalWeight(linteItems){return linteItems.reduce(getTotalWeight,0)}function totalQuantity(lineItems){return lineItems.reduce((function(tot,li){return tot+li.quantity}),0)}function sort(lineItems){return lineItems.sort((function(a,b){return a.quantity===b.quantity?a.title.localeCompare(b.title):a.quantity>b.quantity?-1:1}))}},"./app/types/Order.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AJ:()=>isPartiallyFulfilled,AU:()=>getOrderState,CW:()=>getMaxShipTime,Cm:()=>hasPartialFulfillmentRequests,Dd:()=>isManualOrder,FC:()=>isEligibleForSplit,Gy:()=>isFulfilledOutsideShippo,Hl:()=>actionableOrderSelectionIds,J_:()=>getOrderWeight,LE:()=>fromWebOrderToOrderTagsMapping,Mp:()=>hasValidTotalPrice,PF:()=>hasValidShippingInfo,Pt:()=>isFulfilledInShippoOldExperience,Qh:()=>sortOrderTagsByName,Re:()=>OrderStatus,X0:()=>newOrder,YN:()=>calculateValueByQuantity,_g:()=>isPartialFulfillmentAllCompleted,c0:()=>isOrderLineItemEditable,cH:()=>OrderState,cY:()=>OrderValidationStatus,cs:()=>isFulfilledSingleLabel,k4:()=>getMaxDeliveryTime,mm:()=>isCancelled,p2:()=>requiresCustomsDeclaration,rS:()=>fromJSON,sf:()=>isFulfilled,tR:()=>isPaid,vz:()=>orderHasWeight,xf:()=>hasValidLineItems});var OrderStatus,OrderValidationStatus,OrderState,SyncStatus,tslib__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),moment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/moment/moment.js"),_types_Store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/types/Store.ts"),_Address__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/types/Address.ts"),_APIError__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./app/types/APIError.ts"),_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/types/CustomsDeclaration.ts"),_LineItem__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./app/types/LineItem.ts"),_OrderBatchEntry__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./app/types/OrderBatchEntry.ts"),_OrdersBatch__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./app/types/OrdersBatch.ts"),_Parcel__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./app/types/Parcel.ts"),_Rate__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./app/types/Rate.ts"),_Transaction__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./app/types/Transaction.ts"),_utils_featureflags_FeatureFlagsProvider__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./app/utils/featureflags/FeatureFlagsProvider.tsx"),_utils_featureflags__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./app/utils/featureflags/index.ts");function actionableOrderSelectionIds(orderSelection){return Object.entries(orderSelection).reduce((function(obj,_a){var _b=(0,tslib__WEBPACK_IMPORTED_MODULE_12__.zs)(_a,2),orderObjectId=_b[0],batchEntryIds=_b[1];return batchEntryIds.length>0?(0,tslib__WEBPACK_IMPORTED_MODULE_12__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_12__.Cl)({},obj),{batchEntryIds:(0,tslib__WEBPACK_IMPORTED_MODULE_12__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_12__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_12__.zs)(obj.batchEntryIds),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_12__.zs)(batchEntryIds),!1)}):(0,tslib__WEBPACK_IMPORTED_MODULE_12__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_12__.Cl)({},obj),{orderObjectIds:(0,tslib__WEBPACK_IMPORTED_MODULE_12__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_12__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_12__.zs)(obj.orderObjectIds),!1),[orderObjectId],!1)})}),{orderObjectIds:[],batchEntryIds:[]})}function fromJSON(jsonOrder){return{objectId:jsonOrder.object_id,orderNumber:jsonOrder.order_number,orderStatus:jsonOrder.order_status,errors:jsonOrder.errors.map(_APIError__WEBPACK_IMPORTED_MODULE_13__.r),validationStatus:jsonOrder.validation_status,placedAt:moment__WEBPACK_IMPORTED_MODULE_0__(jsonOrder.placed_at||jsonOrder.created_at),objectOwner:jsonOrder.object_owner,toAddress:_Address__WEBPACK_IMPORTED_MODULE_2__.rS(jsonOrder.to_address),addressFrom:_Address__WEBPACK_IMPORTED_MODULE_2__.rS(jsonOrder.address_from),addressReturn:_Address__WEBPACK_IMPORTED_MODULE_2__.rS(jsonOrder.address_return),parcel:jsonOrder.parcel?_Parcel__WEBPACK_IMPORTED_MODULE_7__.rS(jsonOrder.parcel):null,shopApp:jsonOrder.shop_app,weight:jsonOrder.weight,weightUnit:jsonOrder.weight_unit,transactions:jsonOrder.transactions.map(_Transaction__WEBPACK_IMPORTED_MODULE_9__.rS),rates:jsonOrder.rates?jsonOrder.rates.map(_Rate__WEBPACK_IMPORTED_MODULE_8__.Gw):[],totalTax:jsonOrder.total_tax,totalPrice:jsonOrder.total_price,subtotalPrice:jsonOrder.subtotal_price,currency:jsonOrder.currency,shippingMethod:jsonOrder.shipping_method,shippingCost:jsonOrder.shipping_cost,shippingCostCurrency:jsonOrder.shipping_cost_currency,lineItems:_LineItem__WEBPACK_IMPORTED_MODULE_4__.di(jsonOrder.line_items.filter((function(lineItem){return lineItem.quantity>0})).map(_LineItem__WEBPACK_IMPORTED_MODULE_4__.rS)),notes:jsonOrder.notes,items:jsonOrder.items,hidden:jsonOrder.hidden,partialFulfillmentRequests:jsonOrder.partial_fulfillment_requests?jsonOrder.partial_fulfillment_requests.map((function(x){return(0,tslib__WEBPACK_IMPORTED_MODULE_12__.Cl)({},(0,_OrderBatchEntry__WEBPACK_IMPORTED_MODULE_5__.kc)(x))})):[],totalPartialFulfillments:jsonOrder.partial_fulfillment_requests?jsonOrder.partial_fulfillment_requests.length:0,tags:void 0}}function getOrderWeight(order){return order.weight&&parseFloat(order.weight)||null}function orderHasWeight(order){var orderWeight=order.weight&&parseFloat(order.weight);return orderWeight&&!isNaN(orderWeight)&&orderWeight>0&&!!order.weightUnit||order.lineItems.length>0&&order.lineItems.every(_LineItem__WEBPACK_IMPORTED_MODULE_4__._g)}function isPaid(order){return![OrderStatus.AWAITPAY,OrderStatus.GENERIC,OrderStatus.REFUNDED,OrderStatus.CANCELLED].includes(order.orderStatus)}function isCancelled(order){return order.orderStatus===OrderStatus.CANCELLED}function isFulfilled(order){return order.orderStatus===OrderStatus.SHIPPED}function isFulfilledSingleLabel(order){return getOrderState(order)===OrderState.FULFILLED_SINGLE_LABEL}function isPartiallyFulfilled(order){return order.orderStatus===OrderStatus.PARTIALLY_FULFILLED}function isRefundPending(order){var successfulLiveTransactions=order.transactions.filter((function(txn){return!txn.test&&txn.status!==_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.ERROR}));return 0!==successfulLiveTransactions.length&&successfulLiveTransactions.every((function(txn){return txn.status===_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.REFUNDPENDING}))}function isRefundRejected(order){var successfulLiveTransactions=order.transactions.filter((function(txn){return!txn.test&&txn.status!==_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.ERROR}));return 0!==successfulLiveTransactions.length&&successfulLiveTransactions.every((function(txn){return txn.status===_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.REFUNDREJECTED}))}function isRefunded(order){var successfulLiveTransactions=order.transactions.filter((function(txn){return!txn.test&&txn.status!==_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.ERROR}));return 0!==successfulLiveTransactions.length&&successfulLiveTransactions.every((function(txn){return txn.status===_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.REFUNDED}))}function getOrderState(order){var outboundTransactions=order.transactions.filter((function(_a){return!_a.isReturn}));return isPartiallyFulfilled(order)?0===outboundTransactions.length?OrderState.FULFILLED_OUTSIDE_SHIPPO:1===outboundTransactions.length?isRefunded(order)||isRefundRejected(order)||isRefundPending(order)?OrderState.PARTIALLY_FULFILLED_SINGLE_REFUND:OrderState.PARTIALLY_FULFILLED_SINGLE_LABEL:OrderState.PARTIALLY_FULFILLED_MULTIPLE_LABELS:isFulfilled(order)||isPartiallyFulfilled(order)?0===outboundTransactions.length?OrderState.FULFILLED_OUTSIDE_SHIPPO:isRefunded(order)?OrderState.REFUNDED:isRefundRejected(order)?OrderState.REFUND_REJECTED:isRefundPending(order)?OrderState.REFUND_PENDING:1===outboundTransactions.filter((function(transaction){return transaction.status===_Transaction__WEBPACK_IMPORTED_MODULE_9__.x8.SUCCESS})).length?OrderState.FULFILLED_SINGLE_LABEL:OrderState.FULFILLED_MULTIPLE_LABELS:isCancelled(order)?OrderState.CANCELLED:function isRefundedOutsideShippo(order){return order.orderStatus===OrderStatus.REFUNDED}(order)?OrderState.REFUNDED:OrderState.NOT_FULFILLED}function isFulfilledOutsideShippo(order){return getOrderState(order)===OrderState.FULFILLED_OUTSIDE_SHIPPO}function isFulfilledInShippoOldExperience(order){return isFulfilled(order)&&!order.parcel}function getMaxShipTime(order){var shipTimes=order.lineItems.map((function(i){return i.maxShipTime})).filter((function(v){return v}));return shipTimes&&shipTimes.length>0?moment__WEBPACK_IMPORTED_MODULE_0__(Math.min.apply(null,shipTimes)):null}function getMaxDeliveryTime(order){var deliveryTimes=order.lineItems.map((function(i){return i.maxDeliveryTime})).filter((function(v){return v}));return deliveryTimes&&deliveryTimes.length>0?moment__WEBPACK_IMPORTED_MODULE_0__(Math.min.apply(null,deliveryTimes)):null}function hasValidShippingInfo(order){var parsedShippingCost=parseFloat(order.shippingCost);return!!order.shippingCost&&"NONE"!==order.shippingCost.toUpperCase()&&(parsedShippingCost>0||0===parsedShippingCost&&!!order.shippingMethod)}function hasValidTotalPrice(order){return!!order.totalPrice&&"NONE"!==order.totalPrice.toUpperCase()&&parseFloat(order.totalPrice)>0}!function(OrderStatus){OrderStatus.AWAITPAY="AWAITPAY",OrderStatus.VALID="VALID",OrderStatus.INVALID="INVALID",OrderStatus.PAID="PAID",OrderStatus.PARTIALLY_FULFILLED="PARTIALLY_FULFILLED",OrderStatus.SHIPPED="SHIPPED",OrderStatus.REFUNDED="REFUNDED",OrderStatus.CANCELLED="CANCELLED",OrderStatus.UNKNOWN="UNKNOWN",OrderStatus.GENERIC="GENERIC"}(OrderStatus||(OrderStatus={})),function(OrderValidationStatus){OrderValidationStatus.VALID="VALID",OrderValidationStatus.INVALID="INVALID"}(OrderValidationStatus||(OrderValidationStatus={})),function(OrderState){OrderState.CANCELLED="CANCELLED",OrderState.REFUNDED="REFUNDED",OrderState.REFUND_REJECTED="REFUND_REJECTED",OrderState.REFUND_PENDING="REFUND_PENDING",OrderState.FULFILLED_OUTSIDE_SHIPPO="FULFILLED_OUTSIDE_SHIPPO",OrderState.FULFILLED_SINGLE_LABEL="FULFILLED_SINGLE_LABEL",OrderState.FULFILLED_MULTIPLE_LABELS="FULFILLED_MULTIPLE_LABELS",OrderState.PARTIALLY_FULFILLED_SINGLE_LABEL="PARTIALLY_FULFILLED_SINGLE_LABEL",OrderState.PARTIALLY_FULFILLED_SINGLE_REFUND="PARTIALLY_FULFILLED_SINGLE_REFUND",OrderState.PARTIALLY_FULFILLED_MULTIPLE_LABELS="PARTIALLY_FULFILLED_MULTIPLE_LABELS",OrderState.NOT_FULFILLED="NOT_FULFILLED"}(OrderState||(OrderState={})),function(SyncStatus){SyncStatus.COMPLETE="COMPLETE",SyncStatus.IN_PROGRESS="IN_PROGRESS",SyncStatus.FAILED="FAILED"}(SyncStatus||(SyncStatus={}));var manualOrderShopTypes={Shippo:!0,CSV_Import:!0};function isManualOrder(order){return!!manualOrderShopTypes[order.shopApp]}function requiresCustomsDeclaration(order,defaultFromAddress){var addressFrom=order&&order.addressFrom||defaultFromAddress,addressTo=order&&order.toAddress;return!(!addressTo||!addressFrom)&&(0,_CustomsDeclaration__WEBPACK_IMPORTED_MODULE_3__.p2)(addressTo,addressFrom)}function hasValidLineItems(order){var lineItems=order.lineItems;return lineItems.length>0&&lineItems.every(_LineItem__WEBPACK_IMPORTED_MODULE_4__.iD)}var isEligibleForSplit=function(_a){var orderStatus=_a.orderStatus,shopApp=_a.shopApp,lineItems=_a.lineItems,isSplitOrderNoItemsFlagEnabled="on"===_utils_featureflags_FeatureFlagsProvider__WEBPACK_IMPORTED_MODULE_10__.U2.decide(_utils_featureflags__WEBPACK_IMPORTED_MODULE_11__.gH.SPLIT_ORDER_NO_ITEMS.name).variationKey,isStoreEligibleForSplit=("on"===_utils_featureflags_FeatureFlagsProvider__WEBPACK_IMPORTED_MODULE_10__.U2.decide(_utils_featureflags__WEBPACK_IMPORTED_MODULE_11__.gH.SPLIT_ORDER_MANUAL_CSV.name).variationKey?_types_Store__WEBPACK_IMPORTED_MODULE_1__.WB.has(shopApp):_types_Store__WEBPACK_IMPORTED_MODULE_1__.tJ.has(shopApp))||"Magento_2"===shopApp;return orderStatus!==OrderStatus.CANCELLED&&(!!isStoreEligibleForSplit&&(!!isSplitOrderNoItemsFlagEnabled||lineItems.reduce((function(currentTotal,item){return currentTotal+ +item.quantity}),0)>1))},hasPartialFulfillmentRequests=function(_a){var partialFulfillmentRequests=_a.partialFulfillmentRequests;return partialFulfillmentRequests&&!!partialFulfillmentRequests.length},isPartialFulfillmentAllCompleted=function(_a){var partialFulfillmentRequests=_a.partialFulfillmentRequests;return partialFulfillmentRequests&&partialFulfillmentRequests.every((function(batchEntry){return batchEntry.objectStatus===_OrdersBatch__WEBPACK_IMPORTED_MODULE_6__.DO.COMPLETE_TRANSACTION}))},isOrderLineItemEditable=function(order){return(0,_types_Store__WEBPACK_IMPORTED_MODULE_1__.VV)(order.shopApp)&&!isFulfilled(order)},newOrder=function(fromAddress,toAddress){return{order_number:null,order_status:null,created_at:null,validation_status:null,shop_app:"Shippo",uses_line_items:!1,total_price:null,subtotal_price:null,total_tax:null,currency:null,shipping_cost:null,shipping_cost_currency:null,total_weight_unit:null,weight:null,weight_unit:null,shipping_method:null,notes:null,address_from:fromAddress||null,to_address:toAddress||null}},calculateValueByQuantity=function(value,quantity){return(Number(value)*quantity).toString()},sortOrderTagsByName=function(tags){if(0===tags.length)return[];var collator=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return tags.sort((function(previousTag,nextTag){return collator.compare(previousTag.name,nextTag.name)}))},fromWebOrderToOrderTagsMapping=function(webOrders){return webOrders?webOrders.reduce((function(orderTags,_a){var _b,object_id=_a.object_id,tags=_a.tags;return(0,tslib__WEBPACK_IMPORTED_MODULE_12__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_12__.Cl)({},orderTags),((_b={})[object_id]=tags||[],_b))}),{}):{}}},"./app/types/Rate.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$O:()=>getLabelWithOneRate,CC:()=>isUntrackableRateServiceLevel,Gw:()=>fromJSONBaseRate,J5:()=>getRateListTotalTextNoInsurance,Nf:()=>transactionSearchRatefromJSON,P2:()=>getRatesWithAttributeInDisplayOrder,RH:()=>getRatesForServiceLevelToken,jf:()=>RateAttribute,jt:()=>getRatesByAttribute,rS:()=>fromJSON,sI:()=>getRateListTotalText,yF:()=>attributePopularRateV2});var RateAttribute,tslib__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_constants_carriers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/constants/carriers.ts"),_constants_currency__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/constants/currency.ts"),i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/i18next/dist/es/index.js"),lodash_es__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/lodash-es/uniqBy.js"),lodash_es__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/lodash-es/orderBy.js"),lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/lodash-es/differenceBy.js"),lodash_es_intersectionBy__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/lodash-es/intersectionBy.js"),moment__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/moment/moment.js"),_types_ServiceLevel__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./app/types/ServiceLevel.ts");!function(RateAttribute){RateAttribute.CHEAPEST="CHEAPEST",RateAttribute.FASTEST="FASTEST",RateAttribute.BESTVALUE="BESTVALUE",RateAttribute.POPULAR="POPULAR",RateAttribute.BEST_OPTION="BEST_OPTION"}(RateAttribute||(RateAttribute={}));var rateDisplayAttribute={CHEAPEST:"CHEAPEST",POPULAR:"POPULAR",FASTEST:"FASTEST",CHEAPEST_AND_FASTEST:"CHEAPEST_AND_FASTEST",MORE:"MORE",PAY_ON_USE:"PAY_ON_USE",BEST_OPTION:"BEST_OPTION"};function fromJSONBaseRate(jsonBaseRate){return{amount:jsonBaseRate.amount,currency:jsonBaseRate.currency,durationTerms:jsonBaseRate.duration_terms,objectPurpose:jsonBaseRate.object_purpose,objectId:jsonBaseRate.object_id,objectState:jsonBaseRate.object_state,provider:jsonBaseRate.provider,providerImage75:jsonBaseRate.provider_image_75,providerImage200:jsonBaseRate.provider_image_200,shipment:jsonBaseRate.shipment}}function fromJSON(jsonRate){var jsonRateServiceLevel=jsonRate.servicelevel;return jsonRate.servicelevel||(jsonRateServiceLevel={name:jsonRate.servicelevel_name||"",token:jsonRate.servicelevel_token||"",terms:jsonRate.servicelevel_terms||""}),{objectCreated:moment__WEBPACK_IMPORTED_MODULE_3__(jsonRate.object_created),objectId:jsonRate.object_id,objectOwner:jsonRate.object_owner,shipment:jsonRate.shipment,attributes:jsonRate.attributes.map((function(attr){return attr})),amount:jsonRate.amount,currency:jsonRate.currency,amountLocal:jsonRate.amount_local,currencyLocal:jsonRate.currency_local,provider:jsonRate.provider,providerImage75:jsonRate.provider_image_75,providerImage200:jsonRate.provider_image_200,servicelevel:(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({},jsonRateServiceLevel),{terms:(0,_types_ServiceLevel__WEBPACK_IMPORTED_MODULE_4__.N9)(jsonRateServiceLevel.terms,jsonRate.provider)}),servicelevelName:jsonRate.servicelevel_name||"",estimatedDays:jsonRate.estimated_days,arrivesBy:jsonRate.arrives_by,insurance:jsonRate.insurance,durationTerms:jsonRate.duration_terms,messages:jsonRate.messages,carrierAccount:jsonRate.carrier_account,test:jsonRate.test,zone:jsonRate.zone,includedInsurancePrice:jsonRate.included_insurance_price}}function getLabelWithOneRate(rate){var servicelevel=rate.servicelevel,oneRateText=(0,_types_ServiceLevel__WEBPACK_IMPORTED_MODULE_4__.p)(servicelevel)?" One Rate":"";return"".concat(function getLabel(rate){return"UPS"===rate.provider&&["Ground","Ground Saver"].includes(rate.servicelevel.name)?"".concat(rate.provider,"® ").concat(rate.servicelevel.name):_constants_carriers__WEBPACK_IMPORTED_MODULE_0__.bK[rate.provider]?"".concat(_constants_carriers__WEBPACK_IMPORTED_MODULE_0__.bK[rate.provider]," ").concat(rate.servicelevel.name):"".concat(rate.provider," ").concat(rate.servicelevel.name)}(rate)).concat(oneRateText)}var addAttributesToRateMap=function(attributes){return function(rate){return(0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.Cl)({},rate),{attributes})}},popularServicesV2=["usps_priority","ups_ground","ups_ground_saver"];function attributePopularRateV2(rates){var cheapestRates=rates.filter((function(r){return r.attributes.includes(RateAttribute.CHEAPEST)})),bestOption=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.BEST_OPTION)})),popularRates=(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(rates,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(cheapestRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(bestOption),!1),(function(r){return r.objectId})).filter((function(r){return popularServicesV2.includes(r.servicelevel.token)})).sort((function(a,b){return sortBy(a,b,"cheapest")})),otherRates=(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(rates,cheapestRates.concat(popularRates),(function(r){return r.objectId})),updatedPopularRatesList=popularRates.map(addAttributesToRateMap([RateAttribute.POPULAR]));return(0,lodash_es__WEBPACK_IMPORTED_MODULE_7__.A)(updatedPopularRatesList.concat(cheapestRates).concat(otherRates),(function(rate){return rate.objectId}))}function getNextCheapestRate(_a){var sortedOtherRates=_a.sortedOtherRates,cheapestAndFastestRates=_a.cheapestAndFastestRates,cheapestRates=_a.cheapestRates;if(0===cheapestAndFastestRates.length&&0===cheapestRates.length){var firstRateWithAmountIndex=sortedOtherRates.findIndex((function(rate){return Number(rate.amount)}));if(firstRateWithAmountIndex>-1){var firstRateWithAmount=sortedOtherRates[firstRateWithAmountIndex];return sortedOtherRates.splice(firstRateWithAmountIndex,1),{updatedCheapestRatesList:[firstRateWithAmount],updatedOtherRatesList:sortedOtherRates}}return{updatedCheapestRatesList:[],updatedOtherRatesList:sortedOtherRates}}return{updatedCheapestRatesList:cheapestRates,updatedOtherRatesList:sortedOtherRates}}function getRatesByAttribute(rates){var cheapestRates=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.CHEAPEST)})),fastestRates=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.FASTEST)})),popularRates=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.POPULAR)})),bestOption=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.BEST_OPTION)})),otherRates=(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(rates,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(cheapestRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(fastestRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(popularRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(bestOption),!1),(function(r){return r.objectId})).sort((function(a,b){return sortBy(a,b,"cheapest")})),cheapestAndFastest=(0,lodash_es_intersectionBy__WEBPACK_IMPORTED_MODULE_8__.A)(cheapestRates,fastestRates,(function(r){return r.objectId})),_a=getNextCheapestRate({sortedOtherRates:otherRates,cheapestAndFastestRates:cheapestAndFastest,cheapestRates:(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(cheapestRates,cheapestAndFastest,(function(r){return r.objectId})).sort((function(a,b){return sortBy(a,b,"fastest")}))}),updatedCheapestRatesList=_a.updatedCheapestRatesList,updatedOtherRatesList=_a.updatedOtherRatesList;return{cheapestRates:updatedCheapestRatesList,fastestRates:(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(fastestRates,cheapestAndFastest,(function(r){return r.objectId})).sort((function(a,b){return sortBy(a,b,"cheapest")})),cheapestAndFastest,otherRates:updatedOtherRatesList,popularRates,bestOption}}function getRatesWithAttributeInDisplayOrder(rates,isReturn){if(void 0===isReturn&&(isReturn=!1),isReturn){var ratesFromCheapestToMostExpensive=(0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.A)(rates,(function(rate){return parseFloat(rate.amount)}));return[{displayAttribute:rateDisplayAttribute.PAY_ON_USE,rates:ratesFromCheapestToMostExpensive}]}var cheapestRates=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.CHEAPEST)})),fastestRates=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.FASTEST)})),popularRates=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.POPULAR)})),bestOption=rates.filter((function(r){var _a;return null===(_a=r.attributes)||void 0===_a?void 0:_a.includes(RateAttribute.BEST_OPTION)})),otherRates=(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(rates,(0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(cheapestRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(fastestRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(popularRates),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(bestOption),!1),(function(r){return r.objectId})).sort((function(a,b){return sortBy(a,b,"cheapest")})),cheapestAndFastest=(0,lodash_es_intersectionBy__WEBPACK_IMPORTED_MODULE_8__.A)(cheapestRates,fastestRates,(function(r){return r.objectId})),_a=getNextCheapestRate({sortedOtherRates:otherRates,cheapestAndFastestRates:cheapestAndFastest,cheapestRates:(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(cheapestRates,cheapestAndFastest,(function(r){return r.objectId})).sort((function(a,b){return sortBy(a,b,"fastest")}))}),updatedCheapestRatesList=_a.updatedCheapestRatesList,updatedOtherRatesList=_a.updatedOtherRatesList,fastestRatesNotInCheapestAndFastest=(0,lodash_es_differenceBy__WEBPACK_IMPORTED_MODULE_6__.A)(fastestRates,cheapestAndFastest,(function(r){return r.objectId})).sort((function(a,b){return sortBy(a,b,"cheapest")}));return(0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_5__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_5__.zs)(bestOption.length>0?[{displayAttribute:rateDisplayAttribute.BEST_OPTION,rates:bestOption}]:[]),!1),[{displayAttribute:rateDisplayAttribute.CHEAPEST,rates:updatedCheapestRatesList},{displayAttribute:rateDisplayAttribute.POPULAR,rates:popularRates},{displayAttribute:rateDisplayAttribute.FASTEST,rates:fastestRatesNotInCheapestAndFastest},{displayAttribute:rateDisplayAttribute.CHEAPEST_AND_FASTEST,rates:cheapestAndFastest},{displayAttribute:rateDisplayAttribute.MORE,rates:updatedOtherRatesList}],!1)}function getRatesForServiceLevelToken(rates,serviceLevelToken,preferredAccountObjectID){var _a,_b;if(rates.length<1)return rates;var serviceLevelCategory=null===(_b=null===(_a=_types_ServiceLevel__WEBPACK_IMPORTED_MODULE_4__.ox[serviceLevelToken])||void 0===_a?void 0:_a.token)||void 0===_b?void 0:_b.toUpperCase();if(serviceLevelCategory){var _c=getRatesByAttribute(rates),cheapestRates=_c.cheapestRates,fastestRates=_c.fastestRates;if("CHEAPEST"===serviceLevelCategory&&cheapestRates.length>0)return cheapestRates;if("FASTEST"===serviceLevelCategory&&fastestRates.length>0)return fastestRates}return rates.filter((function(rate){return(!preferredAccountObjectID||rate.carrierAccount===preferredAccountObjectID)&&(0,_types_ServiceLevel__WEBPACK_IMPORTED_MODULE_4__.M7)(rate.servicelevel,serviceLevelToken)}))}function getRateListTotalText(rateList){var rates=rateList.filter((function(rate){return rate.hasOwnProperty("rate")})),ratesTotal=rates.reduce((function(total,label){return total+label.total}),0),currencyIso=rates[0]?rates[0].currency:_constants_currency__WEBPACK_IMPORTED_MODULE_1__.q.USD.iso,noValue="".concat(_constants_currency__WEBPACK_IMPORTED_MODULE_1__.q[currencyIso].symbol,"—");return ratesTotal?i18next__WEBPACK_IMPORTED_MODULE_2__.t("translations:currency",{value:{value:ratesTotal,currency_iso:currencyIso}}):noValue}function getRateListTotalTextNoInsurance(rateList){var rates=rateList.filter((function(rate){return rate.hasOwnProperty("rate")})),ratesTotal=rates.reduce((function(total,label){return total+(label.total-Number(label.includedInsurancePrice))}),0),currencyIso=rates[0]?rates[0].currency:_constants_currency__WEBPACK_IMPORTED_MODULE_1__.q.USD.iso,noValue="".concat(_constants_currency__WEBPACK_IMPORTED_MODULE_1__.q[currencyIso].symbol,"—");return ratesTotal?i18next__WEBPACK_IMPORTED_MODULE_2__.t("translations:currency",{value:{value:ratesTotal,currency_iso:currencyIso}}):noValue}function sortBy(a,b,option){switch(option){case"cheapest":return parseFloat(a.amount)-parseFloat(b.amount);case"expensive":return parseFloat(b.amount)-parseFloat(a.amount);case"fastest":return a.estimatedDays-b.estimatedDays;case"slowest":return b.estimatedDays-a.estimatedDays;default:return 0}}var untrackableServiceLevels=["First Class Package International Service","CanadaPost Small Packets"];function isUntrackableRateServiceLevel(rate){return!!rate.servicelevel.name&&untrackableServiceLevels.includes(rate.servicelevel.name)}function transactionSearchRatefromJSON(jsonRate){return{amount:jsonRate.amount,amountInsuranceFee:jsonRate.amount_insurance_fee,amountLocal:jsonRate.amount_local,carrierAccount:jsonRate.carrier_account,currency:jsonRate.currency,currencyLocal:jsonRate.currency_local,discountGroupName:jsonRate.discount_group_name,insuranceAmount:jsonRate.insurance_amount,insuranceCurrency:jsonRate.insurance_currency||null,objectId:jsonRate.object_id,provider:jsonRate.provider,servicelevelName:jsonRate.servicelevel_name,servicelevelToken:jsonRate.servicelevel_token}}},"./app/types/ServiceLevel.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M7:()=>serviceLevelMatchesToken,N9:()=>fromJSONServiceLevelTerms,Zd:()=>getServiceLevelAccountByToken,ox:()=>ServiceLevelCategoryByToken,p:()=>isOneRate});var tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_constants_carriers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/constants/carriers.ts"),_constants_currency__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/constants/currency.ts");function getCurrency(jsonServiceLevelTerms){return Object.values(_constants_currency__WEBPACK_IMPORTED_MODULE_1__.q).find((function(currency){return currency.iso===jsonServiceLevelTerms.currency.toUpperCase()}))||_constants_currency__WEBPACK_IMPORTED_MODULE_1__.q.USD}function fromJSONServiceLevelTerms(serviceLevelTerms,provider){var terms="";try{var jsonServiceLevelTerms=JSON.parse(serviceLevelTerms);provider===_constants_carriers__WEBPACK_IMPORTED_MODULE_0__.jr.name&&(terms=function parseFedExServiceLevel(jsonServiceLevelTerms){var terms={baseCharge:{copy:"orders:calculateRates:rates:surcharges:baseCharge",shouldTranslate:!0,value:Number(jsonServiceLevelTerms.base_charge)},currency:getCurrency(jsonServiceLevelTerms)};return jsonServiceLevelTerms.fuel_surcharge&&(terms.fuelSurcharge={copy:"orders:calculateRates:rates:surcharges:fuelSurcharge",shouldTranslate:!0,value:Number(jsonServiceLevelTerms.fuel_surcharge)}),jsonServiceLevelTerms.residential_surcharge&&(terms.residentialSurcharge={copy:"orders:calculateRates:rates:surcharges:residentialSurcharge",shouldTranslate:!0,value:Number(jsonServiceLevelTerms.residential_surcharge)}),jsonServiceLevelTerms.customs_surcharge&&(terms.customsSurcharge={copy:"orders:calculateRates:rates:surcharges:customsSurcharge",shouldTranslate:!0,value:Number(jsonServiceLevelTerms.customs_surcharge)}),jsonServiceLevelTerms.taxes&&(terms.taxes={copy:"orders:calculateRates:rates:surcharges:taxes",shouldTranslate:!0,value:Number(jsonServiceLevelTerms.taxes)}),jsonServiceLevelTerms.other_surcharges&&(terms.otherSurcharges={copy:"orders:calculateRates:rates:surcharges:otherSurcharges",shouldTranslate:!0,value:Number(jsonServiceLevelTerms.other_surcharges)}),terms}(jsonServiceLevelTerms)),provider===_constants_carriers__WEBPACK_IMPORTED_MODULE_0__.i3.name&&(terms=function parseCanadaPostServiceLevel(jsonServiceLevelTerms){var parsedTerms=Object.entries(jsonServiceLevelTerms);return Object.entries(parsedTerms).reduce((function(termsObject,_a){var _b=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.zs)(_a,2),_c=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.zs)(_b[1],2),name=_c[0],value=_c[1];return"currency"===name?termsObject.currency=getCurrency(jsonServiceLevelTerms):termsObject[name]={shouldTranslate:!1,copy:name,value:Number(value)},termsObject}),{})}(jsonServiceLevelTerms))}catch(e){terms=serviceLevelTerms}return terms}var ONERATE="ONERATE",ServiceLevelCategoryByToken=[{name:"Cheapest Rate",token:"cheapest"},{name:"Fastest Rate",token:"fastest"}].reduce((function(map,category){var _a;return Object.assign(map,((_a={})[category.token]=category,_a))}),{});function isOneRate(serviceLevel){return!!serviceLevel&&!!serviceLevel.terms&&serviceLevel.terms===ONERATE}var getServiceLevelAccountByToken=function(_a){var mappedServiceLevels=_a.mappedServiceLevels,accountId=_a.accountId,token=_a.token;if(Object.keys(mappedServiceLevels).length>0&&token){var serviceLevelAccounts=null==mappedServiceLevels?void 0:mappedServiceLevels[token];if((null==serviceLevelAccounts?void 0:serviceLevelAccounts.length)>0){if(accountId){var serviceLevelWithMatchingAccount=serviceLevelAccounts.find((function(serviceLevel){return serviceLevel.account_object_id===accountId}));if(serviceLevelWithMatchingAccount)return serviceLevelWithMatchingAccount}return serviceLevelAccounts[0]}}},serviceLevelMatchesToken=function(serviceLevel,serviceLevelToken){return!(!serviceLevel||!serviceLevelToken)&&(!(!serviceLevel.extended_token||serviceLevel.extended_token!==serviceLevelToken)||(serviceLevel.token===serviceLevelToken||!!serviceLevel.parent_servicelevel&&serviceLevelMatchesToken(serviceLevel.parent_servicelevel,serviceLevelToken)))}},"./app/types/Track.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var TrackStatus;function transactionSearchTrackFromJSON(jsonTrack){return{objectCreated:jsonTrack.object_created,objectUpdated:jsonTrack.object_updated,objectId:jsonTrack.object_id,status:jsonTrack.status,statusDetails:jsonTrack.status_details,statusDate:jsonTrack.status_date,location:jsonTrack.location?{city:jsonTrack.location.city,state:jsonTrack.location.state,zip:jsonTrack.location.zip,country:jsonTrack.location.country}:void 0}}__webpack_require__.d(__webpack_exports__,{O:()=>transactionSearchTrackFromJSON,S:()=>TrackStatus}),function(TrackStatus){TrackStatus.UNKNOWN="UNKNOWN",TrackStatus.TRANSIT="TRANSIT",TrackStatus.DELIVERED="DELIVERED",TrackStatus.FAILURE="FAILURE",TrackStatus.RETURNED="RETURNED",TrackStatus.PRE_TRANSIT="PRE_TRANSIT"}(TrackStatus||(TrackStatus={}))},"./app/types/Transaction.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{PJ:()=>isRefundIneligible,dF:()=>ObjectState,eM:()=>getLabelUrl,p9:()=>transactionUI2FromJSON,rS:()=>fromJSON,x8:()=>TransactionStatus});var TransactionStatus,ObjectState,_sentry_browser__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js"),_constants_carriers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/constants/carriers.ts"),moment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/moment/moment.js"),_types_Address__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./app/types/Address.ts"),_types_APIMessage__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/types/APIMessage.ts"),_types_Rate__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./app/types/Rate.ts");__webpack_require__("./app/types/Track.ts");function getLabelUrl(labelUrl){if(!labelUrl)return"";var parts=window.location.host.split("."),subdomain=parts[0];if(labelUrl.includes("local")||labelUrl.includes("stage-perf"))return labelUrl;if(!labelUrl.includes("amazonaws.com"))return labelUrl;try{var newSubdomain=subdomain.replace("apps","deliver"),newHost="".concat(newSubdomain,".").concat(parts[1],".").concat(parts[2].split(":")[0]),parsedUrl=new URL(labelUrl),path_1=parsedUrl.pathname,qs_1=parsedUrl.search,extParam=/Windows/.test(window.navigator.userAgent)&&path_1.includes(".pdf")?"&ext=.pdf":"";return"https://".concat(newHost).concat(path_1).concat(qs_1).concat(extParam)}catch(err){return _sentry_browser__WEBPACK_IMPORTED_MODULE_6__.Cp(err),""}}function fromJSON(jsonTransaction){var _a,_b,_c,test=(jsonTransaction.test?jsonTransaction.test:jsonTransaction.was_test)||!1,amount=(jsonTransaction.insurance||{}).amount,insuranceAmount="0"===amount?void 0:amount;return{test,objectState:jsonTransaction.object_state,status:jsonTransaction.status||jsonTransaction.object_status,objectCreated:jsonTransaction.object_created,objectUpdated:jsonTransaction.object_updated,objectId:jsonTransaction.object_id,objectOwner:jsonTransaction.object_owner,rate:jsonTransaction.rate,trackingNumber:jsonTransaction.tracking_number,trackingStatus:jsonTransaction.tracking_status,eta:jsonTransaction.eta,trackingUrlProvider:jsonTransaction.tracking_url_provider,labelUrl:getLabelUrl(jsonTransaction.label_url),commercialInvoiceUrl:jsonTransaction.commercial_invoice_url,messages:(jsonTransaction.messages||[]).map(_types_APIMessage__WEBPACK_IMPORTED_MODULE_3__.rS),order:jsonTransaction.order,metadata:jsonTransaction.metadata,parcel:jsonTransaction.parcel,billing:jsonTransaction.billing,isReturn:jsonTransaction.is_return,isRefundable:jsonTransaction.is_refundable,isDownloadable:jsonTransaction.is_downloadable,insuranceAmount,insuranceCurrency:null===(_a=null==jsonTransaction?void 0:jsonTransaction.insurance)||void 0===_a?void 0:_a.currency,insuranceClaimId:null===(_b=null==jsonTransaction?void 0:jsonTransaction.insurance)||void 0===_b?void 0:_b.claim_id,insuranceProvider:null===(_c=null==jsonTransaction?void 0:jsonTransaction.insurance)||void 0===_c?void 0:_c.provider}}function transactionUI2FromJSON(jsonTransaction){return{objectId:jsonTransaction.object_id,rate:_types_Rate__WEBPACK_IMPORTED_MODULE_4__.rS(jsonTransaction.rate),addressTo:_types_Address__WEBPACK_IMPORTED_MODULE_2__.rS(jsonTransaction.address_to),orderNumber:jsonTransaction.order_number,wasTest:jsonTransaction.was_test,trackingUrlProvider:jsonTransaction.tracking_url_provider,objectCreated:moment__WEBPACK_IMPORTED_MODULE_1__(jsonTransaction.object_created),trackingNumber:jsonTransaction.tracking_number,trackingStatus:jsonTransaction.tracking_status,objectStatus:jsonTransaction.object_status}}function isRefundIneligible(transaction){return transaction.rate.provider===_constants_carriers__WEBPACK_IMPORTED_MODULE_0__.i3.name&&transaction.objectCreated.isAfter(moment__WEBPACK_IMPORTED_MODULE_1__().subtract(60,"minute"))}!function(TransactionStatus){TransactionStatus.WAITING="WAITING",TransactionStatus.QUEUED="QUEUED",TransactionStatus.SUCCESS="SUCCESS",TransactionStatus.ERROR="ERROR",TransactionStatus.REFUNDPENDING="REFUNDPENDING",TransactionStatus.REFUNDREJECTED="REFUNDREJECTED",TransactionStatus.REFUNDED="REFUNDED"}(TransactionStatus||(TransactionStatus={})),function(ObjectState){ObjectState.INVALID="INVALID",ObjectState.VALID="VALID"}(ObjectState||(ObjectState={}))},"./app/utils/featureflags/FeatureFlagsProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U2:()=>optimizelyClient});__webpack_require__("./node_modules/react/index.js");var react_sdk=__webpack_require__("./node_modules/@optimizely/react-sdk/dist/react-sdk.js"),esm_exports=(__webpack_require__("./node_modules/react-redux/es/index.js"),__webpack_require__("./app/selectors/user.selectors.ts"),__webpack_require__("./node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js")),errorHandler={handleError:function(error){esm_exports.wd("[Optimizely] ".concat(null==error?void 0:error.message))}},optimizelyClient=(0,react_sdk.Q_)({sdkKey:"5BDuBhgGXbHXWEXMojbEi",datafileOptions:{autoUpdate:!0},errorHandler,logLevel:3,eventBatchSize:10,eventFlushInterval:1e3})},"./app/utils/featureflags/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{gH:()=>FeatureFlags,u:()=>useFeatureFlag});var DEFAULT_SPLIT_VARIATION="control",VariationTypes={ROLLOUT:["on","off"],A_B_TESTING:["control","variant","not-included"],OPT_IN_OUT:["initialOptIn","initialOptOut","disabled"]},FeatureFlags={SHIPMENTS_BULK_SELECTION:{name:"shipments_bulk_selection",variationType:VariationTypes.A_B_TESTING},SHOW_DUPLICATE_ORDERS:{name:"show_duplicate_orders",variationType:VariationTypes.A_B_TESTING},ORDERS_REDESIGN:{name:"orders_redesign",variationType:VariationTypes.ROLLOUT},ORDERS_REDESIGN_WITH_OPT_IN_OPT_OUT:{name:"orders_redesign_with_opt_in_opt_out",variationType:VariationTypes.OPT_IN_OUT},ORDERS_REDESIGN_ALLOW_TOGGLE:{name:"orders_redesign_allow_toggle",variationType:VariationTypes.ROLLOUT},ORDER_TAG_MVP:{name:"order_tag_mvp",variationType:VariationTypes.ROLLOUT},FEDEX_NEW_API_ENABLED:{name:"fedex_new_api_enabled_ui",variationType:VariationTypes.ROLLOUT},RATES_BEST_OPTION:{name:"rates_best_option",variationType:VariationTypes.A_B_TESTING},IMPROVED_REFUNDS:{name:"improved_refunds",variationType:VariationTypes.ROLLOUT},TEAMS_ENHANCEMENT:{name:"teams_enhancement",variationType:VariationTypes.ROLLOUT},SHIPMENTS_PACKING_SLIP:{name:"shipments_packing_slip",variationType:VariationTypes.ROLLOUT},OPEN_ORDER_DRAWER_ON_BACK:{name:"open_order_drawer_on_back",variationType:VariationTypes.ROLLOUT},SPLIT_ORDER_NO_ITEMS:{name:"split_order_no_items",variationType:VariationTypes.ROLLOUT},SPLIT_ORDER_MANUAL_CSV:{name:"split_order_manual_csv",variationType:VariationTypes.ROLLOUT},UPS_OAUTH_REGISTRATION_ENABLED:{name:"ups_oauth_registration_enabled",variationType:VariationTypes.ROLLOUT},DISPLAY_INVALID_IMPORTED_ADDRESSES:{name:"display_invalid_imported_addresses",variationType:VariationTypes.ROLLOUT},AUTOMATION_RECOMMENDATIONS:{name:"automation_recommendations",variationType:VariationTypes.ROLLOUT},USPS_AES_ITN_UI:{name:"usps_aes_itn_ui",variationType:VariationTypes.ROLLOUT},PAYMENT_WALLET:{name:"payment_wallet",variationType:VariationTypes.ROLLOUT},SQUARE_STORE_CONNECTION:{name:"square_store_connection_setup",variationType:VariationTypes.ROLLOUT}},tslib_es6=(__webpack_require__("./app/utils/featureflags/FeatureFlagsProvider.tsx"),__webpack_require__("./node_modules/tslib/tslib.es6.mjs")),react_sdk=__webpack_require__("./node_modules/@optimizely/react-sdk/dist/react-sdk.js");function useFeatureFlag(featureFlag,options){var _a=(0,tslib_es6.zs)((0,react_sdk.A2)(featureFlag.name,{autoUpdate:!0,decideOptions:(null==options?void 0:options.blockEvent)?[react_sdk.kn.DISABLE_DECISION_EVENT]:[]}),2),decision=_a[0];return _a[1]?featureFlag.variationType===VariationTypes.ROLLOUT?{enabled:"on"===decision.variationKey}:featureFlag.variationType===VariationTypes.OPT_IN_OUT?{variation:"off"===decision.variationKey?"initialOptIn":decision.variationKey}:{variation:"off"===decision.variationKey?DEFAULT_SPLIT_VARIATION:decision.variationKey}:null}}}]);