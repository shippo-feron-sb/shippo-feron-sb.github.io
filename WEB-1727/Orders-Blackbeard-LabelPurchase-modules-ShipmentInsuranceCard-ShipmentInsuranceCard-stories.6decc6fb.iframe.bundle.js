(self.webpackChunk_shippo_feron=self.webpackChunk_shippo_feron||[]).push([[7612],{"./app/assets/icons/icon_close_dark_gray.svg":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__.p+"11ea1e7b9e1a66b45e38548d461d3a95.svg"},"./app/constants/signatureConfirmation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Md:()=>STANDARD_COST,mS:()=>getSignatureConfirmationOrDefault,zr:()=>ADULT_COST});var _a,_pages_Orders_Blackbeard_LabelPurchase_modules_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/types.ts"),standardSignatureConfirmationOption={value:_pages_Orders_Blackbeard_LabelPurchase_modules_types__WEBPACK_IMPORTED_MODULE_0__.zT.STANDARD,label:"Anyone can sign"},adultSignatureConfirmationOption={value:_pages_Orders_Blackbeard_LabelPurchase_modules_types__WEBPACK_IMPORTED_MODULE_0__.zT.ADULT,label:"An adult must sign",addToolTip:!0},signatureConfirmationMap=((_a={})[_pages_Orders_Blackbeard_LabelPurchase_modules_types__WEBPACK_IMPORTED_MODULE_0__.zT.ADULT]=adultSignatureConfirmationOption,_a[_pages_Orders_Blackbeard_LabelPurchase_modules_types__WEBPACK_IMPORTED_MODULE_0__.zT.STANDARD]=standardSignatureConfirmationOption,_a),getSignatureConfirmationOrDefault=function(value){return value&&signatureConfirmationMap[value]||standardSignatureConfirmationOption},STANDARD_COST=2,ADULT_COST=5},"./app/hooks/useStackablePortal.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,z:()=>isTopOfStack});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),isTopOfStack=function(key){return window.stackables[window.stackables.length-1]===key};const __WEBPACK_DEFAULT_EXPORT__=function(isOpen){var key=react__WEBPACK_IMPORTED_MODULE_0__.useRef(Symbol());return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){return isOpen&&window.stackables.push(key.current),function(){if(isOpen){var toRemove=window.stackables.indexOf(key.current);window.stackables.splice(toRemove,1)}}}),[isOpen]),key.current}},"./app/pages/Orders/Blackbeard/LabelPurchase/modules/Card/Card.styled.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q_:()=>CardContainer,hT:()=>CardAccordion,k1:()=>CardContentWithNormalPadding,t:()=>CardAccordionSummary});var templateObject_1,templateObject_2,templateObject_3,tslib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_goshippo_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@goshippo/components/esm/Box/Box.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@goshippo/components/esm/styles/colors.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@goshippo/components/esm/Accordion/Accordion.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@goshippo/components/esm/Accordion/AccordionSummary/AccordionSummary.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@goshippo/components/esm/styles/shippoTheme.js"),_goshippo_components__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@goshippo/components/esm/CardContent/CardContent.js"),CardContainer=(0,_goshippo_components__WEBPACK_IMPORTED_MODULE_0__.Ay)(_goshippo_components__WEBPACK_IMPORTED_MODULE_1__.A)((function(){return{border:"1px solid",borderColor:_goshippo_components__WEBPACK_IMPORTED_MODULE_2__.T.gray30,borderRadius:"4px"}})),CardAccordion=(0,_goshippo_components__WEBPACK_IMPORTED_MODULE_0__.Ay)(_goshippo_components__WEBPACK_IMPORTED_MODULE_3__.A)(templateObject_1||(templateObject_1=(0,tslib__WEBPACK_IMPORTED_MODULE_4__.ue)(["\n  padding: 0;\n  border-bottom: 0;\n"],["\n  padding: 0;\n  border-bottom: 0;\n"]))),CardAccordionSummary=(0,_goshippo_components__WEBPACK_IMPORTED_MODULE_0__.Ay)(_goshippo_components__WEBPACK_IMPORTED_MODULE_5__.A)(templateObject_2||(templateObject_2=(0,tslib__WEBPACK_IMPORTED_MODULE_4__.ue)(["\n  .MuiAccordionSummary-content {\n    max-width: calc(100% - "," * 2);\n    margin: ",";\n\n    display: grid;\n    grid-template-columns: calc(100% / 3) calc(100% / 3 * 2);\n    align-items: center;\n  }\n\n  & .MuiAccordionSummary-expandIconWrapper {\n    margin-right: 1.5rem;\n  }\n"],["\n  .MuiAccordionSummary-content {\n    max-width: calc(100% - "," * 2);\n    margin: ",";\n\n    display: grid;\n    grid-template-columns: calc(100% / 3) calc(100% / 3 * 2);\n    align-items: center;\n  }\n\n  & .MuiAccordionSummary-expandIconWrapper {\n    margin-right: 1.5rem;\n  }\n"])),"1rem","1rem"),CardContentWithNormalPadding=((0,_goshippo_components__WEBPACK_IMPORTED_MODULE_0__.Ay)(_goshippo_components__WEBPACK_IMPORTED_MODULE_1__.A)(templateObject_3||(templateObject_3=(0,tslib__WEBPACK_IMPORTED_MODULE_4__.ue)(["\n  padding: 1rem;\n  border-bottom: 1px solid ",";\n  &:first-of-type {\n    border-top: none;\n  }\n  &:last-of-type {\n    border-bottom: 0;\n  }\n"],["\n  padding: 1rem;\n  border-bottom: 1px solid ",";\n  &:first-of-type {\n    border-top: none;\n  }\n  &:last-of-type {\n    border-bottom: 0;\n  }\n"])),_goshippo_components__WEBPACK_IMPORTED_MODULE_6__.A.palette.grey[300]),(0,_goshippo_components__WEBPACK_IMPORTED_MODULE_0__.Ay)(_goshippo_components__WEBPACK_IMPORTED_MODULE_7__.A)((function(_a){return{":last-child":{paddingBottom:_a.theme.spacing(2)}}})))},"./app/pages/Orders/Blackbeard/LabelPurchase/modules/ShipmentExtrasCard/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{kB:()=>getInsuranceCost,dc:()=>utils_insuranceModalContent,jX:()=>utils_insuredAmountFromLineItems,Eo:()=>utils_lineItemsFromPartialOrder,EA:()=>paramsForOnSaveInsurance});var lodash=__webpack_require__("./node_modules/lodash/lodash.js"),tslib_es6=(__webpack_require__("./app/utils/segment/index.ts"),__webpack_require__("./node_modules/tslib/tslib.es6.mjs")),constants_currency=__webpack_require__("./app/constants/currency.ts"),index_umd=__webpack_require__("./node_modules/country-to-currency/index.umd.js"),index_umd_default=__webpack_require__.n(index_umd);function orderCurrency(currencyIso){return currencyIso?constants_currency.q[currencyIso]:void 0}var DEFAULT_INSURANCE_MODAL_AMOUNT=125,DEFAULT_INSURANCE_MODAL_AMOUNTS={USD:125,CAD:150,GBP:100,MXN:2e3,EUR:100};function insuranceFormCurrencyAndAmount(extrasInsurance,order,partialOrderLineItems,batchEntry){var _a,_b,_c,_d,itemCurrencies,currency;if((null==extrasInsurance?void 0:extrasInsurance.currency)&&constants_currency.q[extrasInsurance.currency.iso])return{currency:extrasInsurance.currency,amount:+(null==extrasInsurance?void 0:extrasInsurance.amount)||DEFAULT_INSURANCE_MODAL_AMOUNTS[extrasInsurance.currency.iso]||DEFAULT_INSURANCE_MODAL_AMOUNT};if(partialOrderLineItems){var partialOrderCurrencies=(0,tslib_es6.fX)([],(0,tslib_es6.zs)(new Set(partialOrderLineItems.map((function(lineItem){return lineItem.currency})).filter((function(lineItem){return!!(null==lineItem?void 0:lineItem.iso)})))),!1);if(1===partialOrderCurrencies.length)return{currency:partialOrderCurrencies[0],amount:partialOrderLineItems.reduce((function(acc,curr){return acc+ +curr.totalAmount}),0)||DEFAULT_INSURANCE_MODAL_AMOUNT}}if((null==order?void 0:order.lineItems)&&order.lineItems.length>0&&1===(itemCurrencies=(0,tslib_es6.fX)([],(0,tslib_es6.zs)(new Set(order.lineItems.map((function(lineItem){return lineItem.currency})).filter((function(lineItem){return!!(null==lineItem?void 0:lineItem.iso)})))),!1)).length)return{currency:itemCurrencies[0],amount:order.lineItems.reduce((function(acc,curr){return acc+ +curr.totalAmount}),0)||DEFAULT_INSURANCE_MODAL_AMOUNT};if((null==batchEntry?void 0:batchEntry.customsItems)&&batchEntry.customsItems.length>0&&1===(itemCurrencies=(0,tslib_es6.fX)([],(0,tslib_es6.zs)(new Set(batchEntry.customsItems.map((function(customsItem){return customsItem.valueCurrency})).filter((function(customsItem){return!!(null==customsItem?void 0:customsItem.iso)})))),!1)).length)return{currency:itemCurrencies[0],amount:batchEntry.customsItems.reduce((function(acc,curr){return acc+ +curr.valueAmount}),0)||DEFAULT_INSURANCE_MODAL_AMOUNT};return(null==order?void 0:order.currency)&&orderCurrency(order.currency)?{currency:currency=orderCurrency(order.currency)||constants_currency.q.USD,amount:+((null==order?void 0:order.totalPrice)||(null==order?void 0:order.subtotalPrice)||"")||DEFAULT_INSURANCE_MODAL_AMOUNTS[currency.iso]||DEFAULT_INSURANCE_MODAL_AMOUNT}:(null===(_b=null===(_a=null==batchEntry?void 0:batchEntry.addressFrom)||void 0===_a?void 0:_a.country)||void 0===_b?void 0:_b.iso2)&&index_umd_default()[batchEntry.addressFrom.country.iso2]?{currency:currency=constants_currency.q[index_umd_default()[batchEntry.addressFrom.country.iso2]]||constants_currency.q.USD,amount:DEFAULT_INSURANCE_MODAL_AMOUNTS[currency.iso]||DEFAULT_INSURANCE_MODAL_AMOUNT}:(null===(_d=null===(_c=null==order?void 0:order.addressFrom)||void 0===_c?void 0:_c.country)||void 0===_d?void 0:_d.iso2)&&index_umd_default()[order.addressFrom.country.iso2]?{currency:currency=constants_currency.q[index_umd_default()[order.addressFrom.country.iso2]]||constants_currency.q.USD,amount:DEFAULT_INSURANCE_MODAL_AMOUNTS[currency.iso]||DEFAULT_INSURANCE_MODAL_AMOUNT}:{currency:constants_currency.q.USD,amount:DEFAULT_INSURANCE_MODAL_AMOUNTS.USD}}var paramsForOnSaveInsurance=function(newInsuranceValues){return{insurance:newInsuranceValues.hasInsurance?{amount:"".concat(newInsuranceValues.amount.replace(/,/g,"")),currency:newInsuranceValues.currency,useImportedAmount:!1}:null}},utils_insuredAmountFromLineItems=function(lineItems){var output=null==lineItems?void 0:lineItems.map((function(i){return+i.totalAmount})).reduce((function(curr,accum){return curr+accum}),0);return(0,lodash.isFinite)(output)?output:0},utils_insuranceModalContent=function(extrasInsurance,order,partialOrderLineItems,batchEntry){var currencyAndAmount=insuranceFormCurrencyAndAmount(extrasInsurance,order,partialOrderLineItems,batchEntry);return{hasInsurance:!!extrasInsurance,amount:"".concat(currencyAndAmount.amount),useImportedAmount:!1,currency:currencyAndAmount.currency}},utils_lineItemsFromPartialOrder=function(orderLineItems,batchEntryLineItems){if(orderLineItems&&batchEntryLineItems){var targetLineItems=batchEntryLineItems.reduce((function(accum,curr){return accum[curr.objectId]=!0,accum}),{}),output=orderLineItems.filter((function(lineItem){return!!targetLineItems[lineItem.objectId]}));return output.length?output:void 0}},getInsuranceCost=function(userInsuranceRate,declaredValue,rateCost,numOrdersSelected){return void 0===rateCost&&(rateCost=0),void 0===numOrdersSelected&&(numOrdersSelected=1),(numOrdersSelected*declaredValue+rateCost)*userInsuranceRate}},"./app/pages/Orders/Blackbeard/LabelPurchase/modules/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{nB:()=>SelectedParcelType,tf:()=>blackbeardDistanceUnit,zT:()=>blackbeardSignatureConfirmation});var blackbeardDistanceUnit={CM:"cm",IN:"in",MM:"mm"};var SelectedParcelType=function(){function SelectedParcelType(oneOffBoxOrTubeSelected,oneOffPolymailerSelected,selectedUserParcelTemplate,selectedCarrierParcelTemplate){this.oneOffBoxOrTubeSelected=oneOffBoxOrTubeSelected,this.oneOffPolymailerSelected=oneOffPolymailerSelected,this.selectedUserParcelTemplate=selectedUserParcelTemplate,this.selectedCarrierParcelTemplate=selectedCarrierParcelTemplate}return SelectedParcelType.unselected=function(){return new SelectedParcelType(!1,!1)},SelectedParcelType.selectCustomBoxOrTube=function(){return new SelectedParcelType(!0,!1)},SelectedParcelType.selectCustomPolymailer=function(){return new SelectedParcelType(!1,!0)},SelectedParcelType.selectUserParcelTemplate=function(template){return new SelectedParcelType(!1,!1,template)},SelectedParcelType.selectCarrierParcelTemplate=function(template){return new SelectedParcelType(!1,!1,void 0,template)},SelectedParcelType.prototype.selectFromTemplate=function(userTemplate,carrierTemplate){return userTemplate||carrierTemplate?new SelectedParcelType(!1,!1,userTemplate,carrierTemplate):this},SelectedParcelType.prototype.isUnselected=function(){return!this.isCustomSelected()&&!this.isTemplateSelected()},SelectedParcelType.prototype.isCustomSelected=function(){return this.isCustomBoxOrTubeSelected()||this.isCustomPolymailerSelected()},SelectedParcelType.prototype.isTemplateSelected=function(){return this.isUserParcelTemplateSelected()||this.isCarrierParcelTemplateSelected()},SelectedParcelType.prototype.isCustomBoxOrTubeSelected=function(){return this.oneOffBoxOrTubeSelected},SelectedParcelType.prototype.isCustomPolymailerSelected=function(){return this.oneOffPolymailerSelected},SelectedParcelType.prototype.isUserParcelTemplateSelected=function(){return void 0!==this.selectedUserParcelTemplate},SelectedParcelType.prototype.isCarrierParcelTemplateSelected=function(){return void 0!==this.selectedCarrierParcelTemplate},SelectedParcelType.prototype.getSelectedUserParcelTemplate=function(){return this.selectedUserParcelTemplate},SelectedParcelType.prototype.getSelectedCarrierParcelTemplate=function(){return this.selectedCarrierParcelTemplate},SelectedParcelType.prototype.getSelectedParcelTemplate=function(){return this.isUserParcelTemplateSelected()?this.getSelectedUserParcelTemplate():this.getSelectedCarrierParcelTemplate()},SelectedParcelType.prototype.isEqual=function(other){return this.isUnselected()?other.isUnselected():this.isCustomBoxOrTubeSelected()?other.isCustomBoxOrTubeSelected():this.isCustomPolymailerSelected()?other.isCustomPolymailerSelected():JSON.stringify(this.getSelectedParcelTemplate())===JSON.stringify(other.getSelectedParcelTemplate())},SelectedParcelType}(),blackbeardSignatureConfirmation={STANDARD:"STANDARD",ADULT:"ADULT",CERTIFIED:"CERTIFIED",INDIRECT:"INDIRECT",CARRIER_CONFIRMATION:"CARRIER_CONFIRMATION"}},"./app/pages/Orders/Blackbeard/LabelPurchase/modules/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{WM:()=>getRateValueTranslated,WW:()=>shouldUseKeep,gG:()=>getEstimatedDaysTranslated});var _constants_currency__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/constants/currency.ts"),getEstimatedDaysTranslated=(__webpack_require__("./app/constants/signatureConfirmation.ts"),__webpack_require__("./app/types/SignatureConfirmation.ts"),__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/ShipmentExtrasCard/utils.ts"),function(estimatedDays,t){return estimatedDays?t("translations:day",{count:estimatedDays}):t("orders:calculateRates:rates:info:etaUnavailable")}),getRateValueTranslated=function(amount,currency,t){var noValue="".concat(_constants_currency__WEBPACK_IMPORTED_MODULE_0__.q[currency].symbol,"—");return Number(amount)?t("translations:currency",{value:{value:Number(amount),currency_iso:currency}}):noValue};function shouldUseKeep(mixedSelection){return mixedSelection&&mixedSelection.numberWithInsurance>0&&mixedSelection.numberSelected>1}},"./app/selectors/orders.selectors.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$m:()=>getIsUpdatingOrder,BE:()=>getSelectedCount,Bq:()=>getPackingSlipUrl,Cd:()=>getSelectedOrdersTags,H4:()=>makeGetOrderById,JF:()=>getIsOrderLoading,Ld:()=>getOrdersCount,Li:()=>getSelectedOrders,MO:()=>getAreAllOrdersSelected,Oz:()=>getAllOrdersCount,PJ:()=>getOrderFirstSuccessfulTransactionIds,RQ:()=>getIsLoading,SP:()=>getTotalOrders,Sv:()=>getOrdersData,Ub:()=>getLastOrderId,WF:()=>getOrders,YC:()=>makeGetIsOrderPartiallyFulfilled,Yo:()=>hasNewOrders,Z:()=>getOrdersRemainingForLabelDownload,ZN:()=>getSelectedOrdersData,bL:()=>getPatchBatchEntriesExtrasRequest,f6:()=>getOrderAction,kA:()=>getIsSidePanelCheckout,pP:()=>getSelectedOrderTagsByOrderId,q2:()=>getIsOrderSelected,qf:()=>getIsBatchEntrySelected,qy:()=>getCheckoutRateAfterPoll,x4:()=>getOrderSuccessfulTransactionIds,yD:()=>getOrderByObjectId,zF:()=>getOrdersAllIds});var tslib__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),reselect__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/reselect/es/index.js"),_types_Order__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/types/Order.ts"),_types_Transaction__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./app/types/Transaction.ts"),_utils_fetchable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./app/utils/fetchable.ts"),EMPTY_ORDER={partialFulfillmentRequests:[]},getOrdersStore=function(state){return state.orders},getOrderIdFromProps=function(_,props){return props.orderId},getOrderObjectIdFromProps=function(_,props){return props.orderObjectId},getOrderAction=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.orderAction})),hasNewOrders=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isSyncingOrders})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.hasNewOrders}))),getOrdersCount=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(orderStore){return orderStore.totalOrders})),getOrdersAllIds=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.allIds})),getOrdersData=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.data})),getOrders=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersAllIds,getOrdersData,(function(allIds,ordersData){return allIds.map((function(id){return ordersData[id]})).filter((function(v){return v}))})),getTotalOrders=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersData,(function(ordersData){return Object.values(ordersData).some((function(order){return(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.vz)(order)}))})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersData,(function(ordersData){return Object.values(ordersData).some((function(order){return(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.vX)(order)}))})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.totalOrders}))),getAllOrdersCount=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.allOrdersCount})),getIsOrderLoading=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isLoadingOrdersCount})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.fetchOrderHasError})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isLoadingOrder}))),getIsLoading=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isLoading})),getPackingSlipUrl=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrderAction,(function(orderAction){return"hide"===orderAction.kind&&(0,_utils_fetchable__WEBPACK_IMPORTED_MODULE_3__.A7)((function(){return!1}),(function(){return!0}),(function(){return!1}),(function(){return!1}))(orderAction.request)})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isCreatingReturnBatchEntry})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.createReturnBatchEntryHasError})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.returnLabelCreatedSuccessfully})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.transactions})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.packingSlipUrl}))),getLastOrderId=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.labelDownloadUrl})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.labelDownloadErrMsg})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isDownloadingLabels})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.notificationsLoading})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.notificationsSent})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.lastOrderId}))),getSelectedOrders=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.selectedOrders})),getOrdersRemainingForLabelDownload=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.checkedOrders})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.rowModelBeingEdited})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.ordersRemainingLabelDownload}))),getCheckoutRateAfterPoll=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.checkoutRateAfterPoll})),getSelectedOrdersData=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getSelectedOrders,getOrdersData,(function(ordersSelection,ordersData){return Object.keys(ordersSelection||{}).map((function(id){return ordersData[id]})).filter((function(v){return v}))})),getSelectedOrdersTags=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getSelectedOrdersData,(function(selectedOrdersData){return selectedOrdersData.reduce((function(acc,order){return acc.concat(order.tags||[])}),[])})),getSelectedOrderTagsByOrderId=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getSelectedOrdersData,(function(selectedOrdersData){return selectedOrdersData.reduce((function(acc,order){return acc[order.objectId]=order.tags||[],acc}),{})})),makeGetOrderById=function(){return(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersData,getOrderIdFromProps,(function(ordersData,orderId){return ordersData[orderId]}))},getOrderByObjectId=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersData,getOrderObjectIdFromProps,(function(ordersData,orderObjectId){return ordersData[orderObjectId]||EMPTY_ORDER})),makeGetIsOrderPartiallyFulfilled=function(){return(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrderByObjectId,(function(order){var e_1,_a,_b;if(!order.partialFulfillmentRequests||!order.totalPartialFulfillments)return!1;var hasFulfilledOrder=!1,hasUnfulfilledOrder=!1,_loop_1=function(request){request.transactionObjectId?(null===(_b=order.transactions.find((function(transaction){return transaction.objectId===request.transactionObjectId})))||void 0===_b?void 0:_b.status)===_types_Transaction__WEBPACK_IMPORTED_MODULE_1__.x8.SUCCESS?hasFulfilledOrder=!0:hasUnfulfilledOrder=!0:hasUnfulfilledOrder=!0;if(hasFulfilledOrder&&hasUnfulfilledOrder)return{value:!0}};try{for(var _c=(0,tslib__WEBPACK_IMPORTED_MODULE_4__.Ju)(order.partialFulfillmentRequests),_d=_c.next();!_d.done;_d=_c.next()){var state_1=_loop_1(_d.value);if("object"==typeof state_1)return state_1.value}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}return!1}))},getIsUpdatingOrder=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersData,getOrderIdFromProps,(function(ordersData,orderId){return ordersData[orderId]})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getSelectedOrdersData,(function(selectedOrdersData){return selectedOrdersData.some((function(order){return(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.vX)(order)}))})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getSelectedOrdersData,(function(selectedOrdersData){return selectedOrdersData.some((function(order){return(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.vz)(order)}))})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getSelectedOrdersData,(function(selectedOrdersData){return selectedOrdersData.every((function(order){return(0,_types_Order__WEBPACK_IMPORTED_MODULE_0__.vz)(order)}))})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isUpdatingBatchEntry}))),getIsOrderSelected=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isSingleOrderMode})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getSelectedOrders,getOrderObjectIdFromProps,(function(selectedOrders,orderObjectId){return!!selectedOrders[orderObjectId]}))),getAreAllOrdersSelected=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getSelectedOrders,getOrdersAllIds,(function(selectedOrders,allIds){return Object.keys(selectedOrders).length===allIds.length})),getIsBatchEntrySelected=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getSelectedOrders,(function(_,props){return props}),(function(selectedOrders,props){return(selectedOrders[props.orderObjectId]||[]).includes(props.batchEntryId)})),getSelectedCount=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getSelectedOrders,(function(selectedOrders){return Object.values(selectedOrders).reduce((function(count,currVal){return currVal.length?count+currVal.length:count+1}),0)})),getPatchBatchEntriesExtrasRequest=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.batchEntryEditNotificationState})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(orderStore){return orderStore.patchBatchEntriesExtrasRequest}))),getOrdersDataByObjectIds=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersData,(function(_,props){return props.orderObjectIds}),(function(ordersData,orderObjectIds){return orderObjectIds.map((function(objectId){return ordersData[objectId]}))})),getOrderSuccessfulTransactionIds=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersDataByObjectIds,(function(ordersData){return ordersData.filter((function(order){var _a;return null===(_a=null==order?void 0:order.transactions)||void 0===_a?void 0:_a.some((function(transaction){return"SUCCESS"===transaction.status}))})).reduce((function(txnIds,order){var orderTxns=order.transactions.filter((function(t){return"SUCCESS"===t.status})).map((function(t){return t.objectId}));return(0,tslib__WEBPACK_IMPORTED_MODULE_4__.fX)((0,tslib__WEBPACK_IMPORTED_MODULE_4__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_4__.zs)(txnIds),!1),(0,tslib__WEBPACK_IMPORTED_MODULE_4__.zs)(orderTxns),!1)}),[])})),getOrderFirstSuccessfulTransactionIds=(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersDataByObjectIds,(function(ordersData){return ordersData.filter((function(order){var _a;return null===(_a=null==order?void 0:order.transactions)||void 0===_a?void 0:_a.some((function(transaction){return"SUCCESS"===transaction.status}))})).map((function(order){return order.transactions.filter((function(t){return"SUCCESS"===t.status})).map((function(t){return t.objectId}))[0]}),[])})),getIsSidePanelCheckout=((0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isUpdatingCustomsItems})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isCreatingCustomsItems})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isSidePanelCheckout})));(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isUpdatingParcel})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.isLoadingOrderTags})),(0,reselect__WEBPACK_IMPORTED_MODULE_2__.createSelector)(getOrdersStore,(function(ordersStore){return ordersStore.orderTagsBeingUpdated}))},"./app/utils/segment/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{sV:()=>schema.Ay,P0:()=>getLocalTraits,ls:()=>segment_identify,Ok:()=>isTraitDifferent,u4:()=>track});var esm_exports=__webpack_require__("./node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js"),schema=__webpack_require__("./app/utils/segment/schema.ts");__webpack_require__("./node_modules/moment/moment.js"),__webpack_require__("./app/pages/Onboarding/onboarding.constants.ts"),__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react-redux/es/index.js"),__webpack_require__("./app/selectors/user.selectors.ts");var segment_identify=function(id,traits){window.analytics?window.analytics.identify(id,traits):esm_exports.wd("identify called before window.analytics available",{level:"warning"})},track=function(name,properties){window.analytics?window.analytics.track(name,properties):esm_exports.wd("track called before window.analytics available",{level:"warning"})},getLocalTraits=function(){var ajsUserTraits=localStorage.getItem("ajs_user_traits");if(ajsUserTraits)try{return JSON.parse(ajsUserTraits)}catch(error){return}},isTraitDifferent=function(property,value){var localTraits=getLocalTraits();return!(localTraits&&localTraits[property]===value)}},"./app/utils/segment/schema.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var Events;__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,ID:()=>EVENT_ORIGIN_ORDER_DETAILS,hX:()=>EVENT_ORIGIN_LEGACY_ORDER}),function(Events){Events.registered="Signed Up",Events.store_connected="Store Connected",Events.store_disconnected="Store Disconnected",Events.address_created="Address Created",Events.credit_card_added="Credit Card Added",Events.carrier_connected="Carrier Connected",Events.carrier_error_displayed="Carrier Error Displayed",Events.package_template_created="Package Template Created",Events.label_purchase="Label Purchased",Events.label_purchase_failed="Label Purchase Failed",Events.label_downloaded="Label Downloaded",Events.packing_slip_downloaded="Packing Slip Downloaded",Events.tracking_status_viewed="Tracking Status Viewed",Events.onboarding_step_completed="Step Completed",Events.onboarding_completed="Onboarding Completed",Events.get_started_viewed="Get Started Page View",Events.insurance_updated="Insurance Updated",Events.insurance_modal_opened="Insurance Modal Opened",Events.insurance_modal_link_clicked="Insurance Modal Link Clicked",Events.email_notification_changed="Email Notifications Changed",Events.insurance_option_onboarding="Insurance option during onboarding",Events.automatic_insurance_settings_update="Automatic insurance settings update",Events.insurance_removal="Insurance removal in confirmation modal",Events.insurance_removal_order_details="Remove Insurance from Order Details",Events.signaure_modal_opened="Signature Confirmation Modal Opened",Events.signature_modal_updated="Signature Confirmation Modal Updated",Events.signature_removal_order_details="Remove Signature from Order Details",Events.ups_surcharge_warning="UPS surcharge warnings",Events.insurance_details_opened="Insurance Details Opened From Sidebar",Events.signature_details_opened="Signature Details Opened From Sidebar",Events.signature_updated="Signature Details Updated From Sidebar",Events.new_insurance_updated="Insurance Updated From Sidebar",Events.insurance_link_clicked="Insurance Link Clicked From Sidebar",Events.insurance_removed_sidebar="Remove Insurance From Sidebar",Events.signature_removed_sidebar="Remove Signature From Sidebar",Events.promo_code_add_replace="Promo code added or replaced",Events.save_default_package_units="Default package units updated",Events.update_user_information="User profile updated",Events.update_user_language="User language updated",Events.order_search_completed="Order search completed",Events.order_search_result_selected="Order search row selected",Events.customs_options_form_submit="Customs Options Form Submit",Events.customs_items_form_submit="Customs Items Form Submit",Events.package_info_edited="Package Info Updated",Events.embeddable_next_params="Embeddable User Set Next Params",Events.plan_updated="Plan Updated"}(Events||(Events={}));var EVENT_ORIGIN_ORDER_DETAILS="Order details",EVENT_ORIGIN_LEGACY_ORDER="Legacy orders table";const __WEBPACK_DEFAULT_EXPORT__=Events},"./app/utils/translate.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{In:()=>react_i18next__WEBPACK_IMPORTED_MODULE_0__.In,Tl:()=>react_i18next__WEBPACK_IMPORTED_MODULE_0__.Tl,x6:()=>react_i18next__WEBPACK_IMPORTED_MODULE_0__.x6});var react_i18next__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-i18next/dist/es/index.js")},"./app/pages/Orders/Blackbeard/LabelPurchase/modules/ShipmentInsuranceCard/ShipmentInsuranceCard.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultState:()=>DefaultState,InsuranceAndSignature:()=>InsuranceAndSignature,OverFiveHundred:()=>OverFiveHundred,default:()=>ShipmentInsuranceCard_stories});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),emotion_react_jsx_runtime_browser_esm=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),translate=__webpack_require__("./app/utils/translate.ts"),react=__webpack_require__("./node_modules/react/index.js"),Card_styled=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/Card/Card.styled.tsx"),Alert=__webpack_require__("./node_modules/@goshippo/components/esm/Alert/Alert.js");const ShipmentExtrasCard_ReturnLabelWarning=function(_a){var t=_a.t,marginBottomValue=_a.isSidePanel?2:0;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Alert.A,(0,tslib_es6.Cl)({severity:"warning",sx:{mb:marginBottomValue}},{children:t("orders:shipmentExtras:returnLabelsNotInsuredWarning")}))};var templateObject_1,templateObject_2,templateObject_3,templateObject_4,templateObject_5,types_templateObject_1,types_templateObject_2,_a,utils=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/ShipmentExtrasCard/utils.ts"),modules_utils=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/utils.ts"),styled=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),Box=__webpack_require__("./node_modules/@goshippo/components/esm/Box/Box.js"),colors=__webpack_require__("./node_modules/@goshippo/components/esm/styles/colors.js"),Typography=__webpack_require__("./node_modules/@goshippo/components/esm/Typography/Typography.js"),Button=__webpack_require__("./node_modules/@goshippo/components/esm/Button/Button.js"),ContentContainer=(0,styled.Ay)(Box.A)((function(){return{padding:"1rem",color:colors.T.text.primary.black}})),InsuranceHeader=(0,styled.Ay)(Typography.A)(templateObject_1||(templateObject_1=(0,tslib_es6.ue)(["\n  color: ",";\n  padding-bottom: 0.5rem;\n"],["\n  color: ",";\n  padding-bottom: 0.5rem;\n"])),colors.T.text.primary.black),InsuranceRecommend=(0,styled.Ay)(Typography.A)(templateObject_2||(templateObject_2=(0,tslib_es6.ue)(["\n  color: ",";\n  padding-bottom: 0.25rem;\n"],["\n  color: ",";\n  padding-bottom: 0.25rem;\n"])),colors.T.text.primary.black),CardBlock=(0,styled.Ay)(Box.A)(templateObject_3||(templateObject_3=(0,tslib_es6.ue)(["\n  padding: 0.5rem 0;\n  border-bottom: 1px solid ",";\n  &:last-of-type {\n    border-bottom: 0px;\n    padding-bottom: 0;\n  }\n"],["\n  padding: 0.5rem 0;\n  border-bottom: 1px solid ",";\n  &:last-of-type {\n    border-bottom: 0px;\n    padding-bottom: 0;\n  }\n"])),colors.T.gray30),AddEditButton=(0,styled.Ay)(Button.A)(templateObject_4||(templateObject_4=(0,tslib_es6.ue)(["\n  background-color: transparent;\n  color: ",";\n  box-shadow: none;\n\n  &:hover {\n    color: ",";\n    background-color: ",";\n  }\n"],["\n  background-color: transparent;\n  color: ",";\n  box-shadow: none;\n\n  &:hover {\n    color: ",";\n    background-color: ",";\n  }\n"])),colors.T.accent.foreground.success,colors.T.primaryButtonHover,colors.T.accent.background.success),RemoveIconButton=(0,styled.Ay)("img")(templateObject_5||(templateObject_5=(0,tslib_es6.ue)(["\n  padding-left: 0.5rem;\n  cursor: pointer;\n"],["\n  padding-left: 0.5rem;\n  cursor: pointer;\n"]))),CircularProgress=__webpack_require__("./node_modules/@goshippo/components/esm/CircularProgress/CircularProgress.js"),ShipmentExtraContainer=(0,styled.Ay)("div")(types_templateObject_1||(types_templateObject_1=(0,tslib_es6.ue)(["\n  display: flex;\n  flex-direction: column;\n"],["\n  display: flex;\n  flex-direction: column;\n"]))),ShipmentExtrasSpacer=(0,styled.Ay)(Box.A)(types_templateObject_2||(types_templateObject_2=(0,tslib_es6.ue)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"],["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),Stack_Stack=__webpack_require__("./node_modules/@goshippo/components/esm/Stack/Stack.js"),icon_close_dark_gray=__webpack_require__("./app/assets/icons/icon_close_dark_gray.svg"),segment=__webpack_require__("./app/utils/segment/index.ts"),index_esm=__webpack_require__("./node_modules/react-hook-form/dist/index.esm.js"),types=__webpack_require__("./app/pages/Orders/Blackbeard/LabelPurchase/modules/types.ts"),adultSignatureConfirmationOption={value:types.zT.ADULT,label:"An adult must sign"},standardSignatureConfirmationOption={value:types.zT.STANDARD,label:"Anyone can sign"},signatureConfirmationMap=((_a={})[types.zT.ADULT]=adultSignatureConfirmationOption,_a[types.zT.STANDARD]=standardSignatureConfirmationOption,_a);var MobileAndDesktopDrawer=__webpack_require__("./node_modules/@goshippo/libraries/dist/esm/shared/MobileAndDesktopDrawer/index.js"),FormControl=__webpack_require__("./node_modules/@goshippo/components/esm/FormControl/FormControl.js"),RadioGroup=__webpack_require__("./node_modules/@goshippo/components/esm/RadioGroup/RadioGroup.js"),FormControlLabel=__webpack_require__("./node_modules/@goshippo/components/esm/FormControlLabel/FormControlLabel.js"),Radio=__webpack_require__("./node_modules/@goshippo/components/esm/Radio/Radio.js"),TextField=__webpack_require__("./node_modules/@goshippo/components/esm/TextField/TextField.js"),InputAdornment=__webpack_require__("./node_modules/@goshippo/components/esm/InputAdornment/InputAdornment.js"),validations=__webpack_require__("./app/utils/validations.ts");const SimplifiedInsuranceModal_InsuranceValueField=function(_a){var getValues=_a.getValues,control=_a.control,errors=_a.errors,t=_a.t,disabled=_a.disabled,currency=_a.currency,multipleSelectedLabelMsg=_a.multipleSelectedLabelMsg;return(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack_Stack.A,(0,tslib_es6.Cl)({sx:{ml:4}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack_Stack.A,(0,tslib_es6.Cl)({direction:"row",spacing:1,alignItems:"flex-end"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(index_esm.xI,{name:"amount",control,rules:{validate:{required:function(value){return!getValues("hasInsurance")||(!!value||t("orders:additionalServices:errs:insurance:valueRequiredAlt"))},max:function(value){var cleanNumber=value.replace(/,/g,"");return!value||(parseFloat(cleanNumber)<=1e4||t("orders:additionalServices:errs:insurance:maxInsuranceVariant"))},min:function(value){return!value||(parseFloat(value)>=1||t("orders:additionalServices:errs:insurance:minInsurance"))},pattern:function(value){if(!validations.Qb.test(value)&&value)return"Please enter a valid numeric value with up to two decimal places, if decimals are used"}}},render:function(_a){var _b=_a.field,ref=_b.ref,rest=(0,tslib_es6.Tt)(_b,["ref"]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(TextField.A,(0,tslib_es6.Cl)({},rest,{disabled,inputMode:"decimal",fullWidth:!0,inputRef:ref,InputProps:{startAdornment:(0,emotion_react_jsx_runtime_browser_esm.Y)(InputAdornment.A,(0,tslib_es6.Cl)({position:"start"},{children:currency.symbol?currency.symbol:"$"}))},error:!!errors,label:"".concat(t("orders:insurance:customValue")," ").concat(multipleSelectedLabelMsg)}))}})})),(null==errors?void 0:errors.message)&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"div",color:"error",variant:"caption",sx:{mt:1},"data-testid":"insurance-custom-value-error"},{children:errors.message}))]}))};var Link=__webpack_require__("./node_modules/@goshippo/components/esm/Link/Link.js"),InsuranceDisclaimer=function(_a){var originCountries=_a.originCountries,buttonName=_a.buttonName,uniqueCountries=(0,tslib_es6.fX)([],(0,tslib_es6.zs)(new Set(originCountries)),!1).filter((function(country){return void 0!==country}));if(1===uniqueCountries.length){var country=uniqueCountries[0];if("GB"===country)return(0,emotion_react_jsx_runtime_browser_esm.Y)(GBDisclaimer,{buttonName});if("FR"===country)return(0,emotion_react_jsx_runtime_browser_esm.Y)(FRDisclaimer,{buttonName});if("IT"===country)return(0,emotion_react_jsx_runtime_browser_esm.Y)(ITDisclaimer,{buttonName});if("NL"===country)return(0,emotion_react_jsx_runtime_browser_esm.Y)(NLDisclaimer,{buttonName});if("DE"===country)return(0,emotion_react_jsx_runtime_browser_esm.Y)(DEDisclaimer,{buttonName});if("ES"===country)return(0,emotion_react_jsx_runtime_browser_esm.Y)(ESDisclaimer,{buttonName})}return(0,emotion_react_jsx_runtime_browser_esm.Y)(DefaultDisclaimer,{})},DefaultDisclaimer=function(){return(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({variant:"caption",component:"span",color:"secondary"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(translate.x6,{i18nKey:"orders:checkout:xcoverNote",components:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://www.xcover.com/pds/__0XQLK__shippo_termsandconditions"},{children:"0"}),0)]})}))},GBDisclaimer=function(_a){var buttonName=_a.buttonName;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({variant:"caption",component:"span",color:"secondary"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(translate.x6,{i18nKey:"orders:checkout:xcoverNoteByCountry:GB",values:{buttonName},components:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://www.xcover.com/en/pds/Shippo_UK_Shipping_Protection"},{children:"0"}),0),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://static.xcover.com/media/pds/d9ff2305-891b-482f-8e03-22f450b12a12/IPID_Shippo_Shipping_EN.pdf"},{children:"1"}),1),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://covergenius.com/privacy-policy/"},{children:"2"}),2)]})}))},FRDisclaimer=function(_a){var buttonName=_a.buttonName;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({variant:"caption",component:"span",color:"secondary"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(translate.x6,{i18nKey:"orders:checkout:xcoverNoteByCountry:FR",values:{buttonName},components:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://www.xcover.com/fr/pds/Shippo_EU_Shipping_Protection"},{children:"0"}),0),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://static.xcover.com/media/pds/df37407c-020b-4768-afc5-bc8382779436/Shippo_FR_Shipping_Protection_IPID.pdf"},{children:"1"}),1),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://covergenius.com/privacy-policy/"},{children:"2"}),2)]})}))},ITDisclaimer=function(_a){var buttonName=_a.buttonName;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({variant:"caption",component:"span",color:"secondary"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(translate.x6,{i18nKey:"orders:checkout:xcoverNoteByCountry:IT",values:{buttonName},components:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://www.xcover.com/it/pds/Shippo_EU_Shipping_Protection"},{children:"0"}),0),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://static.xcover.com/media/pds/df37407c-020b-4768-afc5-bc8382779436/Shippo_IT_Shipping_protection_DIP.pdf"},{children:"1"}),1),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://covergenius.com/privacy-policy/"},{children:"2"}),2)]})}))},NLDisclaimer=function(_a){var buttonName=_a.buttonName;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({variant:"caption",component:"span",color:"secondary"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(translate.x6,{i18nKey:"orders:checkout:xcoverNoteByCountry:NL",values:{buttonName},components:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://www.xcover.com/nl/pds/Shippo_EU_Shipping_Protection"},{children:"0"}),0),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://static.xcover.com/media/pds/df37407c-020b-4768-afc5-bc8382779436/Shippo_NL_Shipping_protection_IPID.pdf"},{children:"1"}),1),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://covergenius.com/privacy-policy/"},{children:"2"}),2)]})}))},DEDisclaimer=function(_a){var buttonName=_a.buttonName;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({variant:"caption",component:"span",color:"secondary"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(translate.x6,{i18nKey:"orders:checkout:xcoverNoteByCountry:DE",values:{buttonName},components:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://www.xcover.com/de/pds/Shippo_EU_Shipping_Protection"},{children:"0"}),0),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://hiscoxdedrupal.prod.acquia-sites.com/sites/default/files/documents/mitteilung-nach-paragraph-19-abs-5-vvg-1.pdf"},{children:"1"}),1),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://static.xcover.com/media/pds/df37407c-020b-4768-afc5-bc8382779436/Shippo_DE_Shipping_protection_IPID.pdf"},{children:"2"}),2),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://covergenius.com/privacy-policy/"},{children:"3"}),3)]})}))},ESDisclaimer=function(_a){var buttonName=_a.buttonName;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({variant:"caption",component:"span",color:"secondary"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(translate.x6,{i18nKey:"orders:checkout:xcoverNoteByCountry:ES",values:{buttonName},components:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://www.xcover.com/es/pds/Shippo_EU_Shipping_Protection"},{children:"0"}),0),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://static.xcover.com/media/pds/df37407c-020b-4768-afc5-bc8382779436/Shippo_ES_Shipping_protection_IPID.pdf"},{children:"1"}),1),(0,emotion_react_jsx_runtime_browser_esm.Y)(Link.A,(0,tslib_es6.Cl)({target:"_blank",color:"secondary",href:"https://covergenius.com/privacy-policy/"},{children:"2"}),2)]})}))},es=__webpack_require__("./node_modules/react-redux/es/index.js"),orders_selectors=__webpack_require__("./app/selectors/orders.selectors.ts"),SimplifiedInsuranceView=function(_a){var _b,_c,control=_a.control,currency=_a.currency,errors=_a.errors,getValues=_a.getValues,t=_a.t,showItemValueTotal=_a.showItemValueTotal,onInsuranceValueTypeChange=_a.onInsuranceValueTypeChange,insuranceValueType=_a.insuranceValueType,insured=_a.insured,mixedSelection=_a.mixedSelection,addInsuranceButtonName=_a.addInsuranceButtonName,isBatch=_a.isBatch,order=_a.order,selectedOrdersData=(0,es.d4)(orders_selectors.ZN),showKeepSelection=mixedSelection&&mixedSelection.numberWithInsurance>0&&mixedSelection.numberSelected>1,hideValueOfItems=mixedSelection&&mixedSelection.numberSelected>1||!showItemValueTotal,multipleSelectedLabelMsg=mixedSelection&&mixedSelection.numberSelected>1?t("orders:insurance:perOrder"):"";return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack_Stack.A,(0,tslib_es6.Cl)({direction:"column",justifyContent:"space-between",height:"100%"},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(Box.A,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"h4",variant:"bodyEmphasized",sx:{marginBottom:"1rem"}},{children:t("orders:insurance:coverageValue")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(FormControl.A,(0,tslib_es6.Cl)({sx:{width:"100%",gap:"0.5rem"}},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(RadioGroup.A,(0,tslib_es6.Cl)({value:"keep"===insured?"keep":insuranceValueType,onChange:onInsuranceValueTypeChange,sx:{gap:"1rem"},"data-testid":"insurance-form",name:"insuranceType"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(FormControlLabel.A,{"data-testid":"insurance-radio-none-added",value:"noAddedInsurance",control:(0,emotion_react_jsx_runtime_browser_esm.Y)(Radio.A,{sx:{paddingTop:0,paddingBottom:0}}),label:(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack_Stack.A,(0,tslib_es6.Cl)({direction:"column"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"span",variant:"bodyEmphasized"},{children:t("orders:insurance:notSelectedMessageVariant")}))}))}),showKeepSelection&&(0,emotion_react_jsx_runtime_browser_esm.Y)(FormControlLabel.A,{"data-testid":"insurance-radio-keep-selections",value:"keep",control:(0,emotion_react_jsx_runtime_browser_esm.Y)(Radio.A,{sx:{py:0,mb:1}}),label:(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack_Stack.A,(0,tslib_es6.Cl)({direction:"column"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"span",variant:"bodyEmphasized"},{children:t("orders:shipmentExtras:keepCurrentSelections")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"span",variant:"body"},{children:t("orders:insurance:numOfInsured",{numInsured:mixedSelection.numberWithInsurance,numOrders:mixedSelection.numberSelected})}))]}))}),!hideValueOfItems&&(0,emotion_react_jsx_runtime_browser_esm.Y)(FormControlLabel.A,{"data-testid":"insurance-radio-items-value",value:"hasInsurance",control:(0,emotion_react_jsx_runtime_browser_esm.Y)(Radio.A,{sx:{py:0,mb:1}}),label:(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack_Stack.A,(0,tslib_es6.Cl)({direction:"column"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"span",variant:"bodyEmphasized"},{children:t("orders:shipmentExtras:valueOfItems")})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({component:"span",variant:"body"},{children:[t("orders:insurance:totalValue")," ",t("translations:currency",{value:{value:showItemValueTotal,currency_iso:currency.iso}})]}))]}))}),(0,emotion_react_jsx_runtime_browser_esm.Y)(FormControlLabel.A,{"data-testid":"insurance-radio-custom-value",value:"custom",control:(0,emotion_react_jsx_runtime_browser_esm.Y)(Radio.A,{sx:{paddingTop:0,paddingBottom:0}}),label:(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack_Stack.A,(0,tslib_es6.Cl)({direction:"column"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"span",variant:"bodyEmphasized"},{children:"".concat(t("orders:insurance:customValue")," ").concat(multipleSelectedLabelMsg)}))}))}),(0,emotion_react_jsx_runtime_browser_esm.Y)(SimplifiedInsuranceModal_InsuranceValueField,{getValues,errors:errors.amount,control,t,currency,multipleSelectedLabelMsg,disabled:"custom"!==insuranceValueType})]}))}))]}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Box.A,(0,tslib_es6.Cl)({sx:{mt:5}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Box.A,(0,tslib_es6.Cl)({sx:{display:"flex"}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(InsuranceDisclaimer,{originCountries:isBatch?selectedOrdersData.map((function(order){var _a,_b;return null===(_b=null===(_a=order.addressFrom)||void 0===_a?void 0:_a.country)||void 0===_b?void 0:_b.iso2})):[null===(_c=null===(_b=null==order?void 0:order.addressFrom)||void 0===_b?void 0:_b.country)||void 0===_c?void 0:_c.iso2],buttonName:addInsuranceButtonName})}))}))]}))})};const ShipmentInsuranceCard_ShipmentInsuranceSimplifiedView=function(_a){var onClose=_a.onClose,onSubmitToParent=_a.onSubmit,t=_a.t,userInsuranceRate=_a.userInsuranceRate,defaultValues=_a.defaultValues,addOrEditInsurance=_a.addOrEditInsurance,mixedSelection=_a.mixedSelection,insuredItems=_a.insuredItems,lineItemsCost=_a.lineItemsCost,rateCostOnly=_a.rateCostOnly,insuranceModalState=function useInsuranceModalForm(defaultValues,onSubmitToParent){var insuranceForm=(0,index_esm.mN)({defaultValues}),control=insuranceForm.control,watch=insuranceForm.watch,setValue=insuranceForm.setValue,getValues=insuranceForm.getValues,handleSubmit=insuranceForm.handleSubmit,errors=insuranceForm.formState.errors,insured=watch("hasInsurance"),insuredValue=watch("amount"),currency=watch("currency");(0,react.useEffect)((function(){setValue("hasInsurance",defaultValues.hasInsurance),setValue("currency",defaultValues.currency),setValue("amount",defaultValues.amount),setValue("useImportedAmount",defaultValues.useImportedAmount)}),[defaultValues,setValue]);var onEnableInsured=(0,react.useCallback)((function(){setValue("hasInsurance",!0)}),[setValue]),onDisableInsured=(0,react.useCallback)((function(){setValue("hasInsurance",!1)}),[setValue]),onKeepSelection=(0,react.useCallback)((function(){setValue("hasInsurance","keep")}),[setValue]),onClickSubmit=(0,react.useCallback)((function(){handleSubmit(onSubmitToParent)()}),[handleSubmit,onSubmitToParent]);return{control,currency,getValues,setValue,errors,onEnableInsured,onDisableInsured,onKeepSelection,onClickSubmit,insured,insuredValue}}(defaultValues,onSubmitToParent),_b=(0,tslib_es6.zs)((0,react.useState)(insuranceModalState.insured?insuranceModalState.insuredValue!==String(lineItemsCost)?"custom":"hasInsurance":"noAddedInsurance"),2),insuranceValueType=_b[0],setInsuranceValueType=_b[1],showItemValueTotal=(0,react.useMemo)((function(){return lineItemsCost&&0!==lineItemsCost?String(lineItemsCost):void 0}),[lineItemsCost]),insuranceCost=(0,react.useMemo)((function(){var selectedPriceToCalculate="hasInsurance"===insuranceValueType?showItemValueTotal:insuranceModalState.insuredValue,selectedPriceNum=selectedPriceToCalculate?Number(selectedPriceToCalculate.replace(/,/g,"")):0;return(0,utils.kB)(userInsuranceRate,selectedPriceNum,rateCostOnly,mixedSelection.numberSelected)}),[insuranceValueType,showItemValueTotal,insuranceModalState.insuredValue,rateCostOnly,userInsuranceRate,mixedSelection.numberSelected]),onInsuranceValueTypeChange=(0,react.useCallback)((function(event){"keep"===event.target.value?insuranceModalState.onKeepSelection():setInsuranceValueType(event.target.value)}),[insuranceModalState]);(0,react.useEffect)((function(){"noAddedInsurance"===insuranceValueType?insuranceModalState.onDisableInsured():insuranceModalState.onEnableInsured(),"hasInsurance"===insuranceValueType&&showItemValueTotal&&insuranceModalState.setValue("amount",showItemValueTotal)}),[insuranceValueType]);var buttonText="noAddedInsurance"===insuranceValueType||"keep"===insuranceModalState.insured?t("orders:phrases:continue"):"".concat(t("orders:shipmentExtras:addFor")," ").concat(t("translations:currency",{value:{value:insuranceCost,currency_iso:insuranceModalState.currency.iso}})),handleUpdateInsurance=(0,react.useCallback)((function(){(0,segment.u4)(segment.sV.new_insurance_updated,{total_value_of_order:insuranceModalState.insuredValue,insurance_price:(0,utils.kB)(userInsuranceRate,Number(insuranceModalState.insuredValue)),insurance_option:insuranceValueType}),insuranceModalState.onClickSubmit()}),[insuranceModalState,insuredItems,insuranceValueType,userInsuranceRate]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:addOrEditInsurance&&(0,emotion_react_jsx_runtime_browser_esm.Y)(MobileAndDesktopDrawer.A,(0,tslib_es6.Cl)({drawerContentTestId:"shipment-extras-card-insurance-drawer",drawerProps:{transitionDuration:0},title:t("insurance.basicHeadline"),subtitle:1===mixedSelection.numberSelected?"1 ".concat(t("orders:itemsCard:order")):mixedSelection.numberSelected>1?"".concat(mixedSelection.numberSelected," ").concat(t("orders:itemsCard:orderPlural")):"",open:!0,onBack:onClose,onClose,fullWidth:!0,fullHeight:!0,footerButtonPrimary:{text:buttonText,action:handleUpdateInsurance},footerButtonSecondary:{text:t("orders:phrases:cancel"),action:onClose},paperBoxShadow:"none"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(SimplifiedInsuranceView,(0,tslib_es6.Cl)({},insuranceModalState,{t,onInsuranceValueTypeChange,showItemValueTotal,insuranceValueType,mixedSelection,addInsuranceButtonName:buttonText,isBatch:!0}))}))})};var constants_currency=__webpack_require__("./app/constants/currency.ts");const ShipmentInsuranceRow=function(_a){var t=_a.t,extrasInsurance=_a.extrasInsurance,extrasSignature=_a.extrasSignature,onSubmit=_a.onSubmit,userInsuranceRate=_a.userInsuranceRate,mixedSelection=_a.mixedSelection,insuredItems=_a.insuredItems,defaultModalContent=_a.defaultModalContent,lineItemsCost=_a.lineItemsCost,rateCostOnly=_a.rateCostOnly,isBatch=_a.isBatch,isConfirmationDrawer=_a.isConfirmationDrawer,_b=function useShipmentsExtras(){var _a=(0,tslib_es6.zs)((0,react.useState)(!1),2),addOrEditInsurance=_a[0],setAddOrEditInsurance=_a[1];return{addOrEditInsurance,onClickAddOrEditInsurance:function(){setAddOrEditInsurance(!0)},onClickCancelInsurance:function(){setAddOrEditInsurance(!1)}}}(),addOrEditInsurance=_b.addOrEditInsurance,onClickAddOrEditInsurance=_b.onClickAddOrEditInsurance,onClickCancelInsurance=_b.onClickCancelInsurance,handleAddEditInsuranceClick=(0,react.useCallback)((function(){onClickAddOrEditInsurance(),(0,segment.u4)(segment.sV.insurance_details_opened)}),[onClickAddOrEditInsurance,segment.u4]),handleSaveInsurance=(0,react.useCallback)((function(newInsuranceValues){if("keep"!==newInsuranceValues.hasInsurance){var options=(0,utils.EA)(newInsuranceValues);onSubmit(options),onClickCancelInsurance()}else onClickCancelInsurance()}),[onSubmit,onClickCancelInsurance]),removeInsurance=(0,react.useCallback)((function(){onSubmit({insurance:null}),(0,segment.u4)(segment.sV.insurance_removed_sidebar)}),[onSubmit,extrasInsurance,extrasSignature]),currency=defaultModalContent.currency,insuranceAmount=defaultModalContent.amount,hasInsurance=extrasInsurance||isBatch&&mixedSelection.numberWithInsurance>0,shipmentInsuranceDescription=(0,react.useMemo)((function(){if(isBatch){if(mixedSelection.numberWithInsurance>0)return t("insurance.numOfInsured",{numInsured:mixedSelection.numberWithInsurance,numOrders:mixedSelection.numberSelected});if(mixedSelection.totalInsuranceCost>0)return"".concat(isConfirmationDrawer?"":t("shipmentExtras.insuranceTotalCost")+":"," ").concat(t("translations:currency",{value:{value:isConfirmationDrawer?mixedSelection.totalCoverage:mixedSelection.totalInsuranceCost,currency_iso:mixedSelection.currency?mixedSelection.currency.iso:constants_currency.q.USD.iso}}))}if(extrasInsurance)return"".concat(isConfirmationDrawer?"":t("shipmentExtras.insuranceTotalCost")+":"," ").concat(t("translations:currency",{value:{value:isConfirmationDrawer?insuranceAmount:(0,utils.kB)(userInsuranceRate,parseFloat(insuranceAmount)),currency_iso:currency.iso}}))}),[isBatch,extrasInsurance,t,mixedSelection.totalInsuranceCost,mixedSelection.totalCoverage,mixedSelection.currency,mixedSelection.numberWithInsurance,mixedSelection.numberSelected,userInsuranceRate,insuranceAmount,currency.iso,isConfirmationDrawer]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CardBlock,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack_Stack.A,(0,tslib_es6.Cl)({direction:"column",spacing:2},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(ShipmentExtrasSpacer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack_Stack.A,(0,tslib_es6.Cl)({direction:"row",alignItems:"center",justifyContent:"flex-start",spacing:1},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"bodyEmphasized"},{children:t("blackbeard.coverageValue")}))})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack_Stack.A,(0,tslib_es6.Cl)({direction:"row",alignItems:"center",justifyContent:"flex-start",spacing:1},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"body","data-testid":"insurance-description",color:colors.T.gray80},{children:hasInsurance?shipmentInsuranceDescription:t("blackbeard.noCoverage")})),hasInsurance&&(0,emotion_react_jsx_runtime_browser_esm.Y)(RemoveIconButton,{onClick:removeInsurance,src:icon_close_dark_gray,"data-e2e":"remove-insurance-button",color:colors.T.gray80}),(0,emotion_react_jsx_runtime_browser_esm.Y)(AddEditButton,(0,tslib_es6.Cl)({variant:"text",color:"primary",onClick:handleAddEditInsuranceClick,"data-testid":"shipment-extras-insurance-drawer-open-link"},{children:t(hasInsurance?"shipmentExtras.edit":"actions.single.add")}))]}))]})}))}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceCard_ShipmentInsuranceSimplifiedView,{onSubmit:handleSaveInsurance,onClose:onClickCancelInsurance,hasSignatureConfirmation:!!(null==extrasSignature?void 0:extrasSignature.hasSignatureConfirmation),t,userInsuranceRate,defaultValues:defaultModalContent,useImportedAmount:!1,addOrEditInsurance,mixedSelection,insuredItems,lineItemsCost,rateCostOnly})]})};const ExtrasModal_MobileStyles={MobileModalSection:(0,styled.Ay)(Stack_Stack.A)(MobileStyles_templateObject_1||(MobileStyles_templateObject_1=(0,tslib_es6.ue)(["\n  background-color: white;\n  padding: 1rem;\n  border-radius: 6px;\n  gap: 1rem;\n  border: 1px solid ",";\n"],["\n  background-color: white;\n  padding: 1rem;\n  border-radius: 6px;\n  gap: 1rem;\n  border: 1px solid ",";\n"])),colors.T.borders),MobileContentBodyContent:(0,styled.Ay)(Stack_Stack.A)(MobileStyles_templateObject_2||(MobileStyles_templateObject_2=(0,tslib_es6.ue)(["\n  margin-top: 1rem;\n  gap: 1rem;\n"],["\n  margin-top: 1rem;\n  gap: 1rem;\n"]))),MobileSectionTitle:function(_a){var children=_a.children;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({variant:"bodyEmphasized",component:"div"},{children}))}};var MobileStyles_templateObject_1,MobileStyles_templateObject_2,Checkbox=__webpack_require__("./node_modules/@goshippo/components/esm/Checkbox/Checkbox.js"),Divider_Divider=__webpack_require__("./node_modules/@goshippo/components/esm/Divider/Divider.js"),signatureConfirmation=__webpack_require__("./app/constants/signatureConfirmation.ts"),constants=__webpack_require__("./app/styles/constants.ts");const FormStyles={BasicCost:function(_a){var children=_a.children;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({variant:"bodyEmphasized",component:"span"},{children}))},FormSublabelTypography:function(_a){var children=_a.children;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"div",variant:"body",color:"primary"},{children}))},FormLabelTypography:function(_a){var children=_a.children;return(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"div",variant:"body",color:"primary",sx:{fontWeight:constants.Wy.medium,fontSize:"1rem"}},{children}))}};var CostForOption=function(_a){var hasSignatureConfirmation=_a.hasSignatureConfirmation,signatureConfirmationType=_a.signatureConfirmationType,mixedSelection=_a.mixedSelection,t=_a.t;if(!hasSignatureConfirmation)return null;var numOrders=mixedSelection?mixedSelection.numberSelected:0,standardCost=mixedSelection?mixedSelection.numberSelected*signatureConfirmation.Md:signatureConfirmation.Md,adultCost=mixedSelection?mixedSelection.numberSelected*signatureConfirmation.zr:signatureConfirmation.zr,totalCost=mixedSelection?mixedSelection.totalSignatureCost:0;switch(signatureConfirmationType){case types.zT.STANDARD:return(0,emotion_react_jsx_runtime_browser_esm.FD)(FormStyles.BasicCost,{children:[t("orders:insurance:cost"),":"," ",t("translations:currency",{value:{value:standardCost,currency_iso:constants_currency.q.USD.iso}}),"+"]});case types.zT.ADULT:return(0,emotion_react_jsx_runtime_browser_esm.FD)(FormStyles.BasicCost,{children:[t("orders:insurance:cost"),":"," ",t("translations:currency",{value:{value:adultCost,currency_iso:constants_currency.q.USD.iso}}),"+"]});case"KEEP":return(0,emotion_react_jsx_runtime_browser_esm.FD)(FormStyles.BasicCost,{children:[t("orders:insurance:totalCost",{numOrders}),":"," ",t("translations:currency",{value:{value:totalCost,currency_iso:constants_currency.q.USD.iso}}),"+"]});default:return null}};const VerticalSignatureConfirmationView_Form=function(_a){var fullScreen=_a.fullScreen,hasSignatureConfirmation=_a.hasSignatureConfirmation,signatureConfirmationType=_a.signatureConfirmationType,handleSignatureConfirmationChanged=_a.handleSignatureConfirmationChanged,handleSignatureConfirmationTypeChanged=_a.handleSignatureConfirmationTypeChanged,mixedSelection=_a.mixedSelection,t=_a.t,showKeepSelectionsRadio=!!mixedSelection&&mixedSelection.numberSelected>1&&mixedSelection.numberWithSignature>0,_b=(0,tslib_es6.zs)((0,react.useState)("DISABLED"),2),mobileRadioValue=_b[0],setMobileRadioValue=_b[1];(0,react.useEffect)((function(){if("KEEP"!==signatureConfirmationType)if(hasSignatureConfirmation&&signatureConfirmationType)switch(signatureConfirmationType){case types.zT.ADULT:case types.zT.STANDARD:return void setMobileRadioValue(signatureConfirmationType)}else setMobileRadioValue("DISABLED");else setMobileRadioValue("KEEP")}),[hasSignatureConfirmation,signatureConfirmationType]);var onChangeSignatureConfirmationCheckbox=(0,react.useCallback)((function(){handleSignatureConfirmationChanged(!hasSignatureConfirmation)}),[handleSignatureConfirmationChanged,hasSignatureConfirmation]),onChangeRadio=(0,react.useCallback)((function(e){switch(e.target.value){case"KEEP":return void handleSignatureConfirmationTypeChanged("KEEP");case"DISABLED":return void handleSignatureConfirmationChanged(!1);case types.zT.ADULT:case types.zT.STANDARD:return void handleSignatureConfirmationTypeChanged(e.target.value)}}),[handleSignatureConfirmationChanged,handleSignatureConfirmationTypeChanged]),LabelComponent=(0,react.useMemo)((function(){return fullScreen?FormStyles.FormLabelTypography:FormStyles.FormSublabelTypography}),[fullScreen]);return(0,emotion_react_jsx_runtime_browser_esm.FD)("div",(0,tslib_es6.Cl)({style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[!fullScreen&&(0,emotion_react_jsx_runtime_browser_esm.Y)(FormControlLabel.A,{onChange:onChangeSignatureConfirmationCheckbox,checked:hasSignatureConfirmation,control:(0,emotion_react_jsx_runtime_browser_esm.Y)(Checkbox.A,{}),label:t("orders:signature:require")}),(0,emotion_react_jsx_runtime_browser_esm.FD)(RadioGroup.A,(0,tslib_es6.Cl)({onChange:onChangeRadio,sx:{marginLeft:fullScreen?void 0:"2rem",gap:"1rem"},value:mobileRadioValue},{children:[fullScreen&&(0,emotion_react_jsx_runtime_browser_esm.Y)(FormControlLabel.A,{"data-testid":"signature-radio-disable-signature",value:"DISABLED",control:(0,emotion_react_jsx_runtime_browser_esm.Y)(Radio.A,{sx:{paddingTop:0,paddingBottom:0}}),label:(0,emotion_react_jsx_runtime_browser_esm.Y)(FormStyles.FormLabelTypography,{children:t("orders:signature:notRequired")})}),mixedSelection&&showKeepSelectionsRadio&&(0,emotion_react_jsx_runtime_browser_esm.Y)(FormControlLabel.A,{"data-testid":"signature-radio-keep-signature",value:"KEEP",control:(0,emotion_react_jsx_runtime_browser_esm.Y)(Radio.A,{sx:{paddingTop:0,paddingBottom:0}}),label:(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack_Stack.A,(0,tslib_es6.Cl)({direction:"column"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"span",variant:"bodyEmphasized"},{children:t("shipmentExtras.keepCurrentSelections")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"span",variant:"body"},{children:t("insurance.numOfRequired",{numRequired:mixedSelection.numberWithSignature,numOrders:mixedSelection.numberSelected})}))]}))}),(0,emotion_react_jsx_runtime_browser_esm.Y)(FormControlLabel.A,{"data-testid":"signature-radio-standard-signature",value:types.zT.STANDARD,control:(0,emotion_react_jsx_runtime_browser_esm.Y)(Radio.A,{sx:{paddingTop:0,paddingBottom:0}}),label:(0,emotion_react_jsx_runtime_browser_esm.Y)(LabelComponent,{children:t(fullScreen?"orders:signature:requiredStandardFullScreen":"orders:signature:requiredStandardModal")})}),(0,emotion_react_jsx_runtime_browser_esm.Y)(FormControlLabel.A,{"data-testid":"signature-radio-adult-signature",value:types.zT.ADULT,control:(0,emotion_react_jsx_runtime_browser_esm.Y)(Radio.A,{sx:{paddingTop:0,paddingBottom:0}}),label:(0,emotion_react_jsx_runtime_browser_esm.Y)(LabelComponent,{children:t(fullScreen?"orders:signature:requiredAdultFullScreen":"orders:signature:requiredAdultModal")})})]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Divider_Divider.A,{sx:{marginTop:"1rem"}}),(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack_Stack.A,(0,tslib_es6.Cl)({sx:{marginTop:"1rem"}},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(CostForOption,{hasSignatureConfirmation,signatureConfirmationType,mixedSelection,t}),hasSignatureConfirmation&&signatureConfirmationType&&(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"div",variant:"body"},{children:t("orders:signature:costIncluded")}))]}))]}))};var ListItem=__webpack_require__("./node_modules/@goshippo/components/esm/ListItem/ListItem.js"),List=__webpack_require__("./node_modules/@goshippo/components/esm/List/List.js");const ExtrasModal_LeftColumnList_LeftColumnList=function(_a){var children=_a.children;return(0,emotion_react_jsx_runtime_browser_esm.Y)(List.A,(0,tslib_es6.Cl)({disablePadding:!0,style:{listStyle:"disc",paddingInlineStart:"1.5rem"}},{children}))},ExtrasModal_LeftColumnList_LeftColumnListItem=function(_a){var name=_a.name,detail=_a.detail;return(0,emotion_react_jsx_runtime_browser_esm.Y)(ListItem.A,(0,tslib_es6.Cl)({disablePadding:!0,disableGutters:!0,sx:{display:"list-item"}},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(Typography.A,(0,tslib_es6.Cl)({component:"div",variant:"body",color:"primary"},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"span",variant:"body"},{children:name}))," ",detail]}))}))};var commonReasons=["specificItems","regulatedItems","additionalSecurity"];const VerticalSignatureConfirmationView_SignatureConfirmationInformation=function(_a){var t=_a.t;return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"div",variant:"body",color:"primary"},{children:t("orders:signature:commonReasons:title")})),(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack_Stack.A,(0,tslib_es6.Cl)({style:{display:"flex",flexDirection:"column",gap:"0.2rem",marginTop:"0.5rem"}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(ExtrasModal_LeftColumnList_LeftColumnList,{children:commonReasons.map((function(c,i){return(0,emotion_react_jsx_runtime_browser_esm.Y)(ExtrasModal_LeftColumnList_LeftColumnListItem,{name:t("orders:signature:commonReasons:name:".concat(c)),detail:t("orders:signature:commonReasons:detail:".concat(c))},"common-reasons-".concat(i))}))})}))]})};const ShipmentExtrasCard_VerticalSignatureConfirmationView=function(_a){var t=_a.t,hasSignatureConfirmation=_a.hasSignatureConfirmation,signatureConfirmationType=_a.signatureConfirmationType,onChangeHasSignatureConfirmation=_a.onChangeHasSignatureConfirmation,onChangeSignatureConfirmationType=_a.onChangeSignatureConfirmationType,mixedSelection=_a.mixedSelection;return(0,emotion_react_jsx_runtime_browser_esm.FD)(ExtrasModal_MobileStyles.MobileContentBodyContent,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ExtrasModal_MobileStyles.MobileSectionTitle,{children:t("shipmentExtras.signatureConfirmation")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack_Stack.A,(0,tslib_es6.Cl)({sx:{placeItems:"center",gap:"1rem",flexDirection:"column"}},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(VerticalSignatureConfirmationView_Form,{fullScreen:!0,handleSignatureConfirmationChanged:onChangeHasSignatureConfirmation,handleSignatureConfirmationTypeChanged:onChangeSignatureConfirmationType,hasSignatureConfirmation,signatureConfirmationType,mixedSelection,t})})),(0,emotion_react_jsx_runtime_browser_esm.FD)(ExtrasModal_MobileStyles.MobileModalSection,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(ExtrasModal_MobileStyles.MobileSectionTitle,{children:t("shipmentExtras.signatureConfirmation")}),(0,emotion_react_jsx_runtime_browser_esm.Y)(VerticalSignatureConfirmationView_SignatureConfirmationInformation,{t})]})]})};__webpack_require__("./app/hooks/useStackablePortal.ts");var DialogTitle_DialogTitle=__webpack_require__("./node_modules/@goshippo/components/esm/DialogTitle/DialogTitle.js");__webpack_require__("./node_modules/@goshippo/components/esm/DialogContent/DialogContent.js"),__webpack_require__("./node_modules/@goshippo/components/esm/DialogActions/DialogActions.js");(0,styled.Ay)(DialogTitle_DialogTitle.A)(DesktopStyles_templateObject_1||(DesktopStyles_templateObject_1=(0,tslib_es6.ue)(["\n  padding: 1rem;\n"],["\n  padding: 1rem;\n"]))),(0,styled.Ay)(Stack_Stack.A)(DesktopStyles_templateObject_2||(DesktopStyles_templateObject_2=(0,tslib_es6.ue)(["\n  width: 50%;\n  margin-right: 1.5rem;\n"],["\n  width: 50%;\n  margin-right: 1.5rem;\n"]))),(0,styled.Ay)(Stack_Stack.A)(DesktopStyles_templateObject_3||(DesktopStyles_templateObject_3=(0,tslib_es6.ue)(["\n  width: 50%;\n  margin-left: 1.5rem;\n  gap: 1rem;\n"],["\n  width: 50%;\n  margin-left: 1.5rem;\n  gap: 1rem;\n"])));var DesktopStyles_templateObject_1,DesktopStyles_templateObject_2,DesktopStyles_templateObject_3;function signatureConfirmationFormReducer(_state,action){switch(action.type){case"DISABLED":return{hasSignatureConfirmation:!1,signatureConfirmationType:null};case"KEEP":case types.zT.STANDARD:case types.zT.ADULT:return{hasSignatureConfirmation:!0,signatureConfirmationType:action.type};default:return{hasSignatureConfirmation:!1,signatureConfirmationType:null}}}const ShipmentInsuranceCard_SignatureConfirmationSimplifiedView=function(_a){var defaultValues=_a.defaultValues,insuredValue=_a.insuredValue,onClose=_a.onClose,onClickSubmitParent=_a.onClickSubmit,editSignatureDrawer=_a.editSignatureDrawer,batchEntryCount=_a.batchEntryCount,mixedSelection=_a.mixedSelection,t=_a.t,isRequired=_a.isRequired,_b=function hooks_useExtrasSignatureFormControls(defaultValues,onSubmitToParent,onCancel){var _a=(0,tslib_es6.zs)((0,react.useReducer)(signatureConfirmationFormReducer,defaultValues),2),state=_a[0],dispatch=_a[1],onSubmit=(0,react.useCallback)((function(){"KEEP"===state.signatureConfirmationType?onCancel():onSubmitToParent({hasSignatureConfirmation:state.hasSignatureConfirmation,signatureConfirmationType:state.signatureConfirmationType})}),[state,onCancel,onSubmitToParent]),setHasSignatureConfirmation=(0,react.useCallback)((function(enabled){dispatch({type:enabled?types.zT.STANDARD:"DISABLED"})}),[]),setSignatureConfirmationType=(0,react.useCallback)((function(type){switch(type){case"KEEP":case types.zT.ADULT:case types.zT.STANDARD:return void dispatch({type});default:return}}),[]);return{hasSignatureConfirmation:state.hasSignatureConfirmation,signatureConfirmationType:state.signatureConfirmationType,onSubmit,setHasSignatureConfirmation,setSignatureConfirmationType}}(defaultValues,onClickSubmitParent,onClose),hasSignatureConfirmation=_b.hasSignatureConfirmation,signatureConfirmationType=_b.signatureConfirmationType,onSubmit=_b.onSubmit,setHasSignatureConfirmation=_b.setHasSignatureConfirmation,setSignatureConfirmationType=_b.setSignatureConfirmationType,handleSubmit=(0,react.useCallback)((function(){(0,segment.u4)(segment.sV.signature_updated,{type_of_signature:signatureConfirmationType,is_required:isRequired}),onSubmit()}),[signatureConfirmationType,mixedSelection.totalSignatureCost,mixedSelection.numberSelected,onSubmit]);return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:editSignatureDrawer&&(0,emotion_react_jsx_runtime_browser_esm.Y)(MobileAndDesktopDrawer.A,(0,tslib_es6.Cl)({drawerProps:{transitionDuration:0},title:t("shipmentExtras.signatureConfirmation"),subtitle:1===batchEntryCount?"1 ".concat(t("orders:itemsCard:order")):batchEntryCount>1?"".concat(batchEntryCount," ").concat(t("orders:itemsCard:orderPlural")):"",open:!0,onBack:onClose,onClose,footerButtonPrimary:{text:t("shipmentExtras.update"),action:handleSubmit},footerButtonSecondary:{text:t("shipmentExtras.cancel"),action:onClose},fullWidth:!0,fullHeight:!0,paperBoxShadow:"none",footerDataTestId:"signature-footer"},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentExtrasCard_VerticalSignatureConfirmationView,{hasSignatureConfirmation,signatureConfirmationType,insuredValue,onChangeHasSignatureConfirmation:setHasSignatureConfirmation,onChangeSignatureConfirmationType:setSignatureConfirmationType,mixedSelection,t})}))})};const ShipmentInsuranceCard_ShipmentSignatureRow=function(_a){var t=_a.t,extrasInsurance=_a.extrasInsurance,extrasSignature=_a.extrasSignature,onSubmitParent=_a.onSubmit,mixedSelection=_a.mixedSelection,defaultModalContent=_a.defaultModalContent,isInsuranceAvailable=_a.isInsuranceAvailable,isBatch=_a.isBatch,hasSignatureError=_a.hasSignatureError,signatureErrorSource=_a.signatureErrorSource,_b=(0,tslib_es6.zs)((0,react.useState)(!1),2),editSignatureDrawer=_b[0],setEditSignatureDrawer=_b[1],baseDefaultSignatureContent=function useDefaultSignatureContent(extrasSignature){return{defaultSignatureContent:(0,react.useMemo)((function(){return extrasSignature?{hasSignatureConfirmation:extrasSignature.hasSignatureConfirmation,signatureConfirmationType:extrasSignature.signatureConfirmationType||void 0}:{hasSignatureConfirmation:!1}}),[extrasSignature])}}(extrasSignature).defaultSignatureContent,defaultEditSignatureContent=(0,react.useMemo)((function(){return mixedSelection.numberSelected>1&&mixedSelection.numberWithSignature>0?{hasSignatureConfirmation:!0,signatureConfirmationType:"KEEP"}:baseDefaultSignatureContent}),[baseDefaultSignatureContent,mixedSelection]),onSubmitSignature=function useOnSubmitSignature(onSubmit,setShowModal){var onSubmitSignature=(0,react.useCallback)((function(_a){var hasSignatureConfirmation=_a.hasSignatureConfirmation,signatureConfirmationType=_a.signatureConfirmationType;onSubmit({signatureConfirmation:hasSignatureConfirmation?{hasSignatureConfirmation,signatureConfirmationType}:null}),setShowModal(!1)}),[onSubmit,setShowModal]);return{onSubmitSignature}}(onSubmitParent,setEditSignatureDrawer).onSubmitSignature,onClickEditSignatureDrawer=(0,react.useCallback)((function(){setEditSignatureDrawer(!0),(0,segment.u4)(segment.sV.signature_details_opened)}),[]),onCloseEditSignatureDrawer=(0,react.useCallback)((function(){setEditSignatureDrawer(!1)}),[]),removeSignature=(0,react.useCallback)((function(){onSubmitParent({signatureConfirmation:null}),(0,segment.u4)(segment.sV.signature_removed_sidebar)}),[onSubmitParent]),baseSignatureConfirmationDescription=function useSignatureConfirmationDescription(signatureFormValues,isBatch,t,mixedSelection){var signatureConfirmationDescription=(0,react.useMemo)((function(){var _a,hasSignatureConfirmation=signatureFormValues.hasSignatureConfirmation,signatureConfirmationType=signatureFormValues.signatureConfirmationType;return hasSignatureConfirmation&&signatureConfirmationType?isBatch&&hasSignatureConfirmation&&mixedSelection?t("insurance.numOfRequired",{numRequired:mixedSelection.numberWithSignature,numOrders:mixedSelection.numberSelected}):(null===(_a=signatureConfirmationMap[signatureConfirmationType])||void 0===_a?void 0:_a.label)||"":t("shipmentExtras.notAdded")}),[isBatch,signatureFormValues,t]);return{signatureConfirmationDescription}}(defaultEditSignatureContent,!!isBatch,t,mixedSelection).signatureConfirmationDescription,batchEntryCount=mixedSelection.numberSelected;return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(CardBlock,(0,tslib_es6.Cl)({sx:isInsuranceAvailable?null:{":first-of-type":{borderTop:"none",paddingTop:0}}},{children:[(0,emotion_react_jsx_runtime_browser_esm.FD)(ShipmentExtrasSpacer,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Stack_Stack.A,(0,tslib_es6.Cl)({direction:"row",alignItems:"center",justifyContent:"flex-start",spacing:1},{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"bodyEmphasized"},{children:t("blackbeard.signature")}))})),(0,emotion_react_jsx_runtime_browser_esm.FD)(Stack_Stack.A,(0,tslib_es6.Cl)({direction:"row",alignItems:"center",justifyContent:"flex-start",spacing:1},{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(Typography.A,(0,tslib_es6.Cl)({component:"p",variant:"body","data-testid":"extra-signature-type",color:colors.T.gray80},{children:defaultEditSignatureContent.hasSignatureConfirmation?baseSignatureConfirmationDescription:t("blackbeard.notRequired")})),defaultEditSignatureContent.hasSignatureConfirmation&&(0,emotion_react_jsx_runtime_browser_esm.Y)(RemoveIconButton,{onClick:removeSignature,src:icon_close_dark_gray,"data-e2e":"remove-insurance-button",color:colors.T.gray80}),(0,emotion_react_jsx_runtime_browser_esm.Y)(AddEditButton,(0,tslib_es6.Cl)({variant:"text",color:"primary",onClick:onClickEditSignatureDrawer,"data-testid":"extra-signature-drawer-open",disabled:hasSignatureError},{children:defaultEditSignatureContent.hasSignatureConfirmation?t("shipmentExtras.edit"):t("actions.single.add")}))]}))]}),hasSignatureError?(0,emotion_react_jsx_runtime_browser_esm.Y)(Alert.A,(0,tslib_es6.Cl)({severity:"error","data-testid":"signature-error"},{children:t("orders:shipmentExtras:signatureErrorMsg",{source:signatureErrorSource})})):null]})),(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceCard_SignatureConfirmationSimplifiedView,{defaultValues:defaultEditSignatureContent,insuredValue:parseFloat((null==extrasInsurance?void 0:extrasInsurance.amount)||"0")||0,onClose:onCloseEditSignatureDrawer,onClickSubmit:onSubmitSignature,t,editSignatureDrawer,batchEntryCount,mixedSelection,isRequired:parseFloat(defaultModalContent.amount)>=500})]})};const ShipmentInsuranceCard_ShipmentInsuranceCardContent=function(props){return props.isLoading?(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentExtraContainer,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(CircularProgress.A,{})}):(0,emotion_react_jsx_runtime_browser_esm.FD)(ShipmentExtraContainer,{children:[props.isInsuranceAvailable&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceRow,(0,tslib_es6.Cl)({},props)),(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceCard_ShipmentSignatureRow,(0,tslib_es6.Cl)({},props))]})};const ShipmentInsuranceCard_ShipmentInsuranceHeader=function(_a){var mixedSelection=_a.mixedSelection,insuranceCost=_a.insuranceCost,currency=_a.currency,_b=_a.lineItemsCost,lineItemsCost=void 0===_b?0:_b,t=_a.t,hasInsurance=mixedSelection&&mixedSelection.numberWithInsurance===mixedSelection.numberSelected,isMixedInsurance=mixedSelection&&mixedSelection.numberWithInsurance>0&&mixedSelection.numberWithInsurance<mixedSelection.numberSelected,highValueItemsCurrency=(0,react.useMemo)((function(){return{amount:t("translations:currency",{value:{value:lineItemsCost,currency_iso:currency.iso,minimumFractionDigits:lineItemsCost%1!=0?2:0}})}}),[t,lineItemsCost,currency.iso]),insuranceCostRecommendation=(0,react.useMemo)((function(){return t("translations:currency",{value:{value:insuranceCost,currency_iso:currency.iso}})}),[t,insuranceCost,currency.iso]),insuranceHeaderTitle=(0,react.useMemo)((function(){return isMixedInsurance?t("orders:blackbeard.shipmentMixedInsured"):hasInsurance?t("orders:blackbeard.shipmentInsuredVariant",{count:mixedSelection.numberSelected}):lineItemsCost&&lineItemsCost>=500&&1===mixedSelection.numberSelected?t("orders:shipmentExtras.notInsuredAmountTitleVariant",highValueItemsCurrency):t("orders:blackbeard.shipmentNotInsuredVariant",{count:mixedSelection.numberSelected})}),[isMixedInsurance,hasInsurance,lineItemsCost,mixedSelection.numberSelected,t,highValueItemsCurrency]);return(0,emotion_react_jsx_runtime_browser_esm.FD)(emotion_react_jsx_runtime_browser_esm.FK,{children:[(0,emotion_react_jsx_runtime_browser_esm.Y)(InsuranceHeader,(0,tslib_es6.Cl)({"data-testid":"shipment-insurance-accordion-header",component:"h2",variant:"h2"},{children:insuranceHeaderTitle})),!hasInsurance&&(0,emotion_react_jsx_runtime_browser_esm.Y)(InsuranceRecommend,(0,tslib_es6.Cl)({component:"p",variant:"body"},{children:lineItemsCost?(0,emotion_react_jsx_runtime_browser_esm.Y)(translate.In,{i18nKey:"shipmentExtras.xcoverRecommendItems",value:(0,emotion_react_jsx_runtime_browser_esm.Y)("strong",{children:insuranceCostRecommendation})}):t("shipmentExtras.xcoverRecommend")}))]})};const ShipmentInsuranceCard_ShipmentInsuranceCard=function(_a){var batchEntryLineItems=_a.batchEntryLineItems,insuranceExtra=_a.insuranceExtra,signatureConfirmation=_a.signatureConfirmation,isBatch=_a.isBulk,isLoading=_a.isLoading,mixedSelection=_a.mixedSelection,order=_a.order,onSubmitExtras=_a.onSubmitExtras,t=_a.t,userInsuranceRate=_a.userInsuranceRate,insuredItems=_a.insuredItems,hasReturn=_a.hasReturn,isInsuranceAvailable=_a.isInsuranceAvailable,isConfirmationDrawer=_a.isConfirmationDrawer,hasSignatureError=_a.hasSignatureError,signatureErrorSource=_a.signatureErrorSource,rateCostOnly=_a.rateCostOnly,partialOrderLineItems=(0,react.useMemo)((function(){return(0,utils.Eo)(null==order?void 0:order.lineItems,batchEntryLineItems)}),[order,batchEntryLineItems]),defaultModalContent=(0,react.useMemo)((function(){var content=(0,utils.dc)(insuranceExtra,order,partialOrderLineItems);return(0,modules_utils.WW)(mixedSelection)?(0,tslib_es6.Cl)((0,tslib_es6.Cl)({},content),{hasInsurance:"keep"}):content}),[insuranceExtra,mixedSelection,order,partialOrderLineItems]),insuranceCost=(0,utils.kB)(userInsuranceRate,+defaultModalContent.amount,rateCostOnly,mixedSelection.numberSelected),lineItemsCost=(0,utils.jX)(null==order?void 0:order.lineItems),showReturnInsuranceSignatureWarning=hasReturn&&!!(null==insuranceExtra?void 0:insuranceExtra.amount)&&!!lineItemsCost&&lineItemsCost>=500&&(null==signatureConfirmation?void 0:signatureConfirmation.hasSignatureConfirmation);return(0,emotion_react_jsx_runtime_browser_esm.Y)(emotion_react_jsx_runtime_browser_esm.FK,{children:(0,emotion_react_jsx_runtime_browser_esm.Y)("div",{children:(0,emotion_react_jsx_runtime_browser_esm.Y)(Card_styled.Q_,(0,tslib_es6.Cl)({"data-testid":"insurance-card-container",sx:{marginBottom:"0.5rem"}},{children:(0,emotion_react_jsx_runtime_browser_esm.FD)(ContentContainer,{children:[isInsuranceAvailable&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceCard_ShipmentInsuranceHeader,{mixedSelection,t,insuranceCost,currency:defaultModalContent.currency,lineItemsCost}),isInsuranceAvailable&&showReturnInsuranceSignatureWarning&&(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentExtrasCard_ReturnLabelWarning,{t,isSidePanel:!0}),(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceCard_ShipmentInsuranceCardContent,{batchEntryLineItems,isBatch,isLoading,extrasInsurance:insuranceExtra,extrasSignature:signatureConfirmation,onSubmit:onSubmitExtras,t,userInsuranceRate,mixedSelection,defaultModalContent,insuredItems,lineItemsCost,rateCostOnly,isInsuranceAvailable,isConfirmationDrawer,hasSignatureError,signatureErrorSource})]})}))})})};var weight=__webpack_require__("./app/constants/weight.ts"),countries=__webpack_require__("./app/constants/countries.ts"),moment=__webpack_require__("./node_modules/moment/moment.js"),Order=__webpack_require__("./app/types/Order.ts"),mocks=__webpack_require__("./app/tests/mocks/index.ts");const ShipmentInsuranceCard_stories={title:"ShipmentInsuranceCard",component:ShipmentInsuranceCard_ShipmentInsuranceCard,parameters:{layout:"centered"},argTypes:{}};var ShipmentInsuranceCardWithTranslate=(0,translate.Tl)("orders")(ShipmentInsuranceCard_ShipmentInsuranceCard),Template=function(args){return(0,emotion_react_jsx_runtime_browser_esm.Y)(ShipmentInsuranceCardWithTranslate,(0,tslib_es6.Cl)({},args))},DefaultState=Template.bind({}),InsuranceAndSignature=Template.bind({}),OverFiveHundred=Template.bind({}),onSubmitExtras=function(){};DefaultState.args={batchEntryLineItems:[{objectId:"123456",quantity:1}],insuranceExtra:void 0,isBulk:!1,isLoading:!1,mixedSelection:{numberSelected:0,numberWithInsurance:0,totalCoverage:0,totalInsuranceCost:0,numberWithSignature:0,totalSignatureCost:0,currency:{iso:"USD",symbol:"$"}},order:{toAddress:mocks.ch,subtotalPrice:"25",totalPrice:"27",objectId:"7673a6958e3341929580299a8d842979",orderNumber:"#4092",orderStatus:Order.Re.PAID,objectOwner:"malcolm_fdv@shippo.com",validationStatus:Order.cY.VALID,placedAt:moment("2018-03-27T22:13:55.184Z"),errors:[],shopApp:"Bigcommerce",weight:"2.00",weightUnit:"lb",transactions:[],rates:[],totalTax:"0.00",currency:"USD",shippingMethod:"None",shippingCost:"0.00",shippingCostCurrency:"USD",notes:null,items:[],hidden:!1,partialFulfillmentRequests:[],totalPartialFulfillments:0,lineItems:[{objectId:"098765",quantity:1,title:"T-Shirt",sku:"82828282",totalAmount:"90",totalWeight:"4",weightUnit:weight.VV.LB,id:12345,product:"cc2202c14d5e45c791fc887ac2bdec2b",variant:"af6b14340c8b46cda326de80b5f37416",appId:"1312327532638",isFulfilled:!1,unitAmount:"6.00",unitWeight:"1.00",manufactureCountry:null,maxShipTime:null,maxDeliveryTime:null,hsCode:null,variantTitle:"",countryOfOrigin:countries.Xr.US,currency:{iso:"USD",symbol:"$"}}]},onSubmitExtras,signatureConfirmation:{hasSignatureConfirmation:!1,signatureConfirmationType:null},t:function(key){return key},userInsuranceRate:.0125,insuredItems:["T-Shirt"]},InsuranceAndSignature.args={batchEntryLineItems:[{objectId:"123456",quantity:1}],insuranceExtra:{amount:"1.25",currency:{iso:"USD",symbol:"$"},useImportedAmount:!1},isBulk:!1,isLoading:!1,mixedSelection:{numberSelected:1,numberWithInsurance:1,totalCoverage:125,totalInsuranceCost:1.25,numberWithSignature:1,totalSignatureCost:3,currency:{iso:"USD",symbol:"$"}},order:{toAddress:mocks.ch,subtotalPrice:"25",totalPrice:"27",objectId:"7673a6958e3341929580299a8d842979",orderNumber:"#4092",orderStatus:Order.Re.PAID,objectOwner:"malcolm_fdv@shippo.com",validationStatus:Order.cY.VALID,placedAt:moment("2018-03-27T22:13:55.184Z"),errors:[],shopApp:"Bigcommerce",weight:"2.00",weightUnit:"lb",transactions:[],rates:[],totalTax:"0.00",currency:"USD",shippingMethod:"None",shippingCost:"0.00",shippingCostCurrency:"USD",notes:null,items:[],hidden:!1,partialFulfillmentRequests:[],totalPartialFulfillments:0,lineItems:[{objectId:"098765",quantity:1,title:"T-Shirt",sku:"82828282",totalAmount:"90",totalWeight:"4",weightUnit:weight.VV.LB,id:12345,product:"cc2202c14d5e45c791fc887ac2bdec2b",variant:"af6b14340c8b46cda326de80b5f37416",appId:"1312327532638",isFulfilled:!1,unitAmount:"6.00",unitWeight:"1.00",manufactureCountry:null,maxShipTime:null,maxDeliveryTime:null,hsCode:null,variantTitle:"",countryOfOrigin:countries.Xr.US,currency:{iso:"USD",symbol:"$"}}]},onSubmitExtras,signatureConfirmation:{hasSignatureConfirmation:!0,signatureConfirmationType:"STANDARD"},t:function(key){return key},userInsuranceRate:.0125,insuredItems:["T-Shirt"]},OverFiveHundred.args={batchEntryLineItems:[{objectId:"123456",quantity:1}],insuranceExtra:{amount:"510",currency:{iso:"USD",symbol:"$"},useImportedAmount:!1},isBulk:!1,isLoading:!1,mixedSelection:{numberSelected:1,numberWithInsurance:1,totalCoverage:510,totalInsuranceCost:5.1,numberWithSignature:1,totalSignatureCost:3,currency:{iso:"USD",symbol:"$"}},order:{toAddress:mocks.ch,subtotalPrice:"25",totalPrice:"27",objectId:"7673a6958e3341929580299a8d842979",orderNumber:"#4092",orderStatus:Order.Re.PAID,objectOwner:"malcolm_fdv@shippo.com",validationStatus:Order.cY.VALID,placedAt:moment("2018-03-27T22:13:55.184Z"),errors:[],shopApp:"Bigcommerce",weight:"2.00",weightUnit:"lb",transactions:[],rates:[],totalTax:"0.00",currency:"USD",shippingMethod:"None",shippingCost:"0.00",shippingCostCurrency:"USD",notes:null,items:[],hidden:!1,partialFulfillmentRequests:[],totalPartialFulfillments:0,lineItems:[{objectId:"098765",quantity:1,title:"T-Shirt",sku:"82828282",totalAmount:"90",totalWeight:"4",weightUnit:weight.VV.LB,id:12345,product:"cc2202c14d5e45c791fc887ac2bdec2b",variant:"af6b14340c8b46cda326de80b5f37416",appId:"1312327532638",isFulfilled:!1,unitAmount:"6.00",unitWeight:"1.00",manufactureCountry:null,maxShipTime:null,maxDeliveryTime:null,hsCode:null,variantTitle:"",countryOfOrigin:countries.Xr.US,currency:{iso:"USD",symbol:"$"}}]},onSubmitExtras,signatureConfirmation:{hasSignatureConfirmation:!0,signatureConfirmationType:"STANDARD"},t:function(key){return key},userInsuranceRate:.0125,insuredItems:["T-Shirt"]},DefaultState.parameters={...DefaultState.parameters,docs:{...DefaultState.parameters?.docs,source:{originalSource:"(args: ShipmentInsuranceCardProps) => <ShipmentInsuranceCardWithTranslate {...args} />",...DefaultState.parameters?.docs?.source}}},InsuranceAndSignature.parameters={...InsuranceAndSignature.parameters,docs:{...InsuranceAndSignature.parameters?.docs,source:{originalSource:"(args: ShipmentInsuranceCardProps) => <ShipmentInsuranceCardWithTranslate {...args} />",...InsuranceAndSignature.parameters?.docs?.source}}},OverFiveHundred.parameters={...OverFiveHundred.parameters,docs:{...OverFiveHundred.parameters?.docs,source:{originalSource:"(args: ShipmentInsuranceCardProps) => <ShipmentInsuranceCardWithTranslate {...args} />",...OverFiveHundred.parameters?.docs?.source}}}}}]);